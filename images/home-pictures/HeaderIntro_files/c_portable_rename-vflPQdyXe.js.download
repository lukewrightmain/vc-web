define(["exports","./c_tslib","./e_ui_page_files_router","./e_edison","./c_core_i18n","./c_form_row_index","./c_file_actions_strings","./c_action_bar_action_bar_strings","metaserver/static/js/modules/constants/files_spa","./c_apex-metrics_src_types","./e_core_exception","./c_core_exception_info","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","./c_lodash-es_lodash","./c_core_notify","./c_core_uri","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/viewer","metaserver/static/js/modules/constants/auth","./c_api_v2_noauth_client","./c_browser_cookies","./c_src_sink_index","./c_core_browser_detection","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/ajax_strings","./c_csrf","./c_core_xhr","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/webtiming","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/trademark","metaserver/static/js/modules/constants/campaigns_orchestration","metaserver/static/js/modules/constants/maestro_nav_strings","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/undo_strings","metaserver/static/js/modules/constants/contacts","metaserver/static/js/modules/constants/login_and_register","metaserver/static/js/modules/core/langpack"],(function(e,t,s,a,n,r,c,o,i,l,m,u,_,d,v,R,g,p,f,E,j,$,h,x,w,y,b,M,N,I,C,k,T,F,S,O,q,A,B,H){"use strict";const K=({currentName:e,onConfirm:t})=>{const i=a.React$1.useRef(null),[l,m]=a.React$1.useState(!0),[u,_]=a.React$1.useState(e);a.React$1.useEffect((()=>{window.requestAnimationFrame((()=>{if(!i.current)return;i.current.focus();const t=e;let s=t.lastIndexOf(".");s<0&&(s=t.length),i.current.setSelectionRange(0,s)}))}),[]);const d=()=>m(!1),v=e=>-1===e.indexOf("/"),R=v(u),g=()=>{t(u),d()};return a.React$1.createElement(a.React$1.Fragment,null,a.React$1.createElement(s.Modal,{open:l,isCentered:!0,onRequestClose:d},a.React$1.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard",className:"naming-conventions__header"},a.React$1.createElement(s.Title,null,n.intl.formatMessage(o.RENAME_ACTION_STRING))),a.React$1.createElement(s.Modal.Body,null,a.React$1.createElement("div",{style:{height:"80px"}},a.React$1.createElement(r.FormRow,null,a.React$1.createElement(s.TextInput,{ref:i,type:"text",id:"create-rename-modal-input",autoFocus:!0,value:u,isInvalid:!R,onChange:e=>{_(e.currentTarget.value),v(e.currentTarget.value)},"aria-describedby":"rename-modal-input-helper",onKeyDown:e=>{e.key===s.Key_enum.Key.Enter&&g()}}),!R&&a.React$1.createElement(r.FormHelperText,{id:"rename-modal-input-helper",variant:"alert"},a.React$1.createElement(s.UIIcon,{src:s.WarningLine,size:"small"})," ",n.intl.formatMessage(c.renameErrorInvalidName))))),a.React$1.createElement(s.Modal.Footer,null,a.React$1.createElement(s.Button,{variant:"opacity",onClick:d},n.intl.formatMessage({id:"OHzWOE",defaultMessage:"Cancel"})),a.React$1.createElement(s.Button,{variant:"primary",disabled:!R,onClick:g},n.intl.formatMessage(o.RENAME_ACTION_STRING)))))};e.portableRename=({currentName:e,fq_path:n,user:r},{onSuccess:c,onError:o,onNetworkRequest:i})=>{var l;l={currentName:e,onConfirm:e=>t.__awaiter(void 0,void 0,void 0,(function*(){null==i||i();const t=yield s.renameFile(n,e,r.id,{checkFSWs:!0});t.isError||"success"!==t.result.entries[0][".tag"]?null==o||o(t.isError?t:s.createUndefinedRpcResult()):null==c||c(t.result.entries[0].success)}))},s.Modal$1.showInstance(a.React$1.createElement(K,Object.assign({},l)))}}));
//# sourceMappingURL=c_portable_rename.js-vflu8H_8E.map
