define(["exports","./e_edison","./e_ui_page_files_router","./c_core_i18n","./c_file_store_utils","./c_sdk_file_viewer_action_plugins_action_plugin_menu_item","./c_admin_registration_source_constants","./c_file_viewer_file_conversion_utils","./c_file_viewer_sdk_file_viewer_file_viewer","./c_flows_conversions_conversion_actions","./c_flows_conversions_convert","./c_workflow_builder_workflow_actions_action_ui_config"],(function(e,i,t,n,o,s,c,r,a,l,_,u){"use strict";const f=({file:e,user:i,action:t,encryptionOptions:n,logUserAction:o,context:s,shareToken:r})=>{if(o("convert_file",s,{conversion_type:t.actionText}),i)t.convert([e],i,{shareToken:r,source:"preview"});else{const e=new URL(window.location.href);e.searchParams.set("save_as","true"),e.searchParams.set("save_as_action",t.actionText),window.history.replaceState(e.href,"",e.href),a.showAuthModal({mode:a.AuthMode.REGISTER,sharedLinkUrl:e.href,kind:a.LoginOrRegisterKind.POSTSAVEAS,encryptionOptions:n,loggingExtra:{source:"save_as"},signupTag:c.RegistrationSource.SHMODEL_SAVE_AS_REGISTER})}};e.FileConversionMenuSegment=e=>{const{conversionActions:c,file:r,isLegacyPlugin:a=!1}=e;return i.React$1.createElement(t.Menu.Segment,null,c.map((c=>{const l=r.bytes/Math.pow(1024,2),_=u.getConversionFileSizeLimitMB([t.file_extension(o.getFilename(r))],c.actionText),g=l>_,d=n.intl.formatMessage({id:"0vePbC",defaultMessage:"File is larger than the {fileSizeLimitMB}MB limit"},{fileSizeLimitMB:_}),v=a?i.React$1.createElement(s.ActionPluginMenuItem,{key:c.actionText,onAction:()=>f(Object.assign(Object.assign({},e),{action:c})),disabled:g,withLeftAccessory:i.React$1.createElement(t.UIIcon,{src:c.actionIcon})},c.actionText):i.React$1.createElement(t.Menu.ActionItem,{key:c.actionText,disabled:g,value:{handler:()=>f(Object.assign(Object.assign({},e),{action:c}))},withLeftAccessory:i.React$1.createElement(t.UIIcon,{src:c.actionIcon})},c.actionText);return g?i.React$1.createElement(t.Tooltip,{key:c.actionText,title:d,placement:"left",id:"flows-disabled-menu-item-tooltip"},i.React$1.createElement("div",null,v)):v})))},e.validateFileConversionProps=function({context:e,encryptionOptions:i,getActiveFile:t,user:n}){if(!e||!t)return;const{file:o,shareToken:s}=t(),c=function({getActiveFile:e,user:i}){const{file:t,sharedLinkInfo:n,sharePermission:o}=e();if(!_.canConvertFile(t,o)||!a.canDownloadFile(n,o))return[];const s={expFlowsManualVideoGifUi:r.isManualVideoGifEnabled(i)};return l.getConversionActionsForFiles([t],s)}({getActiveFile:t,user:n});return c.length?{conversionActions:c,encryptionOptions:i,file:o,logUserAction:e.logUserAction,shareToken:s,user:n}:void 0}}));
//# sourceMappingURL=c_action_plugins_file_conversion_action_shared_components.js-vflEmC_f3.map
