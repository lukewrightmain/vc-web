define(["exports","./e_edison","./e_ui_page_files_router","./c_spectrum_tooltip","./c_spectrum_dimensions"],(function(t,e,r,i,a){"use strict";r.injectInternalStyle("typescript/component_libraries/retrieval-components/src/truncated-string/index.module.out.css",(t=>"._rc-truncated-string__tooltip_1bbar_1{max-width:100%}._rc-truncated-string_1bbar_1{display:flex;max-width:100%;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}._rc-truncated-string--start_1bbar_11{direction:rtl;text-align:right}._rc-truncated-string__piece_1bbar_16{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}._rc-truncated-string--email_1bbar_24 ._rc-truncated-string__piece--last-piece_1bbar_22,._rc-truncated-string--file-extension_1bbar_23 ._rc-truncated-string__piece--last-piece_1bbar_22,._rc-truncated-string--last-word_1bbar_22 ._rc-truncated-string__piece--last-piece_1bbar_22{flex-shrink:0;white-space:nowrap}._rc-truncated-string--last-word_1bbar_22 ._rc-truncated-string__piece--last-piece_1bbar_22,._rc-truncated-string--middle_1bbar_28 ._rc-truncated-string__piece--last-piece_1bbar_22{padding-left:.25em}._rc-truncated-string__calculator_1bbar_33{position:absolute;visibility:hidden}._rc-truncated-string--middle_1bbar_28 ._rc-truncated-string__piece--last-piece_1bbar_22{flex-shrink:0}"));const n="_rc-truncated-string__tooltip_1bbar_1",c="_rc-truncated-string_1bbar_1",s="_rc-truncated-string--start_1bbar_11",_="_rc-truncated-string__piece_1bbar_16",o="_rc-truncated-string--email_1bbar_24",T="_rc-truncated-string__piece--last-piece_1bbar_22",l="_rc-truncated-string--file-extension_1bbar_23",d="_rc-truncated-string--last-word_1bbar_22",p="_rc-truncated-string--middle_1bbar_28",u="_rc-truncated-string__calculator_1bbar_33";var N;t.TruncatedStringVariant=void 0,(N=t.TruncatedStringVariant||(t.TruncatedStringVariant={})).TRUNCATED_STRING_END="TRUNCATED_STRING_END",N.TRUNCATED_STRING_START="TRUNCATED_STRING_START",N.TRUNCATED_STRING_MIDDLE="TRUNCATED_STRING_MIDDLE",N.TRUNCATED_STRING_LAST_WORD="TRUNCATED_STRING_LAST_WORD",N.TRUNCATED_STRING_FILE_EXTENSION="TRUNCATED_STRING_FILE_EXTENSION",N.TRUNCATED_STRING_EMAIL="TRUNCATED_STRING_EMAIL";const R={[t.TruncatedStringVariant.TRUNCATED_STRING_END]:"rc-truncated-string--end",[t.TruncatedStringVariant.TRUNCATED_STRING_START]:s,[t.TruncatedStringVariant.TRUNCATED_STRING_MIDDLE]:p,[t.TruncatedStringVariant.TRUNCATED_STRING_LAST_WORD]:d,[t.TruncatedStringVariant.TRUNCATED_STRING_FILE_EXTENSION]:l,[t.TruncatedStringVariant.TRUNCATED_STRING_EMAIL]:o};class b extends e.React$1.PureComponent{constructor(e){super(e),this.setCalculator=t=>{this.calculator=t},this.setWrapper=t=>{this.wrapper=t},this.updateTooltip=()=>{if(!this.calculator||!this.wrapper)return;const t=this.calculator.getBoundingClientRect().width,e=this.wrapper.getBoundingClientRect().width;this.setState({showTooltip:t>e})},this.debouncedUpdateTooltip=()=>{"clearTimeout"in window&&"setTimeout"in window&&(this.updateTooltipTimeout&&clearTimeout(this.updateTooltipTimeout),this.updateTooltipTimeout=setTimeout((()=>this.updateTooltip()),50))},this.calculatePiecesFromProps=(e=this.props)=>{const{text:r,variant:i}=e;switch(i){case t.TruncatedStringVariant.TRUNCATED_STRING_END:case t.TruncatedStringVariant.TRUNCATED_STRING_START:default:return[r];case t.TruncatedStringVariant.TRUNCATED_STRING_MIDDLE:{const t=Math.floor(2*r.length/3),e=r.indexOf(" ",t);return e>-1?[r.substr(0,e),r.substr(e)]:[r]}case t.TruncatedStringVariant.TRUNCATED_STRING_LAST_WORD:{const t=r.trim().split(" "),e=t.pop();return[t.join(" "),e].filter((t=>!!t))}case t.TruncatedStringVariant.TRUNCATED_STRING_FILE_EXTENSION:{const t=r.trim().split(".");if(t.length<=1)return[r];const e=t.pop();return[t.join("."),"."+e]}case t.TruncatedStringVariant.TRUNCATED_STRING_EMAIL:{const t=r.trim().split("@");if(2!==t.length)return[r];const e=t.pop();return[t.pop(),"@"+e]}}},this.state={pieces:this.calculatePiecesFromProps(e),showTooltip:!1}}componentDidMount(){this.updateTooltip()}componentWillReceiveProps(t){this.setState({pieces:this.calculatePiecesFromProps(t),showTooltip:!1})}componentDidUpdate(){}render(){const{className:t,variant:s,text:o}=this.props,{pieces:l,showTooltip:d}=this.state;return e.React$1.createElement(i.Tooltip,{positioning:"below",tooltipContent:o,showOnMouseMove:d,wrapperClassName:n},e.React$1.createElement(a.Dimensions,null,(()=>(this.debouncedUpdateTooltip(),e.React$1.createElement("span",{className:r.classnames([c,t,R[s]]),ref:this.setWrapper},e.React$1.createElement("span",{className:u,"aria-hidden":!0,ref:this.setCalculator},o),l.map(((t,i)=>e.React$1.createElement("span",{key:i,className:r.classnames({[_]:!0,[T]:0!==i&&i===l.length-1})},t))))))))}}b.displayName="TruncatedString",t.TruncatedString=b}));
//# sourceMappingURL=c_src_truncated-string_index.js-vfljdAMm_.map
