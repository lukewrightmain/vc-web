define(["exports","./c_tslib"],(function(e,o){"use strict";var t,n,i;function r(e,o){var t=window.screenX+((window.outerWidth||document.documentElement.offsetWidth)-e)/2,n=window.screenY+((window.outerHeight||document.documentElement.offsetHeight)-o)/2;return"width=".concat(e,",height=").concat(o,",left=").concat(t,",top=").concat(n)}function s(e,o,t){var n=-1===e.indexOf("?")?"?":"&";return"".concat(e).concat(n).concat(o,"=").concat(t)}function a(e){return s(e,"version",encodeURIComponent(Dropbox.VERSION))}function c(e,o){var t,n,i=encodeURIComponent(window.location.protocol+"//"+window.location.host),r=encodeURIComponent(Dropbox.appKey),c=Dropbox.productKey?encodeURIComponent(Dropbox.productKey):null,l=encodeURIComponent(e.linkType||""),p=encodeURIComponent(e._trigger||"js"),d=Boolean(e.multiselect),u=encodeURIComponent(h(e.extensions,"join",(function(e){return e.join(" ")}))||""),f=Boolean(e.folderselect);o=Boolean(o);var m="".concat(Dropbox.baseUrl,"/chooser?origin=").concat(i,"&app_key=").concat(r,"&link_type=").concat(l,"&trigger=").concat(p,"&multiselect=").concat(d,"&extensions=").concat(u,"&folderselect=").concat(f,"&iframe=").concat(o);if(void 0!==e.fileselect&&(m=s(m,"fileselect",Boolean(e.fileselect))),void 0!==e.sizeLimit&&(m=s(m,"size_limit",e.sizeLimit)),null!=e.initialNavigation){if(null!=e.initialNavigation.mode)m=s(m,"initial_navigation_mode",encodeURIComponent(e.initialNavigation.mode));if(null!=e.initialNavigation.role)m=s(m,"initial_navigation_role",encodeURIComponent(e.initialNavigation.role));if(e.initialNavigation.cursor)m=s(m,"initial_navigation_cursor",encodeURIComponent(e.initialNavigation.cursor))}null!=e.initialViewType&&(m=s(m,"initial_view_type",encodeURIComponent(e.initialViewType)));null!=e.fields&&(m=s(m,"fields",encodeURIComponent("function"==typeof e.fields.join?e.fields.join(" "):void 0)));(!1===e.showSignOut&&(m=s(m,"show_sign_out","false")),e.initialNavigationPath)&&(m=s(m,"initial_navigation_path",encodeURIComponent(e.initialNavigationPath)));e.requiredPermissions&&(m=s(m,"required_permissions",encodeURIComponent(h(e.requiredPermissions,"join",(function(e){return e.join(" ")}))||"")));(c&&(m=s(m,"product_key",c)),null===(t=e.suggestions)||void 0===t?void 0:t.experimentGroup)&&(m=s(m,"suggestions_experiment_group",encodeURIComponent(null===(n=e.suggestions)||void 0===n?void 0:n.experimentGroup)));return a(m)}function l(){/\bTrident\b/.test(navigator.userAgent)&&null!=document.body&&null==n&&((n=document.createElement("iframe")).setAttribute("id","dropbox_xcomm"),n.setAttribute("src",Dropbox.baseUrl+"/static/api/1/xcomm.html"),n.style.display="none",document.body.appendChild(n))}function p(e){var t={options:o.__assign(o.__assign({},e),{success:function(o,n){"function"==typeof e.success&&e.success(o,n),i===t&&(i=null)},cancel:function(o){"function"==typeof e.cancel&&e.cancel(o),i===t&&(i=null)}})};return i=t,t}function d(e,o){var t,n=encodeURIComponent(Dropbox.appKey),i="https://".concat("api.dropboxapi.com","/2/dropins/get_job_status"),r=JSON.stringify({app_key:n,job:o});if(!("withCredentials"in new XMLHttpRequest))throw new Error("Unable to find suitable means of cross domain communication");return t=function(){var o=new XMLHttpRequest;return o.onload=function(){return function(o){var n=o[".tag"];if("complete"===n){if("function"==typeof e.progress&&e.progress(1),"function"==typeof e.success)if(0!==e.success.length&&o.file_ids){var i={fileIds:o.file_ids};e.success(i)}else e.success()}else"pending"===n||"downloading"===n?(null!=o.progress&&"function"==typeof e.progress&&e.progress(o.progress/100),setTimeout(t,1500)):"failed"===n&&"function"==typeof e.error&&e.error(o.error_message)}(JSON.parse(o.responseText))},o.onerror=function(){return"function"==typeof e.error?e.error():void 0},o.open("POST",i,!0),o.setRequestHeader("Content-Type","application/json"),o.send(r)},"function"==typeof e.progress&&e.progress(0),t()}function u(e,o,i){var r,s=JSON.parse(e.data);switch(r=null!=n&&i._popup?n.contentWindow:e.source,void 0!==s.sequence_number&&r.postMessage(JSON.stringify({method:"ack",sequence_number:s.sequence_number}),Dropbox.baseUrl),s.method){case"origin_request":e.source.postMessage(JSON.stringify({method:"origin"}),Dropbox.baseUrl);break;case"ready":if(null!=i.files){var a=void 0;if(i._fetch_url_on_save){for(var c=[],l=0;l<i.files.length;l++){var p=i.files[l];c.push({filename:p.filename})}a=JSON.stringify({method:"files_with_callback",params:c})}else a=JSON.stringify({method:"files",params:i.files});if(r.postMessage(a,Dropbox.baseUrl),null!=i._ews_auth_token){var u=JSON.stringify({method:"ews_auth_token",params:{ews_auth_token:i._ews_auth_token}});r.postMessage(u,Dropbox.baseUrl)}}"function"==typeof i.ready&&i.ready();break;case"files_selected":case"files_saved":"function"==typeof o&&o(),"function"==typeof i.success&&i.success(s.params,t);break;case"cursor_changed":t={cursor:s.params};break;case"progress":"function"==typeof i.progress&&i.progress(s.params);break;case"close_dialog":"function"==typeof o&&o(),"function"==typeof i.cancel&&i.cancel(t);break;case"resize":"function"==typeof i.resize&&i.resize(s.params);break;case"error":"function"==typeof i.error&&i.error(s.params);break;case"error_and_close":"function"==typeof o&&o(),"function"==typeof i.error&&i.error(s.params);break;case"job_id":"function"==typeof o&&o(),d(i,s.params);break;case"save_callback":!function(e,o,t){if(e._fetch_url_on_save){var n=e.fetch_urls_fn;"function"!=typeof n&&"function"==typeof e.error&&e.error("Something went wrong, file url callback not provided."),n(t,o)}}(i,s.params,(function(e){if(null==e)throw new Error("Please supply {urls: [...]} to success callback");if(null!=e.url&&null!=e.urls)throw new Error("Do not pass both url and urls to the save callback");if(null!=e.url&&(e.urls=[e.url]),null==e.urls)throw new Error("Please supply {urls: [...]} to success callback");return s={method:"continue_saving",params:{download_urls:e.urls}},void r.postMessage(JSON.stringify(s),Dropbox.baseUrl)}));break;case"_debug_log":"undefined"!=typeof console&&null!==console&&console.log(s.params.msg);break;case"chooser_extras_changed":Dropbox.chooserExtras=s.params.chooserExtras}}function f(e){var o=encodeURIComponent(window.location.protocol+"//"+window.location.host),t=encodeURIComponent(Dropbox.appKey);return e=Boolean(e),a("".concat(Dropbox.baseUrl,"/saver?origin=").concat(o,"&app_key=").concat(t,"&iframe=").concat(e))}function h(e,o,t){return null!=e&&"function"==typeof e[o]?t(e,o):void 0}function m(){t={},n=null,i=null,null==Dropbox.baseUrl&&(Dropbox.baseUrl="https://".concat("www.dropbox.com")),null==Dropbox.blockBaseUrl&&(Dropbox.blockBaseUrl="https://".concat("dl-web.dropbox.com")),Dropbox.addListener=function(e,o,t){e.addEventListener?e.addEventListener(o,t,!1):e.attachEvent("on".concat(o),(function(e){return e.preventDefault=function(){return!1},t(e)}))},Dropbox.removeListener=function(e,o,t){e.removeEventListener?e.removeEventListener(o,t,!1):e.detachEvent("on".concat(o),t)},Dropbox.createChooserWidget=function(e){var o=p(e),t=function(e){var o=document.createElement("iframe");return o.src="about:blank",o._postAction=e,o.name="dropbox-dropins",o.style.display="block",o.style.backgroundColor="white",o.style.border="none",o}(c(o.options,!0));return t._handler=function(e){e.source===t.contentWindow&&e.origin===Dropbox.baseUrl&&u(e,null,o.options)},Dropbox.addListener(window,"message",t._handler),t},Dropbox.cleanupWidget=function(e){if(!e._handler)throw new Error("Invalid widget!");Dropbox.removeListener(window,"message",e._handler),delete e._handler}}null==window.Dropbox&&(window.Dropbox={});var v=function(){function e(e,o){var t=this;this.popupWindow=e,this.onClose=o,this.stopInterval=function(){clearInterval(t.intervalId)},this.isWindowClosedByUser=function(){try{return t.popupWindow.closed}catch(e){}return!1},this.messagingWindow=function(){return null!=n?n.contentWindow:t.popupWindow},this.handleInterval=function(){t.isWindowClosedByUser()&&(t.onClose(),t.stopInterval())},this.intervalId=setInterval(this.handleInterval,100)}return e.open=function(o,t,n){var i=r(t.width,t.height),s="".concat(i,",resizable,scrollbars"),a=window.open(o,"_blank",s);if(null===a)throw new Error("Failed to open the window. Dropbox popups may only be attached to a user-triggered event handler such as a tap or click event.");return a.focus(),new e(a,n)},e}();function b(e){return function(){for(var o=0,t=e;o<t.length;o++){(0,t[o])()}}}var g="https://".concat("www.dropbox.com"),w=function(){};var y=function(){function e(){var e=this;this.activeDropins=[],this.deleteActiveDropin=function(o){return function(){var t=e.activeDropins.indexOf(o);-1!==t&&e.activeDropins.splice(t,1)}},this.openWindow=function(o){e.throwIfAlreadyActive(o);var t=b([]);try{var n=o.url(),i="".concat(g).concat(n.pathname).concat(n.search),r=v.open(i,o.windowDimensions(),(function(){t()}));t=b([r.stopInterval,t]);var s=e.attach(o,r.messagingWindow);t=b([s,t]),t=b([function(){o.sendMessage({method:"close"})},t]);var a={dropin:o,cleanup:w};e.activeDropins.push(a),t=b([e.deleteActiveDropin(a),t]),o.hasOnCloseDialogMessage()||o.setOnCloseDialogMessage(t),a.cleanup=t}catch(e){throw t(),e}}}return e.prototype.mount=function(e,o){if(!e)throw new Error("Dropbox component must be provided");if(!o)throw new Error("Container element must be provided");this.throwIfAlreadyActive(e);var t=b([]);try{var n=this.createIframe();t=b([this.attach(e,(function(){if(!n.contentWindow)throw new Error("iframe does not contain a contentWindow");return n.contentWindow})),t]);var i=e.url();n.src="".concat(g).concat(i.pathname).concat(i.search,"&iframe=true"),n.scrolling="no",o.appendChild(n),t=b([function(){o.removeChild(n)},t]);var r={dropin:e,cleanup:w};this.activeDropins.push(r),t=b([this.deleteActiveDropin(r),t]),e.hasOnCloseDialogMessage()||e.setOnCloseDialogMessage(t),r.cleanup=t}catch(e){throw t(),e}},e.prototype.remove=function(e){if(!e)throw new Error("Dropbox component must be provided");for(var o=0,t=this.activeDropins;o<t.length;o++){var n=t[o];if(n.dropin===e){n.cleanup();break}}},e.prototype.throwIfAlreadyActive=function(e){for(var o=0,t=this.activeDropins;o<t.length;o++){if(t[o].dropin===e)throw new Error("Component is already in use")}},e.prototype.attach=function(e,o){e.sendMessage=function(e){o().postMessage(JSON.stringify(e),g)};var t=function(t){if(t.source===o()&&t.origin===g){var n;try{n=JSON.parse(t.data)}catch(e){return}(function(e){return"object"==typeof e&&"string"==typeof e.method})(n)&&e.handleMessage(n)}};return window.addEventListener("message",t),function(){e.sendMessage=w,window.removeEventListener("message",t)}},e.prototype.createIframe=function(){var e=window.document.createElement("iframe");return e.style.height="100%",e.style.width="100%",e.style.border="none",e.allowFullscreen=!0,e},e}(),x="https://".concat("www.dropbox.com","/developers/dropins/chooser/js"),_=["text","documents","images","video","audio"],k={init:function(){}};function D(e,o){null!=o?o.innerHTML="":(o=document.createElement("a")).href="#",o.className+=" dropbox-dropin-btn",Dropbox.isBrowserSupported()?o.className+=" dropbox-dropin-default":o.className+=" dropbox-dropin-disabled";var t=document.createElement("span");return t.className="dropin-btn-status",o.appendChild(t),e=document.createTextNode(e),o.appendChild(e),o}function C(e){return e.replace(/\/+$/g,"").split("/").pop()}function E(e){var o=document.createElement("a");return o.href=e,C(o.pathname)}function S(){var e;m(),null==Dropbox.appKey&&(Dropbox.appKey=null===(e=document.getElementById("dropboxjs"))||void 0===e?void 0:e.getAttribute("data-app-key")),Dropbox.init=function(e){null!=e.appKey&&(Dropbox.appKey=e.appKey),null!=e.productKey&&(Dropbox.productKey=e.productKey)};var o=function(e){var o,t,n;if("string"==typeof e[0])n=e.shift(),o="string"==typeof e[0]?e.shift():E(n),(t=e.shift()||{}).files=[{url:n,filename:o}];else{if(null==(t=e.shift()))throw new Error("Missing arguments. See documentation.");if(!(null!=t.files?t.files.length:void 0)&&"function"!=typeof t.files)throw new Error("Missing files. See documentation.");if(null!=t.fetch_urls_fn){if("function"!=typeof t.fetch_urls_fn)throw new Error("fetch_urls_fn must be a function if supplied.  See documentation.");t._fetch_url_on_save=!0}for(var i=0;i<t.files.length;i++){var r=t.files[i];if("function"==typeof r.url&&(t._fetch_url_on_save=!0,t.fetch_urls_fn=r.url,r.url=null,i>0))throw new Error("Old style url as callback is only supported for single files.");r.filename||(r.filename=E(r.url))}}return t};Dropbox.save=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=o(e);if(Dropbox.isBrowserSupported()){if(n._popup=!0,"object"!=typeof n.files||!n.files.length)throw new Error("The object passed in must have a 'files' property that contains a list of objects. See documentation.");if(n.iframe&&!n.windowName)throw new Error("Dropbox.save does not yet support creating its own iframe.                       windowName must be provided when the iframe option is present.");for(var i=0,a=n.files;i<a.length;i++){var c=a[i];if(n._fetch_url_on_save){if(n.fetch_urls_fn){if(null!=c.url)throw new Error("You passed in a 'fetch_urls_fn' option to specify the file URLs.  Don't include individual URLs in each file objects.")}else if("function"!=typeof c.url)throw new Error("File urls should be all urls, or a single file with function. See documentation.")}else if("string"!=typeof c.url)throw new Error("File urls to download incorrectly configured. Each file must have a url. See documentation.")}var l=r(735,670);return s(f(n.iframe),l,n).window}alert("Your browser does not support the Dropbox Saver")};var s=function(e,o,i){var r=function(){c.closed||(c.close(),c.postMessage(JSON.stringify({method:"close"}),Dropbox.baseUrl)),Dropbox.removeListener(window,"message",s),clearInterval(l)},s=function(e){e.source!==c&&e.source!==(null!=n?n.contentWindow:void 0)||u(e,r,i)},a=i.iframe?"":"".concat(o,",resizable,scrollbars"),c=window.open(e,i.windowName||"dropbox",a);if(!c)throw new Error("Failed to open/load the window. Dropbox.choose and Dropbox.save should only be called from within a user-triggered event handler such as a tap or click event.");c.focus();var l=setInterval((function(){(function(){try{return c.closed}catch(e){}})()&&(r(),"function"==typeof i.cancel&&i.cancel(t))}),100);return Dropbox.addListener(window,"message",s),{window:c,onClose:r}},a=function(e){null==e.success&&h(console,"warn",(function(e){return e.warn("You must provide a success callback to the Chooser to see the files that the user selects")})),void 0===e.fileselect||Boolean(e.fileselect)||Boolean(e.folderselect)||h(console,"error",(function(e){return e.error("You must enable either fileselect or folderselect on the Chooser so the user can select something")}));var o=function(){return h(console,"warn",(function(e){return e.warn("The provided list of extensions or file types is not valid. See Chooser documentation: ".concat(x))})),h(console,"warn",(function(e){return e.warn("Available file types are: ".concat(_.join(", ")))})),delete e.extensions};if(null!=e.extensions&&null!=Array.isArray)if(Array.isArray(e.extensions))for(var t=0,n=e.extensions;t<n.length;t++){var i=n[t];i.match(/^\.[\.\w$#&+@!()\-'`_~]+$/)||-1!==_.indexOf(i)||o()}else o();return void 0!==e.sizeLimit&&"number"!=typeof e.sizeLimit&&e.sizeLimit<=0&&h(console,"error",(function(e){return e.error("The sizeLimit option, if provided, must be a positive number")})),e},d=function(e){if(Dropbox.isBrowserSupported()){var o,t,n=p(e);if(e.iframe&&!e.windowName){var i=(o=c(e,!0),(t=document.createElement("iframe")).src=o,t.style.display="block",t.style.backgroundColor="white",t.style.border="none",t);i.style.width="735px",i.style.height="552px",i.style.margin="125px auto 0 auto",i.style.border="1px solid #ACACAC",i.style.boxShadow="rgba(0, 0, 0, .2) 0px 4px 16px";var a=document.createElement("div");a.style.position="fixed",a.style.left=a.style.right=a.style.top=a.style.bottom="0",a.style.zIndex="1000",a.style.backgroundColor="rgba(160, 160, 160, 0.2)",a.appendChild(i),document.body.appendChild(a);var l=function(e){e.source===i.contentWindow&&(n.onClose=function(){document.body.removeChild(a),Dropbox.removeListener(window,"message",l)},u(e,n.onClose,n.options))};Dropbox.addListener(window,"message",l)}else{var d=r(735,552);n.onClose=s(c(n.options,n.options.iframe),d,n.options).onClose}}else alert("Your browser does not support the Dropbox Chooser")};Dropbox.choose=function(e){null==e&&(e={}),e=a(e),d(e)},Dropbox.cancelChooser=function(){i&&(i.onClose&&i.onClose(),i.options.cancel&&i.options.cancel(t))},Dropbox.getChooserExtras=function(){var e;return null!==(e=Dropbox.chooserExtras)&&void 0!==e?e:{}};Dropbox.isBrowserSupported=function(){var e=function(){for(var e=0,o=[/IEMobile\/(7|8|9|10)\./,/BB10;/];e<o.length;e++)if(o[e].test(navigator.userAgent))return!1;return"undefined"!=typeof JSON&&null!==JSON&&null!=window.postMessage&&null!=window.addEventListener&&!/MSIE |Trident\/.*rv:11/.test(navigator.userAgent)}();return Dropbox.isBrowserSupported=function(){return e},e},Dropbox.createChooseButton=function(e){null==e&&(e={}),e=a(e);var o=D("Choose from Dropbox");return Dropbox.addListener(o,"click",(function(t){t.preventDefault(),d({success:function(t,n){o.className="dropbox-dropin-btn dropbox-dropin-success","function"==typeof e.success&&e.success(t,n)},cancel:e.cancel,linkType:e.linkType,multiselect:e.multiselect,fileselect:e.fileselect,folderselect:e.folderselect,extensions:e.extensions,sizeLimit:e.sizeLimit,iframe:e.iframe,requiredPermissions:e.requiredPermissions,_trigger:"button"})})),o},Dropbox.createSaveButton=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=o(e),i=e.shift();return i=D("Save to Dropbox",i),Dropbox.addListener(i,"click",(function(e){if(e.preventDefault(),i.className.indexOf("dropbox-dropin-error")>=0||i.className.indexOf("dropbox-dropin-default")>=0||i.className.indexOf("dropbox-dropin-disabled")>=0){var o=("function"==typeof n.files?n.files():void 0)||n.files;if(!(null!=o?o.length:void 0))return i.className="dropbox-dropin-btn dropbox-dropin-error",void("function"==typeof n.error&&n.error("Missing files"));Dropbox.save({files:o,success:function(){i.className="dropbox-dropin-btn dropbox-dropin-success","function"==typeof n.success&&n.success()},progress:function(e){i.className="dropbox-dropin-btn dropbox-dropin-progress","function"==typeof n.progress&&n.progress(e)},cancel:function(){"function"==typeof n.cancel&&n.cancel()},error:function(e){i.className="dropbox-dropin-btn dropbox-dropin-error","function"==typeof n.error&&n.error(e)}})}})),i};var v=function(e,o){return"  background: ".concat(e,";\n  background: -moz-linear-gradient(top, ").concat(e," 0%, ").concat(o," 100%);\n  background: -webkit-linear-gradient(top, ").concat(e," 0%, ").concat(o," 100%);\n  background: linear-gradient(to bottom, ").concat(e," 0%, ").concat(o," 100%);\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='").concat(e,"', endColorstr='").concat(o,"',GradientType=0);  ")},b=document.createElement("style");b.type="text/css";var g='  @-webkit-keyframes rotate {\n    from  { -webkit-transform: rotate(0deg); }\n    to   { -webkit-transform: rotate(360deg); }\n  }\n\n  @keyframes rotate {\n    from  { transform: rotate(0deg); }\n    to   { transform: rotate(360deg); }\n  }\n\n    .dropbox-dropin-btn, .dropbox-dropin-btn:link, .dropbox-dropin-btn:hover {\n      display: inline-block;\n      height: 14px;\n      font-family: "Lucida Grande", "Segoe UI", "Tahoma", "Helvetica Neue", "Helvetica", sans-serif;\n      font-size: 11px;\n      font-weight: 600;\n      color: #636363;\n      text-decoration: none;\n      padding: 1px 7px 5px 3px;\n      border: 1px solid #ebebeb;\n      border-radius: 2px;\n      border-bottom-color: #d4d4d4;\n      '.concat(v("#fcfcfc","#f5f5f5"),"\n    }\n\n    .dropbox-dropin-default:hover, .dropbox-dropin-error:hover {\n      border-color: #dedede;\n      border-bottom-color: #cacaca;\n      ").concat(v("#fdfdfd","#f5f5f5"),"\n    }\n\n    .dropbox-dropin-default:active, .dropbox-dropin-error:active {\n      border-color: #d1d1d1;\n      box-shadow: inset 0 1px 1px rgba(0,0,0,0.1);\n    }\n\n    .dropbox-dropin-btn .dropin-btn-status {\n      display: inline-block;\n      width: 15px;\n      height: 14px;\n      vertical-align: bottom;\n      margin: 0 5px 0 2px;\n      background: transparent url('").concat(Dropbox.baseUrl,"/static/metaserver/static/images/widgets/dbx-saver-status.png') no-repeat;\n      position: relative;\n      top: 2px;\n    }\n\n    .dropbox-dropin-default .dropin-btn-status {\n      background-position: 0px 0px;\n    }\n\n    .dropbox-dropin-progress .dropin-btn-status {\n      width: 18px;\n      margin: 0 4px 0 0;\n      background: url('").concat(Dropbox.baseUrl,"/static/metaserver/static/images/widgets/dbx-progress.png') no-repeat center center;\n        -webkit-animation-name: rotate;\n        -webkit-animation-duration: 1.7s;\n        -webkit-animation-iteration-count: infinite;\n        -webkit-animation-timing-function: linear;\n      animation-name: rotate;\n      animation-duration: 1.7s;\n      animation-iteration-count: infinite;\n      animation-timing-function: linear;\n    }\n\n    .dropbox-dropin-success .dropin-btn-status {\n      background-position: -15px 0px;\n    }\n\n    .dropbox-dropin-disabled {\n      background: #e0e0e0;\n      border: 1px #dadada solid;\n      border-bottom: 1px solid #ccc;\n      box-shadow: none;\n    }\n\n    .dropbox-dropin-disabled .dropin-btn-status {\n      background-position: -30px 0px;\n    }\n\n    .dropbox-dropin-error .dropin-btn-status {\n      background-position: -45px 0px;\n    }\n\n  @media only screen and (-webkit-min-device-pixel-ratio: 1.4) {\n      .dropbox-dropin-btn .dropin-btn-status {\n        background-image: url('").concat(Dropbox.baseUrl,"/static/metaserver/static/images/widgets/dbx-saver-status-2x.png');\n        background-size: 60px 14px;\n          -webkit-background-size: 60px 14px;\n      }\n\n      .dropbox-dropin-progress .dropin-btn-status {\n        background: url('").concat(Dropbox.baseUrl,"/static/metaserver/static/images/widgets/dbx-progress-2x.png') no-repeat center center;\n        background-size: 20px 20px;\n          -webkit-background-size: 20px 20px;\n      }\n  }\n\n    .dropbox-saver:hover, .dropbox-chooser:hover {\n      text-decoration: none;\n      cursor: pointer;\n    }\n\n    .dropbox-chooser, .dropbox-dropin-btn {\n      line-height: 11px !important;\n      text-decoration: none !important;\n      box-sizing: content-box !important;\n        -webkit-box-sizing: content-box !important;\n        -moz-box-sizing: content-box !important;\n    }\n    ");b.styleSheet?b.styleSheet.cssText=g:b.textContent=g,document.getElementsByTagName("head")[0].appendChild(b),setTimeout(l,0);var w=function(){document.removeEventListener?document.removeEventListener("DOMContentLoaded",w,!1):document.detachEvent&&document.detachEvent("onreadystatechange",w),l(),k.init()};"interactive"===document.readyState||"complete"===document.readyState?setTimeout(w,0):document.addEventListener?document.addEventListener("DOMContentLoaded",w,!1):document.attachEvent("onreadystatechange",w)}var O=window.location.protocol+"//"+window.location.host,N=function(){function e(o){if(this.origin=O,this.sendMessage=function(e){},this.state={},this.options=o,!this.options)throw new Error("options must be provided");if(!this.options.appKey)throw new Error("appKey must be provided");e.validateOnError(this.options.onError)}return e.validateOnError=function(e){if(e&&"function"!=typeof e)throw new Error("onError must be a function")},e.prototype.setOnError=function(o){e.validateOnError(o),this.options.onError=o},e.prototype.hasOnCloseDialogMessage=function(){return void 0!==this.onCloseDialogMessage},e.prototype.setOnCloseDialogMessage=function(e){if("function"!=typeof e)throw new Error("onCloseDialogMessage must be a function");this.onCloseDialogMessage=e},e.prototype.sendState=function(){this.sendMessage({method:"state",params:this.state})},e.prototype.url=function(){var e=o.__spreadArray([{key:"app_key",value:this.options.appKey},{key:"origin",value:this.origin}],this.urlParams(),!0).map((function(e){return"".concat(encodeURIComponent(e.key),"=").concat(encodeURIComponent(e.value))})).join("&");return{pathname:this.urlPathname(),search:"?".concat(e)}},e.prototype.windowDimensions=function(){return{width:735,height:552}},e.prototype.handleMessage=function(e){switch(void 0!==e.sequenceNumber&&this.sendMessage({method:"ack",sequenceNumber:e.sequenceNumber}),e.method){case"origin_request":this.sendMessage({method:"origin"});break;case"ready":this.sendState();break;case"error":this.options.onError&&this.options.onError(e.params);break;case"close_dialog":this.onCloseDialogMessage&&this.onCloseDialogMessage(),this.onCloseDialogMessage=void 0}},e}(),z="https://".concat("www.dropbox.com","/developers/dropins/chooser/js"),I=["text","documents","images","video","audio"],A=function(e){function t(o){var t=e.call(this,o)||this;return t.chooserExtras={},t.validateOptions=function(){var e=function(e,o){if(void 0!==t.options[e]&&typeof t.options[e]!==o)throw new Error("The ".concat(e," option, if provided, must have type ").concat(o))};if(e("linkType","string"),e("_trigger","string"),void 0!==t.options.extensions){if(!(t.options.extensions instanceof Array))throw new Error("The extensions option, if provided, must be an array");for(var o=0,n=t.options.extensions;o<n.length;o++){var i=n[o];if("string"!=typeof i||!i.match(/^\.[\.\w$#&+@!()\-'`_~]+$/)&&-1===I.indexOf(i))throw new Error("The provided list of extensions or file types is not valid. "+"See Chooser documentation: ".concat(z,". ")+"Available file types are: ".concat(I.join(", ")))}}if(e("multiselect","boolean"),e("iframe","boolean"),e("folderselect","boolean"),e("fileselect","boolean"),void 0!==t.options.fileselect&&!t.options.fileselect&&!t.options.folderselect)throw new Error("You must enable either fileselect or folderselect on the Chooser so the user can select something");if(e("sizeLimit","number"),void 0!==t.options.sizeLimit&&t.options.sizeLimit<=0)throw new Error("The sizeLimit option, if provided, must be a positive number");var r=t.options.initialNavigation;if(void 0!==r){if(void 0!==r.mode&&"string"!=typeof r.mode)throw new Error("The initialNavigation.mode option, if provided, must be a string");if(void 0!==r.role&&"string"!=typeof r.role)throw new Error("The initialNavigation.role option, if provided, must be a string");if(void 0!==r.cursor&&"string"!=typeof r.cursor)throw new Error("The initialNavigation.cursor option, if provided, must be a string")}if(e("initialViewType","string"),void 0!==t.options.fields){if(!(t.options.fields instanceof Array))throw new Error("The fields option, if provided, must be an array");for(var s=0,a=t.options.fields;s<a.length;s++){if("string"!=typeof a[s])throw new Error("The fields option, if provided, must be an array of strings")}}e("showSignOut","boolean"),e("version","string"),e("cl","string"),e("productKey","string");var c=t.options.suggestions;if(c){if("object"!=typeof c)throw new Error("The suggestions option, if provided, must be an object");if("string"!=typeof c.experimentGroup)throw new Error("The suggestions.experimentGroup option, if provided, must be a string")}if("function"!=typeof t.options.onSuccess)throw new Error("You must provide a success callback to the Chooser to see the files that the user selects");e("onReady","function"),e("onCancel","function"),e("onError","function"),e("onResize","function")},t.validateOptions(),t}return o.__extends(t,e),t.prototype.urlParams=function(){var e,o,t=[],n=function(e,o){void 0!==o&&t.push({key:e,value:"".concat(o)})};return n("link_type",this.options.linkType),t.push({key:"trigger",value:this.options._trigger||"js"}),void 0!==this.options.extensions&&t.push({key:"extensions",value:this.options.extensions.join(" ")}),n("multiselect",this.options.multiselect),n("iframe",this.options.iframe),n("folderselect",this.options.folderselect),n("fileselect",this.options.fileselect),n("size_limit",this.options.sizeLimit),void 0!==this.options.initialNavigation&&(n("initial_navigation_mode",this.options.initialNavigation.mode),n("initial_navigation_role",this.options.initialNavigation.role),n("initial_navigation_cursor",this.options.initialNavigation.cursor)),n("initial_view_type",this.options.initialViewType),void 0!==this.options.fields&&t.push({key:"fields",value:this.options.fields.join(" ")}),n("show_sign_out",this.options.showSignOut),n("version",this.options.version),n("cl",this.options.cl),n("product_key",this.options.productKey),n("suggestions_experiment_group",null===(o=null===(e=this.options)||void 0===e?void 0:e.suggestions)||void 0===o?void 0:o.experimentGroup),t},t.prototype.urlPathname=function(){return"/chooser"},t.prototype.close=function(){"function"==typeof this.onCloseDialogMessage&&this.onCloseDialogMessage()},t.prototype.handleMessage=function(o){switch(e.prototype.handleMessage.call(this,o),o.method){case"ready":void 0!==this.options.onReady&&this.options.onReady();break;case"files_selected":this.close(),this.options.onSuccess(o.params,this.lastNavigation);break;case"cursor_changed":this.lastNavigation={cursor:o.params};break;case"close_dialog":void 0!==this.options.onCancel&&this.options.onCancel(this.lastNavigation);break;case"resize":void 0!==this.options.onResize&&this.options.onResize(o.params);break;case"error":this.close();break;case"_debug_log":void 0!==console&&null!==console&&console.log(o.params.msg);break;case"chooser_extras_changed":this.chooserExtras=o.params.chooserExtras}},t.prototype.getChooserExtras=function(){return this.chooserExtras},t}(N),L=function(e){function t(o){return e.call(this,o)||this}return o.__extends(t,e),t}(A),M=function(e){function t(o){var t=e.call(this,o)||this;return t.validateNoOptionLinkType(),t}return o.__extends(t,e),t.prototype.validateNoOptionLinkType=function(){if(void 0!==this.options.linkType)throw new Error("The ZoomChooser SDK does not accept a linkType.")},t.prototype.urlParams=function(){var o=e.prototype.urlParams.call(this);return o.push({key:"is_zoom_chooser",value:"true"}),o},t}(A),T=function(e){function t(o){void 0===o&&(o={});var t,n,i,r=this;return(r=e.call(this,o)||this).state={link:r.options.link,file_zoom:null===(t=r.options.file)||void 0===t?void 0:t.zoom,folder_view:null===(n=r.options.folder)||void 0===n?void 0:n.view,folder_headerSize:null===(i=r.options.folder)||void 0===i?void 0:i.headerSize},r}return o.__extends(t,e),t.prototype.urlPathname=function(){return"/dropins/embed"},t.prototype.urlParams=function(){return o.__spreadArray(o.__spreadArray(o.__spreadArray(o.__spreadArray([],this.state.link?[{key:"link",value:this.state.link}]:[],!0),this.state.file_zoom?[{key:"file_zoom",value:this.state.file_zoom}]:[],!0),this.state.folder_view?[{key:"folder_view",value:this.state.folder_view}]:[],!0),this.state.folder_headerSize?[{key:"folder_header_size",value:this.state.folder_headerSize}]:[],!0)},t.prototype.handleMessage=function(o){if("update_size"===o.method)this.options.onSizeChanged&&this.options.onSizeChanged(o.params);else e.prototype.handleMessage.call(this,o)},t}(N),U=function(e){function t(o){var n=e.call(this,o)||this;return t.validateOnSuccess(n.options.onSuccess),t.validateOnCancel(n.options.onCancel),n.state={entries:n.options.entries,initialFolderSelection:n.options.initialFolderSelection},n.onSuccess=n.options.onSuccess,n.onCancel=n.options.onCancel,n.setOnFolderSelected(n.options.onFolderSelected),n}return o.__extends(t,e),t.validateOnSuccess=function(e){if(e&&"function"!=typeof e)throw new Error("onSuccess must be a function")},t.validateOnCancel=function(e){if(e&&"function"!=typeof e)throw new Error("onCancel must be a function")},t.validateOnFolderSelected=function(e){if(e&&"function"!=typeof e)throw new Error("onFolderSelected must be a function")},t.prototype.urlParams=function(){var e=[{key:"account_id",value:this.options.accountId},{key:"initial_folder_selection",value:this.state.initialFolderSelection}];return this.options.showFoldersOnly&&e.push({key:"show_folders_only",value:"true"}),this.options.showSearchBar&&e.push({key:"show_search_bar",value:"true"}),e},t.prototype.urlPathname=function(){return"/dropins/mover"},t.prototype.handleMessage=function(o){switch(e.prototype.handleMessage.call(this,o),o.method){case"success":this.onSuccess&&this.onSuccess();break;case"cancel":this.onCancel&&this.onCancel();break;case"folder_selected":this.onFolderSelected&&this.onFolderSelected(o.params.path)}},t.prototype.setEntries=function(e){this.state=o.__assign(o.__assign({},this.state),{entries:e}),this.sendState()},t.prototype.setInitialFolderSelection=function(e){this.state=o.__assign(o.__assign({},this.state),{initialFolderSelection:e}),this.sendState()},t.prototype.setOnSuccess=function(e){t.validateOnSuccess(e),this.onSuccess=e},t.prototype.setOnCancel=function(e){t.validateOnCancel(e),this.onCancel=e},t.prototype.setOnFolderSelected=function(e){t.validateOnFolderSelected(e),this.onFolderSelected=e},t}(N),R=function(e){function t(o){void 0===o&&(o={});var t=e.call(this,o)||this;return t.state={accountId:t.options.accountId,hideAccount:t.options.hideAccount,link:t.options.link,cl:t.options.cl,view:t.options.initialView,openLinksWithSDK:!!t.options.onOpenLink},t}return o.__extends(t,e),t.prototype.urlPathname=function(){return"/dropins/previewer"},t.prototype.urlParams=function(){return o.__spreadArray(o.__spreadArray(o.__spreadArray(o.__spreadArray(o.__spreadArray([],this.state.accountId?[{key:"account_id",value:this.state.accountId}]:[],!0),this.state.hideAccount?[{key:"hide_account",value:"true"}]:[],!0),this.state.view?[{key:"initial_view",value:this.state.view}]:[],!0),this.state.cl?[{key:"cl",value:this.state.cl}]:[],!0),this.state.link?[{key:"link",value:this.state.link}]:[],!0)},t.prototype.handleMessage=function(t){switch(t.method){case"view_change":var n=t.params.view;this.state=o.__assign(o.__assign({},this.state),{view:n}),this.options.onViewChange&&this.options.onViewChange(n);break;case"open_link":this.options.onOpenLink&&this.options.onOpenLink(t.params.link);break;case"open_login":this.options.onOpenLogin&&this.options.onOpenLogin();break;case"update_size":this.options.onSizeChanged&&this.options.onSizeChanged(t.params);break;default:e.prototype.handleMessage.call(this,t)}},t.prototype.setAccountId=function(e){this.state=o.__assign(o.__assign({},this.state),{accountId:e}),this.sendState()},t.prototype.setHideAccount=function(e){this.state=o.__assign(o.__assign({},this.state),{hideAccount:e}),this.sendState()},t.prototype.setLink=function(e){this.state=o.__assign(o.__assign({},this.state),{link:e}),this.sendState()},t.prototype.setView=function(e){this.state=o.__assign(o.__assign({},this.state),{view:e}),this.sendState()},t}(N);!function(){S(),Dropbox.VERSION="2";var e=new y;Dropbox.mount=e.mount.bind(e),Dropbox.openWindow=e.openWindow.bind(e);var t=e.remove.bind(e);Dropbox.unmount=t,Dropbox.closeWindow=t,Dropbox.Mover=U,Dropbox.Previewer=R,Dropbox.Chooser=L,Dropbox.ZoomChooser=M,Dropbox.embed=function(e,t){Dropbox.appKey&&(e=o.__assign(o.__assign({},e),{appKey:Dropbox.appKey}));var n=new T(e);return Dropbox.mount(n,t),n},k.init=function(){for(var e=document.getElementsByTagName("a"),o=e.length-1;o>=0;o--){var t=e[o],n=(t.getAttribute("class")||"").split(" ");n.indexOf("dropbox-saver")>=0?function(e){Dropbox.createSaveButton({files:function(){return[{url:e.getAttribute("data-url")||e.href,filename:e.getAttribute("data-filename")||C(e.pathname)}]}},e)}(t):n.indexOf("dropbox-embed")>=0&&function(e){var o=e.getAttribute("data-url")||e.href;if(o&&e.parentElement){var t=e.getAttribute("data-file-zoom")||void 0,n=e.getAttribute("data-folder-view")||void 0,i=e.getAttribute("data-folder-header-size")||void 0,r=document.createElement("div");r.classList.add("dropbox-embed-container"),r.style.height=e.getAttribute("data-height")||"100%",r.style.width=e.getAttribute("data-width")||"100%",e.parentElement.replaceChild(r,e),Dropbox.embed({link:o,file:{zoom:t},folder:{view:n,headerSize:i}},r)}}(t)}}}();var j=window.Dropbox;e.Dropbox=j}));
//# sourceMappingURL=c_dropins_sdk_refactor_src_v2_entry.js-vflwZm2bl.map
