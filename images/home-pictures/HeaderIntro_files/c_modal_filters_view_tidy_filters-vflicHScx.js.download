define(["exports","./e_edison","./e_ui_page_files_router","./c_core_i18n","./c_controls_index","./c_components_item_truncation_container","./c_ui-icon_line_delete","./c_form_row_index","./c_folder_dialog_folder_picker_dig","./c_tslib","./c_data_action_creators_index","./c_flows_lib_api","./c_flows_redux_actions","./c_flows_redux_reducer","./c_flows_redux_store"],(function(e,t,a,i,r,s,o,n,l,d,c,u,_,m,y){"use strict";var f,p,T,g;e.TidyUpType=void 0,(f=e.TidyUpType||(e.TidyUpType={})).none="none",f.inactive="inactive",f.by_month="by_month",f.by_year="by_year",f.smart_move="smart_move",f.keyphrase="keyphrase",f.custom_filters="custom_filters",f.time_frame_filter="time_frame_filter",e.InactiveSelection=void 0,(p=e.InactiveSelection||(e.InactiveSelection={})).thirty_days="thirty_days",p.ninety_days="ninety_days",e.DateFormatSelection=void 0,(T=e.DateFormatSelection||(e.DateFormatSelection={}))[T.YYYY_MM=0]="YYYY_MM",T[T.YYYY_MM_Month=1]="YYYY_MM_Month",T[T.Month_YYYY=2]="Month_YYYY",e.TidyStateType=void 0,(g=e.TidyStateType||(e.TidyStateType={}))[g.Idle=0]="Idle",g[g.Preview=1]="Preview",g[g.SmartPreview=2]="SmartPreview",g[g.Keyphrase=3]="Keyphrase",g[g.KeyphrasePreview=4]="KeyphrasePreview",g[g.CustomFilters=5]="CustomFilters",g[g.CustomFilterPreview=6]="CustomFilterPreview",g[g.ConfirmOverrideAutomation=7]="ConfirmOverrideAutomation",g[g.ConfirmRemoveAutomation=8]="ConfirmRemoveAutomation",g[g.TimeFrameFilter=9]="TimeFrameFilter",g[g.TimeFrameFilterPreview=10]="TimeFrameFilterPreview",g[g.InactivityFilter=11]="InactivityFilter",g[g.InactivityFilterPreview=12]="InactivityFilterPreview",g[g.CustomFilterFolderSelection=13]="CustomFilterFolderSelection",g[g.KeyphraseFolderSelection=14]="KeyphraseFolderSelection";const E={type:e.TidyStateType.Idle};var h,v,R,M,S,A,F;!function(e){e[e.Generic=0]="Generic",e[e.PartialSuccess=1]="PartialSuccess",e[e.NoMatchingFiles=2]="NoMatchingFiles"}(h||(h={})),e.TidyCustomFiltersType=void 0,(v=e.TidyCustomFiltersType||(e.TidyCustomFiltersType={})).None="None",v.Keyword="Keyword",v.FileExtension="FileExtension",v.Size="Size",e.TidyTimeFrameFolderStructure=void 0,(R=e.TidyTimeFrameFolderStructure||(e.TidyTimeFrameFolderStructure={})).year="year",R.year_month="year_month",R.year_month_day="year_month_day",R.month="month",R.month_day="month_day",R.day="day",e.TidyTimeFrameFolderNamingMonth=void 0,(M=e.TidyTimeFrameFolderNamingMonth||(e.TidyTimeFrameFolderNamingMonth={})).mm="mm",M.mm_yyyy="mm_yyyy",M.yyyy_mm="yyyy_mm",M.month="month",M.month_yyyy="month_yyyy",e.TidyTimeFrameFolderNamingYear=void 0,(S=e.TidyTimeFrameFolderNamingYear||(e.TidyTimeFrameFolderNamingYear={})).yyyy="yyyy",S.yy="yy",e.TidyTimeFrameFolderNamingDay=void 0,(A=e.TidyTimeFrameFolderNamingDay||(e.TidyTimeFrameFolderNamingDay={})).dd="dd",A.dd_day="dd_day",A.day="day",e.TidyTimeFrameDateRule=void 0,(F=e.TidyTimeFrameDateRule||(e.TidyTimeFrameDateRule={})).date_uploaded="date_uploaded",F.date_created="date_created";const I={type:e.TidyUpType.none,activityParams:{inactiveSelection:e.InactiveSelection.thirty_days},byMonthParams:{excludeCurrentMonth:!1,dateFormatSelection:void 0},byYearParams:{excludeCurrentYear:!1},byKeyphraseParams:{keyphrase:void 0,keyphraseDestination:void 0},customFilterParams:{filters:[{id:Date.now(),rules:[{type:e.TidyCustomFiltersType.None}],actions:{destination:void 0}}]},byTimeFrameParams:{folderStructure:e.TidyTimeFrameFolderStructure.month,formatNaming:{monthFormat:e.TidyTimeFrameFolderNamingMonth.yyyy_mm,yearFormat:e.TidyTimeFrameFolderNamingYear.yyyy,dayFormat:e.TidyTimeFrameFolderNamingDay.dd},date_rule:e.TidyTimeFrameDateRule.date_uploaded},previewData:void 0};var b,L;e.TidySpecificActionSurfaceLogValue=void 0,(b=e.TidySpecificActionSurfaceLogValue||(e.TidySpecificActionSurfaceLogValue={})).GROWTH_SNACKBAR_CTA="snackbar",b.MOVE_SNACKBAR_CTA="move_snackbar",b.DESKTOP_ENTRYPOINT="desktop",b.ORGANIZED_HOME_DESKTOP_ENTRYPOINT="desktop_organized_home",b.SNACKBAR_RETRY="from_retry",b.BROWSE_ACTIONS="browse_actions",b.ORGANIZE_WEB_ENTRYPOINT="web_organized_menu",b.IN_FOLDER_ACTIVATION="in_folder_activation",b.DISCOVERY_UPLOAD_SNACKBAR="discovery_upload_snackbar",b.REENGAGEMENT_UPLOAD_SNACKBAR="reengagement_upload_snackbar",b.DISCOVERY_MOVE_SNACKBAR="discovery_move_snackbar",b.REENGAGEMENT_MOVE_SNACKBAR="reengagement_move_snackbar",e.TidyModalWidth=void 0,(L=e.TidyModalWidth||(e.TidyModalWidth={})).SMALL="small",L.STANDARD="standard",L.LARGE="large";const N=[e.TidyTimeFrameFolderStructure.month,e.TidyTimeFrameFolderStructure.year_month,e.TidyTimeFrameFolderStructure.month_day,e.TidyTimeFrameFolderStructure.year_month_day],w=[e.TidyTimeFrameFolderStructure.year,e.TidyTimeFrameFolderStructure.year_month,e.TidyTimeFrameFolderStructure.year_month_day],C=[e.TidyTimeFrameFolderStructure.day,e.TidyTimeFrameFolderStructure.month_day,e.TidyTimeFrameFolderStructure.year_month_day];function O(e){return e}var D;e.ConfidenceLevel=void 0,(D=e.ConfidenceLevel||(e.ConfidenceLevel={}))[D.low=0]="low",D[D.medium=1]="medium",D[D.high=2]="high";const P=["web_browse","desktop_menu","retry","move_snackbar","upload_snackbar","desktop_organized_home","web_organized_menu","automation","web_modal"];function U(e){return P.find((t=>t===(null==e?void 0:e.toLowerCase())))}const x=["yyyy_mm","yyyy_mm_month","month_yyyy"];function k(e){return x.find((t=>t===(null==e?void 0:e.toLowerCase())))}const Y=["thirty_days","ninety_days","one_year"];function $(e){return Y.find((t=>t===(null==e?void 0:e.toLowerCase())))}const B=["month","year","keyword","inactive","smart_move","custom_filter","time_frame"];function V(e){return B.find((t=>t===(null==e?void 0:e.toLowerCase())))}const z=["none","apply","remove"];function K(e){return z.find((t=>t===(null==e?void 0:e.toLowerCase())))}const G={automationRuleSetToRuleType(e){var t,a;if(!e.rules||0===e.rules.length||!(null===(a=null===(t=e.rules[0])||void 0===t?void 0:t.action)||void 0===a?void 0:a.action))return;const i=e.rules[0].action.action;return"other"!==i[".tag"]?i[".tag"]:void 0}},W={tidyTypeToApiV2(t){const{type:a,activityParams:i,byMonthParams:r,byYearParams:s,byKeyphraseParams:o,customFilterParams:n,byTimeFrameParams:l}=t;switch(a){case e.TidyUpType.inactive:return{inactive_for:W.inactiveTimespanToApiV2(i.inactiveSelection),".tag":"inactive_request"};case e.TidyUpType.by_month:return{exclude_current:r.excludeCurrentMonth,date_format:W.dateFormatSelectionToApiV2(r.dateFormatSelection),".tag":"by_month_request"};case e.TidyUpType.by_year:return{exclude_current:s.excludeCurrentYear,".tag":"by_year_request"};case e.TidyUpType.keyphrase:return{phrase:o.keyphrase||"",destination:o.keyphraseDestination||"",is_absolute_path:o.isAbsolutePath,".tag":"keyphrase_request"};case e.TidyUpType.smart_move:return{".tag":"smart_move_request"};case e.TidyUpType.custom_filters:return{".tag":"filter_request",filters:n.filters.map(W.customFilterDefinitionToApiV2)};case e.TidyUpType.time_frame_filter:return{".tag":"by_time_frame_request",folder_structure:W.byTimeFrameFilterParamsToApiV2(l),date_rule:{".tag":l.date_rule}};default:return{".tag":"other"}}},byTimeFrameFilterParamsToApiV2:e=>"month"===e.folderStructure?{".tag":"month",format:{".tag":e.formatNaming.monthFormat}}:"year"===e.folderStructure?{".tag":"year",format:{".tag":e.formatNaming.yearFormat}}:"day"===e.folderStructure?{".tag":"day",format:{".tag":e.formatNaming.dayFormat}}:"year_month"===e.folderStructure?{".tag":"year_month",month_format:{".tag":e.formatNaming.monthFormat},year_format:{".tag":e.formatNaming.yearFormat}}:"month_day"===e.folderStructure?{".tag":"month_day",month_format:{".tag":e.formatNaming.monthFormat},day_format:{".tag":e.formatNaming.dayFormat}}:{".tag":"year_month_day",month_format:{".tag":e.formatNaming.monthFormat},year_format:{".tag":e.formatNaming.yearFormat},day_format:{".tag":e.formatNaming.dayFormat}},customFilterRulesToApiV2:e=>({rules:e.map((e=>{var t,a,i;return"Keyword"===e.type?{rule:{".tag":"keyword_filter",keywords:null===(t=e.keywordRule)||void 0===t?void 0:t.keywords}}:"Size"===e.type?{rule:{".tag":"size_filter",sizes:null===(a=e.sizeRule)||void 0===a?void 0:a.sizes}}:{rule:{".tag":"file_type_filter",file_types:null===(i=e.fileExtensionRule)||void 0===i?void 0:i.fileExtensions}}}))}),customFilterDefinitionToApiV2:e=>({filter_rules:W.customFilterRulesToApiV2(e.rules),actions:{actions:[{action:{".tag":"move",destination:e.actions.destination,is_absolute_path:e.actions.is_absolute_path}}]}}),customFilterRulesFromApiV2(t){var a;return(null!==(a=t.rules)&&void 0!==a?a:[]).map((t=>{var a,i,r;return"keyword_filter"===(null===(a=t.rule)||void 0===a?void 0:a[".tag"])&&void 0!==t.rule.keywords?{type:e.TidyCustomFiltersType.Keyword,keywordRule:{keywords:t.rule.keywords}}:"file_type_filter"===(null===(i=t.rule)||void 0===i?void 0:i[".tag"])&&void 0!==t.rule.file_types?{type:e.TidyCustomFiltersType.FileExtension,fileExtensionRule:{fileExtensions:t.rule.file_types}}:"size_filter"===(null===(r=t.rule)||void 0===r?void 0:r[".tag"])&&void 0!==t.rule.sizes?{type:e.TidyCustomFiltersType.Size,sizeRule:{sizes:t.rule.sizes}}:{type:e.TidyCustomFiltersType.None}}))},customFilterDefinitionFromApiV2(e){var t,a,i,r;const s=null!==(t=e.filter_rules)&&void 0!==t?t:{};let o,n=!1;return"move"===(null===(r=null===(i=null===(a=e.actions)||void 0===a?void 0:a.actions)||void 0===i?void 0:i[0].action)||void 0===r?void 0:r[".tag"])&&void 0!==e.actions.actions[0].action.destination&&(o=e.actions.actions[0].action.destination,n=!!e.actions.actions[0].action.is_absolute_path),{id:Date.now(),rules:W.customFilterRulesFromApiV2(s),actions:{destination:o,is_absolute_path:n}}},sourceToDestinationPathFromApplyResult(e){var t;const a=[],i={};for(const t of e.entries)i[t.id]=t;for(const[r,s]of Object.entries(e.tidyPlan))if(s.isSelected&&null!==s.selectedDestinationId&&void 0!==s.selectedDestinationId&&(null===(t=e.destinations[s.selectedDestinationId])||void 0===t?void 0:t.path)&&i[r].filename){const t=i[r].path,o=`${e.destinations[s.selectedDestinationId].path}/${i[r].filename}`;t&&a.push({source_path:t,dest_path:o})}return a},tidyTypeFromApiV2(t){const a=JSON.parse(JSON.stringify(I));switch(t[".tag"]){case"by_month_request":return a.type=e.TidyUpType.by_month,a.byMonthParams.excludeCurrentMonth=t.exclude_current,a.byMonthParams.dateFormatSelection=W.dateFormatSelectionFromApiV2(t.date_format),a;case"by_year_request":return a.type=e.TidyUpType.by_year,a.byYearParams.excludeCurrentYear=t.exclude_current,a;case"inactive_request":return a.type=e.TidyUpType.inactive,a.activityParams.inactiveSelection=W.inactiveTimespanFromApiV2(t.inactive_for),a;case"keyphrase_request":return a.type=e.TidyUpType.keyphrase,a.byKeyphraseParams.keyphrase=t.phrase,a.byKeyphraseParams.keyphraseDestination=t.destination,a.byKeyphraseParams.isAbsolutePath=t.is_absolute_path,a;case"smart_move_request":return a.type=e.TidyUpType.smart_move,a;case"filter_request":return a.type=e.TidyUpType.custom_filters,a.customFilterParams={filters:t.filters?t.filters.map((e=>W.customFilterDefinitionFromApiV2(e))):[]},a;case"by_time_frame_request":return a.type=e.TidyUpType.time_frame_filter,a;default:return a}},tidyTypeToFlowsAPI(e){const t=W.tidyTypeToApiV2(e);return{rules:[{enabled:!0,action:{action:{".tag":"tidy_up",args_json:JSON.stringify(t)}}}]}},tidyTypetoLoggingType(t){const{type:i,activityParams:r,byMonthParams:s,byYearParams:o}=t;let n="",l="";switch(i){case e.TidyUpType.inactive:l="inactive",n=r.inactiveSelection===e.InactiveSelection.thirty_days?"30d":"90d";break;case e.TidyUpType.by_month:l="month",s.excludeCurrentMonth&&(n="excl_current");break;case e.TidyUpType.by_year:l="year",o.excludeCurrentYear&&(n="excl_current");break;case e.TidyUpType.keyphrase:l="keyword";break;case e.TidyUpType.smart_move:l="smart_move";break;case e.TidyUpType.custom_filters:l="custom_filters";break;case e.TidyUpType.time_frame_filter:l="time_frame_filter";break;case e.TidyUpType.none:l="none";break;default:throw a.enforceExhaustive(i)}return{tidyUpRule:l,tidyUpSubRule:n}},inactiveTimespanToApiV2(t){switch(t){case e.InactiveSelection.thirty_days:return{".tag":"thirty_days"};case e.InactiveSelection.ninety_days:return{".tag":"ninety_days"};default:return{".tag":"other"}}},inactiveTimespanFromApiV2:t=>"ninety_days"===t[".tag"]?e.InactiveSelection.ninety_days:e.InactiveSelection.thirty_days,dateFormatSelectionToApiV2(t){switch(t){case e.DateFormatSelection.YYYY_MM:return{".tag":"yyyy_mm"};case e.DateFormatSelection.YYYY_MM_Month:return{".tag":"yyyy_mm_month"};case e.DateFormatSelection.Month_YYYY:return{".tag":"month_yyyy"};default:return}},dateFormatSelectionFromApiV2(t){if(void 0===t)return e.DateFormatSelection.YYYY_MM;switch(t[".tag"]){default:return e.DateFormatSelection.YYYY_MM;case"yyyy_mm_month":return e.DateFormatSelection.YYYY_MM_Month;case"month_yyyy":return e.DateFormatSelection.Month_YYYY}},previewSelectionToApiV2(e,t){const a=[];for(const i of e){if(i.isRenamed){if((t.get(i.id)||i.files.some((e=>!!t.get(e.id))))&&i.sourcePath&&i.destPath){const e={source_path:i.sourcePath,dest_path:i.destPath,is_folder:!0};a.push(e)}}for(const e of i.files)if(t.get(e.id)){const t={source_path:e.fqPathSrc,dest_path:e.fqPathDest};a.push(t)}}return a},apiV2ToPreviewSelection(e,t){const i={},r=[],s=[];function o(e,t){let a=[];for(let i=0;i<e.length;i++)if(e[i]!==t[i]){a=t.slice(i);break}return a.length>=1?a:t.slice(e.length)}for(const t of e){if(t.is_folder){s.push(t);continue}const e=a.parent_dir(t.dest_path),o=t.dest_path,n={displayName:a.filename(t.dest_path),id:o,fqPathDest:t.dest_path,fqPathSrc:t.source_path};r.push(o),e in i?i[e].push(n):i[e]=[n]}const n=[];for(const[e,r]of Object.entries(i)){const i=a.parent_dir(r[0].fqPathSrc),s=a.parent_dir(r[0].fqPathDest),l=a.inSubDirectory(i,s)?o(i.split("/"),s.split("/")):s.split("/").filter((e=>0!==e.length));0===l.length&&l.push(t);const d={isDir:!0,displayName:l,fqPath:e,files:r,id:e};n.push(d)}for(const e of s){let t=!1;for(const i of n)if(i.fqPath===e.dest_path){i.isRenamed=!0,i.previousName=a.filename(e.source_path),i.newName=a.filename(e.dest_path),i.sourcePath=e.source_path,i.destPath=e.dest_path,t=!0;break}if(!t){const t=e.dest_path,i={isDir:!0,displayName:[""],fqPath:e.dest_path,files:[],isRenamed:!0,previousName:a.filename(e.source_path),newName:a.filename(e.dest_path),sourcePath:e.source_path,destPath:e.dest_path,id:t};r.push(t),n.push(i)}}return{folderHierarchy:n,fileIds:r}},compareTidyRules:(e,t)=>"inactive_request"===e[".tag"]&&"inactive_request"===t[".tag"]?e.inactive_for===t.inactive_for:"by_month_request"===e[".tag"]&&"by_month_request"===t[".tag"]?e.exclude_current===t.exclude_current&&e.date_format===t.date_format:"by_year_request"===e[".tag"]&&"by_year_request"===t[".tag"]?e.exclude_current===t.exclude_current:"keyphrase_request"===e[".tag"]&&"keyphrase_request"===t[".tag"]&&(e.phrase===t.phrase&&e.destination===t.destination&&e.is_absolute_path===t.is_absolute_path),doesCurrentSelectionMatchAutomation(e,t){if(!e)return!1;const a=W.tidyTypeToApiV2(t);return"by_month_request"===a[".tag"]&&"by_month_request"===e[".tag"]||("filter_request"===a[".tag"]&&"filter_request"===e[".tag"]||("by_time_frame_request"===a[".tag"]&&"by_time_frame_request"===e[".tag"]||("keyphrase_request"===a[".tag"]&&"keyphrase_request"===e[".tag"]||W.compareTidyRules(e,a))))},shouldSilentlyReplaceAutomation(e,t){if(!e)return!1;const a=W.tidyTypeToApiV2(t);return!W.compareTidyRules(e,a)&&("by_month_request"===a[".tag"]&&"by_month_request"===e[".tag"])},confidenceLevelFromApi(t){switch(null==t?void 0:t[".tag"]){case"high":return e.ConfidenceLevel.high;case"mid":return e.ConfidenceLevel.medium;default:return e.ConfidenceLevel.low}},confidenceLevelToApi(t){switch(t){case e.ConfidenceLevel.high:return{".tag":"high"};case e.ConfidenceLevel.medium:return{".tag":"mid"};case e.ConfidenceLevel.low:return{".tag":"low"};default:throw a.enforceExhaustive(t)}},tidyTypeToPapType(t){const{type:i,activityParams:r,byMonthParams:s,byYearParams:o}=t;let n,l="";switch(i){case e.TidyUpType.inactive:n=V("inactive"),l=r.inactiveSelection===e.InactiveSelection.thirty_days?"30d":"90d";break;case e.TidyUpType.by_month:n=V("month"),s.excludeCurrentMonth&&(l="excl_current");break;case e.TidyUpType.by_year:n=V("year"),o.excludeCurrentYear&&(l="excl_current");break;case e.TidyUpType.keyphrase:n=V("keyword");break;case e.TidyUpType.smart_move:n=V("smart_move");break;case e.TidyUpType.custom_filters:n=V("custom_filter");break;case e.TidyUpType.time_frame_filter:n=V("time_frame");break;case e.TidyUpType.none:break;default:throw a.enforceExhaustive(i)}return{tidyUpRule:n,tidyUpSubrule:l}},tidyInactiveRangeToPapType(t){switch(t){case e.InactiveSelection.thirty_days:return $("thirty_days");case e.InactiveSelection.ninety_days:return $("ninety_days");default:throw a.enforceExhaustive(t)}},tidyDateFormatToPapType(t){if(void 0!==t)switch(t){case e.DateFormatSelection.YYYY_MM:return k("yyyy_mm");case e.DateFormatSelection.YYYY_MM_Month:return k("yyyy_mm_month");case e.DateFormatSelection.Month_YYYY:return k("month_yyyy");default:throw a.enforceExhaustive(t)}},tidyAutomationToPapType:(e,t)=>K(t?"apply":e?"remove":"none"),tidySourceToPapType:t=>t===e.TidySpecificActionSurfaceLogValue.DESKTOP_ENTRYPOINT?U("desktop_menu"):t===e.TidySpecificActionSurfaceLogValue.GROWTH_SNACKBAR_CTA||t==e.TidySpecificActionSurfaceLogValue.DISCOVERY_UPLOAD_SNACKBAR||t==e.TidySpecificActionSurfaceLogValue.REENGAGEMENT_UPLOAD_SNACKBAR?U("upload_snackbar"):t===e.TidySpecificActionSurfaceLogValue.MOVE_SNACKBAR_CTA||t==e.TidySpecificActionSurfaceLogValue.DISCOVERY_MOVE_SNACKBAR||t==e.TidySpecificActionSurfaceLogValue.REENGAGEMENT_MOVE_SNACKBAR?U("move_snackbar"):t===e.TidySpecificActionSurfaceLogValue.SNACKBAR_RETRY?U("retry"):t===e.TidySpecificActionSurfaceLogValue.ORGANIZED_HOME_DESKTOP_ENTRYPOINT?U("desktop_organized_home"):U("web_browse")},q=a.defineMessage({id:"FEI6xF",defaultMessage:"Close"}),H=a.defineMessage({id:"StgmB7",defaultMessage:"Cancel"}),X=a.defineMessage({id:"03FNiv",defaultMessage:"Apply"}),j=a.defineMessage({id:"ndSchX",defaultMessage:"Back"}),Z=a.defineMessage({id:"PLME/5",defaultMessage:"Dismiss"}),J=a.defineMessage({id:"7aGUDe",defaultMessage:"Preview"}),Q=a.defineMessages({PENDING_TEXT_1:{id:"3Cumks",defaultMessage:"Creating folders..."},PENDING_TEXT_2:{id:"rOHuZh",defaultMessage:"This may take a moment."},PENDING_AUTOMATION_REMOVAL:{id:"mK/eth",defaultMessage:"Removing automation..."},PENDING_AUTOMATION_APPLY:{id:"yvx6Ny",defaultMessage:"Applying automation..."},STILL_WORKING_TEXT_1:{id:"xDVihY",defaultMessage:"Moving files..."},STILL_WORKING_TEXT_2:{id:"Fw7phK",defaultMessage:"You can safely go about your work while we finish."}}),ee=a.defineMessages({SUCCESS_TEXT:{id:"iszJTE",defaultMessage:"Successfully organized {numFilesTidied, plural, one{# file} other{# files}}."},AUTOMATION_REMOVAL_SUCCESS_TEXT:{id:"4DeEN2",defaultMessage:"Successfully removed automation."},AUTOMATION_APPLY_SUCCESS_TEXT:{id:"NfBNbr",defaultMessage:"Successfully applied automation."}}),te=a.defineMessages({ERROR_TEXT:{id:"9ma/3b",defaultMessage:"We weren’t able to organize your folder. Try again."},MIXED_SUCCESS_AUTOMATION_SUCCESS:{id:"n50m8S",defaultMessage:"Couldn't apply the rule. Successfully made changes to the automation."},MIXED_SUCCESS_AUTOMATION_FAILURE:{id:"WHUu5h",defaultMessage:"Couldn't make changes to the automation. Successfully applied rule."},AUTOMATION_REMOVAL_FAILURE:{id:"Uh39z5",defaultMessage:"Couldn't remove the automation."},AUTOMATION_APPLICATION_FAILURE:{id:"YoRCK6",defaultMessage:"Couldn't apply the automation."},PARTIAL_SUCCESS_TEXT_1:{id:"6V5H17",defaultMessage:"Organized {numSucceeded, plural, one{# file} other{# files}}."},PARTIAL_SUCCESS_TEXT_2:{id:"YKjtS3",defaultMessage:"{numFailed, plural, one{# file} other{# files}} couldn’t be organized – give it another try."},ALL_CONTENT_ACTIVE_TEXT:{id:"/9yhnT",defaultMessage:"All of your content has been active recently."},ALL_CREATED_CURRENT_MONTH:{id:"yj7SqD",defaultMessage:"All of your content was added to Dropbox this month."},ALL_CREATED_CURRENT_YEAR:{id:"N73kL9",defaultMessage:"All of your content was added to Dropbox this year."},NO_MATCHING_KEYWORD:{id:"P/rv1f",defaultMessage:"We couldn’t find any files containing this keyword."},EMPTY_KEYPHRASE_PREVIEW_BACK:{id:"UzL6C5",defaultMessage:"Try another keyword"},EMPTY_PREVIEW_BACK:{id:"FDsh/B",defaultMessage:"Try another rule"},EMPTY_CUSTOM_FITLER_PREVIEW_BACK:{id:"Yy0gyY",defaultMessage:"Modify filter rules"},NO_MATCHING_FILES_GENERIC:{id:"4zKt1i",defaultMessage:"We couldn’t find any files to organize in this folder."},SNACKBAR_TEXT:{id:"cGFOIN",defaultMessage:"We couldn’t find any files to organize in this folder. Try choosing a different rule."}}),ae=a.defineMessages({MODAL_TITLE_LABEL:{id:"2/YiSD",defaultMessage:"Preview this rule"},MODAL_TITLE_ERROR_LABEL:{id:"mAFYum",defaultMessage:"Couldn’t apply this rule"},DESCRIPTION_TEXT:{id:"dpAMYR",defaultMessage:"You’re about to make the following changes. Uncheck any items you want to exclude from this operation."},AUTOMATION_TOGGLE_LABEL:{id:"eY1+iP",defaultMessage:"Apply rule to every file added to this folder"},AUTOMATION_ON_LABEL:{id:"AXasyS",defaultMessage:"On"},AUTOMATION_OFF_LABEL:{id:"urtNrM",defaultMessage:"Off"}}),ie=a.defineMessages({MODAL_TITLE_LABEL:{id:"NqyXrB",defaultMessage:"Smart move"},PREVIEW_PENDING_TEXT_1:{id:"kUAGn3",defaultMessage:"Analyzing folder for Smart Move..."},PREVIEW_PENDING_TEXT_2:{id:"ywWex0",defaultMessage:"This may take a moment."},APPLY_PENDING_TEXT:{id:"hSVEfh",defaultMessage:"Identifying folders..."},CONTENT_TITLE:{id:"+AvtU7",defaultMessage:"Content"},MOVE_TO_TITLE:{id:"LAd/7v",defaultMessage:"Move to:"},ADD_FEEDBACK:{id:"V0ezVH",defaultMessage:"Add feedback"},SHARE_FEEDBACK_PLACEHOLDER:{id:"y0XkHO",defaultMessage:"Share feedback with the team"},ERROR_PATH_NOT_FOUND:{id:"6JUT/e",defaultMessage:"Could not locate a file for organizing"},ERROR_MULTIPLE_CONTAINING_FOLDERS:{id:"gKBmyF",defaultMessage:"Cannot organize more than one folder at a time"},ERROR_NO_CONTAINING_FOLDER:{id:"AGMIp0",defaultMessage:"Cannot organize files without a containing folder"},ERROR_NO_DESTINATIONS_1:{id:"+7w7cI",defaultMessage:"Smart move needs at least one subfolder to suggest moving files into."},ERROR_NO_DESTINATIONS_2:{id:"yXlKn4",defaultMessage:"Create a subfolder or try another multi-file organize rule."},ERROR_CANNOT_MOVE_ENTRY:{id:"bNlw4b",defaultMessage:"Some files are read-only and cannot be moved"},ERROR_LIST_FILES:{id:"cLoDbN",defaultMessage:"There was a problem identifying files to organize"},ERROR_OTHER:{id:"CWZOOV",defaultMessage:"We weren’t able to organize your folder. Try again."},WARNING_TEXT:{id:"kDUNC8",defaultMessage:"This feature is for internal testing only. Be aware that moving files to a different folder may result in different access permissions."},HIGH_CONFIDENCE_SECTION_HEADER:{id:"MEt1EZ",defaultMessage:"Our suggested matches:"},POSSIBLE_MATCHES_SECTION_HEADER:{id:"ZUHtxO",defaultMessage:"Some possible matches:"},LOW_CONFIDENCE_ONLY_SECTION_HEADER:{id:"hl1h7f",defaultMessage:"Choose where you think these files should live:"},BODY_DESCRIPTION:{id:"X7XEUt",defaultMessage:"Here are the suggested locations for your files. Select the ones you want to move."},BODY_DESCRIPTION_NO_SUGGESTIONS:{id:"TJG7hj",defaultMessage:"We couldn’t come up with any suggested matches, but you can choose the correct destination from the dropdowns."},CONTENT_COLUMN_HEADER:{id:"fZA951",defaultMessage:"Current content"},DESTINATIONS_COLUMN_HEADER:{id:"JGXTov",defaultMessage:"Move to"},DESTINATION_PLACEHOLDER:{id:"t0ARxk",defaultMessage:"Choose folder"},ERROR_BANNER:{id:"Ttmxyl",defaultMessage:"Selected files must have a folder destination."},PRIMARY_BUTTON_LABEL:{id:"TW19Cd",defaultMessage:"Move"}}),re=a.defineMessages({HEADER_LABEL:{id:"YBZvnw",defaultMessage:"Group by keyword"},PREVIEW_LABEL:{id:"7aGUDe",defaultMessage:"Preview"},INPUT_LABEL:{id:"p4yoHO",defaultMessage:"Keyword:"},INPUT_PLACEHOLDER:{id:"nW3umL",defaultMessage:"Type your keyword"},FOLDER_SELECTION_LABEL:{id:"6Zd09J",defaultMessage:"Destination:"},FOLDER_SELECTION_LABEL_GLOBAL:{id:"EK7yLU",defaultMessage:"Move files to:"}}),se=a.defineMessages({dropdownPlaceholder:{id:"IJxA/7",defaultMessage:"Choose a subfolder…"},noSubfolders:{id:"jOCQJ1",defaultMessage:"It seems like you don’t have any existing subfolders. Try this again once you have at least one subfolder to choose from."},folderSelectionButtonLabel:{id:"mz8m9a",defaultMessage:"Choose folder"},title:{id:"ZXnd4e",defaultMessage:"Move items to…"},defaultFolderSelectionButtonLabel:{id:"7SCfI3",defaultMessage:"Folder name"},folderCreationButtonLabel:{id:"i4621P",defaultMessage:"Create folder"},newFolderButtonLabel:{id:"sw1lp9",defaultMessage:"New folder"},newFolderInputPlaceholderText:{id:"6q3haJ",defaultMessage:"Folder name"},folderCreationTitleLabel:{id:"wduxmO",defaultMessage:"Move files to new folder"},folderNameLabel:{id:"CxQrI0",defaultMessage:"Name"},folderNameLengthError:{id:"FwD8fL",defaultMessage:"Folder name is too long."},folderNameInvalidCharacterError:{id:"FbwsTS",defaultMessage:"Folder names can’t contain: \\ / :"}}),oe=a.defineMessages({HEADER_LABEL:{id:"zyqr9m",defaultMessage:"Custom filters"},BODY_LABEL:{id:"TaNu8P",defaultMessage:"Create filters and configure rules to organize content. Filters will be applied to matching content in the order listed."},KEYWORD_EMPTY_INPUT_ERROR_LABEL:{id:"tQYcdG",defaultMessage:"Please enter a keyword."},KEYWORD_INVALID_CHARACTERS_ERROR_LABEL:{id:"0TvUJE",defaultMessage:"Please use letters (a-z), numbers (0-9), and underscores (_)."},KEYWORD_TOO_LONG_ERROR_LABEL:{id:"rlauM0",defaultMessage:"Maximum length for a keyword is 15 characters."},KEYWORD_ALREADY_EXISTS_ERROR_LABEL:{id:"K2iRBi",defaultMessage:"This keyword has already been added to the rule."},SIZE_INVALID_CHARACTERS_ERROR_LABEL:{id:"vjH8Ek",defaultMessage:"Please use numbers (0-9) only."},SIZE_TOO_LARGE_ERROR_LABEL:{id:"EdF6PB",defaultMessage:"Maximum value for a file size filter is 100 GB."},SIZE_INVALID_RANGE_ERROR_LABEL:{id:"wxq54e",defaultMessage:"Minimum value cannot exceed maximum."},FILES_GREATER_THAN_LABEL:{id:"nFLqkw",defaultMessage:"Files greater than"},FILES_SMALLER_THAN_LABEL:{id:"XbA6pf",defaultMessage:"Files smaller than"},ADD_RULE_LABEL:{id:"yjoU9B",defaultMessage:"Add rule"},CREATE_FILTER_LABEL:{id:"XXL0GB",defaultMessage:"Create new filter"},FOLDER_SELECTION_LABEL:{id:"lWzfli",defaultMessage:"Move files to:"},DELETE_FILTER_LABEL:{id:"qA0lf+",defaultMessage:"Delete filter"}}),ne=a.defineMessages({header_label:{id:"fSFcZF",defaultMessage:"Organize by time"},body_label:{id:"hcBEFs",defaultMessage:"Group files into subfolders based on the following folder structure."},time_frame_rule_selection_label:{id:"nvWpEL",defaultMessage:"Group by"},time_frame_date_rule_selection_label:{id:"YtpkZb",defaultMessage:"Using"},time_frame_date_date_rule_prompt_label:{id:"YUWPut",defaultMessage:"Date created is not always available for each file."},folder_naming_selection_label:{id:"v1bOOP",defaultMessage:"Folder naming"},year_folders_selection_label:{id:"nrRYNb",defaultMessage:"Year folders"},month_folders_selection_label:{id:"VNIPPz",defaultMessage:"Month folders"},day_folders_selection_label:{id:"PrfGFA",defaultMessage:"Day folders"},preview_label:{id:"7aGUDe",defaultMessage:"Preview"}}),le=a.defineMessages({date_created:{id:"/z5QOK",defaultMessage:"Date created"},date_uploaded:{id:"hISSJo",defaultMessage:"Date uploaded"}}),de=a.defineMessages({month:{id:"rMb/VK",defaultMessage:"Month"},year:{id:"LcewkZ",defaultMessage:"Year"},day:{id:"sHbORR",defaultMessage:"Day"}}),ce=a.defineMessages({mm:{id:"GdmYyK",defaultMessage:"MM"},mm_yyyy:{id:"MkGMnE",defaultMessage:"MM-YYYY"},yyyy_mm:{id:"NPIdJZ",defaultMessage:"YYYY-MM"},month:{id:"rMb/VK",defaultMessage:"Month"},month_yyyy:{id:"xo2MT1",defaultMessage:"Month YYYY"}}),ue=a.defineMessages({yyyy:{id:"IqGaq/",defaultMessage:"YYYY"},yy:{id:"02jpeP",defaultMessage:"YY"}}),_e=a.defineMessages({dd:{id:"8URMRS",defaultMessage:"DD"},dd_day:{id:"Kr9xjy",defaultMessage:"DD Monday"},day:{id:"8Xmwl1",defaultMessage:"Monday"}}),me=a.defineMessages({UPDATE_AUTOMATION_HEADER_LABEL:{id:"WvZUJv",defaultMessage:"Replace your existing automation?"},REMOVE_AUTOMATION_HEADER_LABEL:{id:"Mx+XRk",defaultMessage:"Remove your existing automation?"},UPDATE_CONFIRMATION_BODY_LABEL:{id:"R8WlLm",defaultMessage:"Automating this rule will replace this folder’s existing automation on an ongoing basis. Click <strong>{keepExistingButtonLabel}</strong> to apply this new rule only this one time."},REMOVE_CONFIRMATION_BODY_LABEL:{id:"kaTvx4",defaultMessage:"Updating this rule will remove this folder’s existing automation going forward. Click <strong>{keepExistingButtonLabel}</strong> to apply this rule without removing automation."},APPLY_WITHOUT_OVERRIDE_LABEL:{id:"raqLbh",defaultMessage:"Keep existing automation"},APPLY_AND_OVERRIDE_LABEL:{id:"sp7ooC",defaultMessage:"Replace"},APPLY_AND_REMOVE_LABEL:{id:"grjvza",defaultMessage:"Remove"}}),ye=a.defineMessages({UNDO_PENDING:{id:"9yS73d",defaultMessage:"Undoing..."},UNDO_SUCCESS:{id:"vsXQtc",defaultMessage:"Undo successful — removed file grouping."},UNDO_ERROR:{id:"jwcStr",defaultMessage:"Couldn’t remove file grouping."},UNDO_PARTIAL_ERROR_AUTOMATION_SUCCESS:{id:"wc6Thl",defaultMessage:"Undo successfully applied to the automation, but couldn’t undo the file grouping."},UNDO_PARTIAL_ERROR_AUTOMATION_FAILURE:{id:"PQoKpp",defaultMessage:"Undo successfully applied to file grouping, but couldn’t undo the automation."}}),fe=a.defineMessage({id:"rlhg66",defaultMessage:"Multi-file organize"}),pe=a.defineMessage({id:"tZjTI1",defaultMessage:"Organize this content into folders grouped by:"}),Te=a.defineMessages({TITLE:{id:"VN2FV7",defaultMessage:"Organize inactive content"},SUBTITLE:{id:"mkBKo9",defaultMessage:"Group together content you haven't engaged with recently"},OPTION_LABEL:{id:"cN4D1q",defaultMessage:"Inactive for"},TIDY_UP_INACTIVE_THIRTY_DAYS:{id:"+7XcHy",defaultMessage:"30 days"},TIDY_UP_INACTIVE_NINETY_DAYS:{id:"XditG3",defaultMessage:"90 days"}}),ge=a.defineMessages({CUSTOM_FILTER_TITLE:{id:"OhBogU",defaultMessage:"Custom filters"},CUSTOM_FILTER_SUBTITLE:{id:"ERkF8C",defaultMessage:"Group based on keywords and file types"},TIME_FRAME_TITLE:{id:"Rc8edF",defaultMessage:"Timeframe"},TIME_FRAME_SUBTITLE:{id:"BJUzKE",defaultMessage:"Group based on a specific timeframe"},INACTIVITY_TITLE:{id:"rxaX/E",defaultMessage:"Inactivity"},INACTIVITY_SUBTITLE:{id:"qd8Pdr",defaultMessage:"Group together content you haven’t engaged with recently"},SMART_MOVE_TITLE:{id:"xB+pkI",defaultMessage:"Smart move"},SMART_MOVE_SUBTITLE:{id:"ThRSey",defaultMessage:"Group files into existing subfolders based on our recommendations"},KEYPHRASE_FILTER_TITLE:{id:"rHq4Oa",defaultMessage:"Keyword"},KEYPHRASE_FILTER_SUBTITLE:{id:"WDRppN",defaultMessage:"Group by specific keywords"}}),Ee=a.defineMessage({id:"f9xbnY",defaultMessage:"Year"}),he=a.defineMessage({id:"oCxF9e",defaultMessage:"Year your content was added to Dropbox"}),ve=a.defineMessage({id:"n8ISVS",defaultMessage:"Month"}),Re=a.defineMessage({id:"/6zLhV",defaultMessage:"Month your content was added to Dropbox"}),Me=({label:e})=>t.React$1.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"tidy-up-modal__header"},t.React$1.createElement(a.Title,null,i.intl.formatMessage(e)));Me.displayName="TidyUpModalHeader";a.injectInternalStyle("metaserver/static/js/tidy_up/modal/filters_view/folder_selection.module.out.css",(e=>"._tidy-custom-filter-folder-selection__dropdown_f17u3_1{margin-bottom:8px;text-overflow:ellipsis}._tidy-custom-filter-folder-selection__dropdown-button_f17u3_6{justify-content:flex-start;width:100%}._tidy-custom-filter-folder-selection__select-item-content_f17u3_11{align-items:center;display:flex;width:250px}._tidy-custom-filter-folder-selection__folder-icon_f17u3_17{margin-right:5px}._tidy-custom-filter-folder-selection__button-text_f17u3_21{overflow:hidden;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:130px}._tidy-custom-filter-folder-selection__button-container_f17u3_29{display:flex;width:100%}._tidy-custom-filter-folder-selection__no-folder-message_f17u3_34{overflow:hidden;text-align:left;text-overflow:ellipsis;width:300px}._tidy-custom-filter-folder-selection__modal-body_f17u3_41{max-height:320px;min-height:auto}._tidy-custom-filter-folder-selection__new-folder-name-input__error_f17u3_46{margin-bottom:-12px}"));const Se="_tidy-custom-filter-folder-selection__select-item-content_f17u3_11",Ae="_tidy-custom-filter-folder-selection__folder-icon_f17u3_17",Fe="_tidy-custom-filter-folder-selection__button-text_f17u3_21",Ie="_tidy-custom-filter-folder-selection__modal-body_f17u3_41",be="_tidy-custom-filter-folder-selection__new-folder-name-input__error_f17u3_46";const Le=(e,t,a)=>a.ns("tidy_up").rpc("tidy/check",{async_job_id:e},{subjectUserId:t});function Ne(e){return Object.assign(Object.assign({},e),{ns_id_str:e.ns_id.toString()})}function we(e,t,i,r,s){return d.__awaiter(this,void 0,void 0,(function*(){const o=new a.UserApiV2Client;try{const a=yield o.ns("tidy_up_api_proxy").rpc("undo",{source_path:e,moved_files_changesets:i.map(Ne),created_directories_changesets:r.map(Ne),renamed_directories_changesets:s.map(Ne)},{subjectUserId:t}),n=void 0!==a.files_result&&"success"===a.files_result[".tag"],l=!a.folders_result||"success"===a.folders_result[".tag"],d=!a.renamed_folders_result||"success"===a.renamed_folders_result[".tag"];return n&&l&&d}catch(e){return!1}}))}const Ce=(e,t,a)=>d.__awaiter(void 0,void 0,void 0,(function*(){var i;try{const i=yield e();if("complete"===i[".tag"])return{isError:!1,result:i};if("other"===i[".tag"])return{isError:!0,error:{".tag":"undefined_error"},error_summary:"undefined_error"};let r;do{yield new Promise((e=>setTimeout(e,1e3))),r=yield Le(i.async_job_id,t,a)}while(r&&"in_progress"===r[".tag"]);return"complete"===r[".tag"]?{isError:!1,result:r}:{isError:!0,error:{".tag":"undefined_error"},error_summary:"undefined_error"}}catch(e){return(null===(i=null==e?void 0:e.error)||void 0===i?void 0:i[".tag"])?{isError:!0,error:e.error,error_summary:e.summary}:{isError:!0,error:{".tag":"undefined_error"},error_summary:"undefined_error"}}}));function Oe(e){return{class:"tidyup",action:"attempt",object:"tidyup",properties:e}}function De(e){return{class:"tidyup",action:"undo",object:"tidyup",properties:e}}const Pe=8e3,Ue="tidyup-apply-action",xe=a.getStoreForBrowse(),ke=y.getStoreForAutomations(),Ye=(e,t,a,i)=>u.setupFolderRules(t,i).then((()=>d.__awaiter(void 0,void 0,void 0,(function*(){return Qe(e,t,a,i),!0}))),(()=>d.__awaiter(void 0,void 0,void 0,(function*(){return!1})))),$e=(e,t,a)=>u.deleteFolderRules(t).then((()=>d.__awaiter(void 0,void 0,void 0,(function*(){return Qe(e,t,a,void 0),!0}))),(()=>d.__awaiter(void 0,void 0,void 0,(function*(){return!1})))),Be=(r,s,o,n,l,d,c,u,_)=>{a.WebUserActionLog.log(c,a.WebUserActionLogEvent.TIDY_UP_RESULT_SUCCESS,{ns_id:u,apply_file_count:r,success_file_count:r});const{tidyUpRule:m,tidyUpSubrule:y}=W.tidyTypeToPapType(o);a.logEvent(Oe({actionSurface:n,eventState:"success",tidyupRule:m,tidyupSubrule:y,tidyupAutomationAction:W.tidyAutomationToPapType(l,d),tidyupExcludeCurrentSubrule:o.type===e.TidyUpType.by_month&&o.byMonthParams.excludeCurrentMonth||o.type===e.TidyUpType.by_year&&o.byYearParams.excludeCurrentYear,tidyupTimeInactiveSubrule:W.tidyInactiveRangeToPapType(o.activityParams.inactiveSelection),tidyupDateFormatSubrule:W.tidyDateFormatToPapType(o.byMonthParams.dateFormatSelection),tidyupSource:W.tidySourceToPapType(n)}));const f=i.intl.formatMessage(ee.SUCCESS_TEXT,{numFilesTidied:r});a.Snackbar.show(t.React$1.createElement(a.Snackbar,{actionButtonText:_?i.intl.formatMessage({id:"LfSqya",defaultMessage:"Undo"}):void 0,onActionClick:_,timeoutDelayMs:1e4,title:f,variant:"complete",id:Ue}))},Ve=(e,r)=>{a.Snackbar.show(t.React$1.createElement(a.Snackbar,{actionButtonText:i.intl.formatMessage({id:"3KMB1D",defaultMessage:"Retry"}),onActionClick:r,closeButtonText:i.intl.formatMessage(Z),timeoutDelayMs:Pe,title:e,variant:"fail",id:Ue}))},ze=(t,r,s,o,n,l,d,c,u,_)=>{a.WebUserActionLog.log(d,a.WebUserActionLogEvent.TIDY_UP_RESULT_FAIL,{ns_id:u,apply_file_count:c,success_file_count:0});const{tidyUpRule:m,tidyUpSubrule:y}=W.tidyTypeToPapType(r);a.logEvent(Oe({actionSurface:s,eventState:"failed",tidyupRule:m,tidyupSubrule:y,tidyupAutomationAction:W.tidyAutomationToPapType(o,n),tidyupExcludeCurrentSubrule:r.type===e.TidyUpType.by_month&&r.byMonthParams.excludeCurrentMonth||r.type===e.TidyUpType.by_year&&r.byYearParams.excludeCurrentYear,tidyupTimeInactiveSubrule:W.tidyInactiveRangeToPapType(r.activityParams.inactiveSelection),tidyupDateFormatSubrule:W.tidyDateFormatToPapType(r.byMonthParams.dateFormatSelection),tidyupSource:W.tidySourceToPapType(s)}));const f=i.intl.formatMessage(_?te.MIXED_SUCCESS_AUTOMATION_SUCCESS:te.ERROR_TEXT);Ve(f,He(t,l))},Ke=(e,t,a,r,s,o)=>{const n=i.intl.formatMessage(te.MIXED_SUCCESS_AUTOMATION_FAILURE);Ve(n,!1===t?()=>{Je(e,r,s,o)}:()=>{Ze(e,r,s,o)})},Ge=(r,s,o,n,l,d,c,u,_,m,y)=>{a.WebUserActionLog.log(_,a.WebUserActionLogEvent.TIDY_UP_RESULT_PARTIAL_FAIL,{ns_id:m,apply_file_count:r+s,success_file_count:r});const{tidyUpRule:f,tidyUpSubrule:p}=W.tidyTypeToPapType(n);a.logEvent(Oe({actionSurface:l,eventState:"failed",tidyupRule:f,tidyupSubrule:p,tidyupAutomationAction:W.tidyAutomationToPapType(d,c),tidyupExcludeCurrentSubrule:n.type===e.TidyUpType.by_month&&n.byMonthParams.excludeCurrentMonth||n.type===e.TidyUpType.by_year&&n.byYearParams.excludeCurrentYear,tidyupTimeInactiveSubrule:W.tidyInactiveRangeToPapType(n.activityParams.inactiveSelection),tidyupDateFormatSubrule:W.tidyDateFormatToPapType(n.byMonthParams.dateFormatSelection),tidyupSource:W.tidySourceToPapType(l)}));const T=i.intl.formatMessage(te.PARTIAL_SUCCESS_TEXT_1,{numSucceeded:r}),g=i.intl.formatMessage(te.PARTIAL_SUCCESS_TEXT_2,{numFailed:s}),E=He(o,u);a.Snackbar.show(t.React$1.createElement(a.Snackbar,{actionButtonText:y?i.intl.formatMessage({id:"su+IP9",defaultMessage:"Undo"}):void 0,onActionClick:y,closeButtonText:i.intl.formatMessage({id:"3KMB1D",defaultMessage:"Retry"}),onCloseClick:E,timeoutDelayMs:1e4,title:T+" "+g,variant:"warn",id:Ue}))},We=()=>{const e=i.intl.formatMessage(te.SNACKBAR_TEXT);a.Snackbar.show(t.React$1.createElement(a.Snackbar,{closeButtonText:i.intl.formatMessage(Z),timeoutDelayMs:Pe,title:e,variant:"fail",id:Ue}))},qe=(e,r,s,o,n,l,u,_,m)=>()=>d.__awaiter(void 0,void 0,void 0,(function*(){const d=n.filter((e=>"success"===e[".tag"])).length;a.WebUserActionLog.log(s,a.WebUserActionLogEvent.TIDY_UP_UNDO,{type:"precision",num_files_to_undo:d,ns_id:o}),a.logEvent(De({actionSurface:r,eventState:"start",numFilesToUndo:d,tidyupUndoType:"precision"})),a.Snackbar.show(t.React$1.createElement(a.Snackbar,{id:Ue,title:i.intl.formatMessage(ye.UNDO_PENDING),variant:"sync"}));const y=xe.getState();(a.isCurrentPathRoot(y)?"":a.path(y))!==e&&xe.dispatch(c.setUrl({path:e}));let f=Promise.resolve(void 0);if(void 0!==m){f=null!=G.automationRuleSetToRuleType(m)?Ye(s,e,r,m):$e(s,e,r)}const[p,T]=yield Promise.all([we(e,s,l,u,_),f]);p&&!1!==T||(a.WebUserActionLog.log(s,a.WebUserActionLogEvent.TIDY_UP_UNDO_FAIL,{ns_id:o,num_files_to_undo:d,undo_automation_failed:!1===T,undo_tidy_failed:!p}),a.logEvent(De({actionSurface:r,eventState:"failed",numFilesToUndo:d,tidyupUndoType:"precision"}))),p?!1!==T?(a.WebUserActionLog.log(s,a.WebUserActionLogEvent.TIDY_UP_UNDO_SUCCESS,{ns_id:o,num_files_to_undo:d}),a.logEvent(De({actionSurface:r,eventState:"success",numFilesToUndo:d,tidyupUndoType:"precision"})),a.Snackbar.show(t.React$1.createElement(a.Snackbar,{closeButtonText:i.intl.formatMessage(Z),timeoutDelayMs:Pe,title:i.intl.formatMessage(ye.UNDO_SUCCESS),variant:"complete",id:Ue}))):a.Snackbar.show(t.React$1.createElement(a.Snackbar,{closeButtonText:i.intl.formatMessage(Z),timeoutDelayMs:Pe,title:i.intl.formatMessage(ye.UNDO_PARTIAL_ERROR_AUTOMATION_FAILURE),variant:"warn",id:Ue})):(e=>{const r=i.intl.formatMessage(e?ye.UNDO_PARTIAL_ERROR_AUTOMATION_SUCCESS:ye.UNDO_ERROR);a.Snackbar.show(t.React$1.createElement(a.Snackbar,{closeButtonText:i.intl.formatMessage(Z),timeoutDelayMs:Pe,title:r,variant:"warn",id:Ue}))})(!!T)})),He=(e,t)=>()=>{a.Snackbar.close(Ue);const i=xe.getState();(a.isCurrentPathRoot(i)?"":a.path(i))!==e&&xe.dispatch(c.setUrl({path:e})),t()},Xe=(e,r,s,o)=>{a.Snackbar.show(t.React$1.createElement(a.Snackbar,{actionButtonText:i.intl.formatMessage({id:"3KMB1D",defaultMessage:"Retry"}),onActionClick:o,closeButtonText:i.intl.formatMessage(Z),timeoutDelayMs:Pe,title:s,variant:"fail",id:Ue}))},je=e=>{a.Snackbar.show(t.React$1.createElement(a.Snackbar,{closeButtonText:i.intl.formatMessage(Z),timeoutDelayMs:Pe,title:e,variant:"complete",id:Ue}))},Ze=(e,r,s,o)=>d.__awaiter(void 0,void 0,void 0,(function*(){a.Snackbar.show(t.React$1.createElement(a.Snackbar,{id:Ue,title:i.intl.formatMessage(Q.PENDING_AUTOMATION_REMOVAL),variant:"sync"})),yield u.removeFolderRules(r,o).then((()=>{Qe(e,r,s,void 0),je(i.intl.formatMessage(ee.AUTOMATION_REMOVAL_SUCCESS_TEXT))}),(()=>{Xe(0,0,i.intl.formatMessage(te.AUTOMATION_REMOVAL_FAILURE),(()=>{Ze(e,r,s,o)}))}))})),Je=(e,r,s,o)=>d.__awaiter(void 0,void 0,void 0,(function*(){a.Snackbar.show(t.React$1.createElement(a.Snackbar,{id:Ue,title:i.intl.formatMessage(Q.PENDING_AUTOMATION_APPLY),variant:"sync"})),yield u.setupFolderRules(r,o).then((()=>{Qe(e,r,s,o),je(i.intl.formatMessage(ee.AUTOMATION_APPLY_SUCCESS_TEXT))}),(()=>{Xe(0,0,i.intl.formatMessage(te.AUTOMATION_APPLICATION_FAILURE),(()=>{Je(e,r,s,o)}))}))})),Qe=(e,t,i,r)=>{let s;r?r.rules&&r.rules.length>0&&ke.dispatch(_.mergeUserAutomations([m.convertFolderRuleToAutomation(r.rules[0],t)])):ke.dispatch(_.removeUserAutomation(t)),r?(s=a.WebUserActionLogEvent.TIDY_UP_AUTOMATION_SET,a.logEvent(function(e){return{class:"tidyup",action:"select",object:"tidyup_automation",properties:e}}({actionSurface:i,tidyupSource:W.tidySourceToPapType(i)}))):(s=a.WebUserActionLogEvent.TIDY_UP_AUTOMATION_REMOVED,a.logEvent({class:"tidyup",action:"remove",object:"tidyup_automation",properties:{actionSurface:i,tidyupSource:W.tidySourceToPapType(i)}})),a.WebUserActionLog.log(e,s,{})},et=({folderName:e})=>t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement("div",{className:Se},t.React$1.createElement(a.IconContent,{className:Ae,height:"24",width:"24",name:"folder-small"}),e?t.React$1.createElement(a.Text,{className:Fe},e):t.React$1.createElement(a.Text,{color:"disabled",className:Fe},i.intl.formatMessage(se.defaultFolderSelectionButtonLabel))));et.displayName="FolderIconAndName";const tt=({setSelectedDestinationPath:r,selectedDestinationPath:s,isAbsolutePath:o,initialPath:n,onCancel:d,setTidyStateType:c,rootFolderDisplayName:u,isUsedInAutomation:_,handleAutoFolderSelected:m,ruleType:y,currentFolderPath:f})=>{const p=a.getUser(),[T,g]=t.React$1.useState(null!=s?s:n),E=t.React$1.useCallback((t=>{r(t),y===e.TidyUpType.keyphrase?c(e.TidyStateType.Keyphrase):c(e.TidyStateType.CustomFilters)}),[r,c]),[h,v]=t.React$1.useState(!1);if(h)return t.React$1.createElement(at,{selectedFolder:T,onAccept:E,onCancel:()=>v(!1)});const R=o&&s?s:n,M=t.React$1.createElement(l.FolderPicker,{user:p,webTimer:a.get_timer(),onFolderSelected:_?m:e=>{void 0!==e&&g(a.normalize(e))},rootName:u,initialPath:R,canSelectReadonly:!1,apiClient:{getFolderContents:a.getFolderContentsAPIv2},skipFocusOnMount:!0,forceFolderSelectedCallback:!0,size:"small",currentUserPath:f});return _?t.React$1.createElement("div",{className:a.classnames("folder-picker-container__fixed-height",Ie)},M):t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(Me,{label:se.title}),t.React$1.createElement(a.Modal.Body,{className:a.classnames("folder-picker-container__fixed-height",Ie)},M),t.React$1.createElement(a.Modal.Footer,null,t.React$1.createElement(a.Button,{variant:"transparent",onClick:d},i.intl.formatMessage(j)),t.React$1.createElement(a.Button,{variant:"opacity",onClick:()=>v(!0)},i.intl.formatMessage(se.newFolderButtonLabel)),t.React$1.createElement(a.Button,{variant:"primary",onClick:()=>{r(T),y===e.TidyUpType.keyphrase?c(e.TidyStateType.Keyphrase):c(e.TidyStateType.CustomFilters)},disabled:f===T},i.intl.formatMessage(se.folderSelectionButtonLabel))))};tt.displayName="FolderSelection";const at=({selectedFolder:e,onAccept:r,onCancel:s})=>{const o=({folderName:t})=>{var i;i={pathName:e,folderName:t,user:a.getUser(),checkFSWs:!1,selectCreatedFolder:!1,origin:a.CREATE_FOLDER_ACTION_ORIGIN_TYPE.TIDY_UP_MODAL},xe.dispatch(c.createFolder(i))},l=t.React$1.useRef(null),[d,u]=t.React$1.useState(""),_=d.length>255?i.intl.formatMessage(se.folderNameLengthError):function(e){return-1!==e.indexOf("/")||-1!==e.indexOf("\\")||-1!==e.indexOf(":")}(d)?i.intl.formatMessage(se.folderNameInvalidCharacterError):void 0;return t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(Me,{label:se.folderCreationTitleLabel}),t.React$1.createElement(a.Modal.Body,null,t.React$1.createElement("div",{className:_?be:void 0},t.React$1.createElement(n.FormLabel,{htmlFor:"new_folder_name_input"},i.intl.formatMessage(se.folderNameLabel)),t.React$1.createElement(a.TextInput,{ref:l,id:"new_folder_name_input",placeholder:i.intl.formatMessage(se.newFolderInputPlaceholderText),value:d,onChange:e=>u(e.currentTarget.value)}),!!_&&t.React$1.createElement(a.Text,{size:"xsmall",color:"error"},_))),t.React$1.createElement(a.Modal.Footer,null,t.React$1.createElement(a.Button,{variant:"opacity",onClick:s},i.intl.formatMessage(H)),t.React$1.createElement(a.Button,{variant:"primary",disabled:!!_||!d,onClick:()=>{o({folderName:d}),r(a.joinPathWithFileName({fqPath:e,fileName:d}))}},i.intl.formatMessage(se.folderCreationButtonLabel))))};at.displayName="FolderCreator";const it=({keyphraseParameters:e,onPreview:r,onCancel:s,onBack:o,setKeyphraseParameters:n,isUsedInAutomationModal:l,onApply:d,skipPreview:c,setTidyStateType:u,rootFolderDisplayName:_})=>{const m=t.React$1.useRef(null),[y,f]=t.react.exports.useState(e.keyphrase),p=((e,a)=>{const[i,r]=t.react.exports.useState(e);return t.react.exports.useEffect((()=>{const t=setTimeout((()=>{r(e)}),a);return()=>{clearTimeout(t)}}),[e,a]),i})(y,300);t.react.exports.useEffect((()=>{p!==e.keyphrase&&n({keyphrase:p})}),[e,n,p]);const T=e.keyphraseDestination,g=!(p&&void 0!==T),E=e=>{"Enter"===e.key&&m.current&&(g?m.current.blur():r())};return l?t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement("div",{className:"tidy-auto-keyphrase-view__text-input"},t.React$1.createElement(a.TextInput,{placeholder:i.intl.formatMessage(re.INPUT_PLACEHOLDER),onChange:e=>f(e.target.value),value:y,onKeyPress:()=>null,ref:m}),t.React$1.createElement(rt,{selectedDestinationPath:T,setTidyStateType:u,rootFolderDisplayName:_}))):t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(Me,{label:re.HEADER_LABEL}),t.React$1.createElement(a.Modal.Body,null,t.React$1.createElement(a.Text,{className:"tidy-keyphrase-view__input-label",isBold:!0},i.intl.formatMessage(re.INPUT_LABEL)),t.React$1.createElement(a.TextInput,{placeholder:i.intl.formatMessage(re.INPUT_PLACEHOLDER),onChange:e=>f(e.target.value),value:y,onKeyPress:E,ref:m}),t.React$1.createElement(rt,{selectedDestinationPath:T,setTidyStateType:u,rootFolderDisplayName:_})),t.React$1.createElement(a.Modal.Footer,null,t.React$1.createElement(a.Button,{variant:"transparent",onClick:o},i.intl.formatMessage(j)),t.React$1.createElement(a.Button,{variant:"opacity",onClick:s},i.intl.formatMessage(H)),t.React$1.createElement(a.Button,{variant:"primary",onClick:c?d:r,disabled:g},i.intl.formatMessage(c?X:J))))};it.displayName="TidyUpKeyphraseView";const rt=({selectedDestinationPath:r,setTidyStateType:s,rootFolderDisplayName:o})=>t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(a.Text,{isBold:!0,className:"tidy-keyphrase-view__dropdown-label"},i.intl.formatMessage(re.FOLDER_SELECTION_LABEL_GLOBAL)),t.React$1.createElement("div",{className:"tidy-keyphrase-view__folder-selection-block"},void 0!==r?t.React$1.createElement("div",{className:"tidy-keyphrase-view__folder-icon-global"},t.React$1.createElement(et,{folderName:a.filename(r,o)})):t.React$1.createElement(et,null),t.React$1.createElement(a.Button,{variant:"transparent",onClick:()=>{s(e.TidyStateType.KeyphraseFolderSelection)},className:"tidy-keyphrase-view__folder-selection-button"},i.intl.formatMessage(se.folderSelectionButtonLabel))));rt.displayName="DestinationSelectionSection";a.injectInternalStyle("metaserver/static/js/tidy_up/modal/filters_view/tidy_custom_filters.module.out.css",(e=>"._tidy-custom-filters-view__filter-definition_1l8f8_1{border:1px solid var(--color__faint__border);margin-top:var(--spacing__unit--2);padding:var(--spacing__unit--1_5)}._tidy-custom-filters-view__filters_1l8f8_6{max-height:490px;overflow-y:auto}._tidy-custom-filters-view__create-new-filter-container_1l8f8_11{height:18px;padding-top:10.5px}._tidy-custom-filters-view__rule-select-button-text_1l8f8_16{overflow:hidden;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:138px}._tidy-custom-filters-view__rule-select-button-container_1l8f8_24{display:flex;width:100%}._tidy-custom-filters-view__filter_row_1l8f8_29{display:flex;padding-bottom:var(--spacing__unit--1);padding-top:var(--spacing__unit--1)}._tidy-custom-filters-view__filter_input_1l8f8_35{padding-left:var(--spacing__unit--2);width:290px}._tidy-custom-filters-view__item_container_1l8f8_40{padding-top:var(--spacing__unit--1);width:290px}._tidy-custom-filters-view__chip_1l8f8_45{display:inline-block;padding-right:var(--spacing__unit--0_5)}._tidy-custom-filters-view__file_extension_button_label_1l8f8_50{align-content:flex-start;display:flex;width:250px}._tidy-custom-filters-view__file_extension_submenu_1l8f8_56>div{scrollbar-gutter:stable}._tidy-custom-filters-view__add-rule-button-container_1l8f8_60{display:flex;padding-bottom:var(--spacing__unit--1);padding-left:var(--spacing__unit--0_5)}._tidy-custom-filters-view__folder-selection-container_1l8f8_66{padding-bottom:var(--spacing__unit--1);padding-top:var(--spacing__unit--1)}._tidy-custom-filters-view__folder-selection-label_1l8f8_72{overflow:hidden;padding-right:var(--spacing__unit--1_5);padding-top:5px;text-align:right;white-space:nowrap;width:180px}._tidy-custom-filters-view__folder-selection-dropdown_1l8f8_81{padding-left:var(--spacing__unit--2)}._tidy-custom-filters-view__delete-filter-container_1l8f8_85{display:flex;justify-content:flex-end;margin-right:40px}._tidy-custom-filters-view__size-filter-row_1l8f8_91{align-items:column;display:flex;justify-content:space-between;margin-bottom:10px;width:290px}._tidy-custom-filters-view__size-filter-label_1l8f8_99{font:Atlas Grotesk;font-size:14;height:18px;min-width:138px}._tidy-custom-filters-view__size-filter-input_1l8f8_106{width:80px}._tidy-custom-filters-view__size-filter-unit_1l8f8_110{margin-left:10px;width:60px}._tidy-custom-filters-view__size-filter_error_1l8f8_115{margin-top:-10px}._tidy-custom-filters-view__folder-selection-container_1l8f8_66{display:flex}._tidy-custom-filters-view__folder-selection-block_1l8f8_123{border:1px solid var(--color__faint__border);display:flex;height:32px;padding-left:var(--spacing__unit--1);width:285px}._tidy-custom-filters-view__folder-icon_1l8f8_131{padding-top:3px;width:138px}._tidy-custom-filters-view__folder-selection-button_1l8f8_136{display:flex;justify-content:flex-end;margin-right:10px;padding-top:5px;width:152px}._tidy-custom-filters-view__show_more_class_name_1l8f8_144{cursor:pointer}"));const st="_tidy-custom-filters-view__filter-definition_1l8f8_1",ot="_tidy-custom-filters-view__filters_1l8f8_6",nt="_tidy-custom-filters-view__create-new-filter-container_1l8f8_11",lt="_tidy-custom-filters-view__rule-select-button-text_1l8f8_16",dt="_tidy-custom-filters-view__rule-select-button-container_1l8f8_24",ct="_tidy-custom-filters-view__filter_row_1l8f8_29",ut="_tidy-custom-filters-view__filter_input_1l8f8_35",_t="_tidy-custom-filters-view__item_container_1l8f8_40",mt="_tidy-custom-filters-view__chip_1l8f8_45",yt="_tidy-custom-filters-view__file_extension_button_label_1l8f8_50",ft="_tidy-custom-filters-view__file_extension_submenu_1l8f8_56",pt="_tidy-custom-filters-view__add-rule-button-container_1l8f8_60",Tt="_tidy-custom-filters-view__folder-selection-container_1l8f8_66",gt="_tidy-custom-filters-view__folder-selection-label_1l8f8_72",Et="_tidy-custom-filters-view__delete-filter-container_1l8f8_85",ht="_tidy-custom-filters-view__size-filter-row_1l8f8_91",vt="_tidy-custom-filters-view__size-filter-label_1l8f8_99",Rt="_tidy-custom-filters-view__size-filter-input_1l8f8_106",Mt="_tidy-custom-filters-view__size-filter-unit_1l8f8_110",St="_tidy-custom-filters-view__size-filter_error_1l8f8_115",At="_tidy-custom-filters-view__folder-selection-block_1l8f8_123",Ft="_tidy-custom-filters-view__folder-icon_1l8f8_131",It="_tidy-custom-filters-view__folder-selection-button_1l8f8_136",bt="_tidy-custom-filters-view__show_more_class_name_1l8f8_144";function Lt(e,t){throw new Error(`${t} (value=${e})`)}const Nt=new Map([["Images",["jpg","jpeg","bmp","png","tif","tiff","gif"]],["Camera files",["raw","raf","dng","nef","cr2","ari","arw","kdc","orf","rw2"]],["Design files",["indd","pct","dds","psd","tga","thm","ai","eps","ps","svg","3dm","3ds","dwg","dwl","dwl2","dwf","dxf","max","ttf","otf","eot","woff","ico","icns","vsd","dgn","cdr","idml","idlk","skp","sketch","hus"]],["Documents",["paper","ppt","pptx","pptm","pps","ppsx","ppsm","xlr","xls","xlsm","xlsx","doc","docx","docm","dotm","dotx","PDF","csv","txt"]],["ebook",["aep","epub","mobi","ibooks","koob","opf"]],["Data developer",["dat","sql","kml","xml","yml","sqlite","sqlite3","mdb","accdb","db","log","sav","dbf","tmp","sdf"]],["Audio",["aif","iff","m3u","m4a","mid","mp3","mpa","wav","wma","aiff","flac","arf"]],["Video",["3gp","asf","avi","flv","m4v","mov","mp4","mpg","srt","swf","vob","wmv","mpeg"]],["Compressed",["zip","rar","7z","gz","tar","bz","bz2"]],["Executable",["cab","exe","dmg","iso","msi","apk","ipa"]]]),wt=new Map([["Images",a.defineMessage({id:"dW3xfE",defaultMessage:"Images"})],["Camera files",a.defineMessage({id:"5nK6pv",defaultMessage:"Camera files"})],["Design files",a.defineMessage({id:"WLsq2k",defaultMessage:"Design files"})],["ebook",a.defineMessage({id:"sIoSkG",defaultMessage:"ebook"})],["Documents",a.defineMessage({id:"Vl9hPf",defaultMessage:"Documents"})],["Data developer",a.defineMessage({id:"8G7ImG",defaultMessage:"Data developer"})],["Audio",a.defineMessage({id:"m+/26v",defaultMessage:"Audio"})],["Video",a.defineMessage({id:"EV9ZNs",defaultMessage:"Video"})],["Compressed",a.defineMessage({id:"LDfQHc",defaultMessage:"Compressed"})],["Executable",a.defineMessage({id:"19V9Ik",defaultMessage:"Executable"})]]),Ct=a.defineMessage({id:"2Fjld/",defaultMessage:"Enter keyword"}),Ot=a.defineMessage({id:"B7xr1A",defaultMessage:"Select file extension"}),Dt=a.defineMessages({None:{id:"T+ub8I",defaultMessage:"Select rule"},Keyword:{id:"J9sJT/",defaultMessage:"Keyword"},FileExtension:{id:"XQ8kUV",defaultMessage:"File extension"},Size:{id:"iJDd0n",defaultMessage:"Size"}}),Pt=t.React$1.memo((({selectedFilterType:r,onRuleChange:n,primarySelection:l,options:d,onDeleteRule:c})=>{const[u,_]=t.React$1.useState(r),[m,y]=t.React$1.useState(Dt.None),[f,p]=t.React$1.useState(l);t.React$1.useEffect((()=>{T(u)}),[]),t.React$1.useEffect((()=>{switch(u){case e.TidyCustomFiltersType.Keyword:n({type:u,keywordRule:{keywords:f}});break;case e.TidyCustomFiltersType.FileExtension:n({type:u,fileExtensionRule:{fileExtensions:f}});break;case e.TidyCustomFiltersType.Size:n({type:u,sizeRule:{sizes:f}})}}),[f,u]);const T=t=>{switch(u!==t&&p([]),t){case e.TidyCustomFiltersType.Keyword:_(e.TidyCustomFiltersType.Keyword),y(Dt.Keyword);break;case e.TidyCustomFiltersType.FileExtension:_(e.TidyCustomFiltersType.FileExtension),y(Dt.FileExtension);break;case e.TidyCustomFiltersType.Size:_(e.TidyCustomFiltersType.Size),y(Dt.Size)}};let g=t.React$1.createElement(t.React$1.Fragment,null),E=!0;switch(u){case e.TidyCustomFiltersType.Keyword:g=t.React$1.createElement(Bt,{keywords:f,setKeywords:p});break;case e.TidyCustomFiltersType.FileExtension:g=t.React$1.createElement(Vt,{selectedFileExtensions:f,setSelectedFileExtensions:p});break;case e.TidyCustomFiltersType.Size:g=t.React$1.createElement(Yt,{sizes:f,setSizes:p});break;default:E=!1}return t.React$1.createElement("div",{className:ct},t.React$1.createElement(a.Menu.Wrapper,{matchContainingWidth:!0,onSelection:T},(({getContentProps:e,getTriggerProps:r})=>t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(a.Button,Object.assign({variant:"opacity",withDropdownIcon:!0},r()),t.React$1.createElement("div",{className:dt},t.React$1.createElement(a.Text,{className:lt},i.intl.formatMessage(m)))),t.React$1.createElement(a.Menu.Content,Object.assign({},e()),t.React$1.createElement(a.Menu.Segment,null,d.map((e=>t.React$1.createElement(a.Menu.SelectItem,{key:e,value:e,selected:e===u},i.intl.formatMessage(Dt[e]))))))))),t.React$1.createElement("div",{className:ut},g,g.type!==Yt&&t.React$1.createElement("div",{className:_t},t.React$1.createElement(s.ItemTruncationContainerWithoutCss,{containerMaxRows:1,items:f,itemsToMoreTooltipString:xt,renderItem:Ut(f,p),showMoreClassName:bt}))),E&&t.React$1.createElement(a.IconButton,{variant:"transparent",onClick:c,"data-testid":"delete-button"},t.React$1.createElement(a.UIIcon,{src:o.DeleteLine})))}));Pt.displayName="TidyCustomFiltersRow";const Ut=(e,i)=>({item:r,ref:s,index:o})=>t.React$1.createElement("div",{className:mt,key:o},t.React$1.createElement(a.InputChip,{key:r,size:"small",ref:s,onDelete:()=>{return t=r,void i(e.filter((e=>e!==t)));var t}},r)),xt=e=>e.map((e=>e)).join(" ");var kt;!function(e){e[e.none=0]="none",e[e.invalid_characters=1]="invalid_characters",e[e.too_large=2]="too_large",e[e.invalid_range=3]="invalid_range"}(kt||(kt={}));const Yt=t.React$1.memo((({sizes:e,setSizes:r})=>{const s=t.React$1.useRef(null),[o,n]=t.React$1.useState(2===e.length?e[0].split("_")[0]:"0"),[l,d]=t.React$1.useState(2===e.length?e[1].split("_")[0]:"0"),[c,u]=t.React$1.useState(2===e.length?e[0].split("_")[1]:"GB"),[_,m]=t.React$1.useState(2===e.length?e[1].split("_")[1]:"GB"),[y,f]=t.React$1.useState(kt.none),p=(e,t)=>"GB"===t?1024*parseInt(e,10):parseInt(e,10);t.React$1.useEffect((()=>/^[0-9]*$/.test(o)&&/^[0-9]*$/.test(l)?p(o,c)>102400?(r([]),void f(kt.too_large)):p(l,_)>p(o,c)?(r([]),void f(kt.invalid_range)):(r([o.toString()+"_"+c,l.toString()+"_"+_]),void f(kt.none)):(r([]),void f(kt.invalid_characters))),[y,o,l,c,_]);const T=(e=>{switch(e){case kt.none:return;case kt.invalid_characters:return i.intl.formatMessage(oe.SIZE_INVALID_CHARACTERS_ERROR_LABEL);case kt.too_large:return i.intl.formatMessage(oe.SIZE_TOO_LARGE_ERROR_LABEL);case kt.invalid_range:return i.intl.formatMessage(oe.SIZE_INVALID_RANGE_ERROR_LABEL);default:Lt(e)}})(y);return t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement("div",{className:ht},t.React$1.createElement("p",{className:vt},oe.FILES_GREATER_THAN_LABEL.defaultMessage),t.React$1.createElement("div",{className:Rt},t.React$1.createElement(a.TextInput,{value:l,onChange:e=>{d(e.currentTarget.value)},ref:s,isInvalid:y!==kt.none,"data-testid":"min-size-input"})),t.React$1.createElement("div",{className:Mt},t.React$1.createElement(a.Select,{id:"min-size-unit","data-testid":"size-unit",value:_,onChange:e=>m(e)},t.React$1.createElement(a.Select.Option,{value:"GB"},"GB"),t.React$1.createElement(a.Select.Option,{value:"MB"},"MB")))),t.React$1.createElement("div",{className:ht},t.React$1.createElement("p",{className:vt},oe.FILES_SMALLER_THAN_LABEL.defaultMessage),t.React$1.createElement("div",{className:Rt},t.React$1.createElement(a.TextInput,{value:o,onChange:e=>{n(e.currentTarget.value)},ref:s,isInvalid:y!==kt.none,"data-testid":"max-size-input"})),t.React$1.createElement("div",{className:Mt},t.React$1.createElement(a.Select,{id:"max-size-unit","data-testid":"size-unit",value:c,onChange:e=>u(e)},t.React$1.createElement(a.Select.Option,{value:"GB"},"GB"),t.React$1.createElement(a.Select.Option,{value:"MB"},"MB")))),y!==kt.none&&t.React$1.createElement("div",{className:St},t.React$1.createElement(a.Text,{size:"xsmall",color:"error"},T)))}));var $t;Yt.displayName="TidyUpSizeInput",function(e){e[e.none=0]="none",e[e.no_input=1]="no_input",e[e.invalid_characters=2]="invalid_characters",e[e.too_long=3]="too_long",e[e.already_exists=4]="already_exists"}($t||($t={}));const Bt=t.React$1.memo((({keywords:e,setKeywords:r})=>{const s=t.React$1.useRef(null),[o,n]=t.React$1.useState(""),[l,d]=t.React$1.useState($t.none);t.React$1.useEffect((()=>{/^[0-9a-zA-Z_]*$/.test(o)?o.length>15?d($t.too_long):l===$t.no_input&&0===o.length||(-1===e.indexOf(o)?d($t.none):d($t.already_exists)):d($t.invalid_characters)}),[l,o,e]);const c=(e=>{switch(e){case $t.none:return;case $t.no_input:return i.intl.formatMessage(oe.KEYWORD_EMPTY_INPUT_ERROR_LABEL);case $t.invalid_characters:return i.intl.formatMessage(oe.KEYWORD_INVALID_CHARACTERS_ERROR_LABEL);case $t.too_long:return i.intl.formatMessage(oe.KEYWORD_TOO_LONG_ERROR_LABEL);case $t.already_exists:return i.intl.formatMessage(oe.KEYWORD_ALREADY_EXISTS_ERROR_LABEL);default:Lt(e)}})(l);return t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(a.TextInput,{placeholder:i.intl.formatMessage(Ct),value:o,onChange:e=>n(e.currentTarget.value),onKeyDown:t=>{"Enter"===t.key&&l===$t.none&&(""===o?d($t.no_input):(r([...e,o]),n("")))},ref:s,isInvalid:l!==$t.none}),l!==$t.none&&t.React$1.createElement(a.Text,{size:"xsmall",color:"error"},c))}));Bt.displayName="TidyUpKeywordTextInput";const Vt=t.React$1.memo((({selectedFileExtensions:e,setSelectedFileExtensions:s})=>{const o=t=>{t.target.checked?s([...e,t.target.value]):s(e.filter((e=>e!==t.target.value)))},n=t=>{var a;const i=null!==(a=Nt.get(t.target.value))&&void 0!==a?a:[];if(t.target.checked){const t=new Set([...e,...i]);s(Array.from(t))}else s(e.filter((e=>!i.includes(e))))},l=t=>{var a;const i=null!==(a=Nt.get(t))&&void 0!==a?a:[];let r=0;return i.forEach((t=>{e.includes(t)&&r++})),r>0&&r!==i.length},d=t=>{var a;const i=null!==(a=Nt.get(t))&&void 0!==a?a:[];let r=0;return i.forEach((t=>{e.includes(t)&&r++})),r===i.length};return t.React$1.useEffect((()=>{s(e)}),[e]),t.React$1.useEffect((()=>{s(e)}),[e]),t.React$1.createElement(a.Menu.Wrapper,{hasMaxHeight:336},(({getContentProps:s,getTriggerProps:c})=>t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(a.Button,Object.assign({variant:"opacity",withDropdownIcon:!0},c()),t.React$1.createElement("div",{className:yt},t.React$1.createElement(a.Text,null,i.intl.formatMessage(Ot)))),t.React$1.createElement(a.Menu.Content,Object.assign({},s()),t.React$1.createElement(a.Menu.Segment,null,Array.from(Nt.entries()).map((s=>{var c;const[u,_]=s,m=null!==(c=wt.get(u))&&void 0!==c?c:{};return t.React$1.createElement(a.Menu.Submenu,{id:u,key:u,withTriggerContent:i.intl.formatMessage(m),withLeftAccessory:t.React$1.createElement(r.Checkbox,{checked:d(u),isIndeterminate:l(u),readOnly:!0,tabIndex:-1,value:u,onChange:n}),contentClassName:ft},t.React$1.createElement(a.Menu.Segment,null,_.map((i=>t.React$1.createElement(a.Menu.SelectItem,{key:i,withLeftAccessory:t.React$1.createElement(r.Checkbox,{checked:e.includes(i),readOnly:!0,tabIndex:-1,value:i,onChange:o})},i)))))})))))))}));Vt.displayName="TidyUpFileExtensionSelection";const zt=[e.TidyCustomFiltersType.FileExtension,e.TidyCustomFiltersType.Keyword,e.TidyCustomFiltersType.Size],Kt=({onPreview:r,onCancel:s,onBack:o,setCustomFilterParameters:n,customFilterParameters:l,setTidyStateType:d,setCustomFilterFolderSelectionIndex:c,rootFolderDisplayName:u,isUsedInAutomation:_,updateLastSetRuleType:m,onApply:y,skipPreview:f})=>{t.React$1.useEffect((()=>{0===l.filters.length&&n({filters:[{id:Date.now(),rules:[{type:e.TidyCustomFiltersType.None}],actions:{destination:void 0}}]})}),[l]);const p=t.React$1.useCallback(((e,t,a,i)=>{const r={id:l.filters[e].id,rules:[...l.filters[e].rules],actions:Object.assign({},l.filters[e].actions)};void 0!==a&&void 0!==t&&(r.rules[t]=a),i&&(r.actions.destination=i),n({filters:l.filters.slice(0,e).concat([r]).concat(l.filters.slice(e+1))})}),[l]),T=()=>l.filters.every((e=>e.rules.every((t=>(t.keywordRule&&t.keywordRule.keywords&&t.keywordRule.keywords.length>0||t.fileExtensionRule&&t.fileExtensionRule.fileExtensions&&t.fileExtensionRule.fileExtensions.length>0||t.sizeRule&&2==t.sizeRule.sizes.length)&&void 0!==e.actions.destination)))),g=t.React$1.useCallback((t=>{const a={id:l.filters[t].id,rules:[...l.filters[t].rules,{type:e.TidyCustomFiltersType.None}],actions:l.filters[t].actions};n({filters:l.filters.slice(0,t).concat([a]).concat(l.filters.slice(t+1))})}),[l]),E=t.React$1.useCallback((()=>{n({filters:[...l.filters,{id:Date.now(),rules:[{type:e.TidyCustomFiltersType.None}],actions:{destination:void 0}}]})}),[l]),h=t.React$1.useCallback(((t,a)=>{const i=l.filters[t].rules;i.splice(a,1);const r={id:l.filters[t].id,rules:0===i.length?[{type:e.TidyCustomFiltersType.None}]:i,actions:0===i.length?{destination:void 0}:l.filters[t].actions};n({filters:l.filters.slice(0,t).concat([r]).concat(l.filters.slice(t+1))}),m(e.TidyCustomFiltersType.None)}),[l,m]),v=t.React$1.useCallback((t=>{const a=Array.from(l.filters);a.splice(t,1),n({filters:a}),m(e.TidyCustomFiltersType.None)}),[l,m]);return _?t.React$1.createElement(Wt,{customFilterParameters:l,addRule:g,addFilter:E,deleteFilter:v,areFiltersValid:T,updateFilter:p,deleteRule:h,rootFolderDisplayName:u,setCustomFilterFolderSelectionIndex:c,setTidyStateType:d,isUsedInAutomation:_,updateLastSetRuleType:m}):t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(Me,{label:oe.HEADER_LABEL}),t.React$1.createElement(a.Modal.Body,null,t.React$1.createElement(Wt,{customFilterParameters:l,addRule:g,addFilter:E,deleteFilter:v,areFiltersValid:T,updateFilter:p,deleteRule:h,rootFolderDisplayName:u,setCustomFilterFolderSelectionIndex:c,setTidyStateType:d,isUsedInAutomation:_,updateLastSetRuleType:m})),t.React$1.createElement(a.Modal.Footer,null,t.React$1.createElement(a.Button,{variant:"transparent",onClick:o},i.intl.formatMessage(j)),t.React$1.createElement(a.Button,{variant:"opacity",onClick:s},i.intl.formatMessage(H)),t.React$1.createElement(a.Button,{variant:"primary",onClick:f?y:r,disabled:!T()},i.intl.formatMessage(f?X:J))))};Kt.displayName="TidyUpCustomFiltersView";const Gt=({filterIndex:a,ruleIndex:i,type:r,updateFilter:s,rule:o,options:n,deleteRule:l,updateLastSetRuleType:d})=>{var c;const u=t.React$1.useCallback((e=>{s(a,i,e),d(e.type)}),[s,d,a,i]);let _=[];switch(r){case e.TidyCustomFiltersType.None:1===n.length&&(r=n[0]);break;case e.TidyCustomFiltersType.Keyword:_=o.keywordRule?o.keywordRule.keywords:[];break;case e.TidyCustomFiltersType.FileExtension:_=o.fileExtensionRule?o.fileExtensionRule.fileExtensions:[];break;case e.TidyCustomFiltersType.Size:_=o.sizeRule?null===(c=o.sizeRule)||void 0===c?void 0:c.sizes:[]}return t.React$1.createElement("div",{key:r},t.React$1.createElement(Pt,{selectedFilterType:r,onRuleChange:u,primarySelection:_,options:n,onDeleteRule:()=>l(a,i),key:r}))};Gt.displayName="TidyCustomFilterList";const Wt=({customFilterParameters:r,addRule:s,addFilter:o,deleteFilter:n,areFiltersValid:l,updateFilter:d,deleteRule:c,setTidyStateType:u,setCustomFilterFolderSelectionIndex:_,rootFolderDisplayName:m,isUsedInAutomation:y,updateLastSetRuleType:f})=>t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(a.Text,null,i.intl.formatMessage(oe.BODY_LABEL)),t.React$1.createElement("div",{className:y?"":ot},r.filters.map(((o,l)=>t.React$1.createElement("div",{className:st,key:o.id},o.rules.map(((e,a)=>{const i=o.rules.map((e=>e.type)),r=zt.filter((e=>!i.includes(e)));return t.React$1.createElement(Gt,{key:e.type,filterIndex:l,ruleIndex:a,type:e.type,rule:e,updateFilter:d,options:r,deleteRule:c,updateLastSetRuleType:f})})),t.React$1.createElement("div",{className:pt},t.React$1.createElement(a.Button,{variant:"transparent",onClick:()=>s(l),disabled:o.rules.length===zt.length||o.rules.some((t=>t.type===e.TidyCustomFiltersType.None))},i.intl.formatMessage(oe.ADD_RULE_LABEL))),!(1===o.rules.length&&o.rules[0].type===e.TidyCustomFiltersType.None)&&t.React$1.createElement("div",{className:Tt},t.React$1.createElement("div",{className:gt},t.React$1.createElement(a.Text,{color:"faint"},i.intl.formatMessage(oe.FOLDER_SELECTION_LABEL))),t.React$1.createElement("div",{className:At},void 0!==o.actions.destination?t.React$1.createElement("div",{className:Ft},t.React$1.createElement(et,{folderName:a.filename(o.actions.destination,m)})):t.React$1.createElement(et,null),t.React$1.createElement(a.Button,{variant:"transparent",onClick:()=>{_(l),u(e.TidyStateType.CustomFilterFolderSelection)},className:It},i.intl.formatMessage(se.folderSelectionButtonLabel)))),(!(1===o.rules.length&&o.rules[0].type===e.TidyCustomFiltersType.None)||r.filters.length>1)&&t.React$1.createElement("div",{className:Et},t.React$1.createElement(a.Button,{variant:"transparent",onClick:()=>n(l)},i.intl.formatMessage(oe.DELETE_FILTER_LABEL))))))),t.React$1.createElement("div",{className:nt},t.React$1.createElement(a.Button,{variant:"transparent",withIconLeft:t.React$1.createElement(a.UIIcon,{src:a.AddCircleLine,role:"presentation"}),onClick:o,disabled:!l()},i.intl.formatMessage(oe.CREATE_FILTER_LABEL))));Wt.displayName="CustomFiltersSelection",e.AutomationConversions=G,e.DayRelatedFolderStructure=C,e.FolderSelection=tt,e.MonthRelatedFolderStructure=N,e.PAP_Attempt_Tidyup=Oe,e.PREVIEW_FILE_LIMIT=100,e.TIDY_CONFIRMATION=me,e.TIDY_ERROR=te,e.TIDY_INACTIVE_OPTION=Te,e.TIDY_MODAL_HEADER=fe,e.TIDY_MODAL_SUBTITLE=pe,e.TIDY_OPTION_STRINGS=ge,e.TIDY_PENDING=Q,e.TIDY_PREVIEW=ae,e.TIDY_SMART_PREVIEW=ie,e.TIDY_TIME_FRAME_FILTER=ne,e.TIDY_UP_MODAL_APPLY_LABEL=X,e.TIDY_UP_MODAL_BACK_LABEL=j,e.TIDY_UP_MODAL_CANCEL_LABEL=H,e.TIDY_UP_MODAL_CLOSE_LABEL=q,e.TIDY_UP_MODAL_PREVIEW_LABEL=J,e.TIDY_UP_MONTH_DESCRIPTION=Re,e.TIDY_UP_MONTH_SELECTION=ve,e.TIDY_UP_YEAR_DESCRIPTION=he,e.TIDY_UP_YEAR_SELECTION=Ee,e.TidyConversions=W,e.TidyTimeFrameFolderDateRuleLabels=le,e.TidyTimeFrameFolderNamingDayLabels=_e,e.TidyTimeFrameFolderNamingMonthLabels=ce,e.TidyTimeFrameFolderNamingYearLabels=ue,e.TidyTimeFrameFolderStructureLabels=de,e.TidyUpCustomFiltersView=Kt,e.TidyUpKeyphraseView=it,e.TidyUpModalHeader=Me,e.YearRelatedFolderStructure=w,e.asyncApplyTidyup=e=>d.__awaiter(void 0,void 0,void 0,(function*(){var r,s,o,n,l,c,u,_;const{currentUserId:m,targetPath:y,namespaceId:f,tidyParameters:p,actionSurface:T,openModalCallback:g,shouldApplyAutomation:E,shouldRemoveAutomation:h,previousAutomationRuleSet:v,sourceToDestinationPaths:R,onSuccess:M,onError:S,initialPendingTextOverride:A}=e;let F=!1;const I=h||E,b=null!=A?A:i.intl.formatMessage(Q.PENDING_TEXT_1),L=i.intl.formatMessage(Q.STILL_WORKING_TEXT_1);a.Snackbar.show(t.React$1.createElement(a.Snackbar,{id:Ue,title:b,variant:"sync"})),setTimeout((()=>{F||a.Snackbar.update(t.React$1.createElement(a.Snackbar,{id:Ue,title:L,variant:"sync"}))}),5e3);const N=W.tidyTypeToFlowsAPI(p);let w=Promise.resolve(void 0),C=Promise.resolve(void 0);E?w=Ye(m,y,T,N):h&&(C=$e(m,y,T));const O=W.tidyTypeToApiV2(p);let D;D=R?function(e,t,i,r){return d.__awaiter(this,void 0,void 0,(function*(){const s=new a.UserApiV2Client;return Ce((()=>s.ns("tidy_up").rpc("apply_preview",{rule:i,source_path:t,entries_to_tidy:r,source:"web_modal"},{subjectUserId:e})),e,s)}))}(m,y,O,R):function(e,t,i,r){return d.__awaiter(this,void 0,void 0,(function*(){const s=new a.UserApiV2Client;return Ce((()=>s.ns("tidy_up").rpc("tidy",{request:r,source_path:t,ns_id:i,source:"web_modal"},{subjectUserId:e})),e,s)}))}(m,y,f,O);const[P,U,x]=yield Promise.all([D,w,C]);if(F=!0,P.isError||P.result.entries.length>0&&P.result.entries.every((e=>"failure"===e[".tag"]))){S&&S(P.error[".tag"]);const e=P.isError?-1:P.result.entries.length;return void ze(y,p,T,E,h,g,m,e,f,!!U||!!x)}if(!1===U||!1===x)return void Ke(m,U,x,y,T,N);const k=P.result.entries,Y=k.some((e=>"failure"===e[".tag"])),$=(null!==(r=P.result.moved_files_changesets)&&void 0!==r?r:[]).length>0||(null!==(s=P.result.created_directories_changesets)&&void 0!==s?s:[]).length>0||(null!==(n=null===(o=P.result.renamed_directories)||void 0===o?void 0:o.changesets)&&void 0!==n?n:[]).length>0?qe(y,T,m,f,k,null!==(l=P.result.moved_files_changesets)&&void 0!==l?l:[],null!==(c=P.result.created_directories_changesets)&&void 0!==c?c:[],null!==(_=null===(u=P.result.renamed_directories)||void 0===u?void 0:u.changesets)&&void 0!==_?_:[],I?v:void 0):void 0;if(Y)return void Ge(k.filter((e=>"failure"!==e[".tag"])).length,k.filter((e=>"failure"===e[".tag"])).length,y,p,T,E,h,g,m,f,$);0===k.length?We():(M&&M(),Be(k.length,y,p,T,E,h,m,f,$))})),e.createRequestPreviewDataFn=(e,t)=>{const i=t.replace(/\/$/,"");return r=>d.__awaiter(void 0,void 0,void 0,(function*(){var s,o,n,l,d,c,u,_,m;const y=new a.UserApiV2Client,f=[];try{let t=yield y.ns("files").rpc("list_folder",{path:i},{subjectUserId:e});for(f.push(...t.entries);t.has_more;)t=yield y.ns("files").rpc("list_folder/continue",{cursor:t.cursor},{subjectUserId:e}),f.push(...t.entries)}catch(e){return{error_tag:"list_files"}}const p={},T=[];for(const e of f)"file"===e[".tag"]&&(p[e.id]=e,T.push(e.id));if(0===T.length)return{error_tag:"no_files"};let g;null===(s=r.onPreviewDatafetchListfolderDone)||void 0===s||s.call(r);try{g=yield y.ns("tidy_up").rpc("smart_preview",{request:{".tag":"smart_move_request",entry_ids:T}},{subjectUserId:e})}catch(e){const t=null===(o=null==e?void 0:e.error)||void 0===o?void 0:o[".tag"];if(!t)return{error_tag:"other"};switch(t){case"path":return{error_tag:"path_not_found"};case"multiple_containing_folders":case"no_files":case"no_containing_folder":case"no_destinations":case"cannot_move_entry":case"list_files":return{error_tag:t};default:return{error_tag:"other"}}}const E={};for(const e of null!==(n=g.destinations)&&void 0!==n?n:[])e.name&&(E[e.id]={id:e.id,folderName:e.name,path:`${t}/${e.name}`});const h=[];for(const e of null!==(l=g.entries)&&void 0!==l?l:[])(null===(d=p[e.id])||void 0===d?void 0:d.name)&&e.destination_ids&&e.suggested_destination_id&&h.push({id:e.id,filename:p[e.id].name,allowedDestinationIds:e.destination_ids.map(O),suggestedDestinationId:e.suggested_destination_id,isMlSuggestion:null!==(c=e.is_ml_suggestion)&&void 0!==c?c:null,predictId:null!==(u=e.prediction_id)&&void 0!==u?u:null,score:null!==(_=e.score)&&void 0!==_?_:null,suggestionConfidence:W.confidenceLevelFromApi(e.confidence_interval),path:null!==(m=p[e.id].path_lower)&&void 0!==m?m:null});return{entries:h,destinations:E}}))},e.defaultTidyParameters=I,e.enforceExhaustive=function(e){return e},e.getKeyphrases=function(e,t){return d.__awaiter(this,void 0,void 0,(function*(){const i=new a.UserApiV2Client;try{return(yield i.ns("tidy_up").rpc("get_keyphrases",{path:t},{subjectUserId:e})).entries}catch(e){return[]}}))},e.getStoredFilters=function(e,t){return d.__awaiter(this,void 0,void 0,(function*(){const i=new a.UserApiV2Client;try{const a=yield i.ns("tidy_up_api_proxy").rpc("get_stored_custom_filters",{folder_path:t},{subjectUserId:e});let r=[];return void 0!==a.filters&&void 0!==a.filters.filters&&(r=a.filters.filters),r}catch(e){return[]}}))},e.initialTidyState=E,e.preview=function(e,t,i){return d.__awaiter(this,void 0,void 0,(function*(){const r=new a.UserApiV2Client;try{return{result:yield r.ns("tidy_up").rpc("preview",{rule:i,source_path:a.normalize(t)},{subjectUserId:e})}}catch(e){return{isError:!0,error:e.error,error_summary:e.summary}}}))},e.throwEnforceExhaustive=Lt}));
//# sourceMappingURL=c_modal_filters_view_tidy_filters.js-vfl3Vn1GC.map
