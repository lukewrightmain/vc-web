define(["exports","./e_ui_page_files_router","./e_edison","./c_ui-icon_fill_star","./c_starred_constants","./c_core_i18n","./c_common_uuid"],(function(e,t,a,r,s,i,o){"use strict";const n=[s.StarredSource.HOME_STARRED,s.StarredSource.HOME_RECENTS];const l=new class{logClick(e,a,r,s,i,o){if("BROWSE"===i)return Promise.resolve();const l=[];if(n.includes(i)){const i=o?t.StarredLoggingTypes.CLICK_STAR:t.StarredLoggingTypes.CLICK_UNSTAR;l.push(t.logHomeActivity({eventName:i,role:e.role,extra:{resource_id:a,id_type:r,is_dir:s}}))}const c=o?t.WebUserActionLogEvent.STAR:t.WebUserActionLogEvent.REMOVE_STAR;return l.push(t.WebUserActionLog.log(e.id,c,{resource_id:a,id_type:r,is_dir:s,role:e.role,source:i})),Promise.all(l)}},c=({user:e,id:s,idType:n,isDir:c,source:d,itemName:u,onStarClick:S,tooltipPlacement:g,isReadOnly:_,isTabbing:m,tabIndex:p,starButtonClassName:f,alwaysShowUnstarred:R,ariaLabelledBy:b})=>{const C=t.useSelector((e=>t.getFileStarredData(e,s)));let E=!1,y=!0;(null==C?void 0:C.loadingState)===t.StarredLoadingStateEnum.LOAD_SUCCESS&&(E=C.isStarred,y=!1);const[A]=a.React$1.useState((()=>o.generateUUID("star-"))),L=t.useDispatch(),T=a.React$1.useMemo((()=>_?E?i.intl.formatMessage({id:"LAVXPn",defaultMessage:"Starred"}):null:E?i.intl.formatMessage({id:"XQNf7s",defaultMessage:"Remove from Starred"}):i.intl.formatMessage({id:"iGfiaV",defaultMessage:"Add to Starred"})),[E,_]),v=a.React$1.useCallback((a=>{if(a.stopPropagation(),a.preventDefault(),!y){const a=!E;l.logClick(e,s,n,c,d,a),S&&S(a),L(t.updateStarredStatus({id:s,idType:n,newStatus:a,itemName:u,showSnackbar:!0}))}}),[y,E]);if(void 0===E)return null;if(_&&!E)return null;const M={star__toggle:!0,"star__toggle--starred":E,"star__toggle--unstarred":!E&&!m&&!R,"star__toggle--loading":y};return a.React$1.createElement(t.Tooltip,{title:T,placement:g||"top"},a.React$1.createElement("button",{className:t.classnames(M,f),role:"button","aria-pressed":E,"aria-label":T,onClick:v,onDoubleClick:v,disabled:_,tabIndex:p,id:A,"aria-labelledby":t.classnames(A,b)},a.React$1.createElement("span",{hidden:!0},T),a.React$1.createElement(t.UIIcon,{src:E?r.StarFill:t.StarLine})))};c.displayName="_Star";const d=t.requireCssWithComponent(c,["/static/metaserver/static/css/starred/star-vflRNeO9W.css"]);e.Star=d}));
//# sourceMappingURL=c_starred_star.js-vfl7-Qput.map
