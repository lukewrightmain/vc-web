define(["exports","./e_edison","./e_ui_page_files_router","./c_file_store_utils","./c_flows_components_error_boundary","./c_flows_constants","./c_flows_utils_file_utils","./c_flows_lib_api","./c_flows_redux_actions","./c_flows_redux_reducer","./c_flows_redux_selectors","./c_flows_redux_store","./c_tslib","./c_core_uri","./c_lodash-es_lodash","./c_apex-metrics_src_types","metaserver/static/js/modules/constants/files_spa","./e_core_exception","./c_core_exception_info","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","./c_core_notify","./c_core_i18n","./c_src_sink_index","./c_core_browser_detection","metaserver/static/js/modules/core/langpack","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/viewer","metaserver/static/js/modules/constants/auth","./c_api_v2_noauth_client","./c_browser_cookies","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/ajax_strings","./c_csrf","./c_core_xhr","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/webtiming","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/trademark","metaserver/static/js/modules/constants/campaigns_orchestration","metaserver/static/js/modules/constants/maestro_nav_strings","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/undo_strings","metaserver/static/js/modules/constants/contacts","metaserver/static/js/modules/constants/login_and_register","./c_flows_utils_bolt","./c_flows_logging_flows_loggers","./c_flows_utils_notifications","./c_flows_utils_browse_logger","./c_src_common_constants","./c_flows_hooks_workflow_builder_hooks","./c_data_action_creators_index","./c_files_view_file_actions_file_from_metadata","./c_file_actions_strings","./c_history","./c_ux_analytics_dispatch_custom_event","./c_browse_crypto_subtle_digest","./c_workflow_builder_workflow_actions_action_ui_config","./c_ui-icon_line_audio","./c_ui-icon_line_arrow-right","./c_ui-icon_line_zip","./c_truncate_index","./c_controls_index","./c_form_row_index","./c_ui-icon_line_image","./c_ui-icon_line_edit","./c_ui-icon_line_move","./c_ui_tree_view","./c_components_spacer_index","./c_ui-icon_line_add-folder","./c_ui-icon_line_cursor","./c_naming_conventions_utils","./c_ui-icon_line_tag","./c_tagging_components_tags_container","./c_components_item_truncation_container","./c_hooks_resize_observer","./c_resize-observer-polyfill_dist_ResizeObserver","./c_tagging_components_tags_search","./c_typeahead_index","./c_modal_filters_view_tidy_filters","./c_ui-icon_line_delete","./c_folder_dialog_folder_picker_dig","./c_table_columns_file_name_column","./c_src_table","./c_ui-icon_line_arrow-down","./c_ui-icon_line_arrow-up","./c_react-table_index","./c_src_icons_file_icon","./c_src_icons_file_icon_extensions","./c_combinations_index","./c_spectrum_icon_arrow_index","./c_icon_templates_stateless_index","./c_spectrum_svg_icon_bundle","./c_keymaster","./c_browse_interface","./c_breadcrumb_index","./c_ui-icon_line_more-horizontal","./c_ui_hoc","./c_ui-icon_line_stamp","./c_plugin_utils_tilingFunc","./c_plugin_utils_getImageDefaultSizes"],(function(e,t,s,o,_,c,i,n,r,a,l,u,d,m,f,g,h,p,b,w,v,x,S,F,j,k,R,B,T,E,I,A,y,O,q,U,z,C,D,G,P,W,N,L,X,H,J,K,M,Q,V,Y,Z,$,ee,te,se,oe,_e,ce,ie,ne,re,ae,le,ue,de,me,fe,ge,he,pe,be,we,ve,xe,Se,Fe,je,ke,Re,Be,Te,Ee,Ie,Ae,ye,Oe,qe,Ue,ze,Ce,De,Ge,Pe,We,Ne,Le,Xe,He,Je,Ke){"use strict";const Me={getFolderRulesConfig:r.getWorkflowStepsConfig,getUserExperiments:r.getUserExperiments,setShouldSubscribeToBolt:r.setShouldSubscribeToBolt,mergeUserAutomations:r.mergeUserAutomations,getSavedWorkflowTemplates:r.getSavedWorkflowTemplates,setInheritanceBlockingFqPaths:r.setInheritanceBlockingFqPaths},Qe=({unsortedFiles:e,path:_,getFolderRulesConfig:c,getUserExperiments:r,shouldSubscribeToBolt:l,setShouldSubscribeToBolt:d,setInheritanceBlockingFqPaths:m,mergeUserAutomations:f,currentNSID:g,shouldSeeSubfolderInheritance:h,getSavedWorkflowTemplates:p,currentAutomation:b})=>{const w=s.usePrevious(e),v=s.usePrevious(_);return t.react.exports.useEffect((()=>{b&&d(!0)}),[b,d]),t.react.exports.useEffect((()=>{if(h)return;const t=[];e.forEach(((e,s)=>{if(i.isEligibleForAutomation(e))if(w){const _=w.get(s);_&&o.getFileRevisionId(_)===o.getFileRevisionId(e)||t.push(e.fq_path)}else t.push(e.fq_path)})),t.length>0&&n.getFolderRulesBatch(t).then((e=>{const t=a.buildAutomationDataFromGetRuleBatchResult(e);f(t),t.length>0&&d(!0)}))}),[e]),t.react.exports.useEffect((()=>{h||"/"!==_&&""!==_&&n.getFolderRules(_).then((e=>{const t=a.buildAutomationDataFromGetRuleResult(e,_,g);f(t),t.length>0&&d(!0)}),(e=>{}))}),[_]),t.react.exports.useEffect((()=>{h&&v!==_&&n.getSubfolderRules(_,h).then((e=>{const t=a.convertSubfolderRulesResultToAutomations(e,g);f(t),m(a.getInheritanceBlockingFqPathResult(e)),t.length>0&&d(!0)}))}),[_,v,g,f,h,d]),t.react.exports.useEffect((()=>{h&&m(e.filter((e=>i.shouldBlockInheritance(e))).map(((e,t)=>t)).toArray())}),[e,h,m]),i.useFlowsBolt({shouldSubscribeToBolt:l}),t.react.exports.useEffect((()=>{u.getStoreForAutomations(),c(),r(),p()}),[]),null};Qe.displayName="FlowsRootComponentInternal";const Ve=s.connect(((e,t)=>({unsortedFiles:s.unsortedFiles(e),shouldSubscribeToBolt:l.shouldSubscribeToBolt(e),shouldSeeSubfolderInheritance:l.shouldSeeSubfolderInheritance(e),currentNSID:s.context(e).currentNSID,currentAutomation:l.getUserAutomation(t.path)(e)})),Me)(Qe),Ye=_.withFlowsErrorBoundary(Ve,{excTags:[c.EXCLOG_TAG_BROWSE_ROOT],ampTags:{surface:c.EXCLOG_TAG_BROWSE_ROOT}});e.FlowsRoot=Ye}));
//# sourceMappingURL=c_flows_components_flows_browse_root.js-vflNhW3H0.map
