define(["exports","./e_ui_page_files_router","./c_core_uri"],(function(e,t,i){"use strict";const n=function(){let e=!1;const i=[];return t.dispatcherSingleton.dispatch_begin=()=>e=!0,t.dispatcherSingleton.dispatch_end=function(){e=!1;try{return Array.from(i).map((e=>e()))}finally{i.length=0}},function(t){return e?Array.from(i).includes(t)?void 0:i.push(t):t()}}();class s{constructor(e){"function"==typeof this._init&&this._init(),this._change_listeners=[],this._dispatcher=e||t.dispatcherSingleton,this.dispatchToken=this._dispatcher.register(this._new_payload_wrapper.bind(this))}destructor(){this._dispatcher.unregister(this.dispatchToken),this.remove_all_change_listeners()}emit_change(){for(const e of this._change_listeners)n(e)}add_change_listener(e){i.assert(!this._change_listeners.includes(e),"adding duplicate change listener not allowed"),this._change_listeners.push(e)}remove_change_listener(e){this._change_listeners=this._change_listeners.filter((t=>t!==e))}remove_all_change_listeners(){this._change_listeners.length=0}_new_payload_wrapper(e){var t;(null===(t=null==e?void 0:e.action)||void 0===t?void 0:t.type)===this.constructor.WIPE_TYPE&&"function"==typeof this._init&&this._init(),this._new_payload(e)}_new_payload(e){throw new Error("Abstract method - must be implemented")}}s.WIPE_TYPE="WIPE_ALL",e.Store=s}));
//# sourceMappingURL=c_flux_base_store.js-vflIj3lZT.map
