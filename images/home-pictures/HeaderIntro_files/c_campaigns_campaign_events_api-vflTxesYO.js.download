define(["exports","./c_tslib","./e_edison","./e_core_exception","./e_ui_page_files_router","./c_core_exception_info"],(function(e,n,i,t,a,r){"use strict";function s({err:e,severity:n=r.SEVERITY.NONCRITICAL,exc_extra:i={}}){t.reportException({err:e,tags:["megaphone","robe"],severity:n,exc_extra:i})}function c(e,n,i){const t=new a.UserApiV2Client,r={megaphone_impression_id:e.campaignImpressionId,megaphone_request_context:{user_id:e.userId},campaign_event_name:n,campaign_event_info:i,campaign_id:o(e.campaignId),version_id:o(e.campaignVariantId)};return t.ns("megaphone").rpc("log_campaign_event",r,{subjectUserId:e.userId}).catch((i=>{s({err:i,exc_extra:{user_id:e.userId,impression_id:e.campaignImpressionId,event_name:n[".tag"]}})}))}function o(e){switch(typeof e){case"string":return parseInt(e,10);case"number":return e;default:return}}i.React$1.createContext(void 0),e.createMegaphoneCampaignImpressionContext=function(e,n,i){let t;try{t={campaignId:n,campaignVariantId:i,campaignImpressionId:e,userId:a.mustGetActiveUserId()}}catch(e){s({err:e})}return t},e.logCampaignClick=function(e,n){return c(e,{".tag":"click"},{cta_id:n})},e.logCampaignDismissed=function(e){return c(e,{".tag":"dismissed"})},e.logCampaignImpression=function(e){return c(e,{".tag":"impression"})},e.setCampaignDismissedInUserMetadata=function(e,i,t){return n.__awaiter(this,void 0,void 0,(function*(){if(e)try{const{CAMPAIGNS_TOOLKIT_USER_DISMISSED_CAMPAIGNS:n}=yield a.getUserMetadata(["CAMPAIGNS_TOOLKIT_USER_DISMISSED_CAMPAIGNS"],t),i=new Set(n?n.split(":"):"").add(`${e}`),r=Array.from(i).join(":");yield a.setUserMetadata({CAMPAIGNS_TOOLKIT_USER_DISMISSED_CAMPAIGNS:r},t)}catch(n){s({err:n,exc_extra:{user_id:t,impression_id:i,campaign_id:e,event_name:"setCampaignDismissedInUserMetadata"}})}}))}}));
//# sourceMappingURL=c_campaigns_campaign_events_api.js-vflhR0IR2.map
