define(["exports","./e_edison","./e_ui_page_files_router","./c_tagging_components_tags_search","./c_tagging_components_tags_container","./c_core_i18n","./c_lodash-es_lodash"],(function(e,t,a,s,r,n,i){"use strict";const o=t.React$1.createContext({onSelection:e=>{},onTagDelete:e=>{},fetchAllTagsSuggestions:e=>{},allTagsSuggestions:void 0}),l=t.react.exports.memo((({id:e,title:s})=>{const[n,i]=t.react.exports.useState(!1),o=t.react.exports.useRef(null);return t.react.exports.createElement(t.react.exports.Fragment,null,t.react.exports.createElement(a.IconButton,{id:e,size:"small",variant:"transparent",ref:o,onClick:()=>i(!n)},t.react.exports.createElement(a.UIIcon,{className:r.classes.tagSectionTooltip,src:a.HelpLine,size:"small","aria-label":"Who can see my tags?"})),t.react.exports.createElement(a.Tooltip.Control,{open:n,triggerRef:o,auto:!0,placement:"top"},t.react.exports.createElement(a.Text,{tagName:"p",color:"standard",inverse:!0},s)))}));l.displayName="Toggletip";const g=t.react.exports.memo((()=>t.react.exports.createElement("div",{className:r.classes.tgTitle},t.react.exports.createElement(a.Text,{variant:"paragraph",size:"small",isBold:!0},n.intl.formatMessage({id:"itCJSp",defaultMessage:"Tags"})),t.react.exports.createElement(a.Text,{variant:"paragraph",size:"xsmall",color:"faint"},n.intl.formatMessage({id:"P4Onh/",defaultMessage:"Who can see my tags?"}),t.react.exports.createElement(l,{id:"toggletip-button",title:n.intl.formatMessage({id:"yDMC43",defaultMessage:"Tags appear when people are signed in. Anyone with edit access to the file can edit its tags."})})))));g.displayName="TagsSectionHeader";const c=({files:e,user:l,tags:c,actionSurface:d,userSurveyEventSurface:m})=>{const{onTagDelete:p,onSelection:u,allTagsSuggestions:_,fetchAllTagsSuggestions:x}=t.react.exports.useContext(o),f=null!=c?c:i.intersectionBy(...e.map((e=>e.tags?e.tags.map((e=>e.value)):[])),"tag_text"),h=f.filter(a.isUserGeneratedTag).map((e=>e.tag_text)),T=1===e.length&&!a.canEditOverviewForFile(e[0]);return t.react.exports.createElement("div",{className:"tg-typeahead"},t.react.exports.createElement(g,null),t.react.exports.createElement(s.TagsSearch,{user:l,maxTagsReached:h.length>=a.MAX_TAGS_PER_ITEM,getStrings:t.react.exports.useCallback((()=>{return t=e.length>1,{addTypeaheadEmptyState:n.intl.formatMessage({id:"HXMCAM",defaultMessage:"Use words that will help you or teammates find this file"}),addTag:t?n.intl.formatMessage({id:"JVJ1Cl",defaultMessage:"Add a tag to these items"}):n.intl.formatMessage({id:"EKsLMI",defaultMessage:"Add a tag"}),invalidCharsError:n.intl.formatMessage({id:"gXZd4i",defaultMessage:"Use letters (a-z), scripts, numbers (0-9), and underscores ( _ )"}),maxTagsReachedError:n.intl.formatMessage({id:"Rsy4dh",defaultMessage:"{maxTags} tags is the maximum. Remove existing tags to add new tags."},{maxTags:a.MAX_TAGS_PER_ITEM}),tooLongError:n.intl.formatMessage({id:"l83VsE",defaultMessage:"32 characters is the maximum"}),alreadyExistsError:n.intl.formatMessage({id:"PPUctr",defaultMessage:"That tag is already here"}),createTagPrefix:n.intl.formatMessage({id:"/bryMC",defaultMessage:"Create tag:"}),readOnlyError:n.intl.formatMessage({id:"ijHzJJ",defaultMessage:"Only the editors of this file can add tags"})};var t}),[e.length]),readOnly:T,excludeResults:h,onSelection:u,onInputFocus:()=>{a.logSelectTagBar(l,e,d)},onStartTyping:()=>{a.logStartTypingTag(l,e,d)},onInputBlur:e=>{0===e.length&&a.UserSurvey.trackEvent("click_on_tag_file_and_does_not_add_tag",m)},allTagsSuggestions:_,fetchAllTagsSuggestions:x}),t.react.exports.createElement(r.TagsContainer,{tags:f,onTagClick:t=>{a.logTagClick(l,e,d,t),a.redirectToSearchByTag(l,t.tag_text)},onTagDelete:T?void 0:p,containerClassName:"right-rail-tags-container",chipClassName:"right-rail-tag-chip",showMoreClassName:"right-rail-tag-chip"}))};c.displayName="TagsSection";a.injectInternalStyle("metaserver/static/js/tagging/components/section/tags_section_preview.module.out.css",(e=>"._previews-container_15gac_1{padding:0 0 24px}._redux-container_15gac_5{margin-top:20px}"));e.TagsContext=o,e.TagsSection=c,e.classes={previewsContainer:"_previews-container_15gac_1",reduxContainer:"_redux-container_15gac_5"}}));
//# sourceMappingURL=c_components_section_tags_section_preview.js-vfl1i0eLS.map
