define(["exports","./c_tslib","./e_ui_page_files_router","./e_edison"],(function(t,e,o,s){"use strict";class n extends s.react.exports.Component{componentWillUnmount(){this.portalRootElement&&this.unMountPortal()}componentDidMount(){!this.portalRootElement&&this.props.isShowInitially&&this.mountPortal()}mountPortal(t){if(!this.portalRootElement){this.portalRootElement=document.createElement("div");(this.props.parentElement||document.body).appendChild(this.portalRootElement);const e=s.react.exports.createElement("div",{"aria-hidden":!1,className:this.props.className||"mc-portal-content",id:this.props.id,role:this.props.role,ref:t=>this.portalContentElementRef=t},this.props.children);s.reactDom.exports.render(e,this.portalRootElement,t)}}unMountPortal(){if(this.portalRootElement){s.reactDom.exports.unmountComponentAtNode(this.portalRootElement);(this.props.parentElement||document.body).removeChild(this.portalRootElement),this.portalRootElement=null,this.portalContentElementRef=null}}render(){return null}}class i extends s.react.exports.Component{constructor(t){super(t),this.handleMouseOver=this.handleMouseOver.bind(this),this.handleMouseOut=this.handleMouseOut.bind(this),this.handleOnFocus=this.handleOnFocus.bind(this),this.handleOnBlur=this.handleOnBlur.bind(this),this.handleClick=this.handleClick.bind(this),this.closePortal=this.closePortal.bind(this),this.handleKeyEvent=this.handleKeyEvent.bind(this),this.handleScrollEvent=this.handleScrollEvent.bind(this),this.state={isShown:!!t.isShowInitially}}componentDidMount(){this.state.isShown&&this.portalInstance.mountPortal((()=>{this.resolvePortalPosition()}))}componentDidUpdate(){this.state.isShown&&this.portalInstance?(this.mountListeners(),this.props.onWillShow&&this.props.onWillShow(),this.portalInstance.mountPortal((()=>{this.props.onDidShow&&this.props.onDidShow(),this.resolvePortalPosition()}))):this.portalInstance&&(this.unMountListeners(),this.props.onWillClose&&this.props.onWillClose(),this.portalInstance.unMountPortal(),this.wrapperElementRef=null)}componentWillUnmount(){this.portalInstance&&this.portalInstance.unMountPortal()}mountListeners(){document.addEventListener("keydown",this.handleKeyEvent,!1),document.addEventListener("scroll",this.handleScrollEvent,!1)}unMountListeners(){document.removeEventListener("keydown",this.handleKeyEvent,!1),document.removeEventListener("scroll",this.handleScrollEvent,!1)}handleOnFocus(t){this.props.showOnClick||this.showPortal()}handleOnBlur(t){this.props.closeOnBlur&&this.closePortal()}handleMouseOver(t){this.props.showOnMouseMove&&this.showPortal()}handleMouseOut(t){this.props.showOnMouseMove&&this.hidePortal()}handleClick(t){this.props.showOnClick&&this.showPortal()}handleKeyEvent(t){27===t.keyCode&&this.closePortal()}handleScrollEvent(){this.state.isShown&&this.resolvePortalPosition()}closePortal(){this.hidePortal(),this.props.onDidClose&&this.props.onDidClose()}showPortal(){this.setState({isShown:!0})}hidePortal(){this.setState({isShown:!1})}resolvePortalPosition(){if(this.portalInstance&&this.wrapperElementRef){const t=function(t,e,o,s=0){let n={top:0,left:0};const i=t.getBoundingClientRect(),l=e.getBoundingClientRect();switch(o){case"below":n={top:i.top+i.height+s,left:i.left+i.width/2-l.width/2};break;case"left":n={top:i.top+i.height/2-l.height/2,left:i.left-l.width-s};break;case"right":n={top:i.top+i.height/2-l.height/2,left:i.left+i.width+s};break;case"above":n={top:i.top-l.height-s,left:i.left+i.width/2-l.width/2}}return n}(this.wrapperElementRef.childElementCount<2&&this.wrapperElementRef.firstElementChild||this.wrapperElementRef,this.portalInstance.portalContentElementRef,this.props.positioning||"above",this.props.positionOffset);this.portalInstance.portalContentElementRef.style.top=t.top+"px",this.portalInstance.portalContentElementRef.style.left=t.left+"px"}}render(){return s.react.exports.createElement("div",{"aria-describedby":this.props.id,onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseOut,onFocusCapture:this.handleOnFocus,onBlur:this.handleOnBlur,onClick:this.handleClick,className:this.props.wrapperClassName?this.props.wrapperClassName:"mc-positioned-portal-wrapper",ref:t=>this.wrapperElementRef=t},s.react.exports.createElement(n,{ref:t=>this.portalInstance=t,className:"mc-positioned-portal-content",parentElement:this.props.portalParentElement},this.props.renderContent&&this.props.renderContent()||null),this.props.children)}}const l={above:12,below:12,left:14,right:14};let h=0;class r extends s.react.exports.Component{constructor(t){super(t),this.renderContent=this.renderContent.bind(this),this.handlePortalWillClose=this.handlePortalWillClose.bind(this),this.handlePortalWillShow=this.handlePortalWillShow.bind(this),this.handleAnimationEnd=this.handleAnimationEnd.bind(this),this.tooltipWasVisible=!1,this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this)}handleAnimationEnd(t){"delayed-tooltip"===t.animationName&&(h=Date.now(),this.tooltipWasVisible=!0,this.props.onDidShow&&this.props.onDidShow())}shouldShowDelayed(){return h<Date.now()-3e3}handlePortalWillShow(){document.addEventListener("animationend",this.handleAnimationEnd),this.props.onWillShow&&this.props.onWillShow()}handlePortalWillClose(){document.removeEventListener("animationend",this.handleAnimationEnd),this.tooltipWasVisible&&(h=Date.now()),this.tooltipWasVisible=!1,this.props.onWillClose&&this.props.onWillClose()}showTooltip(){this.positionedPortalEl.showPortal()}hideTooltip(){this.positionedPortalEl.hidePortal()}renderContent(){if(this.props.tooltipContent){const{positioning:t="above",forceSingleLine:e=!1,className:n}=this.props,i=this.shouldShowDelayed(),l=o.classnames({"mc-tooltip":!0,"mc-tooltip-bottom":"below"===t,"mc-tooltip-top":"above"===t,"mc-tooltip-left":"left"===t,"mc-tooltip-right":"right"===t,"mc-tooltip-delay":i,"mc-tooltip-no-delay":!i,"mc-tooltip-single-line":e},n);return s.react.exports.createElement("div",{className:l},s.react.exports.createElement("div",{className:"mc-tooltip-body"},this.props.tooltipContent))}return null}render(){const t=this.props,{renderContent:n=this.renderContent,showOnMouseMove:h=!0,closeOnBlur:r=!0,showOnClick:a=!1,positioning:p="above",id:d=o.generateUUID("tooltip"),className:c}=t,m=e.__rest(t,["renderContent","showOnMouseMove","closeOnBlur","showOnClick","positioning","id","className"]);return s.react.exports.createElement(i,Object.assign({renderContent:n,showOnMouseMove:h,closeOnBlur:r,showOnClick:a,positioning:p,positionOffset:l[p],id:d},m,{onWillShow:this.handlePortalWillShow,onWillClose:this.handlePortalWillClose,role:"tooltip",ref:t=>this.positionedPortalEl=t}),this.props.children)}}t.Portal=n,t.PositionedPortal=i,t.Tooltip=r}));
//# sourceMappingURL=c_spectrum_tooltip.js-vflOJdOrb.map
