define(["exports","./e_edison","./e_ui_page_files_router","./c_action_bar_file_actions","./c_history","./c_core_i18n","./c_controls_index","./c_tslib","./c_core_uri","./c_lodash-es_lodash","./c_apex-metrics_src_types","metaserver/static/js/modules/constants/files_spa","./e_core_exception","./c_core_exception_info","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","./c_core_notify","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/viewer","metaserver/static/js/modules/constants/auth","./c_api_v2_noauth_client","./c_browser_cookies","./c_src_sink_index","./c_core_browser_detection","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/ajax_strings","./c_csrf","./c_core_xhr","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/webtiming","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/trademark","metaserver/static/js/modules/constants/campaigns_orchestration","metaserver/static/js/modules/constants/maestro_nav_strings","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/undo_strings","metaserver/static/js/modules/constants/contacts","metaserver/static/js/modules/constants/login_and_register","metaserver/static/js/modules/core/langpack","./c_src_simple-action-bar_action_bar_types","./c_ui-icon_line_to-do","./c_sharing_gating_util","./c_unity_check_file_cache","./c_unity_features","metaserver/static/js/modules/constants/unity","./c_browse_file_actions_action_handlers","./c_views_copy_link_mini_modal","./c_share_modal_evolution_utils_logging","./c_src_utils_logging","./c_components_sharing_spinner","./c_ui-icon_line_link","./c_truncate_index","./c_clipboard_v3","./c_sharing_ui_util","./c_contacts_contact_token_state","./c_icon_icon_helper","./c_sharing_settings_utils_sharing_settings_util","./c_downloads","./c_extensions_data_selectors","./c_share_download_ui_api","./c_integrations_data_selectors","./c_browse_interface","./c_file_actions_portable_go_to_folder","./c_browse_actions","./c_files_view_file_actions_file_from_metadata","./c_file_actions_strings","./c_data_action_creators_index","./c_browse_crypto_subtle_digest","./c_action_bar_file_actions_logging","./c_files_view_file_actions_snackbars","./c_sync_everything_hive_logger","./c_pap-events_previews_delete_file","./c_sharing_async_share_modal_util","./c_flows_utils_async_modal_launchers","./c_file_viewer_async_controller","./c_src_logging_performance","./c_cloud_docs_gdd_migration_gdd_ui_blocking","./c_plusplus_file_actions","./c_vault_constants","./c_src_file_extension_extension_constants","./c_gdd_migration_ui_utils","./c_file_imports_gdrive_file_picker","./c_components_modals_show_modal","./c_spectrum_modal_utility_modal","./c_spectrum_tertiary_link_tertiary_list","./c_icon_templates_actionable_index","./c_spectrum_svg_icon_bundle","./c_spectrum_icon_form_index","./c_icon_templates_stateless_index","./c_exenv_index","./c_ux_analytics_modal_tracking","./c_file_transfers_async_browse_entry_point_onboarding_modal_async","./c_starred_actions","./c_starred_constants","./c_starred_star","./c_ui-icon_fill_star","./c_common_uuid","./c_files_view_files_view_logging","./c_sharing_browse_exports","./c_file_store_utils","./c_file_transfers_lib_urls","./c_src_common_constants2","./c_browse_tts","./c_action_bar_action_bar_strings","./c_ui-icon_line_automation","./c_flows_redux_store","./c_flows_redux_reducer","./c_flows_lib_api","./c_flows_logging_flows_loggers","./c_src_common_constants","./c_flows_constants","./c_flows_redux_selectors","./c_ui-icon_line_comment","./c_ui-icon_line_copy","./c_action_bar_action_bar_constants","./c_file_actions_portable_copy","./c_hive_schemas_web-modal-activity","./c_file_actions_portable_move","./c_ui_fileops_actions","./c_ux_analytics_dispatch_custom_event","./c_ui-icon_line_delete","./c_ui-icon_line_download","./c_ui-icon_line_edit","./c_ui-icon_line_convert-file","./c_flows_conversions_conversion_actions","./c_flows_conversions_convert","./c_flows_redux_actions","./c_flows_utils_browse_logger","./c_workflow_builder_workflow_actions_action_ui_config","./c_ui-icon_line_audio","./c_ui-icon_line_arrow-right","./c_ui-icon_line_zip","./c_form_row_index","./c_ui-icon_line_image","./c_ui-icon_line_move","./c_ui_tree_view","./c_components_spacer_index","./c_ui-icon_line_add-folder","./c_ui-icon_line_cursor","./c_naming_conventions_utils","./c_ui-icon_line_tag","./c_tagging_components_tags_container","./c_components_item_truncation_container","./c_hooks_resize_observer","./c_resize-observer-polyfill_dist_ResizeObserver","./c_tagging_components_tags_search","./c_typeahead_index","./c_modal_filters_view_tidy_filters","./c_folder_dialog_folder_picker_dig","./c_table_columns_file_name_column","./c_src_table","./c_ui-icon_line_arrow-down","./c_ui-icon_line_arrow-up","./c_react-table_index","./c_src_icons_file_icon","./c_src_icons_file_icon_extensions","./c_combinations_index","./c_spectrum_icon_arrow_index","./c_keymaster","./c_breadcrumb_index","./c_ui-icon_line_more-horizontal","./c_ui_hoc","./c_ui-icon_line_stamp","./c_plugin_utils_tilingFunc","./c_plugin_utils_getImageDefaultSizes","./c_flows_flows_client","./c_ui-icon_line_file","./c_ui-icon_line_video","./c_spectrum_icon_partners_index","./c_icon_shortcuts_icon","./c_icon_file_icon","./c_ui_title_bubble","./c_ui_overlay","./c_raf_throttle","./c_ui-icon_line_folder-show","./c_ui-icon_line_settings","./c_file_uploader_utils","./c_pap-events_enums_file_type-utils","metaserver/static/js/modules/constants/global_file_upload","./c_base64","./c_upload_kit_lib_types","./c_growth_ui_teams_web_actions_logger_events","./c_sharing_wizard_async_wizard_modals","./c_extensions_extensions_menu_component_v2","./c_spectrum_tooltip","./c_ui-icon_line_dropbox-replay","./c_ui-icon_line_dropbox","./c_ui-icon_line_finder","./c_ui-icon_line_globe","./c_ui-icon_line_show","./c_extensions_extensions_utils","metaserver/static/js/modules/constants/payments","./c_account_email","./c_account_email_verify_reasons","./c_ui_modal_dig","./c_ui_input_dig","./c_ui-icon_fill_fail","./c_file_viewer_sdk_file_viewer_experiments","metaserver/static/js/modules/constants/file_viewer_configuration","metaserver/static/js/modules/constants/file_viewer_feature_experiments","metaserver/static/js/modules/constants/file_viewer_flows_experiments","metaserver/static/js/modules/constants/reel","./c_ui-icon_line_delete-forever","./c_ui-icon_line_file-request","./c_ui-icon_line_restore","./c_ui-icon_line_share-arrow","./c_components_approval-forms_approval_request_modal","./c_flows_approval_approval_io_client","./c_components_approval-forms_approval_checkbox_in_share","./c_components_approval-forms_gating_utils","./c_extensions_split_share_button","./c_ui-icon_line_send","./c_ui-icon_line_signature","./c_ui-icon_line_rewind","./c_ui-icon_line_lock","./c_ui-icon_line_highlight","./c_shallow_equal","./c_ui-icon_line_thumbs-up","./c_flows_approval_approval_request_modal","./c_ui-icon_line_add-to-collection","./c_components_saver_modal_index","./c_collections_utils_file_identifier","./c_ui-icon_line_add","./c_ui-icon_line_collection","./c_ui-icon_line_sort-type","./c_collections_utils_thumbnails","./c_collections_lib_survey","./c_sync_everything_strings","./c_conversions_actions_unzip","./c_photo-editor_plugin_show-edit-plugin"],(function(e,t,i,s,o,c,n,a,_,l,r,d,u,m,p,f,g,v,b,h,y,w,R,x,S,E,F,N,$,M,C,k,z,j,O,q,A,L,I,T,D,B,U,W,H,P,Y,G,J,Q,X,V,Z,K,ee,te,ie,se,oe,ce,ne,ae,_e,le,re,de,ue,me,pe,fe,ge,ve,be,he,ye,we,Re,xe,Se,Ee,Fe,Ne,$e,Me,Ce,ke,ze,je,Oe,qe,Ae,Le,Ie,Te,De,Be,Ue,We,He,Pe,Ye,Ge,Je,Qe,Xe,Ve,Ze,Ke,et,tt,it,st,ot,ct,nt,at,_t,lt,rt,dt,ut,mt,pt,ft,gt,vt,bt,ht,yt,wt,Rt,xt,St,Et,Ft,Nt,$t,Mt,Ct,kt,zt,jt,Ot,qt,At,Lt,It,Tt,Dt,Bt,Ut,Wt,Ht,Pt,Yt,Gt,Jt,Qt,Xt,Vt,Zt,Kt,ei,ti,ii,si,oi,ci,ni,ai,_i,li,ri,di,ui,mi,pi,fi,gi,vi,bi,hi,yi,wi,Ri,xi,Si,Ei,Fi,Ni,$i,Mi,Ci,ki,zi,ji,Oi,qi,Ai,Li,Ii,Ti,Di,Bi,Ui,Wi,Hi,Pi,Yi,Gi,Ji,Qi,Xi,Vi,Zi,Ki,es,ts,is,ss,os,cs,ns,as,_s,ls,rs,ds,us,ms,ps){"use strict";const fs=({children:e,path:s,param:o})=>{const c=i.normalize(s)+i.normalize(o);return t.React$1.cloneElement(e,{fqpath:c})};fs.displayName="ParamPathJoiner",s.getStoreForFolderSubscriptions();const gs=({path:e,requestFlightStatus:i,folderSubscription:o,fetchFolderSubscription:c,createFolderSubscription:n,deleteFolderSubscription:a,editFolderSubscription:_,logAction:l,currentNSID:r,children:d})=>{t.React$1.useEffect((()=>{c(e)}),[e,c]);const u=t.react.exports.useCallback(((t,i)=>n(e,t,{ns_id:r,origin:i})),[e,n,r]),m=t.react.exports.useCallback((t=>a(e,{ns_id:r,origin:t})),[e,a,r]),p=t.react.exports.useCallback((t=>_(e,t,{ns_id:r})),[e,_,r]),f=t.react.exports.useCallback((e=>l(e,{ns_id:r})),[r,l]);return t.React$1.cloneElement(d,{loading:i===s.RequestFlightStatus.INFLIGHT||i===s.RequestFlightStatus.IDLE,error:i===s.RequestFlightStatus.ERROR,folderSubscription:o,createFolderSubscription:u,deleteFolderSubscription:m,editFolderSubscription:p,logAction:f,path:e})};gs.displayName="FolderSubscriptionLoaderInner";const vs=i.connect(((e,{path:t})=>({requestFlightStatus:s.getRequestState(e,t).status,folderSubscription:s.folderSubscription(e,t),currentNSID:i.context(e).currentNSID,logAction:(i,o)=>s.logAction(i,e,t,o)})),{fetchFolderSubscription:s.fetchFolderSubscription,createFolderSubscription:s.createFolderSubscription,deleteFolderSubscription:s.deleteFolderSubscription,editFolderSubscription:s.editFolderSubscription})(gs),bs=({children:e})=>{const[i,c]=t.react.exports.useState(o.DBHistory.deconstruct_url().qargs[s.FOLLOW_MODAL_QUERY_PARAM]);return t.react.exports.useEffect((()=>{function e(e,t){c(t[s.FOLLOW_MODAL_QUERY_PARAM])}const t="/"+o.DBHistory.get_url().split(/[/?]/)[1];return o.DBHistory.add_callback(t,e),()=>{o.DBHistory.remove_callback(t,e)}}),[i]),void 0===i||Array.isArray(i)?null:t.React$1.cloneElement(e,{param:i})};bs.displayName="QueryParamFilter";const hs=e=>{const{multi:s,groupLabelId:o,name:c,value:a,onChange:_,checked:l,children:r}=e,d=s?n.Checkbox:n.RadioButton,u=`folder-subscription-customization-modal__${c}-${a}`;return t.React$1.createElement(i.Text,{tagName:"label",id:u},t.React$1.createElement(d,{"aria-labelledby":[o,u].join(" "),name:c,value:a,onChange:_,checked:l}),r)};hs.displayName="ToggleInput";const ys=({value:e,onUpdate:s})=>{const o="folder-subscription-customization-modal__activity-group";return t.React$1.createElement("div",{className:"folder-subscription-customization-modal__fieldset"},t.React$1.createElement(i.Text,{id:o,className:"folder-subscription-customization-modal__question",isBold:!0},c.intl.formatMessage({id:"YkAOU3",defaultMessage:"What should we notify you about?"})),t.React$1.createElement("div",{className:"folder-subscription-customization-modal__answers"},t.React$1.createElement("div",{className:"folder-subscription-customization-modal__input"},t.React$1.createElement(hs,{multi:!0,groupLabelId:o,name:"activity",value:"file_added",onChange:()=>s(Object.assign(Object.assign({},e),{file_added:!e.file_added})),checked:e.file_added}),t.React$1.createElement(i.Text,null,c.intl.formatMessage({id:"h+RmaB",defaultMessage:"Files added"}))),t.React$1.createElement("div",{className:"folder-subscription-customization-modal__input"},t.React$1.createElement(hs,{multi:!0,groupLabelId:o,name:"activity",value:"file_deleted",onChange:()=>s(Object.assign(Object.assign({},e),{file_deleted:!e.file_deleted})),checked:e.file_deleted}),t.React$1.createElement(i.Text,null,c.intl.formatMessage({id:"J5BuTc",defaultMessage:"Files deleted"})))))};ys.displayName="ActivityFieldset";const ws=({value:e,onUpdate:o})=>{const n="folder-subscription-customization-modal__frequency-group";return t.React$1.createElement("div",{className:"folder-subscription-customization-modal__fieldset"},t.React$1.createElement(i.Text,{id:n,className:"folder-subscription-customization-modal__question",isBold:!0},c.intl.formatMessage({id:"MJgs6m",defaultMessage:"How often should we email you?"})),t.React$1.createElement("div",{className:"folder-subscription-customization-modal__answers folder-subscription-customization-modal__frequency-answers"},t.React$1.createElement("div",{className:"folder-subscription-customization-modal__input"},t.React$1.createElement(hs,{multi:!1,groupLabelId:n,name:"frequency",value:"instant",onChange:()=>o(s.Frequencies.INSTANT),checked:"instant"===e[".tag"]}),t.React$1.createElement(i.Text,null,c.intl.formatMessage({id:"pU/As6",defaultMessage:"As activity occurs"}))),t.React$1.createElement("div",{className:"folder-subscription-customization-modal__input"},t.React$1.createElement(hs,{multi:!1,groupLabelId:n,name:"frequency",value:"daily",onChange:()=>o(s.Frequencies.DAILY),checked:"daily"===e[".tag"]}),t.React$1.createElement(i.Text,null,c.intl.formatMessage({id:"0X+Fnj",defaultMessage:"Once a day"})))))};ws.displayName="FrequencyFieldset";const Rs=({onCancel:e,onConfirm:s,canConfirm:o})=>t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(i.Button,{type:"button",variant:"opacity",onClick:e},c.intl.formatMessage({id:"2hfya7",defaultMessage:"Cancel"})),t.React$1.createElement(i.Button,{type:"button",variant:"primary",onClick:s,disabled:!o,autoFocus:!0},c.intl.formatMessage({id:"dB+YMZ",defaultMessage:"Confirm"})));Rs.displayName="Footer";const xs=({folderName:e,subscriptionState:o})=>t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(i.Title,{size:"standard",className:"folder-subscription-customization-modal__title"},c.intl.formatMessage({id:"VJewNj",defaultMessage:"Set notification options"})," "),t.React$1.createElement(i.Text,{size:"standard"},o===s.FolderSubscriptionState.FOLLOWING?c.intl.formatMessage({id:"5nBf6U",defaultMessage:"You are following {folderName}."},{folderName:t.React$1.createElement("strong",{key:"folderName"},e)}):c.intl.formatMessage({id:"NvBP0X",defaultMessage:"You are about to follow {folderName}."},{folderName:t.React$1.createElement("strong",{key:"folderName"},e)})));xs.displayName="Header";const Ss={file_added:!0,file_deleted:!0};class Es extends t.React$1.PureComponent{constructor(){var e,t,i,c,n,a;super(...arguments),this.state={frequency:null!==(i=null===(t=null===(e=this.props.folderSubscription)||void 0===e?void 0:e.settings)||void 0===t?void 0:t.frequency)&&void 0!==i?i:s.Frequencies.INSTANT,activity_types:null!==(a=null===(n=null===(c=this.props.folderSubscription)||void 0===c?void 0:c.settings)||void 0===n?void 0:n.activity_types)&&void 0!==a?a:Ss},this.cancel=()=>{this.close(),this.props.onClose()},this.close=()=>{o.DBHistory.remove_query_param(s.FOLLOW_MODAL_QUERY_PARAM)},this.confirm=()=>{const e=this.state;this.props.onSave(e,s.FolderSubscriptionOrigin.SideMenu),this.close()},this.updateFrequency=e=>{this.setState({frequency:e})},this.updateActivities=e=>{this.setState({activity_types:e})}}render(){const{path:e,folderSubscription:s}=this.props,o=this.state.activity_types.file_added||this.state.activity_types.file_deleted;return t.React$1.createElement(i.Modal,{open:!0,isCentered:!0,ariaHideApp:!1,width:500,overlayClassName:"folder-subscription-customization-modal",onAfterOpen:this.props.onOpen,onRequestClose:this.cancel,withCloseButton:c.intl.formatMessage({id:"a2rDhR",defaultMessage:"Close"})},t.React$1.createElement(i.Modal.Header,{hasBottomSpacing:"title-standard"},t.React$1.createElement(xs,{folderName:i.filename(e),subscriptionState:null==s?void 0:s.subscriptionState})),t.React$1.createElement(i.Modal.Body,{className:"folder-subscription-customization-modal__body"},t.React$1.createElement(ys,{onUpdate:this.updateActivities,value:this.state.activity_types}),t.React$1.createElement(ws,{onUpdate:this.updateFrequency,value:this.state.frequency})),t.React$1.createElement(i.Modal.Footer,null,t.React$1.createElement(Rs,{onCancel:this.cancel,onConfirm:this.confirm,canConfirm:o})))}}Es.displayName="UnstyledCustomizationModal";const Fs=i.requireCssWithComponent(Es,["/static/metaserver/static/css/folder_subscriptions/customize-vflMf7jTO.css"]),Ns=e=>{if(!("loading"in e)||e.loading)return null;const{createFolderSubscription:o,editFolderSubscription:c,folderSubscription:n,logAction:a,path:_}=e,l=(null==n?void 0:n.subscriptionState)===s.FolderSubscriptionState.FOLLOWING?c:o;return t.React$1.createElement(Fs,{path:_,folderSubscription:n,onSave:l,onOpen:()=>a(i.WebUserActionLogEvent.OPEN_FOLDER_FOLLOW_SETTINGS_MODAL),onClose:()=>a(i.WebUserActionLogEvent.CLOSE_FOLDER_FOLLOW_SETTINGS_MODAL)})};Ns.displayName="ModalFormAdapter",Ns.displayName="ModalFormAdapter";const $s=({fqpath:e})=>void 0===e?null:t.React$1.createElement(vs,{path:e},t.React$1.createElement(Ns,null));$s.displayName="InnerCustomizationModalController";const Ms=({path:e})=>t.React$1.createElement(bs,null,t.React$1.createElement(fs,{path:e},t.React$1.createElement($s,null)));Ms.displayName="CustomizationModalController",Ms.displayName="CustomizationModalController",e.CustomizationModalController=Ms}));
//# sourceMappingURL=c_folder_subscriptions_customization_customization_modal_controller.js-vflXS3GKU.map
