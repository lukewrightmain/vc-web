define(["exports","./c_tslib","./e_edison","./e_ui_page_files_router","./c_apex-metrics_src_types","./c_api_v2_noauth_client"],(function(e,o,t,i,n,l){"use strict";var c,s,a,r,d,_,u,m,p,f,g,h;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.ARCHIVE=1]="ARCHIVE",e[e.AUDIO=2]="AUDIO",e[e.CLOUD_DOC=3]="CLOUD_DOC",e[e.EXCEL=4]="EXCEL",e[e.HTML=5]="HTML",e[e.IMAGE=6]="IMAGE",e[e.LINKFILE=7]="LINKFILE",e[e.OTHER_TYPE=8]="OTHER_TYPE",e[e.SSR_DOC=9]="SSR_DOC",e[e.RAW_HTML=10]="RAW_HTML",e[e.RESTRICTED=11]="RESTRICTED",e[e.VIDEO=12]="VIDEO"}(c||(c={})),n.proto3.util.setEnumType(c,"file_viewer_preview_metadata.PreviewType",[{no:0,name:"UNKNOWN"},{no:1,name:"ARCHIVE"},{no:2,name:"AUDIO"},{no:3,name:"CLOUD_DOC"},{no:4,name:"EXCEL"},{no:5,name:"HTML"},{no:6,name:"IMAGE"},{no:7,name:"LINKFILE"},{no:8,name:"OTHER_TYPE"},{no:9,name:"SSR_DOC"},{no:10,name:"RAW_HTML"},{no:11,name:"RESTRICTED"},{no:12,name:"VIDEO"}]);class v extends n.Message{constructor(e){super(),this.isDir=!1,this.isSymlink=!1,this.bytes=n.protoInt64.zero,this.filename="",this.sortKey="",this.href="",this.previewType=c.UNKNOWN,this.ts=n.protoInt64.zero,this.nsId=n.protoInt64.zero,this.sjid=n.protoInt64.zero,this.fileId="",this.directBlockServer="",this.previewUrl="",this.thumbnailUrlTmpl="",this.revisionId="",this.icon="",this.isCloudDoc=!1,n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new v).fromBinary(e,o)}static fromJson(e,o){return(new v).fromJson(e,o)}static fromJsonString(e,o){return(new v).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(v,e,o)}}v.runtime=n.proto3,v.typeName="file_viewer_preview_metadata.SharedFile",v.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"is_dir",kind:"scalar",T:8},{no:2,name:"is_symlink",kind:"scalar",T:8},{no:3,name:"bytes",kind:"scalar",T:4},{no:4,name:"filename",kind:"scalar",T:9},{no:5,name:"sort_key",kind:"scalar",T:9},{no:7,name:"href",kind:"scalar",T:9},{no:8,name:"preview_type",kind:"enum",T:n.proto3.getEnumType(c)},{no:9,name:"preview_metadata",kind:"message",T:i.PreviewMetadata},{no:10,name:"ts",kind:"scalar",T:3},{no:11,name:"ns_id",kind:"scalar",T:4},{no:12,name:"sjid",kind:"scalar",T:4},{no:13,name:"file_id",kind:"scalar",T:9},{no:14,name:"direct_block_server",kind:"scalar",T:9},{no:15,name:"preview_url",kind:"scalar",T:9},{no:16,name:"thumbnail_url_tmpl",kind:"scalar",T:9},{no:17,name:"revision_id",kind:"scalar",T:9},{no:18,name:"icon",kind:"scalar",T:9},{no:19,name:"is_cloud_doc",kind:"scalar",T:8}])),function(e){e[e.GET_ALL_INFO=0]="GET_ALL_INFO",e[e.NO_ITEM=2]="NO_ITEM",e[e.ITEM_ID_ONLY=3]="ITEM_ID_ONLY"}(s||(s={})),n.proto3.util.setEnumType(s,"collections_messages.ItemInfoFilter",[{no:0,name:"GET_ALL_INFO"},{no:2,name:"NO_ITEM"},{no:3,name:"ITEM_ID_ONLY"}]),function(e){e[e.ALL_INFO=0]="ALL_INFO",e[e.ID_ONLY=2]="ID_ONLY",e[e.NO_INFO=1]="NO_INFO"}(a||(a={})),n.proto3.util.setEnumType(a,"collections_messages.ItemMetadataSelector",[{no:0,name:"ALL_INFO"},{no:2,name:"ID_ONLY"},{no:1,name:"NO_INFO"}]),function(e){e[e.VIEW=0]="VIEW",e[e.EDIT=1]="EDIT"}(r||(r={})),n.proto3.util.setEnumType(r,"collections_messages.SharedLinkType",[{no:0,name:"VIEW"},{no:1,name:"EDIT"}]),function(e){e[e.INVALID_LINK_AUDIENCE=0]="INVALID_LINK_AUDIENCE",e[e.PUBLIC=1]="PUBLIC",e[e.TEAM_ONLY=2]="TEAM_ONLY",e[e.ACL_ONLY=3]="ACL_ONLY"}(d||(d={})),n.proto3.util.setEnumType(d,"collections_messages.SharedLinkAudience",[{no:0,name:"INVALID_LINK_AUDIENCE"},{no:1,name:"PUBLIC"},{no:2,name:"TEAM_ONLY"},{no:3,name:"ACL_ONLY"}]),function(e){e[e.MANUAL=0]="MANUAL",e[e.SEED=1]="SEED",e[e.SAVED_FROM_WEB=2]="SAVED_FROM_WEB",e[e.SUGGESTED=3]="SUGGESTED",e[e.CAPTURES=4]="CAPTURES"}(_||(_={})),n.proto3.util.setEnumType(_,"collections_messages.CollectionType",[{no:0,name:"MANUAL"},{no:1,name:"SEED"},{no:2,name:"SAVED_FROM_WEB"},{no:3,name:"SUGGESTED"},{no:4,name:"CAPTURES"}]),function(e){e[e.PERSONAL=0]="PERSONAL",e[e.TEAM=1]="TEAM"}(u||(u={})),n.proto3.util.setEnumType(u,"collections_messages.CollectionSpace",[{no:0,name:"PERSONAL"},{no:1,name:"TEAM"}]),function(e){e[e.WRITER=0]="WRITER",e[e.READER=1]="READER"}(m||(m={})),n.proto3.util.setEnumType(m,"collections_messages.CollectionAccess",[{no:0,name:"WRITER"},{no:1,name:"READER"}]),function(e){e[e.GET_ALL_COLLECTION_INFO=0]="GET_ALL_COLLECTION_INFO",e[e.COLLECTION_IDS_NAMES_AND_TYPES=1]="COLLECTION_IDS_NAMES_AND_TYPES"}(p||(p={})),n.proto3.util.setEnumType(p,"collections_messages.CollectionMetadataSelector",[{no:0,name:"GET_ALL_COLLECTION_INFO"},{no:1,name:"COLLECTION_IDS_NAMES_AND_TYPES"}]),function(e){e[e.INVALID_LINK=0]="INVALID_LINK",e[e.COLLECTION_NOT_ACCESSIBLE=1]="COLLECTION_NOT_ACCESSIBLE"}(f||(f={})),n.proto3.util.setEnumType(f,"collections_messages.SharedCollectionPropsError",[{no:0,name:"INVALID_LINK"},{no:1,name:"COLLECTION_NOT_ACCESSIBLE"}]);class k extends n.Message{constructor(e){super(),this.height=n.protoInt64.zero,this.width=n.protoInt64.zero,n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new k).fromBinary(e,o)}static fromJson(e,o){return(new k).fromJson(e,o)}static fromJsonString(e,o){return(new k).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(k,e,o)}}k.runtime=n.proto3,k.typeName="collections_messages.Dimensions",k.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"height",kind:"scalar",T:4},{no:2,name:"width",kind:"scalar",T:4}]));class w extends n.Message{constructor(e){super(),this.hasDirectAccess=!1,this.isMountedFile=!1,n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new w).fromBinary(e,o)}static fromJson(e,o){return(new w).fromJson(e,o)}static fromJsonString(e,o){return(new w).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(w,e,o)}}w.runtime=n.proto3,w.typeName="collections_messages.TargetFileMetadata",w.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"file_info",kind:"message",T:i.FileInfo},{no:2,name:"has_direct_access",kind:"scalar",T:8},{no:3,name:"is_mounted_file",kind:"scalar",T:8}]));class I extends n.Message{constructor(e){super(),this.id="",this.name="",n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new I).fromBinary(e,o)}static fromJson(e,o){return(new I).fromJson(e,o)}static fromJsonString(e,o){return(new I).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(I,e,o)}}I.runtime=n.proto3,I.typeName="collections_messages.CollectionItem",I.fields=n.proto3.util.newFieldList((()=>[{no:9,name:"id",kind:"scalar",T:9},{no:13,name:"name",kind:"scalar",T:9},{no:14,name:"target_file",kind:"message",T:w}]));class E extends n.Message{constructor(e){super(),this.collectionItems=[],this.collectionName="",n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new E).fromBinary(e,o)}static fromJson(e,o){return(new E).fromJson(e,o)}static fromJsonString(e,o){return(new E).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(E,e,o)}}E.runtime=n.proto3,E.typeName="collections_messages.GetCollectionItemsResponse",E.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"collection_items",kind:"message",T:I,repeated:!0},{no:2,name:"collection_name",kind:"scalar",T:9}]));class L extends n.Message{constructor(e){super(),this.email="",this.photoUrl="",this.userId="",this.displayName="",this.isOwner=!1,this.isTeam=!1,this.teamId="",this.teamSize=n.protoInt64.zero,this.access=m.WRITER,n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new L).fromBinary(e,o)}static fromJson(e,o){return(new L).fromJson(e,o)}static fromJsonString(e,o){return(new L).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(L,e,o)}}L.runtime=n.proto3,L.typeName="collections_messages.Collaborator",L.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"email",kind:"scalar",T:9},{no:2,name:"photo_url",kind:"scalar",T:9},{no:3,name:"user_id",kind:"scalar",T:9},{no:4,name:"display_name",kind:"scalar",T:9},{no:5,name:"is_owner",kind:"scalar",T:8},{no:6,name:"is_team",kind:"scalar",T:8},{no:7,name:"team_id",kind:"scalar",T:9},{no:8,name:"team_size",kind:"scalar",T:3},{no:9,name:"access",kind:"enum",T:n.proto3.getEnumType(m)}]));class T extends n.Message{constructor(e){super(),this.url="",this.viewLink="",this.editLink="",this.collaborators=[],n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new T).fromBinary(e,o)}static fromJson(e,o){return(new T).fromJson(e,o)}static fromJsonString(e,o){return(new T).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(T,e,o)}}T.runtime=n.proto3,T.typeName="collections_messages.CollectionSharingInfo",T.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"url",kind:"scalar",T:9},{no:2,name:"view_link",kind:"scalar",T:9},{no:3,name:"edit_link",kind:"scalar",T:9},{no:4,name:"collaborators",kind:"message",T:L,repeated:!0},{no:5,name:"view_link_settings",kind:"message",T:P},{no:6,name:"edit_link_settings",kind:"message",T:P}]));class y extends n.Message{constructor(e){super(),this.id="",this.thumbnail="",n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new y).fromBinary(e,o)}static fromJson(e,o){return(new y).fromJson(e,o)}static fromJsonString(e,o){return(new y).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(y,e,o)}}y.runtime=n.proto3,y.typeName="collections_messages.CoverPhoto",y.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"thumbnail",kind:"scalar",T:9}]));class S extends n.Message{constructor(e){super(),this.id="",this.name="",this.numOfItems=0,this.sampleCollectionItems=[],this.collectionType=_.MANUAL,this.nsId=n.protoInt64.zero,this.description="",this.coverPhotoThumbnail="",this.collectionSpace=u.PERSONAL,n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new S).fromBinary(e,o)}static fromJson(e,o){return(new S).fromJson(e,o)}static fromJsonString(e,o){return(new S).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(S,e,o)}}S.runtime=n.proto3,S.typeName="collections_messages.CollectionInfo",S.fields=n.proto3.util.newFieldList((()=>[{no:6,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:4,name:"num_of_items",kind:"scalar",T:13},{no:10,name:"sample_collection_items",kind:"message",T:I,repeated:!0},{no:7,name:"collection_type",kind:"enum",T:n.proto3.getEnumType(_)},{no:8,name:"sharing_info",kind:"message",T:T},{no:9,name:"ns_id",kind:"scalar",T:4},{no:11,name:"description",kind:"scalar",T:9},{no:12,name:"cover_photo_thumbnail",kind:"scalar",T:9},{no:13,name:"collection_space",kind:"enum",T:n.proto3.getEnumType(u)},{no:14,name:"cover_photo",kind:"message",T:y}]));class C extends n.Message{constructor(e){super(),this.collectionTypeFilter=[],this.selectMetadata=p.GET_ALL_COLLECTION_INFO,this.selectSpace=u.PERSONAL,n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new C).fromBinary(e,o)}static fromJson(e,o){return(new C).fromJson(e,o)}static fromJsonString(e,o){return(new C).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(C,e,o)}}C.runtime=n.proto3,C.typeName="collections_messages.GetAllCollectionsArgs",C.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"collection_type_filter",kind:"enum",T:n.proto3.getEnumType(_),repeated:!0},{no:2,name:"select_metadata",kind:"enum",T:n.proto3.getEnumType(p)},{no:3,name:"select_space",kind:"enum",T:n.proto3.getEnumType(u)}]));class A extends n.Message{constructor(e){super(),this.collectionInfos=[],n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new A).fromBinary(e,o)}static fromJson(e,o){return(new A).fromJson(e,o)}static fromJsonString(e,o){return(new A).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(A,e,o)}}A.runtime=n.proto3,A.typeName="collections_messages.GetAllCollectionsResponse",A.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"collection_infos",kind:"message",T:S,repeated:!0}]));class b extends n.Message{constructor(e){super(),this.isVideoSynthesisEnabled=!1,this.isListViewEnabled=!1,this.collectionsFeaturePopulationId="",this.videoSynthesisPopulationId="",this.suggestedCollectionsVariant="",this.isSharingSdkEnabled=!1,this.isTeamSpaceFeatureEnabled=!1,this.isBoltFeatureEnabled=!1,this.isItemsLimitRaiseEnabled=!1,this.isDescriptionEnabled=!1,this.isCoverPhotoEnabled=!1,this.isLayoutOptionsEnabled=!1,this.isCollectionsEmbeddingEnabled=!1,n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new b).fromBinary(e,o)}static fromJson(e,o){return(new b).fromJson(e,o)}static fromJsonString(e,o){return(new b).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(b,e,o)}}b.runtime=n.proto3,b.typeName="collections_messages.FeatureFlags",b.fields=n.proto3.util.newFieldList((()=>[{no:12,name:"is_video_synthesis_enabled",kind:"scalar",T:8},{no:14,name:"is_list_view_enabled",kind:"scalar",T:8},{no:15,name:"collections_feature_population_id",kind:"scalar",T:9},{no:16,name:"video_synthesis_population_id",kind:"scalar",T:9},{no:17,name:"suggested_collections_variant",kind:"scalar",T:9},{no:18,name:"is_sharing_sdk_enabled",kind:"scalar",T:8},{no:19,name:"is_team_space_feature_enabled",kind:"scalar",T:8},{no:20,name:"is_bolt_feature_enabled",kind:"scalar",T:8},{no:21,name:"is_items_limit_raise_enabled",kind:"scalar",T:8},{no:23,name:"is_description_enabled",kind:"scalar",T:8},{no:24,name:"is_cover_photo_enabled",kind:"scalar",T:8},{no:25,name:"is_layout_options_enabled",kind:"scalar",T:8},{no:26,name:"is_collections_embedding_enabled",kind:"scalar",T:8}]));class N extends n.Message{constructor(e){super(),this.id="",this.name="",n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new N).fromBinary(e,o)}static fromJson(e,o){return(new N).fromJson(e,o)}static fromJsonString(e,o){return(new N).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(N,e,o)}}N.runtime=n.proto3,N.typeName="collections_messages.SharedItem",N.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"shared_file_info",kind:"message",T:v},{no:3,name:"name",kind:"scalar",T:9}]));class P extends n.Message{constructor(e){super(),this.allowDownload=!1,this.audience=d.INVALID_LINK_AUDIENCE,n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new P).fromBinary(e,o)}static fromJson(e,o){return(new P).fromJson(e,o)}static fromJsonString(e,o){return(new P).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(P,e,o)}}P.runtime=n.proto3,P.typeName="collections_messages.SharedLinkSettings",P.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"allow_download",kind:"scalar",T:8},{no:3,name:"audience",kind:"enum",T:n.proto3.getEnumType(d)}]));class F extends n.Message{constructor(e){super(),this.linkType=r.VIEW,this.linkKey="",n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new F).fromBinary(e,o)}static fromJson(e,o){return(new F).fromJson(e,o)}static fromJsonString(e,o){return(new F).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(F,e,o)}}F.runtime=n.proto3,F.typeName="collections_messages.SharedLinkInfo",F.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"link_settings",kind:"message",T:P},{no:2,name:"link_type",kind:"enum",T:n.proto3.getEnumType(r)},{no:3,name:"link_key",kind:"scalar",T:9}]));class D extends n.Message{constructor(e){super(),this.collectionName="",this.collectionId="",this.sharedItems=[],this.collectionSharerName="",this.coverPhotoId="",this.description="",this.nsId=n.protoInt64.zero,n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new D).fromBinary(e,o)}static fromJson(e,o){return(new D).fromJson(e,o)}static fromJsonString(e,o){return(new D).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(D,e,o)}}D.runtime=n.proto3,D.typeName="collections_messages.SharedCollectionInfo",D.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"collection_name",kind:"scalar",T:9},{no:2,name:"collection_id",kind:"scalar",T:9},{no:3,name:"shared_items",kind:"message",T:N,repeated:!0},{no:4,name:"collection_sharer_name",kind:"scalar",T:9},{no:5,name:"link_settings",kind:"message",T:P},{no:6,name:"link_info",kind:"message",T:F},{no:7,name:"cover_photo_id",kind:"scalar",T:9},{no:8,name:"description",kind:"scalar",T:9},{no:9,name:"ns_id",kind:"scalar",T:4}]));class O extends n.Message{constructor(e){super(),this.url="",n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new O).fromBinary(e,o)}static fromJson(e,o){return(new O).fromJson(e,o)}static fromJsonString(e,o){return(new O).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(O,e,o)}}O.runtime=n.proto3,O.typeName="collections_messages.SharedCollectionPropsRequest",O.fields=n.proto3.util.newFieldList((()=>[{no:3,name:"url",kind:"scalar",T:9}]));class U extends n.Message{constructor(e){super(),this.response={case:void 0},n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new U).fromBinary(e,o)}static fromJson(e,o){return(new U).fromJson(e,o)}static fromJsonString(e,o){return(new U).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(U,e,o)}}U.runtime=n.proto3,U.typeName="collections_messages.SharedCollectionPropsResponse",U.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"shared_collection_info",kind:"message",T:D,oneof:"response"},{no:2,name:"shared_collection_error",kind:"enum",T:n.proto3.getEnumType(f),oneof:"response"}]));class M extends n.Message{constructor(e){super(),this.id="",this.name="",this.thumbnailUrl="",this.size=n.protoInt64.zero,n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new M).fromBinary(e,o)}static fromJson(e,o){return(new M).fromJson(e,o)}static fromJsonString(e,o){return(new M).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(M,e,o)}}M.runtime=n.proto3,M.typeName="collections_messages.PrefetchCachedItem",M.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"thumbnail_url",kind:"scalar",T:9},{no:4,name:"size",kind:"scalar",T:3}]));class J extends n.Message{constructor(e){super(),this.collectionId="",n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new J).fromBinary(e,o)}static fromJson(e,o){return(new J).fromJson(e,o)}static fromJsonString(e,o){return(new J).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(J,e,o)}}J.runtime=n.proto3,J.typeName="collections_messages.GetCollectionDetailsPagePrefetchArgs",J.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"collection_id",kind:"scalar",T:9}]));class j extends n.Message{constructor(e){super(),this.prefetchItems=[],n.proto3.util.initPartial(e,this)}static fromBinary(e,o){return(new j).fromBinary(e,o)}static fromJson(e,o){return(new j).fromJson(e,o)}static fromJsonString(e,o){return(new j).fromJsonString(e,o)}static equals(e,o){return n.proto3.util.equals(j,e,o)}}function B(e){if(!e.target_file)throw Error("Unknown item");const o=e.target_file.file_info;return{src:o.thumbnail_url_tmpl,extension:i.file_extension(i.filename(o.fq_path)),href:""!==o.href?o.href:void 0}}function R(e){if(!e.targetFile)throw Error("Unknown item");const o=e.targetFile.fileInfo;return{src:o.thumbnailUrlTmpl,extension:i.file_extension(i.filename(o.fqPath)),href:""!==o.href?o.href:void 0}}function V(e){var o,t;if(!e.target_file)throw Error("Unknown item");let n;const l=e.target_file.file_info;if(e.target_file.has_direct_access&&e.target_file.is_mounted_file)n=Object.assign({},i.File.fromApiV2Object(l));else{const c=null===(o=e.target_file.file_info)||void 0===o?void 0:o.preview;n={is_dir:!!l.is_dir,is_symlink:!!l.is_symlink,bytes:l.size_bytes||0,filename:e.name,sort_key:[l.sort_key],href:l.href||"",preview:c?i.File.previewMetadataFromApiV2ObjectPreview(c):void 0,ts:l.ts||0,ns_id:l.ns_id||0,sjid:l.sjid||0,file_id:l.file_id||"",direct_blockserver_link:l.direct_blockserver_link,preview_url:null===(t=l.preview)||void 0===t?void 0:t.preview_url,thumbnail_url_tmpl:l.thumbnail_url_tmpl,revision_id:l.revision_id||"",icon:l.icon,is_cloud_doc:!!l.is_cloud_doc}}return{id:e.id,name:e.name,fileInfo:n,canCopyLinkToTargetFile:!!e.target_file.is_mounted_file||!!e.target_file.has_direct_access&&!!l.is_cloud_doc}}function G(e){return e===_.SEED?"seed":e===_.SUGGESTED?"suggested":"manual"}function x(o){var t,i,n,l,c;const{id:s,nsId:a,name:r,sampleCollectionItems:d,numOfItems:_,collectionType:u,sharingInfo:p,description:f,coverPhoto:g}=o;return{id:s,nsId:Number(a),name:r,thumbnails:d.map(R),numOfItems:_,type:G(u),description:f,coverPhoto:g,sharingInfo:{viewLink:(null==p?void 0:p.viewLink)?{url:p.viewLink,linkSettings:(null==p?void 0:p.viewLinkSettings)?{allowDownload:null===(t=p.viewLinkSettings)||void 0===t?void 0:t.allowDownload,linkAudience:H(null===(i=p.viewLinkSettings)||void 0===i?void 0:i.audience)}:void 0}:void 0,editLink:(null==p?void 0:p.editLink)?{url:p.editLink,linkSettings:(null==p?void 0:p.editLinkSettings)?{allowDownload:null===(n=p.editLinkSettings)||void 0===n?void 0:n.allowDownload,linkAudience:H(null===(l=p.editLinkSettings)||void 0===l?void 0:l.audience)}:void 0}:void 0,collaborators:p?null===(c=null==p?void 0:p.collaborators)||void 0===c?void 0:c.map((o=>Object.assign(Object.assign({},o),{access:o.access===m.WRITER?e.AccessType.Edit:e.AccessType.View}))):[]}}}function q(o){var t,i,n,l,c;return{viewLink:(null==o?void 0:o.view_link)?{url:o.view_link,linkSettings:(null==o?void 0:o.view_link_settings)?{allowDownload:null===(t=o.view_link_settings)||void 0===t?void 0:t.allow_download,linkAudience:K(null===(i=o.view_link_settings)||void 0===i?void 0:i.audience)}:void 0}:void 0,editLink:(null==o?void 0:o.edit_link)?{url:o.edit_link,linkSettings:(null==o?void 0:o.edit_link_settings)?{allowDownload:null===(n=o.edit_link_settings)||void 0===n?void 0:n.allow_download,linkAudience:K(null===(l=o.edit_link_settings)||void 0===l?void 0:l.audience)}:void 0}:void 0,collaborators:null===(c=null==o?void 0:o.collaborators)||void 0===c?void 0:c.map((({display_name:o,email:t,is_owner:i,photo_url:n,user_id:l,access:c})=>({displayName:o,email:t,isOwner:i,photoUrl:n,userId:l,access:"writer"===c[".tag"]?e.AccessType.Edit:e.AccessType.View})))}}function Y(e){const{id:o,ns_id:t,name:i,sample_collection_items:n,num_of_items:l,collection_type:c,sharing_info:s,cover_photo:a,description:r}=e;if(void 0===o||void 0===t||void 0===i||void 0===n||void 0===l||void 0===c)throw Error("Unknown item");return{id:o,nsId:Number(t),name:i,thumbnails:n.map(B),numOfItems:l,type:"other"===c[".tag"]?"manual":c[".tag"],sharingInfo:s?q(s):{},coverPhoto:a?{id:a.id,thumbnail:a.thumbnail}:void 0,description:r}}function W(e){var o,t;if("file_id"===(null===(o=e.file_identifier)||void 0===o?void 0:o[".tag"]))return{fileId:e.file_identifier.file_id};if("file_path"===(null===(t=e.file_identifier)||void 0===t?void 0:t[".tag"]))return{filePath:e.file_identifier.file_path};throw Error("Unrecognized type")}function z(e){return e.fileId?{file_identifier:{file_id:e.fileId,".tag":"file_id"}}:{file_identifier:{file_path:e.filePath,".tag":"file_path"}}}function K(o){if("invalid_link_audience"===o[".tag"])return e.SharedLinkAudience.INVALID_LINK_AUDIENCE;if("public"===o[".tag"])return e.SharedLinkAudience.PUBLIC;if("team_only"===o[".tag"])return e.SharedLinkAudience.TEAM_ONLY;if("acl_only"===o[".tag"])return e.SharedLinkAudience.ACL_ONLY;throw Error("Unrecognized link audience api type")}function H(o){if(o===d.INVALID_LINK_AUDIENCE)return e.SharedLinkAudience.INVALID_LINK_AUDIENCE;if(o===d.PUBLIC)return e.SharedLinkAudience.PUBLIC;if(o===d.TEAM_ONLY)return e.SharedLinkAudience.TEAM_ONLY;if(o===d.ACL_ONLY)return e.SharedLinkAudience.ACL_ONLY;throw Error("Unrecognized link audience proto type")}function X(e,o,t){return[e,o,t]}function $(e){if(e===a.ALL_INFO)return{".tag":"all_info"};if(e===a.ID_ONLY)return{".tag":"id_only"};if(e===a.NO_INFO)return{".tag":"no_info"};throw Error("Unrecognized item metadata selector proto type")}j.runtime=n.proto3,j.typeName="collections_messages.GetCollectionDetailsPagePrefetchResponse",j.fields=n.proto3.util.newFieldList((()=>[{no:1,name:"prefetch_items",kind:"message",T:M,repeated:!0}])),e.SharedLinkAudience=void 0,function(e){e[e.INVALID_LINK_AUDIENCE=0]="INVALID_LINK_AUDIENCE",e[e.PUBLIC=1]="PUBLIC",e[e.TEAM_ONLY=2]="TEAM_ONLY",e[e.ACL_ONLY=3]="ACL_ONLY"}(e.SharedLinkAudience||(e.SharedLinkAudience={})),e.SharedLinkType=void 0,function(e){e.View="view",e.Edit="edit"}(e.SharedLinkType||(e.SharedLinkType={})),e.AccessType=void 0,(g=e.AccessType||(e.AccessType={})).View="view",g.Edit="edit",e.LayoutSize=void 0,(h=e.LayoutSize||(e.LayoutSize={}))[h.XSMALL=1]="XSMALL",h[h.SMALL=2]="SMALL",h[h.MEDIUM=3]="MEDIUM",h[h.LARGE=4]="LARGE",h[h.XLARGE=5]="XLARGE";let Q=-1;const Z=e=>{const o=parseInt(e,10);o&&(Q=o)},ee=()=>({collectionId:"",videoSynthesisSegmentId:Q,videoSynthesisIsBetaUser:21268===Q}),oe="template_chooser",te="collection_view";const ie=e=>new Promise((o=>setTimeout(o,e)));class ne{constructor(e){this.category="client-collections",this.user_id=null,this.team_id=null,this.surface=null,this.timestamp=Date.now(),e.hasOwnProperty("user_id")&&void 0!==e.team_id&&(this.user_id=e.user_id),this.action=e.action,e.hasOwnProperty("team_id")&&void 0!==e.team_id&&(this.team_id=e.team_id),this.collection_id=e.collection_id||"",this.collections_feature_population_id=e.collections_feature_population_id||"",this.extra=e.extra,e.hasOwnProperty("surface")&&void 0!==e.surface&&(this.surface=e.surface),Object.seal(this)}}class le{constructor(e){this.category="client-collection_items",this.user_id=null,this.team_id=null,this.timestamp=Date.now(),e.hasOwnProperty("user_id")&&void 0!==e.team_id&&(this.user_id=e.user_id),this.action=e.action,e.hasOwnProperty("team_id")&&void 0!==e.team_id&&(this.team_id=e.team_id),this.file_id=e.file_id||"",this.item_id=e.item_id||"",this.collection_id=e.collection_id||"",this.collections_feature_population_id=e.collections_feature_population_id||"",this.extra=e.extra,Object.seal(this)}}function ce(e){return{class:"collection",action:"save",object:"seed_collection",properties:e}}function se(e){return{class:"collection_item",action:"click",object:"add_collection_items_button",properties:e}}function ae(e){return{class:"collection",action:"click",object:"create_collection_button",properties:e}}const re=["view","edit"];function de(e){return re.find((o=>o===(null==e?void 0:e.toLowerCase())))}const _e=["manual","seed","saved_from_web","suggested","captures"];const ue=["collection_details_page","collections_management_page","details_page","shared_collection","search","browse","preview","entry_point_modal","photos","share_with_collection","collection_items_list_view","collection_items_grid_view"];function me(e){return ue.find((o=>o===(null==e?void 0:e.toLowerCase())))}const pe=["upload_button","drag_and_drop","copy_and_paste"];function fe(e){return pe.find((o=>o===(null==e?void 0:e.toLowerCase())))}const ge=["shortcut_button","copy_and_paste"];function he(e){return ge.find((o=>o===(null==e?void 0:e.toLowerCase())))}const ve=["add","change","remove"];function ke(e){return ve.find((o=>o===(null==e?void 0:e.toLowerCase())))}const we=["add_password","add_expiration_date","change_branding","disable_download","notify_me_of_downloads","delete_link","change_access"];const Ie=["masonry","list"];function Ee(e){return Ie.find((o=>o===(null==e?void 0:e.toLowerCase())))}const Le=new i.HiveLogger,Te=new i.HiveLogger;let ye="";e.COLLECTIONS_PAGE_BASENAME="/collections",e.DEFAULT_EXCLOG_TAGS=["collections_client"],e.GetCollectionDetailsPagePrefetchArgs=J,e.GetCollectionDetailsPagePrefetchResponse=j,e.MAX_COLLECTIONS=100,e.MAX_ITEMS_IN_COLLECTION=200,e.MAX_ITEMS_IN_COLLECTION_RAISED=5e3,e.addFilesToCollection=function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const n=i.mustGetActiveUser(),l=new i.DefaultUserApiV2Client(n).ns("collections"),c={collection_id:e,file_identifiers:null==t?void 0:t.map(z)};return function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const n=i.mustGetActiveUser(),l=new i.DefaultUserApiV2Client(n).ns("collections"),c=e.result;if("add_bulk_async_job_id"===c[".tag"]){const e=c.add_bulk_async_job_id,i=()=>o.__awaiter(this,void 0,void 0,(function*(){return yield l.rpc("add_bulk_items_check",{async_job_id:e},{})}));let n=yield i();for(;"pending"===n.job_status[".tag"];)yield ie(1e3),n=yield i();const{succeeded_items:s,failed_file_identifiers:a}=n.add_bulk_items_result;if("failed"===n.job_status[".tag"]||"other"===n.job_status[".tag"]||0===s.length)throw new Error(t);return{succeededItems:s.map(V),failedFileIdentifiers:a.map(W)}}if("add_bulk_items_result"===c[".tag"]){const{succeeded_items:e,failed_file_identifiers:o}=c;return{succeededItems:e.map(V),failedFileIdentifiers:o.map(W)}}throw new Error(t)}))}(yield l.rpc("add_bulk_items",c,{}),"collections/add_bulk_items")}))},e.convertPrefetchCachedItemFromProtoToCollectionItem=function(e){const o={bytes:Number(e.size),filename:e.name,thumbnail_url_tmpl:e.thumbnailUrl,is_dir:!1,is_symlink:!1,sort_key:[""],href:"",ts:0,ns_id:0,sjid:0,file_id:"",revision_id:"",is_cloud_doc:!1};return{id:e.id,name:e.name,fileInfo:o,canCopyLinkToTargetFile:!1}},e.createCollection=function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const o=i.mustGetActiveUser(),n=new i.DefaultUserApiV2Client(o).ns("collections"),l={name:e,settings:t},c=yield n.rpc("create",l,{}),{id:s,ns_id:a,name:r,sharing_info:d}=c.collection_info;return{id:s,nsId:a,name:r,thumbnails:[],numOfItems:0,type:"manual",sharingInfo:d?q(d):{}}}))},e.createCollectionSharedLink=function(t,n){return o.__awaiter(this,void 0,void 0,(function*(){const o=i.mustGetActiveUser(),l=new i.DefaultUserApiV2Client(o).ns("collections"),c={collection_id:t,link_type:{".tag":n===e.SharedLinkType.View?"view":"edit"}},{url:s,link_settings:a}=yield l.rpc("create_shared_link",c,{});return{url:s,linkSettings:{allowDownload:!!a.allow_download,linkAudience:K(a.audience)}}}))},e.createShortcut=function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const o=i.mustGetActiveUser(),n=new i.DefaultUserApiV2Client(o).ns("collections"),l={collection_id:e,url:t};return V((yield n.rpc("add_link",l,{})).item)}))},e.defaultFeatureFlags={isVideoSynthesisEnabled:!1,suggestedCollectionsVariant:"OFF",collectionsFeaturePopulationId:"",isSharingSdkEnabled:!1,isItemsLimitRaiseEnabled:!1,isDescriptionEnabled:!1,isCoverPhotoEnabled:!1,isCollectionsEmbeddingEnabled:!1},e.deleteBatch=function(e){var t;return o.__awaiter(this,void 0,void 0,(function*(){const n=i.mustGetActiveUser(),l=new i.DefaultUserApiV2Client(n).ns("collections"),c={item_ids:e},s=yield l.rpc("delete_batch",c,{});if("async_delete_job_id"===(null===(t=s.delete_response)||void 0===t?void 0:t[".tag"])){const e=s.delete_response.async_delete_job_id,t=()=>o.__awaiter(this,void 0,void 0,(function*(){return yield l.rpc("delete_batch_check",{async_job_id:e},{})}));let i=yield t();for(;"pending"===i.status[".tag"];)yield ie(1e3),i=yield t();if("failed"===i.status[".tag"]||"other"===i.status[".tag"])throw new Error("collections/delete_batch")}}))},e.deleteCollections=function(e){return o.__awaiter(this,void 0,void 0,(function*(){const o=i.mustGetActiveUser(),t=new i.DefaultUserApiV2Client(o).ns("collections"),n={collection_ids:e},l=yield t.rpc("delete_collections",n,{});if(l.succesful_deletion_ids)return l.succesful_deletion_ids;throw new Error("collections/delete_collections")}))},e.downloadCollectionItems=function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){if(void 0===e&&void 0===t)throw new Error("This endpoint must receive either collection id or a list of item ids of collection items.");const o=i.mustGetActiveUser(),n=new i.DefaultUserApiV2Client(o).ns("collections"),l={};void 0!==t?l.collection_items_to_download={".tag":"collection_items",item_ids:t}:void 0!==e&&(l.collection_items_to_download={".tag":"collection_id",collection_id:e});return(yield n.rpc("download_collection_items",l,{})).download_url}))},e.getBoltData=function(e){return o.__awaiter(this,void 0,void 0,(function*(){const o=i.mustGetActiveUser(),t=new i.DefaultUserApiV2Client(o).ns("collections"),n={collection_id:e};return yield t.rpc("get_collections_bolt_data",n,{})}))},e.getCollectionItems=function(e){return o.__awaiter(this,void 0,void 0,(function*(){const o=i.mustGetActiveUser(),t=new i.DefaultUserApiV2Client(o).ns("collections"),n={collection_id:e,item_metadata_selector:$(a.ALL_INFO)};return(yield t.rpc("get_collection_items",n,{})).collection_items.map(V)}))},e.getCollections=function(){return o.__awaiter(this,void 0,void 0,(function*(){let e;if(window.RUNNING_IN_EDISON){const o=X(_.MANUAL,_.SEED,_.SAVED_FROM_WEB);return e=t.unmarshalProto(yield t.Edison.serviceMethodPrefetch("collections.CollectionsWebInternal","GetAllCollectionsPrefetch",new C({collectionTypeFilter:o})),A).collectionInfos,e.map(x)}{const e=i.mustGetActiveUser(),o=new i.DefaultUserApiV2Client(e).ns("collections"),t=X({".tag":"manual"},{".tag":"seed"},{".tag":"saved_from_web"});return(yield o.rpc("get_all_collections",{collection_type_filter:t},{})).collection_infos.map(Y)}}))},e.getCollectionsFeatureFlags=function(){return o.__awaiter(this,void 0,void 0,(function*(){const e=yield function(){return o.__awaiter(this,void 0,void 0,(function*(){const e=yield t.Edison.fetch("collections.CollectionsWebInternal","GetCollectionsFeatureFlags");return t.unmarshalProto(e,b)}))}();return Z(e.videoSynthesisPopulationId),e}))},e.getSharedLinksWithSettings=function(e){var t,n,l,c,s,a,r,d,_,u,m,p,f,g;return o.__awaiter(this,void 0,void 0,(function*(){const o=i.mustGetActiveUser(),h=new i.DefaultUserApiV2Client(o).ns("collections"),v={collection_id:e},k=yield h.rpc("get_shared_links_with_settings",v,{});return{viewLink:k.view_link?{url:null===(t=k.view_link)||void 0===t?void 0:t.url,linkSettings:{allowDownload:null===(l=null===(n=k.view_link)||void 0===n?void 0:n.collection_sharing_settings)||void 0===l?void 0:l.allow_download,linkAudience:K(null===(s=null===(c=k.view_link)||void 0===c?void 0:c.collection_sharing_settings)||void 0===s?void 0:s.audience)},userLinkPermissions:{canDisallowDownload:null===(r=null===(a=k.view_link)||void 0===a?void 0:a.user_link_permissions)||void 0===r?void 0:r.can_disallow_download}}:void 0,editLink:k.edit_link?{url:null===(d=k.edit_link)||void 0===d?void 0:d.url,linkSettings:{allowDownload:null===(u=null===(_=k.edit_link)||void 0===_?void 0:_.collection_sharing_settings)||void 0===u?void 0:u.allow_download,linkAudience:K(null===(p=null===(m=k.edit_link)||void 0===m?void 0:m.collection_sharing_settings)||void 0===p?void 0:p.audience)},userLinkPermissions:{canDisallowDownload:null===(g=null===(f=k.edit_link)||void 0===f?void 0:f.user_link_permissions)||void 0===g?void 0:g.can_disallow_download}}:void 0}}))},e.getThumbnailFromCollectionItem=B,e.logAddLinkModalClosed=e=>{Te.log(new le({collection_id:e,action:"add_link_modal_closed",collections_feature_population_id:ye})),i.logEvent({class:"collection_item",action:"cancel",object:"shortcut_modal",properties:{collectionsFeaturePopulationId:ye,collectionId:e}})},e.logAddLinkSubmission=(e,o)=>{Te.log(new le({collection_id:e,action:"add_link_submission",extra:{source:o},collections_feature_population_id:ye})),i.logEvent({class:"collection_item",action:"add",object:"shortcut",properties:{collectionId:e,collectionShortcutSource:he(o),collectionsFeaturePopulationId:ye}})},e.logClickAddFile=e=>{Te.log(new le({collection_id:e,action:"add_file_clicked",collections_feature_population_id:ye})),i.logEvent({class:"collection_item",action:"click",object:"add_collection_files_button",properties:{collectionId:e,surface:me("collection_details_page"),collectionsFeaturePopulationId:ye}})},e.logClickAddItem=e=>{Te.log(new le({collection_id:e,action:"add_item_clicked",collections_feature_population_id:ye})),i.logEvent(se({collectionId:e,surface:me("collection_details_page"),collectionsFeaturePopulationId:ye}))},e.logClickCopyLink=(e,o)=>{Le.log(new ne({collection_id:e,action:"click_copy_link",extra:{link_type:o},collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"click",object:"collections_copy_link_button",properties:{collectionId:e,collectionsSharedLinkType:de(o),collectionsFeaturePopulationId:ye}})},e.logClickCopySharedItemLink=()=>{var e;Le.log(new ne({action:"click_copy_shared_item_link",collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"click",object:"create_shared_link_for_collection_item",properties:e})},e.logClickCreateCollection=()=>{Le.log(new ne({action:"create_collection_clicked",collections_feature_population_id:ye})),i.logEvent(ae({surface:me("collections_management_page"),collectionsFeaturePopulationId:ye}))},e.logClickCreateLink=(e,o)=>{Le.log(new ne({collection_id:e,action:"click_create_link",extra:{link_type:o},collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"click",object:"collections_create_link_button",properties:{collectionId:e,collectionsSharedLinkType:de(o),collectionsFeaturePopulationId:ye}})},e.logClickDeleteCollection=e=>{Le.log(new ne({action:"delete_collection_clicked",extra:{items_count:e.toString()},collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"click",object:"delete_collections_button",properties:{collectionsFeaturePopulationId:ye,itemCount:e}})},e.logClickDeleteItems=(e,o)=>{Te.log(new le({collection_id:e,action:"delete_items_clicked",extra:{items_count:o.toString()},collections_feature_population_id:ye})),i.logEvent({class:"collection_item",action:"click",object:"delete_collection_items_button",properties:{collectionsFeaturePopulationId:ye,collectionId:e,itemCount:o}})},e.logClickDeleteLink=(e,o)=>{Le.log(new ne({collection_id:e,action:"click_delete_link",extra:{link_type:o},collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"click",object:"collections_delete_link_button",properties:{collectionId:e,collectionsSharedLinkType:de(o),collectionsFeaturePopulationId:ye}})},e.logClickDeleteLinkConfirm=(e,o)=>{Le.log(new ne({collection_id:e,action:"click_delete_link_confirm",extra:{link_type:o},collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"click",object:"collections_confirm_delete_link_button",properties:{collectionId:e,collectionsSharedLinkType:de(o),collectionsFeaturePopulationId:ye}})},e.logClickEditCoverPhoto=(e,o)=>{Le.log(new ne({collection_id:e,action:"click_edit_cover_photo",collections_feature_population_id:ye,extra:{layout:o}})),i.logEvent({class:"collection",action:"click",object:"edit_collection_cover_photo_button",properties:{collectionId:e,collectionsLayout:Ee(o),collectionsFeaturePopulationId:ye}})},e.logClickEditDescription=e=>{Le.log(new ne({collection_id:e,action:"click_edit_description",collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"click",object:"edit_collection_description_button",properties:{collectionId:e,collectionsFeaturePopulationId:ye}})},e.logClickRemoveUserAccess=(e,o)=>{Le.log(new ne({collection_id:e,action:"click_remove_user_access",extra:{removed_user_id:o},collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"click",object:"collections_remove_user_access_button",properties:{collectionId:e,removedUserId:o,collectionsFeaturePopulationId:ye}})},e.logClickRemoveUserAccessConfirm=(e,o)=>{Le.log(new ne({collection_id:e,action:"click_remove_user_access_confirm",extra:{removed_user_id:o},collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"click",object:"collections_confirm_remove_user_access_button",properties:{collectionId:e,removedUserId:o,collectionsFeaturePopulationId:ye}})},e.logClickRenameCollectionItem=(e,o)=>{Te.log(new le({collection_id:e,action:"rename_collection_item_clicked",collections_feature_population_id:ye})),i.logEvent({class:"collection_item",action:"click",object:"rename_collection_item",properties:{collectionId:e,collectionItemId:o}})},e.logClickSaveLinkSettings=(e,o)=>{Le.log(new ne({collection_id:e,action:"click_save_link_settings",extra:{allow_download:o.toString()},collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"click",object:"collections_save_link_settings_button",properties:{collectionId:e,shareAllowDownload:o,collectionsFeaturePopulationId:ye}})},e.logClickSceneDetectionButton=e=>{i.logEvent({class:"video_synthesis",action:"click",object:"video_synthesis_scene_detection_button",properties:Object.assign(Object.assign({},ee()),{actionSurface:te,collectionNumItems:e})})},e.logClickSceneDetectionButtonInTemplateChooser=(e,o)=>{i.logEvent({class:"video_synthesis",action:"click",object:"video_synthesis_scene_detection_button_in_template_chooser",properties:Object.assign(Object.assign({},ee()),{actionSurface:oe,videoSythesisIsNewTemplate:!!o,videoSynthesisTemplateId:e})})},e.logClickSelectAllCollectionItems=e=>{Le.log(new ne({collection_id:e,action:"click_select_all_collection_items",collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"click",object:"select_all_collection_items_button",properties:{collectionId:e}})},e.logClickShare=(e,o)=>{Le.log(new ne({collection_id:e,extra:{source:o},action:"click_share",collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"click",object:"share_collection_button",properties:{collectionId:e,actionSource:o,collectionsFeaturePopulationId:ye}})},e.logClickUnselectCollectionItems=e=>{Le.log(new ne({collection_id:e,action:"click_unselect_collection_items",collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"click",object:"unselect_collection_items_button",properties:{collectionId:e}})},e.logClickUnsetCoverPhoto=(e,o)=>{Le.log(new ne({collection_id:e,action:"click_unset_cover_photo",collections_feature_population_id:ye,surface:o})),i.logEvent({class:"collection",action:"click",object:"unset_collection_cover_photo_button",properties:{collectionId:e,surface:me(o),collectionsFeaturePopulationId:ye}})},e.logClickUploadItem=e=>{Te.log(new le({collection_id:e,action:"upload_item_clicked",collections_feature_population_id:ye})),i.logEvent({class:"collection_item",action:"click",object:"upload_collection_items_button",properties:{collectionsFeaturePopulationId:ye,collectionId:e}})},e.logCloseShareModal=(e,o)=>{Le.log(new ne({collection_id:e,action:"close_share_modal",extra:{surface:o},collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"close",object:"share_collection_modal",properties:{collectionId:e,surface:me(o),collectionsFeaturePopulationId:ye}})},e.logCollectionClick=(e,o)=>{let t;switch(o){case"seed":t="seed_collection_clicked";break;case"suggested":t="suggested_collection_clicked";break;default:t="collection_clicked"}var n;Le.log(new ne({collection_id:e,action:t,collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"click",object:"collection_id",properties:{collectionsFeaturePopulationId:ye,collectionId:e,collectionType:(n=o,_e.find((e=>e===(null==n?void 0:n.toLowerCase()))))}})},e.logCollectionItemsClick=e=>{Te.log(new le(Object.assign(Object.assign({},e),{action:"open_item_clicked",collections_feature_population_id:ye}))),i.logEvent({class:"collection_item",action:"open",object:"collection_item",properties:{collectionItemId:e.item_id,collectionId:e.collection_id,fileId:e.file_id,surface:me(e.surface),collectionsFeaturePopulationId:ye}})},e.logCollectionLimitReached=e=>{Le.log(new ne({collection_id:e,action:"limit_reached",collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"limit_reached",object:"collection_id",properties:{collectionsFeaturePopulationId:ye,collectionId:e}})},e.logCollectionsPageLoaded=()=>{Le.log(new ne({collection_id:"",action:"collections_page_clicked",collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"load",object:"collections_management_page",properties:{collectionsFeaturePopulationId:ye}})},e.logDownloadButtonClicked=(e,o,t,n)=>{Le.log(new ne({collection_id:e,surface:o,extra:{entire_collection:String(t),num_of_selected_items:n?String(n):""},action:"collections_download_clicked",collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"click",object:"collections_download_button",properties:{collectionId:e,surface:me(o),entireCollection:t,numberOfSelectedItems:n,collectionsFeaturePopulationId:ye}})},e.logEntryPointAddToCollection=(e,o,t)=>{Le.log(new ne({collection_id:e,action:"entry_point_modal_add_to_collection",surface:o,extra:{num_of_files:t.toString()},collections_feature_population_id:ye})),i.logEvent(se({collectionId:e,itemCount:t,surface:me(o),collectionsFeaturePopulationId:ye}))},e.logEntryPointClosed=e=>{Le.log(new ne({collection_id:"",action:"entry_point_modal_close",surface:e,collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"close",object:"collections_entry_point_modal",properties:{surface:me(e),collectionsFeaturePopulationId:ye}})},e.logEntryPointLoaded=e=>{Le.log(new ne({collection_id:"",action:"entry_point_modal_enter",surface:e,collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"open",object:"collections_entry_point_modal",properties:{surface:me(e),collectionsFeaturePopulationId:ye}})},e.logEntryPointNewCollection=(e,o)=>{Le.log(new ne({collection_id:"",action:"entry_point_modal_new_collection",surface:e,extra:{num_of_files:o.toString()},collections_feature_population_id:ye})),i.logEvent(ae({surface:me(e),numFiles:o,collectionsFeaturePopulationId:ye}))},e.logFileUploadFailed=e=>{Te.log(new le({collection_id:e,action:"file_upload_failed",collections_feature_population_id:ye})),i.logEvent({class:"collection_item",action:"upload_failed",object:"collection_item",properties:{collectionsFeaturePopulationId:ye,collectionId:e}})},e.logFilesForUploadRenamed=e=>{Te.log(new le({action:"files_for_upload_renamed",extra:{num_of_files:e.toString()},collections_feature_population_id:ye})),i.logEvent({class:"collection_item",action:"rename_for_upload",object:"collection_item",properties:{collectionsFeaturePopulationId:ye,itemCount:e}})},e.logFilesToUploadSelected=(e,o,t)=>{Te.log(new le({collection_id:e,action:"files_for_upload_selected",extra:{num_of_files:o.toString(),source:t},collections_feature_population_id:ye})),i.logEvent({class:"collection_item",action:"upload",object:"collection_item",properties:{collectionId:e,itemCount:o,collectionUploadSource:fe(t),collectionsFeaturePopulationId:ye}})},e.logGiveFeedbackButtonClicked=(e,o)=>{Le.log(new ne({collection_id:o||"",action:"collections_give_feedback_button_clicked",surface:e,collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"click",object:"collections_feedback_button",properties:{surface:me(e),collectionsFeaturePopulationId:ye}})},e.logOpenShareModal=(e,o)=>{Le.log(new ne({collection_id:e,action:"open_share_modal",extra:{surface:o},collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"open",object:"share_collection_modal",properties:{collectionId:e,surface:me(o),collectionsFeaturePopulationId:ye}})},e.logOpenShortcutModal=(e,o)=>{Te.log(new le({collection_id:e,action:"add_link_modal_opened",extra:{source:o},collections_feature_population_id:ye})),i.logEvent({class:"collection_item",action:"open",object:"shortcut_modal",properties:{collectionId:e,collectionShortcutSource:he(o),collectionsFeaturePopulationId:ye}})},e.logPickDetailsPageLayout=(e,o)=>{Le.log(new ne({collection_id:e,action:"pick_details_page_layout",extra:{layout:o},collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"select",object:"collections_layout_picker",properties:{collectionId:e,collectionsLayout:Ee(o),collectionsFeaturePopulationId:ye}})},e.logPreviewCollectionItem=e=>i.logEvent({class:"collection",action:"preview",object:"collection_item",properties:{collectionsFeaturePopulationId:ye,actionSurface:"collection_view",collectionItemId:e}}),e.logSeedCollectionSavedFromDetailsPage=e=>{Le.log(new ne({collection_id:e,action:"seed_collection_save_from_details_page_clicked",collections_feature_population_id:ye})),i.logEvent(ce({collectionId:e,surface:me("collection_details_page"),collectionsFeaturePopulationId:ye}))},e.logSeedCollectionSavedFromManagementPage=e=>{Le.log(new ne({collection_id:e,action:"seed_collection_save_from_management_page_clicked",collections_feature_population_id:ye})),i.logEvent(ce({collectionId:e,surface:me("collections_management_page"),collectionsFeaturePopulationId:ye}))},e.logSeenDeleteLinkScreen=e=>{Le.log(new ne({collection_id:e,action:"seen_delete_link_screen",collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"seen",object:"share_collection_modal_delete_link_screen",properties:{collectionId:e,collectionsFeaturePopulationId:ye}})},e.logSeenLinksSettingsScreen=e=>{Le.log(new ne({collection_id:e,action:"seen_link_settings_screen",collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"seen",object:"share_collection_modal_settings_screen",properties:{collectionId:e,collectionsFeaturePopulationId:ye}})},e.logSeenShareScreen=e=>{Le.log(new ne({collection_id:e,action:"seen_share_screen",collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"seen",object:"share_collection_modal_share_screen",properties:{collectionId:e,collectionsFeaturePopulationId:ye}})},e.logSeenWhoHasAccessScreen=e=>{Le.log(new ne({collection_id:e,action:"seen_who_has_access_screen",collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"seen",object:"share_collection_modal_who_has_access_screen",properties:{collectionId:e,collectionsFeaturePopulationId:ye}})},e.logUpgradeButtonClicked=e=>{Le.log(new ne({collection_id:e,action:"collections_upgrade_clicked",collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"click",object:"collections_upgrade_button",properties:{collectionsFeaturePopulationId:ye,collectionId:e}})},e.logUploadFolder=e=>{Te.log(new le({collection_id:e,action:"upload_folder_by_drag_and_drop",collections_feature_population_id:ye})),i.logEvent({class:"collection_item",action:"upload",object:"folder",properties:{collectionId:e,collectionUploadSource:fe("drag_and_drop"),collectionsFeaturePopulationId:ye}})},e.logUserChangedSharingSettings=(e,o,t)=>{var n;Le.log(new ne({collection_id:e,extra:{link_setting:"disable_download",share_allow_download:String(o),action_type:t},action:"shared_link_settings_changed",collections_feature_population_id:ye})),i.logEvent({class:"collection",action:"change",object:"collections_link_settings",properties:{collectionId:e,linkSetting:(n="disable_download",we.find((e=>e===(null==n?void 0:n.toLowerCase())))),changeSharedLinkActionType:ke(t),shareAllowDownload:o,collectionsFeaturePopulationId:ye}})},e.mapFileIdentifiersToFileIdsAndFilePaths=e=>{const o=[],t=[];for(const i of e)i.fileId?o.push(i.fileId):t.push(i.filePath);return{fileIds:o,filePaths:t}},e.mapFileIdsToFileIdentifiers=e=>e.map((e=>({fileId:e}))),e.mapFilePathsToFileIdentifiers=e=>e.map((e=>({filePath:e}))),e.modifySharedCollectionLinkSettings=function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const o=i.mustGetActiveUser(),n=new i.DefaultUserApiV2Client(o).ns("collections"),l={url:e,new_sharing_settings:{allow_download:t.allowDownload}};return{allowDownload:(yield n.rpc("modify_shared_collection_link_settings",l,{})).link_settings.allow_download,linkAudience:t.linkAudience}}))},e.moveItem=function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const o=i.mustGetActiveUser(),n=new i.DefaultUserApiV2Client(o).ns("collections"),l={item_ids:[e],place_before_item_id:t};yield n.rpc("move_items",l,{})}))},e.removeCollectionMembersAccess=function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const o=i.mustGetActiveUser(),n=new i.DefaultUserApiV2Client(o).ns("collections"),l={collection_id:e,user_ids:t};yield n.rpc("remove_collection_members_access",l,{})}))},e.renameCollection=function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const o=i.mustGetActiveUser(),n=new i.DefaultUserApiV2Client(o).ns("collections"),l={collection_id:e,new_name:t};return yield n.rpc("rename_collection",l,{})}))},e.renameCollectionItem=function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const o=i.mustGetActiveUser(),n=new i.DefaultUserApiV2Client(o).ns("collections"),l={item_id:e,item_name:t};return yield n.rpc("rename_item",l,{})}))},e.revokeCollectionSharedLink=function(e){return o.__awaiter(this,void 0,void 0,(function*(){const o=i.mustGetActiveUser(),t=new i.DefaultUserApiV2Client(o).ns("collections"),n={url:e};yield t.rpc("revoke_shared_link",n,{})}))},e.saveSeedCollection=function(e){return o.__awaiter(this,void 0,void 0,(function*(){const o=i.mustGetActiveUser(),t=new i.DefaultUserApiV2Client(o).ns("collections"),n={collection_id:e};yield t.rpc("save_seed",n,{})}))},e.setCoverPhoto=function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const o=i.mustGetActiveUser(),n=new i.DefaultUserApiV2Client(o).ns("collections"),l={collection_id:e,cover_photo_item_id:t};return yield n.rpc("set_collection_cover_photo",l,{})}))},e.setDescription=function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const o=i.mustGetActiveUser(),n=new i.DefaultUserApiV2Client(o).ns("collections"),l={collection_id:e,description:t};return yield n.rpc("set_collection_description",l,{})}))},e.setPopulationId=e=>{ye=e},e.setPopulationId$1=Z}));
//# sourceMappingURL=c_collections_utils_file_identifier.js-vflWneGLc.map
