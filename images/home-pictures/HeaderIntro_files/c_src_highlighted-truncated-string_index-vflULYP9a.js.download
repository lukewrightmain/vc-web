define(["exports","./e_ui_page_files_router","./e_edison","./c_spectrum_tooltip","./c_src_highlighted-truncated-string_em-string"],(function(t,e,r,n,i){"use strict";e.injectInternalStyle("typescript/component_libraries/retrieval-components/src/highlighted-truncated-string/index.module.out.css",(t=>":root{--color_blue_sixteen:#d6e8fa}._rc-hl-truncated-string__highlight_q1a4g_8{background-color:var(--color_blue_sixteen);box-shadow:0 0 0 1px var(--color_blue_sixteen),0 2px 0 1px var(--color_blue_sixteen)}.dig2--enabled ._rc-hl-truncated-string__highlight_q1a4g_8{background-color:var(--color__attention__background);box-shadow:0 0 0 1px var(--color__attention__background),0 2px 0 1px var(--color__attention__background)}._rc-hl-truncated-string__tooltip-highlight_q1a4g_28{background-color:var(--color__faint__text);box-shadow:0 0 0 1px var(--color__faint__text),0 2px 0 1px var(--color__faint__text)}._rc-hl-truncated-string__container_q1a4g_36{display:block;overflow:hidden;text-overflow:ellipsis}._rc-hl-truncated-string__container-bold_q1a4g_42{font-weight:700}._rc-hl-truncated-string__tooltip_q1a4g_28{max-width:100%}"));const a="_rc-hl-truncated-string__highlight_q1a4g_8",o="_rc-hl-truncated-string__tooltip-highlight_q1a4g_28",s="_rc-hl-truncated-string__container_q1a4g_36",l="_rc-hl-truncated-string__container-bold_q1a4g_42",c="_rc-hl-truncated-string__tooltip_q1a4g_28";function _(t,e,r,n){if(r||(r=0),void 0===n&&(n=t.length),!e||!function(t,e){const r=e.map((t=>t.string)).join("");return t===r}(t,e))return[{isHighlighted:!1,text:t.substring(r,n)}];const i=[];let a=0;for(const o of e){const e=t.indexOf(o.string,a),s=e+o.string.length;if(a=s,!(e<r&&s<=r||e>=n)){let t=o.string;e<r&&(t=t.slice(r-e)),n<s&&(t=t.slice(0,-(s-n))),i.push({text:t,isHighlighted:o.isHighlighted})}}return i}function g(t,n,i,o){return s=_(t,n,i,o),r.react.exports.createElement("span",null,s.map(((t,n)=>r.react.exports.createElement("span",{className:e.classnames({[a]:t.isHighlighted}),key:n},t.text))));var s}function h(t,e,r){if(!r)return!1;let n=0;for(let i of r){const r=n+i.string.length-1;if(i.isHighlighted&&r>=t&&n<=e)return!0;n=r+1}return!1}const u=({text:t,className:a,ariaLabel:g,highlightSpans:h,tooltipId:u,fontSize:p,availableWidth:x,tooltipPosition:f="above",cellBuffer:m=1,variant:b=i.HighlightedTruncatedStringVariant.HIGHLIGHTED_TRUNCATED_STRING_MIDDLE,isBold:v=!1})=>{const E=r.react.exports.useRef(null),[H,q]=r.react.exports.useState(t),[k,w]=r.react.exports.useState(x),[S,N]=r.react.exports.useState(!1);r.react.exports.useEffect((()=>{E.current&&y()}),[t,p,b,x]);const y=()=>{if(E.current){const e=E.current,r=x||e.getBoundingClientRect().width;r!==k&&w(r);const n=r/p-m,a=i.Emstring.em_snippet(t,n,.5,b);H!==a&&q(a),I(a,t)}},I=(t,e)=>{H&&e&&N(t!==e)};return r.react.exports.createElement(n.Tooltip,{id:u,positioning:f,tooltipContent:h?(T=_(t,h),r.react.exports.createElement("span",null,T.map(((t,n)=>r.react.exports.createElement("span",{className:e.classnames({[o]:t.isHighlighted}),key:n},t.text))))):t,showOnMouseMove:S,wrapperClassName:c},r.react.exports.createElement("span",{className:e.classnames(a,s,{[l]:v}),"aria-label":g,ref:E,style:{display:"block"}},h?d(H,t,h):H));var T};u.displayName="HighlightedTruncatedString";const d=(t,n,i)=>{const o=((t,e)=>{let r=0;for(;r<t.length&&t.charAt(r)===e.charAt(r);)++r;return r===t.length||"…"!==t.charAt(r)?[t]:[t.substring(0,r),t.substring(r+1)]})(t,n);if(1===o.length)return g(t,i);const s=g(n,i,0,o[0].length),l=g(n,i,n.lastIndexOf(o[1])),c=function(t,n,i){return r.react.exports.createElement("span",{className:e.classnames({[a]:h(t,n,i)})},"…")}(o[0].length+1,n.lastIndexOf(o[1])-1,i);return r.react.exports.createElement("span",null,s,c,l)};t.HighlightedTruncatedString=u}));
//# sourceMappingURL=c_src_highlighted-truncated-string_index.js-vflZ_JGvW.map
