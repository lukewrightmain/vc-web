define(["exports","./e_edison","./c_core_i18n","./c_ui_section_section_empty_text","./c_tslib","./e_core_exception","./c_content_suggestions_models_suggested_item","./e_ui_page_files_router","./c_core_exception_info","./c_lodash-es_lodash"],(function(e,t,s,i,r,n,o,a,d,u){"use strict";function c(e){if(!e)return"ERROR";const t=e.variant.split(":").pop();return{items:u.compact(e.suggested_items.map((e=>function(e,t){if(e[".tag"]===o.SuggestItemTypes.FILE){const s=e;return{resourceId:s.resource_id,encodedFileObjId:s.resource_id,key:s.resource_id,fqPath:s.fq_path,filename:s.filename,reason:s.reason,displayType:s.display_type[".tag"].toUpperCase(),isStarred:s.is_starred,breadcrumb:s.breadcrumb,url:s.url,suggestId:s.prediction_id,predictionId:s.prediction_id,isDismissed:!1,thumbnailUrl:s.thumbnail_url,isDir:s.is_dir,type:o.SuggestItemTypes.FILE,mlModel:t}}if(e[".tag"]===o.SuggestItemTypes.PAPER_DOCUMENT){const s=e;return{resourceId:s.resource_id,key:s.resource_id,reason:s.reason,displayType:s.display_type[".tag"].toUpperCase(),isStarred:s.is_starred,breadcrumb:s.breadcrumb,url:s.url,suggestId:s.prediction_id,predictionId:s.prediction_id,isDismissed:!1,thumbnailUrl:s.thumbnail_url,type:o.SuggestItemTypes.PAPER_DOCUMENT,mlModel:t}}return n.reportStack("Unknown suggested item type",{severity:d.SEVERITY.NONCRITICAL,exc_extra:e}),null}(e,t)))),modelVariant:e.variant}}const _=[{".tag":"file"},{".tag":"paper_document"}];function g(e,t,s,i,n){return r.__awaiter(this,void 0,void 0,(function*(){return(new a.UserApiV2Client).ns("suggest").rpc("get_suggested_v2",{variant:i,num_items:t,accepted_types:_,client_type:l(s),folder_path:n},{subjectUserId:e.id})}))}const p=e=>{switch(e){case"browse":return{".tag":"browse_suggest_content"};case"home":return{".tag":"suggest_content"}}},l=e=>{switch(e){case"browse":return{".tag":"web_browse"};case"home":return{".tag":"web_home"}}};function m(e,t,s){const i=function(e){switch(e.type){case a.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID:let t=e.id;return e.id.startsWith("id:")&&(t=e.id.substr(3)),E+t;case a.HOME_RESOURCE_ID_TYPE.PAPER_DOCUMENT_ID:case a.HOME_RESOURCE_ID_TYPE.PAPER_FOLDER_ID:return y+e.id}return e.id}(t),r={client:l(s),actions:[{entry_id:{id:i,version:1},action_type:{".tag":"dismiss"},timestamp:{timestamp_ms:Date.now()},feature_type:p(s)}]};return(new a.UserApiV2Client).ns("assistant").rpc("track_user_actions",r,{subjectUserId:e.id})}const E="RESOURCE/FILE/",y="RESOURCE/PAPER/";e.SuggestEmpty=()=>t.React$1.createElement(i.SectionEmptyText,{message:s.intl.formatMessage({id:"RVB4pC",defaultMessage:"As you use Dropbox, suggested items will automatically show up here."}),learnMoreLink:"/help/desktop-web/homepage#suggest"}),e.fetchSuggestedItemsInFolder=function(e,t,s,i){return r.__awaiter(this,void 0,void 0,(function*(){const r=c(yield g(e,t,i,void 0,s));if("ERROR"===r)throw new Error("no suggest response");return r}))},e.getSuggested=g,e.handlePayload=c,e.trackDismissSuggestedItem=function(e,t,s){return r.__awaiter(this,void 0,void 0,(function*(){const i=yield o.suggestedItemToIdTypePair(t);yield m(e,i,s)}))},e.trackDismissSuggestedItemFromIdTypePair=m}));
//# sourceMappingURL=c_content_suggestions_api.js-vflF-bGLv.map
