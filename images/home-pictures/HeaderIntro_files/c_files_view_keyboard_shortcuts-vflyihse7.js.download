define(["exports","./c_keymaster","./e_edison","./e_ui_page_files_router","./c_core_browser_detection","./c_core_i18n","./c_core_notify","./c_action_bar_action_bar_strings","./c_action_bar_action_bar_constants"],(function(e,t,s,a,l,o,i,n,d){"use strict";const r=["/","\\",":","?","*","<",">","|"];let c=null;const f=[{key:o.intl.formatMessage({id:"kOb587",defaultMessage:"/"}),desc:o.intl.formatMessage({id:"vOBkFB",defaultMessage:"Search"})},{windowsKey:o.intl.formatMessage({id:"JD6thv",defaultMessage:"Ctrl + a"}),macKey:o.intl.formatMessage({id:"vXQEej",defaultMessage:"⌘ + a"}),desc:o.intl.formatMessage({id:"n7drWm",defaultMessage:"Select all files"})},{windowsKey:o.intl.formatMessage({id:"yY9fAj",defaultMessage:"Esc"}),macKey:o.intl.formatMessage({id:"yIq4Am",defaultMessage:"esc"}),desc:o.intl.formatMessage({id:"m7zp3J",defaultMessage:"Deselect all files"})},{windowsKey:o.intl.formatMessage({id:"BmNZ7+",defaultMessage:"Ctrl + c"}),macKey:o.intl.formatMessage({id:"L/3I1a",defaultMessage:"⌘ + c"}),desc:o.intl.formatMessage({id:"jD02CF",defaultMessage:"Copy selected file(s)"})},{windowsKey:o.intl.formatMessage({id:"TeH7ne",defaultMessage:"Ctrl + x"}),macKey:o.intl.formatMessage({id:"Hjoc2x",defaultMessage:"⌘ + x"}),desc:o.intl.formatMessage({id:"JvfueH",defaultMessage:"Cut selected file(s)"})},{windowsKey:o.intl.formatMessage({id:"pApXZD",defaultMessage:"Ctrl + v"}),macKey:o.intl.formatMessage({id:"1MiQRb",defaultMessage:"⌘ + v"}),desc:o.intl.formatMessage({id:"ORvNm9",defaultMessage:"Paste selected file(s) into the current folder"})},{key:o.intl.formatMessage({id:"u3d9dU",defaultMessage:"F2"}),desc:o.intl.formatMessage({id:"GrOPDo",defaultMessage:"Rename selected file"})},{windowsKey:o.intl.formatMessage({id:"kHlg2I",defaultMessage:"Delete"}),macKey:o.intl.formatMessage({id:"ZZU2Yr",defaultMessage:"delete"}),desc:o.intl.formatMessage({id:"45XRF8",defaultMessage:"Delete selected file(s)"})},{windowsKey:o.intl.formatMessage({id:"8X8aMD",defaultMessage:"Ctrl + z"}),macKey:o.intl.formatMessage({id:"10+RMZ",defaultMessage:"⌘ + z"}),desc:o.intl.formatMessage({id:"HGnEOI",defaultMessage:"Undo recent move/copy/rename/delete"})},{key:o.intl.formatMessage({id:"YQJt5v",defaultMessage:"?"}),desc:o.intl.formatMessage({id:"mFXmY0",defaultMessage:"Show keyboard shortcuts"})}],u=[{key:o.intl.formatMessage({id:"lkVLik",defaultMessage:"↑"}),desc:o.intl.formatMessage({id:"Riu+zT",defaultMessage:"Select previous file (hold shift to select range)"})},{key:o.intl.formatMessage({id:"5ojTma",defaultMessage:"↓"}),desc:o.intl.formatMessage({id:"li5upG",defaultMessage:"Select next file (hold shift to select range)"})},{key:o.intl.formatMessage({id:"u6AlvH",defaultMessage:"←"}),desc:o.intl.formatMessage({id:"rJHa1d",defaultMessage:"Go up a folder"})},{key:o.intl.formatMessage({id:"LJ+WGg",defaultMessage:"→"}),desc:o.intl.formatMessage({id:"+WMBQW",defaultMessage:"Open folder"})},...f],g=[{key:o.intl.formatMessage({id:"lkVLik",defaultMessage:"↑"}),desc:o.intl.formatMessage({id:"Xg+zFf",defaultMessage:"Select file in previous row (hold shift to select range)"})},{key:o.intl.formatMessage({id:"5ojTma",defaultMessage:"↓"}),desc:o.intl.formatMessage({id:"erVlBC",defaultMessage:"Select file in next row (hold shift to select range)"})},{key:o.intl.formatMessage({id:"u6AlvH",defaultMessage:"←"}),desc:o.intl.formatMessage({id:"Riu+zT",defaultMessage:"Select previous file (hold shift to select range)"})},{key:o.intl.formatMessage({id:"LJ+WGg",defaultMessage:"→"}),desc:o.intl.formatMessage({id:"li5upG",defaultMessage:"Select next file (hold shift to select range)"})},...f];let m="";const M=new a.ScopedEventHandlers(document);function y(e,t){return s=>{e(s)&&(s.preventDefault(),"function"==typeof t&&t(s))}}e.FILES_VIEW_LIST_SHORTCUTS=u,e.FILES_VIEW_TILE_GRID_SHORTCUTS=g,e.generateGetIsGlobalEvent=function(e){return t=>!document.activeElement||document.activeElement===document.body||t.target instanceof Element&&s.reactDom.exports.findDOMNode(e).contains(t.target)},e.generateGetIsGlobalEventForRef=function(e){return t=>{var s;return!document.activeElement||document.activeElement===document.body||t.target instanceof Element&&(null===(s=e.current)||void 0===s?void 0:s.contains(t.target))||!1}},e.resetFileJumpKeyboardShortcuts=function(e){M.remove(e,"keypress")},e.resetFilesViewKeyboardShortcuts=function(e){var s;s=e,t.key.clearScope(s),t.key.setScope(m),M.remove(e,"keydown"),M.remove(e,"keyup")},e.setupFileJumpKeyboardShortcuts=function({scope:e,getIsFileJumping:s,onAddFileJumpKeyCode:l,onResetFileJump:o}){M.add(e,"keypress",(i=>{t.key.getScope()===e&&function(e,t,s,l){const o=e.key;Object.values(a.Key_enum.Key).includes(o)||r.includes(o)||!document.activeElement.closest(".brws-checkbox-cell")&&a.focus_in_input()||e.metaKey||e.altKey||e.altGraphKey||e.ctrlKey||" "===o&&!t()||(" "===o&&t()&&e.preventDefault(),s(o),null!=c&&clearTimeout(c),c=setTimeout((()=>{l()}),1e3))}(i,s,l,o)}))},e.setupFilesViewKeyboardShortcuts=function(e){const{scope:s,getIsItemEvent:r,getIsGlobalEvent:c}=e;m=t.key.getScope(),m!==s&&t.key.setScope(s);const f=function({user:e,viewType:t,getSelectedFiles:s,isCurrentPathWriteable:l,onShowHelpMenu:r,onDelete:c,onShowRename:f,onFocusSearchBar:u,onNavigateToFileOrFolder:g,onNavigateToParentFolder:m,selectAllAction:M,onCopyToClipboard:y,onCutToClipboard:p,onPasteFromClipboard:_,deselectAllAction:k}){const v=()=>{const e=s(),t=e.some((e=>e.read_only));if(1===e.size)if(l()&&!t){const t=e.first();t.isDeleted?i.Notify.error(o.intl.formatMessage({id:"CCUrto",defaultMessage:"Deleted files can’t be renamed."})):f(t)}else i.Notify.warning(o.intl.formatMessage({id:"jXim1P",defaultMessage:"You don’t have permission to rename files in this folder."}))},S=()=>{const e=s(),t=e.some((e=>!!e.is_in_backup_folder||!!e.is_backup_folder)),a=e.count(),l=d.MAX_NUM_FILES_SELECTED,r=a>l;if(e.size){if(t)return;if(r)return void i.Notify.warning(o.intl.formatMessage(n.TOO_MANY_SELECTED_ITEMS_STRING,{actionStr:"Delete",num:l}));c(e)}},T=()=>{const e=s().count(),t=d.MAX_NUM_FILES_SELECTED;e>t?i.Notify.warning(o.intl.formatMessage(n.TOO_MANY_SELECTED_ITEMS_STRING,{actionStr:"Copy",num:t})):y()},b=()=>{a.performUndo()},h=()=>{const e=s();1===e.size&&g(e.first())},F=()=>{const e=s(),t=e.first();1===e.size&&t.is_dir&&g(t)},E=(s,l)=>{a.logKeyboardShortcutUsage({user_id:e?e.id:null,view_type:t,keyboard_shortcut_type:s}),l()};return{renameFile:()=>{E("rename",v)},focusSearchBar:()=>{E("search",u)},showHelpMenu:()=>{E("help",r)},selectAll:()=>{E("select-all",M)},copyToClipboard:()=>{E("copy",T)},cutToClipboard:()=>{E("cut",p)},deleteFiles:()=>{E("delete",S)},pasteFromClipboard:()=>{E("paste",_)},undoAction:()=>{E("undo",b)},deselectFiles:()=>{E("deselect",k)},navigateToFileOrFolder:()=>{E("navigate-file-folder",h)},navigateToFolder:()=>{E("navigate-folder",F)},navigateToParent:()=>{E("navigate-parent",m)}}}(e);t.key("f2",s,y(r,f.renameFile)),t.key("/",s,y(c,f.focusSearchBar)),t.key("shift+/",s,y(c,f.showHelpMenu)),t.key("escape",s,y(c,f.deselectFiles)),l.mac?(t.key("command+a",s,y(c,f.selectAll)),t.key("command+c",s,y(r,f.copyToClipboard)),t.key("backspace",s,y(r,f.deleteFiles)),t.key("command+v",s,y(c,f.pasteFromClipboard)),t.key("command+x",s,y(r,f.cutToClipboard)),t.key("command+z",s,y(c,f.undoAction))):(t.key("ctrl+a",s,y(c,f.selectAll)),t.key("ctrl+c",s,y(r,f.copyToClipboard)),t.key("delete",s,y(r,f.deleteFiles)),t.key("ctrl+v",s,y(c,f.pasteFromClipboard)),t.key("ctrl+x",s,y(r,f.cutToClipboard)),t.key("ctrl+z",s,y(c,f.undoAction))),e.viewType===a.ViewType.List&&(t.key("right",s,y(r,f.navigateToFolder)),t.key("left",s,y(c,f.navigateToParent)))}}));
//# sourceMappingURL=c_files_view_keyboard_shortcuts.js-vflBzuHLa.map
