define(["require","exports","./e_ui_page_files_router","./e_edison","./c_core_i18n","./c_lodash-es_lodash"],(function(e,t,s,r,n,o){"use strict";const a=({errorWrapperIdName:e,"disable-errors":t,error:s,errorWrapperClassName:n})=>t?null:null!=(null==s?void 0:s.message_html)?r.React$1.createElement("div",{id:e,className:n,dangerouslySetInnerHTML:{__html:s.message_html}}):r.React$1.createElement("div",{id:e,className:n},null==s?void 0:s.message_text);a.displayName="FormError";const i=function(t,i){var p;return p=class extends r.React$1.Component{constructor(){super(...arguments),this.displayName=t+"."+i,this.state={inputWidth:0,expanded:!1,value:this.props.defaultValue,errorWrapperIdName:o.uniqueId("input-error")},this.zxcvbnPromise=void 0,this.inputComponent=r.React$1.createRef(),this.closeButton=r.React$1.createRef(),this.getValue=()=>{var e;return null===(e=this.inputComponent.current)||void 0===e?void 0:e.value},this.setValue=e=>(this.inputComponent.current&&(this.inputComponent.current.value=e),this.setState({value:e})),this.resizeComponent=()=>{const e=this.inputComponent.current;e&&(e.style.height="1px",e.style.height=`${e.scrollHeight}px`)},this._renderPasswordStrengthBar=()=>{var e;return this.props.measureStrength?function(e,t=!1){const s=function(t){if(e>=t)return"password-input-dot-selected"};let n="password-input-meter";t&&(n="password-input-meter-standalone");const o=r.React$1.createElement("div",{className:n,ref:"meter"},r.React$1.createElement("div",{className:`password-input-dot ${s(4)}`}),r.React$1.createElement("div",{className:`password-input-dot ${s(3)}`}),r.React$1.createElement("div",{className:`password-input-dot ${s(2)}`}),r.React$1.createElement("div",{className:`password-input-dot ${s(1)}`}));return t?r.React$1.createElement("span",{className:"standalone-password-meter-container"},o):o}(null!==(e=this.state.score)&&void 0!==e?e:0):null},this._renderFinished=()=>(this.props.autoresize&&this.resizeComponent(),"function"==typeof this.props.afterRender?this.props.afterRender():void 0),this.onCloseClick=e=>{if(null!=e&&e.preventDefault(),!this.props.expandable)return void("function"==typeof this.props.onCloseClick&&this.props.onCloseClick(e));const t=this.closeButton.current,s=this.inputComponent.current;return t.style.opacity="0",s.style.width=`${this.state.inputWidth}px`,"function"==typeof this.props.onCloseClick&&this.props.onCloseClick(e),this.setState({expanded:!1})},this.onChangeInternal=e=>{if("function"==typeof this.props.onChange&&this.props.onChange(e),null!=this.props.value||(this.props.valueLink?this.props.valueLink.requestChange(e.currentTarget.value):this.setState({value:e.currentTarget.value})),this.props.measureStrength){let t;return t=this.state.zxcvbn&&e.currentTarget.value?Math.max(1,this.state.zxcvbn(e.currentTarget.value).score):0,this.setState({score:t})}},this.onFocusInternal=e=>{var t;if("function"==typeof this.props.onFocus&&this.props.onFocus(e),!1===this.props.expandable)return;const s=e.currentTarget,r=this.closeButton.current;let{inputWidth:n}=this.state;0===n&&this.inputComponent.current&&(n=this.inputComponent.current.offsetWidth,this.setState({inputWidth:n}));const o=n+(null!==(t=this.props.expandedWidthOffset)&&void 0!==t?t:0),a=o-parseInt(s.style.paddingRight)+r.offsetWidth/2;return r.style.left=`${a}px`,s.style.width=`${o}px`,s.style.opacity="1",this.setState({expanded:!0})},this.onBlurInternal=e=>{const t=e.currentTarget.value;return!0===this.props.closeOnBlur&&0===t.length&&this.onCloseClick(e),"function"==typeof this.props.onBlur?this.props.onBlur(e):void 0},this.onKeyDownInternal=e=>{if("function"==typeof this.props.onKeyDown&&this.props.onKeyDown(e),null!=this.state.expanded!=!1)return e.key===s.Key_enum.Key.Escape?(e.currentTarget.blur(),this.onCloseClick(e)):void 0}}UNSAFE_componentWillMount(){this.props.measureStrength&&(this.zxcvbnPromise=s.makeCancelable(new Promise((function(t,s){e(["./c_zxcvbn_lib_main"],t,s)})).then((function(e){return e.main}))),this.zxcvbnPromise.then((({default:e})=>{this.setState({zxcvbn:e})})))}componentWillUnmount(){this.zxcvbnPromise&&this.zxcvbnPromise.cancel()}componentDidMount(){var e;this._renderFinished();const t=null===(e=this.inputComponent.current)||void 0===e?void 0:e.offsetWidth;if(t)return this.setState({inputWidth:t})}componentDidUpdate(){return this._renderFinished()}render(){const e={"text-input-input":!0,autofocus:this.props.autofocus,"password-input":"password"===i},o={"text-input":!0,"text-wip-migration-wip":!0,"text-input-expandable":this.props.expandable,"text-input-inline":this.props.inline,"textarea-input":"textarea"===t};if(o[this.props.variant||"standard"]=!0,this.props.className){this.props.className.split(/\s/).forEach((e=>o[e]=!0))}const p=r.React$1.createElement(a,Object.assign({},this.props,{errorWrapperIdName:this.state.errorWrapperIdName}));let l;((null!=this.props.error?this.props.error.message_text:void 0)||null!=(null!=this.props.error?this.props.error.message_html:void 0))&&(l=this.state.errorWrapperIdName);let u=s.TextInput;"textarea"===t&&(u=s.TextArea);const c={id:this.props.id,name:this.props.name,"aria-describedby":l,"aria-label":l,className:s.classnames(e),type:i,value:this.props.value||(null!=this.props.valueLink?this.props.valueLink.value:void 0)||this.state.value,onChange:this.onChangeInternal,onFocus:this.onFocusInternal,onBlur:this.onBlurInternal,onKeyDown:this.onKeyDownInternal,autoFocus:this.props.autofocus,ref:this.inputComponent,placeholder:this.props.placeholder&&"password"!==i?this.props.placeholder:""};for(const e in this.props)void 0===c[e]&&"autofocus"!==e&&(c[e]=this.props[e]);const h=r.React$1.createElement(u,Object.assign({},c));return r.React$1.createElement("div",{style:this.props.style,className:s.classnames(o)},!this.props["error-after"]&&p,r.React$1.createElement("div",{className:"text-input-wrapper"},this._renderPasswordStrengthBar(),h,this.props.expandable&&r.React$1.createElement("a",{href:"#",onClick:this.onCloseClick,ref:this.closeButton,className:"close-button u-mar-left-xs"},r.React$1.createElement(s.Sprite,{group:"web",name:"xclose",alt:n.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"})})),this.props.placeholder&&"password"===i&&!(this.props.value||(null!=this.props.valueLink?this.props.valueLink.value:void 0)||this.state.value)&&r.React$1.createElement("div",{className:"password-placeholder-label"},r.React$1.createElement(s.Text,{size:"standard",tagName:"label",htmlFor:this.props.id},this.props.placeholder))),this.props["error-after"]&&p)}},p.defaultProps={errorWrapperClassName:"text-input-error-wrapper",expandedWidthOffset:90,expandable:!1,animationCurve:"easeOutSine",animationDuration:300,compatiblePlaceholder:!1},p},p=i("input","password"),l=i("input","text");i("textarea","text"),t.FormError=a,t.password=p,t.text=l}));
//# sourceMappingURL=c_ui_input_dig.js-vflUgIxtO.map
