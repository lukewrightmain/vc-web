define(["exports","./c_flows_constants","./c_flows_redux_reducer","./e_ui_page_files_router","./c_src_common_constants","./c_tslib","./c_flows_lib_api","./c_flows_logging_flows_loggers","./e_core_exception","./c_core_exception_info","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","./c_lodash-es_lodash","./e_edison","./c_core_uri","./c_apex-metrics_src_types","metaserver/static/js/modules/constants/files_spa","./c_core_notify","./c_core_i18n","./c_src_sink_index","./c_core_browser_detection","metaserver/static/js/modules/core/langpack","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/viewer","metaserver/static/js/modules/constants/auth","./c_api_v2_noauth_client","./c_browser_cookies","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/ajax_strings","./c_csrf","./c_core_xhr","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/webtiming","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/trademark","metaserver/static/js/modules/constants/campaigns_orchestration","metaserver/static/js/modules/constants/maestro_nav_strings","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/undo_strings","metaserver/static/js/modules/constants/contacts","metaserver/static/js/modules/constants/login_and_register"],(function(e,t,r,s,o,n,a,i,l,c,d,u,m,_,f,v,g,w,p,E,h,k,S,A,T,W,b,j,B,I,x,O,M,P,F,U,R,C,N,L,D,q){"use strict";const y=e=>e[s.AUTOMATIONS_NAMESPACE_KEY]||r.defaultAutomationsState,X=e=>{const{userAutomations:t}=y(e);return"completed"===t.status&&t.data?t.data.filter((e=>!r.isInherited(e))):[]},H=e=>{const{userExperiments:t}=y(e);return"completed"===t.status&&t.data?t.data:[]},K=e=>y(e).workflowBuilder,V=e=>{const t=K(e);return(null==t?void 0:t.actions)||[]},Y=e=>{const{workflowStepsConfig:t}=y(e);return t},z=s.createSelector(Y,V,((e,t)=>"completed"===e.status?0===t.length?e.allowedTriggers:1===t.length?Object.keys(e.triggerActionMaps).filter((r=>e.triggerActionMaps[r].includes(t[0].actionType))):e.allowedTriggers.filter((e=>"scheduled"!==e)):["file_add"])),G=e=>{var t;return(null===(t=K(e))||void 0===t?void 0:t.width)||o.MODAL_DEFAULT_WIDTH},J=s.createSelector(G,(e=>e===o.MODAL_FULL_WIDTH));const Q=e=>{var t;return null===(t=K(e))||void 0===t?void 0:t.savedWorkflowTemplateState},Z=e=>{const r=H(e).find((e=>e.feature===t.UI_EXPERIMENTS.SUBFOLDER_INHERITANCE));return"ON"===(null==r?void 0:r.variant)},$=e=>t=>{const{inheritanceBlockingFqPaths:r}=y(t);return!!e&&r.has(e)};e.canWorkflowBuilderRenderPreview=J,e.getAllowedWorkflowActions=e=>{const{workflowStepsConfig:t}=y(e);return"completed"===t.status?t.allowedActions:[]},e.getAllowedWorkflowTriggers=z,e.getAutomationsState=y,e.getFlowsFolderRulesActionExperiments=e=>{const{workflowStepsConfig:t}=y(e);return"completed"===t.status&&t.actionExperiments||[]},e.getOptOutCheckboxState=e=>{const t=Q(e);return t&&t.optOut||!1},e.getSavedWorkflowTemplateCheckboxState=e=>{const t=Q(e);return t&&t.isChecked||!1},e.getSavedWorkflowTemplateExperiment=function(e){const{userExperiments:r}=y(e);let s;return"completed"===r.status&&r.data&&(s=r.data.find((e=>e.feature===t.UI_EXPERIMENTS.SAVED_WORKFLOW_TEMPLATE_CREATE))),s},e.getSavedWorkflowTemplateName=e=>{const t=Q(e);return void 0!==t&&t.name||""},e.getSavedWorkflowTemplateVariant=function(e){const{userExperiments:r}=y(e);let s;return"completed"===r.status&&r.data&&(s=r.data.find((e=>e.feature===t.UI_EXPERIMENTS.SAVED_WORKFLOW_TEMPLATE_CREATE))),(null==s?void 0:s.variant)||"OFF"},e.getSavedWorkflowTemplates=e=>{const{savedWorkflowTemplates:t}=y(e);return t||[]},e.getUserAutomation=e=>t=>{if(e)return X(t).find((({fqPath:t})=>t===e))},e.getUserAutomationWithInheritance=e=>t=>{const{userAutomations:r}=y(t);if(!e||"completed"!==r.status||!r.data)return;const o=new Map(r.data.map((e=>[e.fqPath,e])));if(o.has(e))return o.get(e);if(!Z(t)||$(e)(t))return;let n=s.parent_dir(e);for(;"/"!==n;){const r=o.get(n);if(r)return r.inheritable?Object.assign(Object.assign({},r),{fqPath:e,inheritedFromFqPath:r.fqPath}):void 0;if($(n)(t))return;n=s.parent_dir(n)}},e.getUserAutomations=X,e.getUserExperiments=H,e.getWorkflowBuilderActions=V,e.getWorkflowBuilderApplyToExisting=e=>{var t;return(null===(t=K(e))||void 0===t?void 0:t.applyToExistingFiles)||!1},e.getWorkflowBuilderDashboardActionSource=e=>{var t;return null===(t=K(e))||void 0===t?void 0:t.dashboardActionSource},e.getWorkflowBuilderEntryPoint=e=>{var t;return null===(t=y(e).workflowBuilder)||void 0===t?void 0:t.entryPoint},e.getWorkflowBuilderInheritable=e=>{var t;return(null===(t=K(e))||void 0===t?void 0:t.inheritable)||!1},e.getWorkflowBuilderIsEnabled=e=>{const t=K(e);return Boolean(null==t?void 0:t.isEnabled)},e.getWorkflowBuilderModalSessionId=e=>{var t;return(null===(t=y(e).workflowBuilder)||void 0===t?void 0:t.modalSessionId)||""},e.getWorkflowBuilderOperation=e=>{var t;return(null===(t=y(e).workflowBuilder)||void 0===t?void 0:t.operation)||"create"},e.getWorkflowBuilderStatus=e=>{var t;return null===(t=K(e))||void 0===t?void 0:t.isEnabled},e.getWorkflowBuilderSurface=e=>{var t;return null===(t=K(e))||void 0===t?void 0:t.surface},e.getWorkflowBuilderTrigger=e=>{const t=K(e);return null==t?void 0:t.trigger},e.getWorkflowBuilderWidth=G,e.getWorkflowStepsConfig=Y,e.isInheritanceBlockingFqPath=$,e.shouldSeeSubfolderInheritance=Z,e.shouldShowMultiStepWorkflowBuilder=e=>{const{userExperiments:r}=y(e);return!("completed"!==r.status||!r.data)&&r.data.some((e=>e.feature===t.UI_EXPERIMENTS.AUTOMATION_UI&&"M2"===e.variant))},e.shouldSubscribeToBolt=e=>y(e).shouldSubscribeToBolt}));
//# sourceMappingURL=c_flows_redux_selectors.js-vflRyeptB.map
