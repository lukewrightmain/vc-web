define(["exports","./e_ui_page_files_router","./c_previews_data_actions","./c_file_store_utils","./c_lodash-es_lodash"],(function(e,i,t,r,s){"use strict";var o;!function(e){e.PutFile="PUT_FILE",e.PutFileMap="PUT_FILE_MAP"}(o||(o={}));const a={};var n;e.Actions=void 0,(n=e.Actions||(e.Actions={})).TriggerVoiceover="FileViewer/TriggerVoiceover",n.ResetVoiceoverTrigger="FileViewer/ResetVoiceoverTrigger",n.InitFetchCaptureFileVoiceover="FileViewer/InitFetchCaptureFileVoiceover",n.SetCaptureFileVoiceover="FileViewer/SetCaptureFileVoiceover",n.ClearCaptureFileVoiceover="FileViewer/ClearCaptureFileVoiceover",n.OpenCaptureFileVoiceover="FileViewer/OpenCaptureFileVoiceover",n.CloseCaptureFileVoiceover="FileViewer/CloseCaptureFileVoiceover",n.CancelFetchIsFileOwner="FileViewer/FetchIsFileOwner",n.FetchIsFileOwner="FileViewer/FetchIsFileOwner",n.SetIsFileOwner="FileViewer/SetIsFileOwner",n.SetShowPostCreationTooltip="FileViewer/SetShowPostCreationTooltip";const c={voiceoverTriggerState:{triggered:!1},fileCaptureVoiceover:{state:"none"},isFileOwnerData:{}};const l={filePreviews:{}};function u(e){const i=s.keyBy(e,r.getFileStoreId);return{type:o.PutFileMap,payload:i}}const p={[i.CAPTURE_NAMESPACE_KEY]:i.captureReducer,[i.FILE_NAMESPACE_KEY]:function(e=a,i){switch(i.type){case o.PutFile:return Object.assign(Object.assign({},e),{[i.payload.fileId]:i.payload.file});case o.PutFileMap:return Object.assign(Object.assign({},e),i.payload)}return e},[i.FILE_VIEWER_NAMESPACE_KEY]:function(i=c,t){switch(t.type){case e.Actions.TriggerVoiceover:return Object.assign(Object.assign({},i),{voiceoverTriggerState:Object.assign({},t.payload)});case e.Actions.ResetVoiceoverTrigger:return Object.assign(Object.assign({},i),{voiceoverTriggerState:{triggered:!1}});case e.Actions.InitFetchCaptureFileVoiceover:return"fetching"===i.fileCaptureVoiceover.state?i:Object.assign(Object.assign({},i),{fileCaptureVoiceover:{state:"fetching",fileId:t.payload.fileId}});case e.Actions.SetCaptureFileVoiceover:return t.payload.override||"fetching"===i.fileCaptureVoiceover.state&&i.fileCaptureVoiceover.fileId===t.payload.fileId?Object.assign(Object.assign({},i),{fileCaptureVoiceover:{state:"loaded",fileId:t.payload.fileId,shortLabel:t.payload.shortLabel,isOpen:!0,showPostCreationTooltip:!1}}):i;case e.Actions.ClearCaptureFileVoiceover:return"none"===i.fileCaptureVoiceover.state||i.fileCaptureVoiceover.fileId!==t.payload.fileId?i:Object.assign(Object.assign({},i),{fileCaptureVoiceover:{state:"none"}});case e.Actions.OpenCaptureFileVoiceover:return"loaded"!==i.fileCaptureVoiceover.state?i:Object.assign(Object.assign({},i),{fileCaptureVoiceover:Object.assign(Object.assign({},i.fileCaptureVoiceover),{isOpen:!0})});case e.Actions.CloseCaptureFileVoiceover:return"loaded"!==i.fileCaptureVoiceover.state?i:Object.assign(Object.assign({},i),{fileCaptureVoiceover:Object.assign(Object.assign({},i.fileCaptureVoiceover),{isOpen:!1})});case e.Actions.SetShowPostCreationTooltip:return"loaded"!==i.fileCaptureVoiceover.state?i:Object.assign(Object.assign({},i),{fileCaptureVoiceover:Object.assign(Object.assign({},i.fileCaptureVoiceover),{showPostCreationTooltip:t.payload.showPostCreationTooltip})});case e.Actions.FetchIsFileOwner:{const e=i.isFileOwnerData,{userId:r,fileId:s}=t.payload;return i.isFileOwnerData[r]?e[r][s]={isOwner:null,isFetching:!0}:e[r]={[s]:{isOwner:null,isFetching:!0}},Object.assign(Object.assign({},i),{isFileOwnerData:e})}case e.Actions.CancelFetchIsFileOwner:{const e=i.isFileOwnerData,{userId:r,fileId:s}=t.payload;return i.isFileOwnerData[r]?e[r][s]={isOwner:null,isFetching:!1}:e[r]={[s]:{isOwner:null,isFetching:!1}},Object.assign(Object.assign({},i),{isFileOwnerData:e})}case e.Actions.SetIsFileOwner:{const e=i.isFileOwnerData,{userId:r,fileId:s,isOwner:o}=t.payload;return i.isFileOwnerData[r]?e[r][s]={isOwner:o,isFetching:!1}:e[r]={[s]:{isOwner:o,isFetching:!1}},Object.assign(Object.assign({},i),{isFileOwnerData:e})}default:return i}},[i.PREVIEW_NAMESPACE_KEY]:function(e=l,i){return i.type===t.ActionTypes.UpdatePreviewData?Object.assign(Object.assign({},e),{filePreviews:Object.assign(Object.assign({},e.filePreviews),i.payload)}):e}};e.getStoreForFileViewer=()=>(i.getStore(),i.getStoreAndRegisterReducers(p)),e.hydrateFileStore=function(e,i){e.dispatch(t.populateFilesPreviewData(i)),e.dispatch(u(i))},e.putFile=function(e,i){return{type:o.PutFile,payload:{file:e,fileId:null!=i?i:r.getFileStoreId(e)}}},e.updateFileStore=function(e,i){e.dispatch(u(i))}}));
//# sourceMappingURL=c_file_viewer_data_store.js-vfl37n9MW.map
