define(["exports","./c_tslib","./e_edison","./e_ui_page_files_router","./c_core_i18n","./c_file_store_utils","./c_campaigns_campaign_events_api","./c_core_uri","./c_lodash-es_lodash","./c_apex-metrics_src_types","metaserver/static/js/modules/constants/files_spa","./e_core_exception","./c_core_exception_info","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","./c_core_notify","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/viewer","metaserver/static/js/modules/constants/auth","./c_api_v2_noauth_client","./c_browser_cookies","./c_src_sink_index","./c_core_browser_detection","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/ajax_strings","./c_csrf","./c_core_xhr","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/webtiming","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/trademark","metaserver/static/js/modules/constants/campaigns_orchestration","metaserver/static/js/modules/constants/maestro_nav_strings","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/undo_strings","metaserver/static/js/modules/constants/contacts","metaserver/static/js/modules/constants/login_and_register","metaserver/static/js/modules/core/langpack"],(function(e,t,a,s,i,r,o,n,c,l,d,p,_,m,u,g,v,f,x,y,b,w,j,E,h,k,M,C,D,N,R,T,A,B,F,I,S,P,U){"use strict";s.injectInternalStyle("metaserver/static/js/file_viewer/sdk_file_viewer/upsell/upsell_dialog.module.out.css",(e=>"._upsell-dialog-container_ybfdt_6{bottom:0;padding:var(--spacing__unit--3);position:absolute;right:0}._upsell-dialog_ybfdt_6{background:var(--color__faint__background);border:1px solid var(--color__standard__border);box-sizing:border-box;max-width:360px;padding:var(--spacing__unit--4);width:100%}._upsell-secondary-button_ybfdt_21{margin-left:var(--spacing__unit--2)}._upsell-footer_ybfdt_25{align-items:center;display:flex;flex-direction:row;justify-content:start;margin-top:var(--spacing__unit--3)}"));const $=({acceptText:e,declineText:t,titleText:i,bodyContent:r,afterAccept:o,afterDecline:n,uxaPrefix:c,redirectUrl:l,acceptLinkProps:d={},"data-testid":p})=>{const[_,m]=a.react.exports.useState(!1),u=a.react.exports.useRef(!0);a.react.exports.useEffect((()=>(u.current=!0,()=>{u.current=!1})));return _?null:a.react.exports.createElement("div",{className:"_upsell-dialog-container_ybfdt_6","data-testid":p},a.react.exports.createElement("div",{className:"_upsell-dialog_ybfdt_6"},a.react.exports.createElement(s.Title,{size:"standard",isBold:!0},i),r,a.react.exports.createElement("div",{className:"_upsell-footer_ybfdt_25"},a.react.exports.createElement(s.Button,Object.assign({variant:"outline",href:l,onClick:()=>o(m),"data-uxa-log":`${c}-upsell-dialog-continue`},d),e),a.react.exports.createElement("div",{className:"_upsell-secondary-button_ybfdt_21"},a.react.exports.createElement(s.Button,{variant:"transparent",onClick:()=>{m(!0),n&&n()},"data-uxa-log":`${c}-upsell-dialog-dismiss`},t)))))};$.displayName="UpsellDialog";const q=e=>new s.DefaultUserApiV2Client(e);function G(e,a,i){return t.__awaiter(this,void 0,void 0,(function*(){e&&(yield q(e).ns("reel").rpc("log_replay_preview_entry_point_action",{entrypoint_action:{".tag":a}},{})),s.UserActivityLogger.log("web","replay-fvsdk-dialog-"+a,{variant:i})}))}const L=({user:e,file:n})=>{const[c,l]=a.react.exports.useState(!1),[d,p]=a.react.exports.useState(void 0);a.react.exports.useEffect((()=>{t.__awaiter(void 0,void 0,void 0,(function*(){var a,i;if(e&&n&&r.isBrowseFile(n)){const c=null===(a=s.ExtensionCategories[r.getExtension(n)])||void 0===a?void 0:a.toLowerCase();if("video"!==c&&"audio"!==c&&"image"!==c)return;const d=yield function(e,a){return t.__awaiter(this,void 0,void 0,(function*(){return yield q(e).ns("reel").rpc("get_replay_preview_entry_point_eligibility",{media_type:{".tag":a}},{})}))}(e,c);l(!!d.show_entrypoint&&d.show_entrypoint),(null===(i=d.campaign_context)||void 0===i?void 0:i.campaign_impression_id)&&p(o.createMegaphoneCampaignImpressionContext(d.campaign_context.campaign_impression_id,d.campaign_context.campaign_id?`${d.campaign_context.campaign_id}`:void 0,d.campaign_context.campaign_variant_id?`${d.campaign_context.campaign_variant_id}`:void 0))}}))}),[]),a.react.exports.useEffect((()=>{e&&c&&(G(e,"impression",0),d&&o.logCampaignImpression(d))}),[c]);const _=n?`https://replay.dropbox.com/project/creating/${n.file_id}?creationSource=dropbox_previews_prompt`:"https://replay.dropbox.com/?login=true";return c?a.react.exports.createElement($,{afterAccept:()=>{e&&G(e,"acknowledgement",0),d&&o.logCampaignClick(d)},afterDecline:()=>{e&&G(e,"dismissal",0),d&&o.logCampaignDismissed(d)},uxaPrefix:"replay-fvsdk-prompt",titleText:n&&r.isBrowseFile(n)&&"IMAGE"===s.ExtensionCategories[r.getExtension(n)]?i.intl.formatMessage({id:"fJp3JL",defaultMessage:"Fast-track image approvals with Dropbox Replay"}):n&&r.isBrowseFile(n)&&"AUDIO"===s.ExtensionCategories[r.getExtension(n)]?i.intl.formatMessage({id:"ValGuy",defaultMessage:"Fast-track audio approvals with Dropbox Replay"}):i.intl.formatMessage({id:"qQoYME",defaultMessage:"Fast-track video approvals with Dropbox Replay"}),bodyContent:a.react.exports.createElement(a.react.exports.Fragment,null,a.react.exports.createElement(s.Text,{className:"replay-dialog-subtext",tagName:"p",isBold:!0},i.intl.formatMessage({id:"0RFIO+",defaultMessage:"Speed up the review and approval process for video, image, and audio files."})),a.react.exports.createElement(s.Text,{className:"replay-dialog-subtext",tagName:"div"},a.react.exports.createElement("ul",{className:"replay-dialog-list",style:{paddingInlineStart:"20px"}},a.react.exports.createElement("li",null,i.intl.formatMessage({id:"qOrqAu",defaultMessage:"Provide frame-accurate comments and markups"})),a.react.exports.createElement("li",null,i.intl.formatMessage({id:"501bEW",defaultMessage:"Connect the feedback you receive with your video editing tools including Adobe Premiere Pro, Blackmagic Design DaVinci Resolve, and more."})),a.react.exports.createElement("li",null,i.intl.formatMessage({id:"xQjeY3",defaultMessage:"Review videos in a real-time virtual viewing room"}))))),acceptText:i.intl.formatMessage({id:"RGcvfk",defaultMessage:"Get started"}),declineText:i.intl.formatMessage({id:"t97mKK",defaultMessage:"Not now"}),redirectUrl:_}):null};L.displayName="ReplayDialog",e.ReplayDialog=L}));
//# sourceMappingURL=c_sdk_file_viewer_replay_prompt_replay_dialog.js-vflgK9Gn-.map
