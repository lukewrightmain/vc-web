define(["exports","./e_edison","./e_ui_page_files_router","./c_flows_approval_approval_io_client","./c_core_i18n","./c_components_approval-forms_approval_request_modal","./c_components_approval-forms_approval_checkbox_in_share","./c_file_viewer_sdk_file_viewer_experiments"],(function(e,t,a,o,l,n,r,s){"use strict";const i="flows-approval-snackbar";const c=({file:e,user:r,onSuccess:c})=>{const{retryButtonText:p,closeButtonText:u}={closeButtonText:l.intl.formatMessage({id:"DksqCe",defaultMessage:"Close"}),retryButtonText:l.intl.formatMessage({id:"t5qBgj",defaultMessage:"Retry"})},[d,m]=t.react.exports.useState(!0);t.react.exports.useEffect((()=>{document.body.classList.contains("dig-Modal-body--open")&&document.body.classList.remove("dig-Modal-body--open")}));const _=t.react.exports.useCallback((()=>{m(!1)}),[]),f=t.react.exports.useCallback((e=>{a.Snackbar.update(t.React$1.createElement(a.Snackbar,{id:i,title:l.intl.formatMessage({id:"vzTxj6",defaultMessage:"Sending approval {numApprovers, plural, one {email} other {emails}}..."},{numApprovers:e}),variant:"sync"}))}),[]),v=t.react.exports.useCallback((e=>{a.Snackbar.update(t.React$1.createElement(a.Snackbar,{id:i,title:l.intl.formatMessage({id:"DlxyxT",defaultMessage:"Approval {numApprovers, plural, one {email} other {emails}} sent."},{numApprovers:e}),closeButtonText:u,variant:"complete"}))}),[u]),b=t.react.exports.useCallback(((e,o)=>{a.Snackbar.update(t.React$1.createElement(a.Snackbar,{id:i,title:l.intl.formatMessage({id:"1Mrdrn",defaultMessage:"Approval {numApprovers, plural, one {email} other {emails}} not sent."},{numApprovers:e}),closeButtonText:u,variant:"fail",onActionClick:()=>{f(e),o()},actionButtonText:p}))}),[u,p,f]);return t.React$1.createElement(n.ApprovalRequestModal,{file:{id:e.file_id,name:"fq_path"in e?a.filename(e.fq_path):e.filename,modifiedAt:(x=e.ts,null==x?"":a.format_date_timezone_offset(new Date(1e3*x),a.localized_datetime_format)),modifiedBy:"last_modified_name"in e?e.last_modified_name||void 0:null},onSubmit:e=>{_(),f(e)},onSubmitSuccess:e=>{v(e),null==c||c()},onSubmitFailure:(e,t)=>{b(e,t)},onRequestClose:_,ioClient:o.approvalIOClient(r.id),open:d,multiApprovers:"MULTI_APPROVER"===s.fileViewerFlowExperiments.approvalFlowVariantByUserId[r.id]});var x};e.launchApprovalRequestModal=function({file:e,user:o,onSuccess:n}){a.Modal.setAppElement(document.getElementById("embedded-app")||document.body),a.mountModal(t.React$1.createElement(l.Provider,{value:l.intl},t.React$1.createElement(c,Object.assign({},{file:e,user:o,onSuccess:n}))))}}));
//# sourceMappingURL=c_flows_approval_approval_request_modal.js-vflsjl8qj.map
