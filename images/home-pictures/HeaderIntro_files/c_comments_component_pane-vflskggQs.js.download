define(["exports","./e_edison","./e_ui_page_files_router","./c_spectrum_tertiary_link_tertiary_list","./c_spectrum_tooltip","./c_spectrum_avatar_avatar_initials","./c_spectrum_avatar_avatar_color_util","./c_ui-icon_line_delete","./c_tslib","./c_lodash-es_lodash","./c_truncate_index","./c_ui-icon_line_emoji-smile","./c_spectrum_icon_arrow_index","./c_comments_data_store","./c_ui-icon_line_mention","./c_ui-icon_line_restore","./c_components_utils_throttle-debounce","./c_core_i18n","./c_components_approval-forms_approval_request_modal","./c_components_approval-forms_approval_checkbox_in_share","./c_src_common_filepath","./c_components_approval-forms_gating_utils"],(function(e,t,r,n,o,i,a,s,c,l,u,d,p,f,m,h,g,_,v,y,b,x){"use strict";var S,w={exports:{}};S=w,l.commonjsGlobal,S.exports=function(){var e=Array.prototype.slice;function t(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function r(e){return a(e)?e:$(e)}function n(e){return s(e)?e:G(e)}function o(e){return c(e)?e:Q(e)}function i(e){return a(e)&&!l(e)?e:J(e)}function a(e){return!(!e||!e[d])}function s(e){return!(!e||!e[p])}function c(e){return!(!e||!e[f])}function l(e){return s(e)||c(e)}function u(e){return!(!e||!e[m])}t(n,r),t(o,r),t(i,r),r.isIterable=a,r.isKeyed=s,r.isIndexed=c,r.isAssociative=l,r.isOrdered=u,r.Keyed=n,r.Indexed=o,r.Set=i;var d="@@__IMMUTABLE_ITERABLE__@@",p="@@__IMMUTABLE_KEYED__@@",f="@@__IMMUTABLE_INDEXED__@@",m="@@__IMMUTABLE_ORDERED__@@",h="delete",g=5,_=1<<g,v=_-1,y={},b={value:!1},x={value:!1};function S(e){return e.value=!1,e}function w(e){e&&(e.value=!0)}function E(){}function k(e,t){t=t||0;for(var r=Math.max(0,e.length-t),n=new Array(r),o=0;o<r;o++)n[o]=e[o+t];return n}function C(e){return void 0===e.size&&(e.size=e.__iterate(T)),e.size}function M(e,t){if("number"!=typeof t){var r=t>>>0;if(""+r!==t||4294967295===r)return NaN;t=r}return t<0?C(e)+t:t}function T(){return!0}function A(e,t,r){return(0===e||void 0!==r&&e<=-r)&&(void 0===t||void 0!==r&&t>=r)}function O(e,t){return I(e,t,0)}function D(e,t){return I(e,t,t)}function I(e,t,r){return void 0===e?r:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}var R=0,B=1,P=2,j="function"==typeof Symbol&&Symbol.iterator,z="@@iterator",N=j||z;function F(e){this.next=e}function K(e,t,r,n){var o=0===e?t:1===e?r:[t,r];return n?n.value=o:n={value:o,done:!1},n}function L(){return{value:void 0,done:!0}}function U(e){return!!W(e)}function q(e){return e&&"function"==typeof e.next}function H(e){var t=W(e);return t&&t.call(e)}function W(e){var t=e&&(j&&e[j]||e[z]);if("function"==typeof t)return t}function V(e){return e&&"number"==typeof e.length}function $(e){return null==e?ae():a(e)?e.toSeq():le(e)}function G(e){return null==e?ae().toKeyedSeq():a(e)?s(e)?e.toSeq():e.fromEntrySeq():se(e)}function Q(e){return null==e?ae():a(e)?s(e)?e.entrySeq():e.toIndexedSeq():ce(e)}function J(e){return(null==e?ae():a(e)?s(e)?e.entrySeq():e:ce(e)).toSetSeq()}F.prototype.toString=function(){return"[Iterator]"},F.KEYS=R,F.VALUES=B,F.ENTRIES=P,F.prototype.inspect=F.prototype.toSource=function(){return this.toString()},F.prototype[N]=function(){return this},t($,r),$.of=function(){return $(arguments)},$.prototype.toSeq=function(){return this},$.prototype.toString=function(){return this.__toString("Seq {","}")},$.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},$.prototype.__iterate=function(e,t){return de(this,e,t,!0)},$.prototype.__iterator=function(e,t){return pe(this,e,t,!0)},t(G,$),G.prototype.toKeyedSeq=function(){return this},t(Q,$),Q.of=function(){return Q(arguments)},Q.prototype.toIndexedSeq=function(){return this},Q.prototype.toString=function(){return this.__toString("Seq [","]")},Q.prototype.__iterate=function(e,t){return de(this,e,t,!1)},Q.prototype.__iterator=function(e,t){return pe(this,e,t,!1)},t(J,$),J.of=function(){return J(arguments)},J.prototype.toSetSeq=function(){return this},$.isSeq=ie,$.Keyed=G,$.Set=J,$.Indexed=Q;var X,Y,Z,ee="@@__IMMUTABLE_SEQ__@@";function te(e){this._array=e,this.size=e.length}function re(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function ne(e){this._iterable=e,this.size=e.length||e.size}function oe(e){this._iterator=e,this._iteratorCache=[]}function ie(e){return!(!e||!e[ee])}function ae(){return X||(X=new te([]))}function se(e){var t=Array.isArray(e)?new te(e).fromEntrySeq():q(e)?new oe(e).fromEntrySeq():U(e)?new ne(e).fromEntrySeq():"object"==typeof e?new re(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function ce(e){var t=ue(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function le(e){var t=ue(e)||"object"==typeof e&&new re(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}function ue(e){return V(e)?new te(e):q(e)?new oe(e):U(e)?new ne(e):void 0}function de(e,t,r,n){var o=e._cache;if(o){for(var i=o.length-1,a=0;a<=i;a++){var s=o[r?i-a:a];if(!1===t(s[1],n?s[0]:a,e))return a+1}return a}return e.__iterateUncached(t,r)}function pe(e,t,r,n){var o=e._cache;if(o){var i=o.length-1,a=0;return new F((function(){var e=o[r?i-a:a];return a++>i?L():K(t,n?e[0]:a-1,e[1])}))}return e.__iteratorUncached(t,r)}function fe(e,t){return t?me(t,e,"",{"":e}):he(e)}function me(e,t,r,n){return Array.isArray(t)?e.call(n,r,Q(t).map((function(r,n){return me(e,r,n,t)}))):ge(t)?e.call(n,r,G(t).map((function(r,n){return me(e,r,n,t)}))):t}function he(e){return Array.isArray(e)?Q(e).map(he).toList():ge(e)?G(e).map(he).toMap():e}function ge(e){return e&&(e.constructor===Object||void 0===e.constructor)}function _e(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function ve(e,t){if(e===t)return!0;if(!a(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||s(e)!==s(t)||c(e)!==c(t)||u(e)!==u(t))return!1;if(0===e.size&&0===t.size)return!0;var r=!l(e);if(u(e)){var n=e.entries();return t.every((function(e,t){var o=n.next().value;return o&&_e(o[1],e)&&(r||_e(o[0],t))}))&&n.next().done}var o=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{o=!0;var i=e;e=t,t=i}var d=!0,p=t.__iterate((function(t,n){if(r?!e.has(t):o?!_e(t,e.get(n,y)):!_e(e.get(n,y),t))return d=!1,!1}));return d&&e.size===p}function ye(e,t){if(!(this instanceof ye))return new ye(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(Y)return Y;Y=this}}function be(e,t){if(!e)throw new Error(t)}function xe(e,t,r){if(!(this instanceof xe))return new xe(e,t,r);if(be(0!==r,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),r=void 0===r?1:Math.abs(r),t<e&&(r=-r),this._start=e,this._end=t,this._step=r,this.size=Math.max(0,Math.ceil((t-e)/r-1)+1),0===this.size){if(Z)return Z;Z=this}}function Se(){throw TypeError("Abstract")}function we(){}function Ee(){}function ke(){}$.prototype[ee]=!0,t(te,Q),te.prototype.get=function(e,t){return this.has(e)?this._array[M(this,e)]:t},te.prototype.__iterate=function(e,t){for(var r=this._array,n=r.length-1,o=0;o<=n;o++)if(!1===e(r[t?n-o:o],o,this))return o+1;return o},te.prototype.__iterator=function(e,t){var r=this._array,n=r.length-1,o=0;return new F((function(){return o>n?L():K(e,o,r[t?n-o++:o++])}))},t(re,G),re.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},re.prototype.has=function(e){return this._object.hasOwnProperty(e)},re.prototype.__iterate=function(e,t){for(var r=this._object,n=this._keys,o=n.length-1,i=0;i<=o;i++){var a=n[t?o-i:i];if(!1===e(r[a],a,this))return i+1}return i},re.prototype.__iterator=function(e,t){var r=this._object,n=this._keys,o=n.length-1,i=0;return new F((function(){var a=n[t?o-i:i];return i++>o?L():K(e,a,r[a])}))},re.prototype[m]=!0,t(ne,Q),ne.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var r=H(this._iterable),n=0;if(q(r))for(var o;!(o=r.next()).done&&!1!==e(o.value,n++,this););return n},ne.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=H(this._iterable);if(!q(r))return new F(L);var n=0;return new F((function(){var t=r.next();return t.done?t:K(e,n++,t.value)}))},t(oe,Q),oe.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var r,n=this._iterator,o=this._iteratorCache,i=0;i<o.length;)if(!1===e(o[i],i++,this))return i;for(;!(r=n.next()).done;){var a=r.value;if(o[i]=a,!1===e(a,i++,this))break}return i},oe.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._iterator,n=this._iteratorCache,o=0;return new F((function(){if(o>=n.length){var t=r.next();if(t.done)return t;n[o]=t.value}return K(e,o,n[o++])}))},t(ye,Q),ye.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},ye.prototype.get=function(e,t){return this.has(e)?this._value:t},ye.prototype.includes=function(e){return _e(this._value,e)},ye.prototype.slice=function(e,t){var r=this.size;return A(e,t,r)?this:new ye(this._value,D(t,r)-O(e,r))},ye.prototype.reverse=function(){return this},ye.prototype.indexOf=function(e){return _e(this._value,e)?0:-1},ye.prototype.lastIndexOf=function(e){return _e(this._value,e)?this.size:-1},ye.prototype.__iterate=function(e,t){for(var r=0;r<this.size;r++)if(!1===e(this._value,r,this))return r+1;return r},ye.prototype.__iterator=function(e,t){var r=this,n=0;return new F((function(){return n<r.size?K(e,n++,r._value):L()}))},ye.prototype.equals=function(e){return e instanceof ye?_e(this._value,e._value):ve(e)},t(xe,Q),xe.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},xe.prototype.get=function(e,t){return this.has(e)?this._start+M(this,e)*this._step:t},xe.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},xe.prototype.slice=function(e,t){return A(e,t,this.size)?this:(e=O(e,this.size),(t=D(t,this.size))<=e?new xe(0,0):new xe(this.get(e,this._end),this.get(t,this._end),this._step))},xe.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var r=t/this._step;if(r>=0&&r<this.size)return r}return-1},xe.prototype.lastIndexOf=function(e){return this.indexOf(e)},xe.prototype.__iterate=function(e,t){for(var r=this.size-1,n=this._step,o=t?this._start+r*n:this._start,i=0;i<=r;i++){if(!1===e(o,i,this))return i+1;o+=t?-n:n}return i},xe.prototype.__iterator=function(e,t){var r=this.size-1,n=this._step,o=t?this._start+r*n:this._start,i=0;return new F((function(){var a=o;return o+=t?-n:n,i>r?L():K(e,i++,a)}))},xe.prototype.equals=function(e){return e instanceof xe?this._start===e._start&&this._end===e._end&&this._step===e._step:ve(this,e)},t(Se,r),t(we,Se),t(Ee,Se),t(ke,Se),Se.Keyed=we,Se.Indexed=Ee,Se.Set=ke;var Ce="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var r=65535&(e|=0),n=65535&(t|=0);return r*n+((e>>>16)*n+r*(t>>>16)<<16>>>0)|0};function Me(e){return e>>>1&1073741824|3221225471&e}function Te(e){if(!1===e||null==e)return 0;if("function"==typeof e.valueOf&&(!1===(e=e.valueOf())||null==e))return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){var r=0|e;for(r!==e&&(r^=4294967295*e);e>4294967295;)r^=e/=4294967295;return Me(r)}if("string"===t)return e.length>Fe?Ae(e):Oe(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return De(e);if("function"==typeof e.toString)return Oe(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function Ae(e){var t=Ue[e];return void 0===t&&(t=Oe(e),Le===Ke&&(Le=0,Ue={}),Le++,Ue[e]=t),t}function Oe(e){for(var t=0,r=0;r<e.length;r++)t=31*t+e.charCodeAt(r)|0;return Me(t)}function De(e){var t;if(je&&void 0!==(t=Pe.get(e)))return t;if(void 0!==(t=e[Ne]))return t;if(!Re){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Ne]))return t;if(void 0!==(t=Be(e)))return t}if(t=++ze,1073741824&ze&&(ze=0),je)Pe.set(e,t);else{if(void 0!==Ie&&!1===Ie(e))throw new Error("Non-extensible objects are not allowed as keys.");if(Re)Object.defineProperty(e,Ne,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Ne]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Ne]=t}}return t}var Ie=Object.isExtensible,Re=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}();function Be(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}var Pe,je="function"==typeof WeakMap;je&&(Pe=new WeakMap);var ze=0,Ne="__immutablehash__";"function"==typeof Symbol&&(Ne=Symbol(Ne));var Fe=16,Ke=255,Le=0,Ue={};function qe(e){be(e!==1/0,"Cannot perform this action with an infinite size.")}function He(e){return null==e?ot():We(e)&&!u(e)?e:ot().withMutations((function(t){var r=n(e);qe(r.size),r.forEach((function(e,r){return t.set(r,e)}))}))}function We(e){return!(!e||!e[$e])}t(He,we),He.prototype.toString=function(){return this.__toString("Map {","}")},He.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},He.prototype.set=function(e,t){return it(this,e,t)},He.prototype.setIn=function(e,t){return this.updateIn(e,y,(function(){return t}))},He.prototype.remove=function(e){return it(this,e,y)},He.prototype.deleteIn=function(e){return this.updateIn(e,(function(){return y}))},He.prototype.update=function(e,t,r){return 1===arguments.length?e(this):this.updateIn([e],t,r)},He.prototype.updateIn=function(e,t,r){r||(r=t,t=void 0);var n=gt(this,xr(e),t,r);return n===y?void 0:n},He.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):ot()},He.prototype.merge=function(){return pt(this,void 0,arguments)},He.prototype.mergeWith=function(t){return pt(this,t,e.call(arguments,1))},He.prototype.mergeIn=function(t){var r=e.call(arguments,1);return this.updateIn(t,ot(),(function(e){return"function"==typeof e.merge?e.merge.apply(e,r):r[r.length-1]}))},He.prototype.mergeDeep=function(){return pt(this,ft,arguments)},He.prototype.mergeDeepWith=function(t){var r=e.call(arguments,1);return pt(this,mt(t),r)},He.prototype.mergeDeepIn=function(t){var r=e.call(arguments,1);return this.updateIn(t,ot(),(function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,r):r[r.length-1]}))},He.prototype.sort=function(e){return Ut(ur(this,e))},He.prototype.sortBy=function(e,t){return Ut(ur(this,t,e))},He.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},He.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new E)},He.prototype.asImmutable=function(){return this.__ensureOwner()},He.prototype.wasAltered=function(){return this.__altered},He.prototype.__iterator=function(e,t){return new et(this,e,t)},He.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate((function(t){return n++,e(t[1],t[0],r)}),t),n},He.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?nt(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},He.isMap=We;var Ve,$e="@@__IMMUTABLE_MAP__@@",Ge=He.prototype;function Qe(e,t){this.ownerID=e,this.entries=t}function Je(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r}function Xe(e,t,r){this.ownerID=e,this.count=t,this.nodes=r}function Ye(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r}function Ze(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r}function et(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&rt(e._root)}function tt(e,t){return K(e,t[0],t[1])}function rt(e,t){return{node:e,index:0,__prev:t}}function nt(e,t,r,n){var o=Object.create(Ge);return o.size=e,o._root=t,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function ot(){return Ve||(Ve=nt(0))}function it(e,t,r){var n,o;if(e._root){var i=S(b),a=S(x);if(n=at(e._root,e.__ownerID,0,void 0,t,r,i,a),!a.value)return e;o=e.size+(i.value?r===y?-1:1:0)}else{if(r===y)return e;o=1,n=new Qe(e.__ownerID,[[t,r]])}return e.__ownerID?(e.size=o,e._root=n,e.__hash=void 0,e.__altered=!0,e):n?nt(o,n):ot()}function at(e,t,r,n,o,i,a,s){return e?e.update(t,r,n,o,i,a,s):i===y?e:(w(s),w(a),new Ze(t,n,[o,i]))}function st(e){return e.constructor===Ze||e.constructor===Ye}function ct(e,t,r,n,o){if(e.keyHash===n)return new Ye(t,n,[e.entry,o]);var i,a=(0===r?e.keyHash:e.keyHash>>>r)&v,s=(0===r?n:n>>>r)&v;return new Je(t,1<<a|1<<s,a===s?[ct(e,t,r+g,n,o)]:(i=new Ze(t,n,o),a<s?[e,i]:[i,e]))}function lt(e,t,r,n){e||(e=new E);for(var o=new Ze(e,Te(r),[r,n]),i=0;i<t.length;i++){var a=t[i];o=o.update(e,0,void 0,a[0],a[1])}return o}function ut(e,t,r,n){for(var o=0,i=0,a=new Array(r),s=0,c=1,l=t.length;s<l;s++,c<<=1){var u=t[s];void 0!==u&&s!==n&&(o|=c,a[i++]=u)}return new Je(e,o,a)}function dt(e,t,r,n,o){for(var i=0,a=new Array(_),s=0;0!==r;s++,r>>>=1)a[s]=1&r?t[i++]:void 0;return a[n]=o,new Xe(e,i+1,a)}function pt(e,t,r){for(var o=[],i=0;i<r.length;i++){var s=r[i],c=n(s);a(s)||(c=c.map((function(e){return fe(e)}))),o.push(c)}return ht(e,t,o)}function ft(e,t,r){return e&&e.mergeDeep&&a(t)?e.mergeDeep(t):_e(e,t)?e:t}function mt(e){return function(t,r,n){if(t&&t.mergeDeepWith&&a(r))return t.mergeDeepWith(e,r);var o=e(t,r,n);return _e(t,o)?t:o}}function ht(e,t,r){return 0===(r=r.filter((function(e){return 0!==e.size}))).length?e:0!==e.size||e.__ownerID||1!==r.length?e.withMutations((function(e){for(var n=t?function(r,n){e.update(n,y,(function(e){return e===y?r:t(e,r,n)}))}:function(t,r){e.set(r,t)},o=0;o<r.length;o++)r[o].forEach(n)})):e.constructor(r[0])}function gt(e,t,r,n){var o=e===y,i=t.next();if(i.done){var a=o?r:e,s=n(a);return s===a?e:s}be(o||e&&e.set,"invalid keyPath");var c=i.value,l=o?y:e.get(c,y),u=gt(l,t,r,n);return u===l?e:u===y?e.remove(c):(o?ot():e).set(c,u)}function _t(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function vt(e,t,r,n){var o=n?e:k(e);return o[t]=r,o}function yt(e,t,r,n){var o=e.length+1;if(n&&t+1===o)return e[t]=r,e;for(var i=new Array(o),a=0,s=0;s<o;s++)s===t?(i[s]=r,a=-1):i[s]=e[s+a];return i}function bt(e,t,r){var n=e.length-1;if(r&&t===n)return e.pop(),e;for(var o=new Array(n),i=0,a=0;a<n;a++)a===t&&(i=1),o[a]=e[a+i];return o}Ge[$e]=!0,Ge[h]=Ge.remove,Ge.removeIn=Ge.deleteIn,Qe.prototype.get=function(e,t,r,n){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(_e(r,o[i][0]))return o[i][1];return n},Qe.prototype.update=function(e,t,r,n,o,i,a){for(var s=o===y,c=this.entries,l=0,u=c.length;l<u&&!_e(n,c[l][0]);l++);var d=l<u;if(d?c[l][1]===o:s)return this;if(w(a),(s||!d)&&w(i),!s||1!==c.length){if(!d&&!s&&c.length>=xt)return lt(e,c,n,o);var p=e&&e===this.ownerID,f=p?c:k(c);return d?s?l===u-1?f.pop():f[l]=f.pop():f[l]=[n,o]:f.push([n,o]),p?(this.entries=f,this):new Qe(e,f)}},Je.prototype.get=function(e,t,r,n){void 0===t&&(t=Te(r));var o=1<<((0===e?t:t>>>e)&v),i=this.bitmap;return 0==(i&o)?n:this.nodes[_t(i&o-1)].get(e+g,t,r,n)},Je.prototype.update=function(e,t,r,n,o,i,a){void 0===r&&(r=Te(n));var s=(0===t?r:r>>>t)&v,c=1<<s,l=this.bitmap,u=0!=(l&c);if(!u&&o===y)return this;var d=_t(l&c-1),p=this.nodes,f=u?p[d]:void 0,m=at(f,e,t+g,r,n,o,i,a);if(m===f)return this;if(!u&&m&&p.length>=St)return dt(e,p,l,s,m);if(u&&!m&&2===p.length&&st(p[1^d]))return p[1^d];if(u&&m&&1===p.length&&st(m))return m;var h=e&&e===this.ownerID,_=u?m?l:l^c:l|c,b=u?m?vt(p,d,m,h):bt(p,d,h):yt(p,d,m,h);return h?(this.bitmap=_,this.nodes=b,this):new Je(e,_,b)},Xe.prototype.get=function(e,t,r,n){void 0===t&&(t=Te(r));var o=(0===e?t:t>>>e)&v,i=this.nodes[o];return i?i.get(e+g,t,r,n):n},Xe.prototype.update=function(e,t,r,n,o,i,a){void 0===r&&(r=Te(n));var s=(0===t?r:r>>>t)&v,c=o===y,l=this.nodes,u=l[s];if(c&&!u)return this;var d=at(u,e,t+g,r,n,o,i,a);if(d===u)return this;var p=this.count;if(u){if(!d&&--p<wt)return ut(e,l,p,s)}else p++;var f=e&&e===this.ownerID,m=vt(l,s,d,f);return f?(this.count=p,this.nodes=m,this):new Xe(e,p,m)},Ye.prototype.get=function(e,t,r,n){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(_e(r,o[i][0]))return o[i][1];return n},Ye.prototype.update=function(e,t,r,n,o,i,a){void 0===r&&(r=Te(n));var s=o===y;if(r!==this.keyHash)return s?this:(w(a),w(i),ct(this,e,t,r,[n,o]));for(var c=this.entries,l=0,u=c.length;l<u&&!_e(n,c[l][0]);l++);var d=l<u;if(d?c[l][1]===o:s)return this;if(w(a),(s||!d)&&w(i),s&&2===u)return new Ze(e,this.keyHash,c[1^l]);var p=e&&e===this.ownerID,f=p?c:k(c);return d?s?l===u-1?f.pop():f[l]=f.pop():f[l]=[n,o]:f.push([n,o]),p?(this.entries=f,this):new Ye(e,this.keyHash,f)},Ze.prototype.get=function(e,t,r,n){return _e(r,this.entry[0])?this.entry[1]:n},Ze.prototype.update=function(e,t,r,n,o,i,a){var s=o===y,c=_e(n,this.entry[0]);return(c?o===this.entry[1]:s)?this:(w(a),s?void w(i):c?e&&e===this.ownerID?(this.entry[1]=o,this):new Ze(e,this.keyHash,[n,o]):(w(i),ct(this,e,t,Te(n),[n,o])))},Qe.prototype.iterate=Ye.prototype.iterate=function(e,t){for(var r=this.entries,n=0,o=r.length-1;n<=o;n++)if(!1===e(r[t?o-n:n]))return!1},Je.prototype.iterate=Xe.prototype.iterate=function(e,t){for(var r=this.nodes,n=0,o=r.length-1;n<=o;n++){var i=r[t?o-n:n];if(i&&!1===i.iterate(e,t))return!1}},Ze.prototype.iterate=function(e,t){return e(this.entry)},t(et,F),et.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var r,n=t.node,o=t.index++;if(n.entry){if(0===o)return tt(e,n.entry)}else if(n.entries){if(o<=(r=n.entries.length-1))return tt(e,n.entries[this._reverse?r-o:o])}else if(o<=(r=n.nodes.length-1)){var i=n.nodes[this._reverse?r-o:o];if(i){if(i.entry)return tt(e,i.entry);t=this._stack=rt(i,t)}continue}t=this._stack=this._stack.__prev}return L()};var xt=_/4,St=_/2,wt=_/4;function Et(e){var t=Bt();if(null==e)return t;if(kt(e))return e;var r=o(e),n=r.size;return 0===n?t:(qe(n),n>0&&n<_?Rt(0,n,g,null,new Tt(r.toArray())):t.withMutations((function(e){e.setSize(n),r.forEach((function(t,r){return e.set(r,t)}))})))}function kt(e){return!(!e||!e[Ct])}t(Et,Ee),Et.of=function(){return this(arguments)},Et.prototype.toString=function(){return this.__toString("List [","]")},Et.prototype.get=function(e,t){if((e=M(this,e))>=0&&e<this.size){var r=Nt(this,e+=this._origin);return r&&r.array[e&v]}return t},Et.prototype.set=function(e,t){return Pt(this,e,t)},Et.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},Et.prototype.insert=function(e,t){return this.splice(e,0,t)},Et.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=g,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Bt()},Et.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations((function(r){Ft(r,0,t+e.length);for(var n=0;n<e.length;n++)r.set(t+n,e[n])}))},Et.prototype.pop=function(){return Ft(this,0,-1)},Et.prototype.unshift=function(){var e=arguments;return this.withMutations((function(t){Ft(t,-e.length);for(var r=0;r<e.length;r++)t.set(r,e[r])}))},Et.prototype.shift=function(){return Ft(this,1)},Et.prototype.merge=function(){return Kt(this,void 0,arguments)},Et.prototype.mergeWith=function(t){return Kt(this,t,e.call(arguments,1))},Et.prototype.mergeDeep=function(){return Kt(this,ft,arguments)},Et.prototype.mergeDeepWith=function(t){var r=e.call(arguments,1);return Kt(this,mt(t),r)},Et.prototype.setSize=function(e){return Ft(this,0,e)},Et.prototype.slice=function(e,t){var r=this.size;return A(e,t,r)?this:Ft(this,O(e,r),D(t,r))},Et.prototype.__iterator=function(e,t){var r=0,n=It(this,t);return new F((function(){var t=n();return t===Dt?L():K(e,r++,t)}))},Et.prototype.__iterate=function(e,t){for(var r,n=0,o=It(this,t);(r=o())!==Dt&&!1!==e(r,n++,this););return n},Et.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Rt(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},Et.isList=kt;var Ct="@@__IMMUTABLE_LIST__@@",Mt=Et.prototype;function Tt(e,t){this.array=e,this.ownerID=t}Mt[Ct]=!0,Mt[h]=Mt.remove,Mt.setIn=Ge.setIn,Mt.deleteIn=Mt.removeIn=Ge.removeIn,Mt.update=Ge.update,Mt.updateIn=Ge.updateIn,Mt.mergeIn=Ge.mergeIn,Mt.mergeDeepIn=Ge.mergeDeepIn,Mt.withMutations=Ge.withMutations,Mt.asMutable=Ge.asMutable,Mt.asImmutable=Ge.asImmutable,Mt.wasAltered=Ge.wasAltered,Tt.prototype.removeBefore=function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var n=r>>>t&v;if(n>=this.array.length)return new Tt([],e);var o,i=0===n;if(t>0){var a=this.array[n];if((o=a&&a.removeBefore(e,t-g,r))===a&&i)return this}if(i&&!o)return this;var s=zt(this,e);if(!i)for(var c=0;c<n;c++)s.array[c]=void 0;return o&&(s.array[n]=o),s},Tt.prototype.removeAfter=function(e,t,r){if(r===(t?1<<t:0)||0===this.array.length)return this;var n,o=r-1>>>t&v;if(o>=this.array.length)return this;if(t>0){var i=this.array[o];if((n=i&&i.removeAfter(e,t-g,r))===i&&o===this.array.length-1)return this}var a=zt(this,e);return a.array.splice(o+1),n&&(a.array[o]=n),a};var At,Ot,Dt={};function It(e,t){var r=e._origin,n=e._capacity,o=Lt(n),i=e._tail;return a(e._root,e._level,0);function a(e,t,r){return 0===t?s(e,r):c(e,t,r)}function s(e,a){var s=a===o?i&&i.array:e&&e.array,c=a>r?0:r-a,l=n-a;return l>_&&(l=_),function(){if(c===l)return Dt;var e=t?--l:c++;return s&&s[e]}}function c(e,o,i){var s,c=e&&e.array,l=i>r?0:r-i>>o,u=1+(n-i>>o);return u>_&&(u=_),function(){for(;;){if(s){var e=s();if(e!==Dt)return e;s=null}if(l===u)return Dt;var r=t?--u:l++;s=a(c&&c[r],o-g,i+(r<<o))}}}}function Rt(e,t,r,n,o,i,a){var s=Object.create(Mt);return s.size=t-e,s._origin=e,s._capacity=t,s._level=r,s._root=n,s._tail=o,s.__ownerID=i,s.__hash=a,s.__altered=!1,s}function Bt(){return At||(At=Rt(0,0,g))}function Pt(e,t,r){if((t=M(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations((function(e){t<0?Ft(e,t).set(0,r):Ft(e,0,t+1).set(t,r)}));t+=e._origin;var n=e._tail,o=e._root,i=S(x);return t>=Lt(e._capacity)?n=jt(n,e.__ownerID,0,t,r,i):o=jt(o,e.__ownerID,e._level,t,r,i),i.value?e.__ownerID?(e._root=o,e._tail=n,e.__hash=void 0,e.__altered=!0,e):Rt(e._origin,e._capacity,e._level,o,n):e}function jt(e,t,r,n,o,i){var a,s=n>>>r&v,c=e&&s<e.array.length;if(!c&&void 0===o)return e;if(r>0){var l=e&&e.array[s],u=jt(l,t,r-g,n,o,i);return u===l?e:((a=zt(e,t)).array[s]=u,a)}return c&&e.array[s]===o?e:(w(i),a=zt(e,t),void 0===o&&s===a.array.length-1?a.array.pop():a.array[s]=o,a)}function zt(e,t){return t&&e&&t===e.ownerID?e:new Tt(e?e.array.slice():[],t)}function Nt(e,t){if(t>=Lt(e._capacity))return e._tail;if(t<1<<e._level+g){for(var r=e._root,n=e._level;r&&n>0;)r=r.array[t>>>n&v],n-=g;return r}}function Ft(e,t,r){void 0!==t&&(t|=0),void 0!==r&&(r|=0);var n=e.__ownerID||new E,o=e._origin,i=e._capacity,a=o+t,s=void 0===r?i:r<0?i+r:o+r;if(a===o&&s===i)return e;if(a>=s)return e.clear();for(var c=e._level,l=e._root,u=0;a+u<0;)l=new Tt(l&&l.array.length?[void 0,l]:[],n),u+=1<<(c+=g);u&&(a+=u,o+=u,s+=u,i+=u);for(var d=Lt(i),p=Lt(s);p>=1<<c+g;)l=new Tt(l&&l.array.length?[l]:[],n),c+=g;var f=e._tail,m=p<d?Nt(e,s-1):p>d?new Tt([],n):f;if(f&&p>d&&a<i&&f.array.length){for(var h=l=zt(l,n),_=c;_>g;_-=g){var y=d>>>_&v;h=h.array[y]=zt(h.array[y],n)}h.array[d>>>g&v]=f}if(s<i&&(m=m&&m.removeAfter(n,0,s)),a>=p)a-=p,s-=p,c=g,l=null,m=m&&m.removeBefore(n,0,a);else if(a>o||p<d){for(u=0;l;){var b=a>>>c&v;if(b!==p>>>c&v)break;b&&(u+=(1<<c)*b),c-=g,l=l.array[b]}l&&a>o&&(l=l.removeBefore(n,c,a-u)),l&&p<d&&(l=l.removeAfter(n,c,p-u)),u&&(a-=u,s-=u)}return e.__ownerID?(e.size=s-a,e._origin=a,e._capacity=s,e._level=c,e._root=l,e._tail=m,e.__hash=void 0,e.__altered=!0,e):Rt(a,s,c,l,m)}function Kt(e,t,r){for(var n=[],i=0,s=0;s<r.length;s++){var c=r[s],l=o(c);l.size>i&&(i=l.size),a(c)||(l=l.map((function(e){return fe(e)}))),n.push(l)}return i>e.size&&(e=e.setSize(i)),ht(e,t,n)}function Lt(e){return e<_?0:e-1>>>g<<g}function Ut(e){return null==e?Wt():qt(e)?e:Wt().withMutations((function(t){var r=n(e);qe(r.size),r.forEach((function(e,r){return t.set(r,e)}))}))}function qt(e){return We(e)&&u(e)}function Ht(e,t,r,n){var o=Object.create(Ut.prototype);return o.size=e?e.size:0,o._map=e,o._list=t,o.__ownerID=r,o.__hash=n,o}function Wt(){return Ot||(Ot=Ht(ot(),Bt()))}function Vt(e,t,r){var n,o,i=e._map,a=e._list,s=i.get(t),c=void 0!==s;if(r===y){if(!c)return e;a.size>=_&&a.size>=2*i.size?(n=(o=a.filter((function(e,t){return void 0!==e&&s!==t}))).toKeyedSeq().map((function(e){return e[0]})).flip().toMap(),e.__ownerID&&(n.__ownerID=o.__ownerID=e.__ownerID)):(n=i.remove(t),o=s===a.size-1?a.pop():a.set(s,void 0))}else if(c){if(r===a.get(s)[1])return e;n=i,o=a.set(s,[t,r])}else n=i.set(t,a.size),o=a.set(a.size,[t,r]);return e.__ownerID?(e.size=n.size,e._map=n,e._list=o,e.__hash=void 0,e):Ht(n,o)}function $t(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function Gt(e){this._iter=e,this.size=e.size}function Qt(e){this._iter=e,this.size=e.size}function Jt(e){this._iter=e,this.size=e.size}function Xt(e){var t=vr(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=yr,t.__iterateUncached=function(t,r){var n=this;return e.__iterate((function(e,r){return!1!==t(r,e,n)}),r)},t.__iteratorUncached=function(t,r){if(t===P){var n=e.__iterator(t,r);return new F((function(){var e=n.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e}))}return e.__iterator(t===B?R:B,r)},t}function Yt(e,t,r){var n=vr(e);return n.size=e.size,n.has=function(t){return e.has(t)},n.get=function(n,o){var i=e.get(n,y);return i===y?o:t.call(r,i,n,e)},n.__iterateUncached=function(n,o){var i=this;return e.__iterate((function(e,o,a){return!1!==n(t.call(r,e,o,a),o,i)}),o)},n.__iteratorUncached=function(n,o){var i=e.__iterator(P,o);return new F((function(){var o=i.next();if(o.done)return o;var a=o.value,s=a[0];return K(n,s,t.call(r,a[1],s,e),o)}))},n}function Zt(e,t){var r=vr(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var t=Xt(e);return t.reverse=function(){return e.flip()},t}),r.get=function(r,n){return e.get(t?r:-1-r,n)},r.has=function(r){return e.has(t?r:-1-r)},r.includes=function(t){return e.includes(t)},r.cacheResult=yr,r.__iterate=function(t,r){var n=this;return e.__iterate((function(e,r){return t(e,r,n)}),!r)},r.__iterator=function(t,r){return e.__iterator(t,!r)},r}function er(e,t,r,n){var o=vr(e);return n&&(o.has=function(n){var o=e.get(n,y);return o!==y&&!!t.call(r,o,n,e)},o.get=function(n,o){var i=e.get(n,y);return i!==y&&t.call(r,i,n,e)?i:o}),o.__iterateUncached=function(o,i){var a=this,s=0;return e.__iterate((function(e,i,c){if(t.call(r,e,i,c))return s++,o(e,n?i:s-1,a)}),i),s},o.__iteratorUncached=function(o,i){var a=e.__iterator(P,i),s=0;return new F((function(){for(;;){var i=a.next();if(i.done)return i;var c=i.value,l=c[0],u=c[1];if(t.call(r,u,l,e))return K(o,n?l:s++,u,i)}}))},o}function tr(e,t,r){var n=He().asMutable();return e.__iterate((function(o,i){n.update(t.call(r,o,i,e),0,(function(e){return e+1}))})),n.asImmutable()}function rr(e,t,r){var n=s(e),o=(u(e)?Ut():He()).asMutable();e.__iterate((function(i,a){o.update(t.call(r,i,a,e),(function(e){return(e=e||[]).push(n?[a,i]:i),e}))}));var i=_r(e);return o.map((function(t){return mr(e,i(t))}))}function nr(e,t,r,n){var o=e.size;if(void 0!==t&&(t|=0),void 0!==r&&(r|=0),A(t,r,o))return e;var i=O(t,o),a=D(r,o);if(i!=i||a!=a)return nr(e.toSeq().cacheResult(),t,r,n);var s,c=a-i;c==c&&(s=c<0?0:c);var l=vr(e);return l.size=0===s?s:e.size&&s||void 0,!n&&ie(e)&&s>=0&&(l.get=function(t,r){return(t=M(this,t))>=0&&t<s?e.get(t+i,r):r}),l.__iterateUncached=function(t,r){var o=this;if(0===s)return 0;if(r)return this.cacheResult().__iterate(t,r);var a=0,c=!0,l=0;return e.__iterate((function(e,r){if(!c||!(c=a++<i))return l++,!1!==t(e,n?r:l-1,o)&&l!==s})),l},l.__iteratorUncached=function(t,r){if(0!==s&&r)return this.cacheResult().__iterator(t,r);var o=0!==s&&e.__iterator(t,r),a=0,c=0;return new F((function(){for(;a++<i;)o.next();if(++c>s)return L();var e=o.next();return n||t===B?e:K(t,c-1,t===R?void 0:e.value[1],e)}))},l}function or(e,t,r){var n=vr(e);return n.__iterateUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterate(n,o);var a=0;return e.__iterate((function(e,o,s){return t.call(r,e,o,s)&&++a&&n(e,o,i)})),a},n.__iteratorUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterator(n,o);var a=e.__iterator(P,o),s=!0;return new F((function(){if(!s)return L();var e=a.next();if(e.done)return e;var o=e.value,c=o[0],l=o[1];return t.call(r,l,c,i)?n===P?e:K(n,c,l,e):(s=!1,L())}))},n}function ir(e,t,r,n){var o=vr(e);return o.__iterateUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterate(o,i);var s=!0,c=0;return e.__iterate((function(e,i,l){if(!s||!(s=t.call(r,e,i,l)))return c++,o(e,n?i:c-1,a)})),c},o.__iteratorUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterator(o,i);var s=e.__iterator(P,i),c=!0,l=0;return new F((function(){var e,i,u;do{if((e=s.next()).done)return n||o===B?e:K(o,l++,o===R?void 0:e.value[1],e);var d=e.value;i=d[0],u=d[1],c&&(c=t.call(r,u,i,a))}while(c);return o===P?e:K(o,i,u,e)}))},o}function ar(e,t){var r=s(e),o=[e].concat(t).map((function(e){return a(e)?r&&(e=n(e)):e=r?se(e):ce(Array.isArray(e)?e:[e]),e})).filter((function(e){return 0!==e.size}));if(0===o.length)return e;if(1===o.length){var i=o[0];if(i===e||r&&s(i)||c(e)&&c(i))return i}var l=new te(o);return r?l=l.toKeyedSeq():c(e)||(l=l.toSetSeq()),(l=l.flatten(!0)).size=o.reduce((function(e,t){if(void 0!==e){var r=t.size;if(void 0!==r)return e+r}}),0),l}function sr(e,t,r){var n=vr(e);return n.__iterateUncached=function(n,o){var i=0,s=!1;function c(e,l){var u=this;e.__iterate((function(e,o){return(!t||l<t)&&a(e)?c(e,l+1):!1===n(e,r?o:i++,u)&&(s=!0),!s}),o)}return c(e,0),i},n.__iteratorUncached=function(n,o){var i=e.__iterator(n,o),s=[],c=0;return new F((function(){for(;i;){var e=i.next();if(!1===e.done){var l=e.value;if(n===P&&(l=l[1]),t&&!(s.length<t)||!a(l))return r?e:K(n,c++,l,e);s.push(i),i=l.__iterator(n,o)}else i=s.pop()}return L()}))},n}function cr(e,t,r){var n=_r(e);return e.toSeq().map((function(o,i){return n(t.call(r,o,i,e))})).flatten(!0)}function lr(e,t){var r=vr(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,n){var o=this,i=0;return e.__iterate((function(e,n){return(!i||!1!==r(t,i++,o))&&!1!==r(e,i++,o)}),n),i},r.__iteratorUncached=function(r,n){var o,i=e.__iterator(B,n),a=0;return new F((function(){return(!o||a%2)&&(o=i.next()).done?o:a%2?K(r,a++,t):K(r,a++,o.value,o)}))},r}function ur(e,t,r){t||(t=br);var n=s(e),o=0,i=e.toSeq().map((function(t,n){return[n,t,o++,r?r(t,n,e):t]})).toArray();return i.sort((function(e,r){return t(e[3],r[3])||e[2]-r[2]})).forEach(n?function(e,t){i[t].length=2}:function(e,t){i[t]=e[1]}),n?G(i):c(e)?Q(i):J(i)}function dr(e,t,r){if(t||(t=br),r){var n=e.toSeq().map((function(t,n){return[t,r(t,n,e)]})).reduce((function(e,r){return pr(t,e[1],r[1])?r:e}));return n&&n[0]}return e.reduce((function(e,r){return pr(t,e,r)?r:e}))}function pr(e,t,r){var n=e(r,t);return 0===n&&r!==t&&(null==r||r!=r)||n>0}function fr(e,t,n){var o=vr(e);return o.size=new te(n).map((function(e){return e.size})).min(),o.__iterate=function(e,t){for(var r,n=this.__iterator(B,t),o=0;!(r=n.next()).done&&!1!==e(r.value,o++,this););return o},o.__iteratorUncached=function(e,o){var i=n.map((function(e){return e=r(e),H(o?e.reverse():e)})),a=0,s=!1;return new F((function(){var r;return s||(r=i.map((function(e){return e.next()})),s=r.some((function(e){return e.done}))),s?L():K(e,a++,t.apply(null,r.map((function(e){return e.value}))))}))},o}function mr(e,t){return ie(e)?t:e.constructor(t)}function hr(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function gr(e){return qe(e.size),C(e)}function _r(e){return s(e)?n:c(e)?o:i}function vr(e){return Object.create((s(e)?G:c(e)?Q:J).prototype)}function yr(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):$.prototype.cacheResult.call(this)}function br(e,t){return e>t?1:e<t?-1:0}function xr(e){var t=H(e);if(!t){if(!V(e))throw new TypeError("Expected iterable or array-like: "+e);t=H(r(e))}return t}function Sr(e,t){var r,n=function(i){if(i instanceof n)return i;if(!(this instanceof n))return new n(i);if(!r){r=!0;var a=Object.keys(e);Cr(o,a),o.size=a.length,o._name=t,o._keys=a,o._defaultValues=e}this._map=He(i)},o=n.prototype=Object.create(wr);return o.constructor=n,n}t(Ut,He),Ut.of=function(){return this(arguments)},Ut.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Ut.prototype.get=function(e,t){var r=this._map.get(e);return void 0!==r?this._list.get(r)[1]:t},Ut.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Wt()},Ut.prototype.set=function(e,t){return Vt(this,e,t)},Ut.prototype.remove=function(e){return Vt(this,e,y)},Ut.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Ut.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate((function(t){return t&&e(t[1],t[0],r)}),t)},Ut.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},Ut.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);return e?Ht(t,r,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=r,this)},Ut.isOrderedMap=qt,Ut.prototype[m]=!0,Ut.prototype[h]=Ut.prototype.remove,t($t,G),$t.prototype.get=function(e,t){return this._iter.get(e,t)},$t.prototype.has=function(e){return this._iter.has(e)},$t.prototype.valueSeq=function(){return this._iter.valueSeq()},$t.prototype.reverse=function(){var e=this,t=Zt(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},$t.prototype.map=function(e,t){var r=this,n=Yt(this,e,t);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(e,t)}),n},$t.prototype.__iterate=function(e,t){var r,n=this;return this._iter.__iterate(this._useKeys?function(t,r){return e(t,r,n)}:(r=t?gr(this):0,function(o){return e(o,t?--r:r++,n)}),t)},$t.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var r=this._iter.__iterator(B,t),n=t?gr(this):0;return new F((function(){var o=r.next();return o.done?o:K(e,t?--n:n++,o.value,o)}))},$t.prototype[m]=!0,t(Gt,Q),Gt.prototype.includes=function(e){return this._iter.includes(e)},Gt.prototype.__iterate=function(e,t){var r=this,n=0;return this._iter.__iterate((function(t){return e(t,n++,r)}),t)},Gt.prototype.__iterator=function(e,t){var r=this._iter.__iterator(B,t),n=0;return new F((function(){var t=r.next();return t.done?t:K(e,n++,t.value,t)}))},t(Qt,J),Qt.prototype.has=function(e){return this._iter.includes(e)},Qt.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t){return e(t,t,r)}),t)},Qt.prototype.__iterator=function(e,t){var r=this._iter.__iterator(B,t);return new F((function(){var t=r.next();return t.done?t:K(e,t.value,t.value,t)}))},t(Jt,G),Jt.prototype.entrySeq=function(){return this._iter.toSeq()},Jt.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t){if(t){hr(t);var n=a(t);return e(n?t.get(1):t[1],n?t.get(0):t[0],r)}}),t)},Jt.prototype.__iterator=function(e,t){var r=this._iter.__iterator(B,t);return new F((function(){for(;;){var t=r.next();if(t.done)return t;var n=t.value;if(n){hr(n);var o=a(n);return K(e,o?n.get(0):n[0],o?n.get(1):n[1],t)}}}))},Gt.prototype.cacheResult=$t.prototype.cacheResult=Qt.prototype.cacheResult=Jt.prototype.cacheResult=yr,t(Sr,we),Sr.prototype.toString=function(){return this.__toString(kr(this)+" {","}")},Sr.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},Sr.prototype.get=function(e,t){if(!this.has(e))return t;var r=this._defaultValues[e];return this._map?this._map.get(e,r):r},Sr.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=Er(this,ot()))},Sr.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+kr(this));var r=this._map&&this._map.set(e,t);return this.__ownerID||r===this._map?this:Er(this,r)},Sr.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:Er(this,t)},Sr.prototype.wasAltered=function(){return this._map.wasAltered()},Sr.prototype.__iterator=function(e,t){var r=this;return n(this._defaultValues).map((function(e,t){return r.get(t)})).__iterator(e,t)},Sr.prototype.__iterate=function(e,t){var r=this;return n(this._defaultValues).map((function(e,t){return r.get(t)})).__iterate(e,t)},Sr.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?Er(this,t,e):(this.__ownerID=e,this._map=t,this)};var wr=Sr.prototype;function Er(e,t,r){var n=Object.create(Object.getPrototypeOf(e));return n._map=t,n.__ownerID=r,n}function kr(e){return e._name||e.constructor.name||"Record"}function Cr(e,t){try{t.forEach(Mr.bind(void 0,e))}catch(e){}}function Mr(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){be(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function Tr(e){return null==e?Pr():Ar(e)&&!u(e)?e:Pr().withMutations((function(t){var r=i(e);qe(r.size),r.forEach((function(e){return t.add(e)}))}))}function Ar(e){return!(!e||!e[Dr])}wr[h]=wr.remove,wr.deleteIn=wr.removeIn=Ge.removeIn,wr.merge=Ge.merge,wr.mergeWith=Ge.mergeWith,wr.mergeIn=Ge.mergeIn,wr.mergeDeep=Ge.mergeDeep,wr.mergeDeepWith=Ge.mergeDeepWith,wr.mergeDeepIn=Ge.mergeDeepIn,wr.setIn=Ge.setIn,wr.update=Ge.update,wr.updateIn=Ge.updateIn,wr.withMutations=Ge.withMutations,wr.asMutable=Ge.asMutable,wr.asImmutable=Ge.asImmutable,t(Tr,ke),Tr.of=function(){return this(arguments)},Tr.fromKeys=function(e){return this(n(e).keySeq())},Tr.prototype.toString=function(){return this.__toString("Set {","}")},Tr.prototype.has=function(e){return this._map.has(e)},Tr.prototype.add=function(e){return Rr(this,this._map.set(e,!0))},Tr.prototype.remove=function(e){return Rr(this,this._map.remove(e))},Tr.prototype.clear=function(){return Rr(this,this._map.clear())},Tr.prototype.union=function(){var t=e.call(arguments,0);return 0===(t=t.filter((function(e){return 0!==e.size}))).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(e){for(var r=0;r<t.length;r++)i(t[r]).forEach((function(t){return e.add(t)}))})):this.constructor(t[0])},Tr.prototype.intersect=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map((function(e){return i(e)}));var r=this;return this.withMutations((function(e){r.forEach((function(r){t.every((function(e){return e.includes(r)}))||e.remove(r)}))}))},Tr.prototype.subtract=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map((function(e){return i(e)}));var r=this;return this.withMutations((function(e){r.forEach((function(r){t.some((function(e){return e.includes(r)}))&&e.remove(r)}))}))},Tr.prototype.merge=function(){return this.union.apply(this,arguments)},Tr.prototype.mergeWith=function(t){var r=e.call(arguments,1);return this.union.apply(this,r)},Tr.prototype.sort=function(e){return jr(ur(this,e))},Tr.prototype.sortBy=function(e,t){return jr(ur(this,t,e))},Tr.prototype.wasAltered=function(){return this._map.wasAltered()},Tr.prototype.__iterate=function(e,t){var r=this;return this._map.__iterate((function(t,n){return e(n,n,r)}),t)},Tr.prototype.__iterator=function(e,t){return this._map.map((function(e,t){return t})).__iterator(e,t)},Tr.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},Tr.isSet=Ar;var Or,Dr="@@__IMMUTABLE_SET__@@",Ir=Tr.prototype;function Rr(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function Br(e,t){var r=Object.create(Ir);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function Pr(){return Or||(Or=Br(ot()))}function jr(e){return null==e?Lr():zr(e)?e:Lr().withMutations((function(t){var r=i(e);qe(r.size),r.forEach((function(e){return t.add(e)}))}))}function zr(e){return Ar(e)&&u(e)}Ir[Dr]=!0,Ir[h]=Ir.remove,Ir.mergeDeep=Ir.merge,Ir.mergeDeepWith=Ir.mergeWith,Ir.withMutations=Ge.withMutations,Ir.asMutable=Ge.asMutable,Ir.asImmutable=Ge.asImmutable,Ir.__empty=Pr,Ir.__make=Br,t(jr,Tr),jr.of=function(){return this(arguments)},jr.fromKeys=function(e){return this(n(e).keySeq())},jr.prototype.toString=function(){return this.__toString("OrderedSet {","}")},jr.isOrderedSet=zr;var Nr,Fr=jr.prototype;function Kr(e,t){var r=Object.create(Fr);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function Lr(){return Nr||(Nr=Kr(Wt()))}function Ur(e){return null==e?Gr():qr(e)?e:Gr().unshiftAll(e)}function qr(e){return!(!e||!e[Wr])}Fr[m]=!0,Fr.__empty=Lr,Fr.__make=Kr,t(Ur,Ee),Ur.of=function(){return this(arguments)},Ur.prototype.toString=function(){return this.__toString("Stack [","]")},Ur.prototype.get=function(e,t){var r=this._head;for(e=M(this,e);r&&e--;)r=r.next;return r?r.value:t},Ur.prototype.peek=function(){return this._head&&this._head.value},Ur.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,r=arguments.length-1;r>=0;r--)t={value:arguments[r],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):$r(e,t)},Ur.prototype.pushAll=function(e){if(0===(e=o(e)).size)return this;qe(e.size);var t=this.size,r=this._head;return e.reverse().forEach((function(e){t++,r={value:e,next:r}})),this.__ownerID?(this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this):$r(t,r)},Ur.prototype.pop=function(){return this.slice(1)},Ur.prototype.unshift=function(){return this.push.apply(this,arguments)},Ur.prototype.unshiftAll=function(e){return this.pushAll(e)},Ur.prototype.shift=function(){return this.pop.apply(this,arguments)},Ur.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Gr()},Ur.prototype.slice=function(e,t){if(A(e,t,this.size))return this;var r=O(e,this.size);if(D(t,this.size)!==this.size)return Ee.prototype.slice.call(this,e,t);for(var n=this.size-r,o=this._head;r--;)o=o.next;return this.__ownerID?(this.size=n,this._head=o,this.__hash=void 0,this.__altered=!0,this):$r(n,o)},Ur.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?$r(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Ur.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var r=0,n=this._head;n&&!1!==e(n.value,r++,this);)n=n.next;return r},Ur.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var r=0,n=this._head;return new F((function(){if(n){var t=n.value;return n=n.next,K(e,r++,t)}return L()}))},Ur.isStack=qr;var Hr,Wr="@@__IMMUTABLE_STACK__@@",Vr=Ur.prototype;function $r(e,t,r,n){var o=Object.create(Vr);return o.size=e,o._head=t,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function Gr(){return Hr||(Hr=$r(0))}function Qr(e,t){var r=function(r){e.prototype[r]=t[r]};return Object.keys(t).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(r),e}Vr[Wr]=!0,Vr.withMutations=Ge.withMutations,Vr.asMutable=Ge.asMutable,Vr.asImmutable=Ge.asImmutable,Vr.wasAltered=Ge.wasAltered,r.Iterator=F,Qr(r,{toArray:function(){qe(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate((function(t,r){e[r]=t})),e},toIndexedSeq:function(){return new Gt(this)},toJS:function(){return this.toSeq().map((function(e){return e&&"function"==typeof e.toJS?e.toJS():e})).__toJS()},toJSON:function(){return this.toSeq().map((function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e})).__toJS()},toKeyedSeq:function(){return new $t(this,!0)},toMap:function(){return He(this.toKeyedSeq())},toObject:function(){qe(this.size);var e={};return this.__iterate((function(t,r){e[r]=t})),e},toOrderedMap:function(){return Ut(this.toKeyedSeq())},toOrderedSet:function(){return jr(s(this)?this.valueSeq():this)},toSet:function(){return Tr(s(this)?this.valueSeq():this)},toSetSeq:function(){return new Qt(this)},toSeq:function(){return c(this)?this.toIndexedSeq():s(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Ur(s(this)?this.valueSeq():this)},toList:function(){return Et(s(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){return mr(this,ar(this,e.call(arguments,0)))},includes:function(e){return this.some((function(t){return _e(t,e)}))},entries:function(){return this.__iterator(P)},every:function(e,t){qe(this.size);var r=!0;return this.__iterate((function(n,o,i){if(!e.call(t,n,o,i))return r=!1,!1})),r},filter:function(e,t){return mr(this,er(this,e,t,!0))},find:function(e,t,r){var n=this.findEntry(e,t);return n?n[1]:r},findEntry:function(e,t){var r;return this.__iterate((function(n,o,i){if(e.call(t,n,o,i))return r=[o,n],!1})),r},findLastEntry:function(e,t){return this.toSeq().reverse().findEntry(e,t)},forEach:function(e,t){return qe(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){qe(this.size),e=void 0!==e?""+e:",";var t="",r=!0;return this.__iterate((function(n){r?r=!1:t+=e,t+=null!=n?n.toString():""})),t},keys:function(){return this.__iterator(R)},map:function(e,t){return mr(this,Yt(this,e,t))},reduce:function(e,t,r){var n,o;return qe(this.size),arguments.length<2?o=!0:n=t,this.__iterate((function(t,i,a){o?(o=!1,n=t):n=e.call(r,n,t,i,a)})),n},reduceRight:function(e,t,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return mr(this,Zt(this,!0))},slice:function(e,t){return mr(this,nr(this,e,t,!0))},some:function(e,t){return!this.every(en(e),t)},sort:function(e){return mr(this,ur(this,e))},values:function(){return this.__iterator(B)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(e,t){return C(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return tr(this,e,t)},equals:function(e){return ve(this,e)},entrySeq:function(){var e=this;if(e._cache)return new te(e._cache);var t=e.toSeq().map(Zr).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(en(e),t)},findLast:function(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r)},first:function(){return this.find(T)},flatMap:function(e,t){return mr(this,cr(this,e,t))},flatten:function(e){return mr(this,sr(this,e,!0))},fromEntrySeq:function(){return new Jt(this)},get:function(e,t){return this.find((function(t,r){return _e(r,e)}),void 0,t)},getIn:function(e,t){for(var r,n=this,o=xr(e);!(r=o.next()).done;){var i=r.value;if((n=n&&n.get?n.get(i,y):y)===y)return t}return n},groupBy:function(e,t){return rr(this,e,t)},has:function(e){return this.get(e,y)!==y},hasIn:function(e){return this.getIn(e,y)!==y},isSubset:function(e){return e="function"==typeof e.includes?e:r(e),this.every((function(t){return e.includes(t)}))},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:r(e)).isSubset(this)},keySeq:function(){return this.toSeq().map(Yr).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(e){return dr(this,e)},maxBy:function(e,t){return dr(this,t,e)},min:function(e){return dr(this,e?tn(e):on)},minBy:function(e,t){return dr(this,t?tn(t):on,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return mr(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return mr(this,ir(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(en(e),t)},sortBy:function(e,t){return mr(this,ur(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return mr(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return mr(this,or(this,e,t))},takeUntil:function(e,t){return this.takeWhile(en(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=an(this))}});var Jr=r.prototype;Jr[d]=!0,Jr[N]=Jr.values,Jr.__toJS=Jr.toArray,Jr.__toStringMapper=rn,Jr.inspect=Jr.toSource=function(){return this.toString()},Jr.chain=Jr.flatMap,Jr.contains=Jr.includes,function(){try{Object.defineProperty(Jr,"length",{get:function(){if(!r.noLengthWarning){var e;try{throw new Error}catch(t){e=t.stack}if(-1===e.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+e),this.size}}})}catch(e){}}(),Qr(n,{flip:function(){return mr(this,Xt(this))},findKey:function(e,t){var r=this.findEntry(e,t);return r&&r[0]},findLastKey:function(e,t){return this.toSeq().reverse().findKey(e,t)},keyOf:function(e){return this.findKey((function(t){return _e(t,e)}))},lastKeyOf:function(e){return this.findLastKey((function(t){return _e(t,e)}))},mapEntries:function(e,t){var r=this,n=0;return mr(this,this.toSeq().map((function(o,i){return e.call(t,[i,o],n++,r)})).fromEntrySeq())},mapKeys:function(e,t){var r=this;return mr(this,this.toSeq().flip().map((function(n,o){return e.call(t,n,o,r)})).flip())}});var Xr=n.prototype;function Yr(e,t){return t}function Zr(e,t){return[t,e]}function en(e){return function(){return!e.apply(this,arguments)}}function tn(e){return function(){return-e.apply(this,arguments)}}function rn(e){return"string"==typeof e?JSON.stringify(e):e}function nn(){return k(arguments)}function on(e,t){return e<t?1:e>t?-1:0}function an(e){if(e.size===1/0)return 0;var t=u(e),r=s(e),n=t?1:0;return sn(e.__iterate(r?t?function(e,t){n=31*n+cn(Te(e),Te(t))|0}:function(e,t){n=n+cn(Te(e),Te(t))|0}:t?function(e){n=31*n+Te(e)|0}:function(e){n=n+Te(e)|0}),n)}function sn(e,t){return t=Ce(t,3432918353),t=Ce(t<<15|t>>>-15,461845907),t=Ce(t<<13|t>>>-13,5),t=Ce((t=(t+3864292196|0)^e)^t>>>16,2246822507),t=Me((t=Ce(t^t>>>13,3266489909))^t>>>16)}function cn(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}return Xr[p]=!0,Xr[N]=Jr.entries,Xr.__toJS=Jr.toObject,Xr.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+rn(e)},Qr(o,{toKeyedSeq:function(){return new $t(this,!1)},filter:function(e,t){return mr(this,er(this,e,t,!1))},findIndex:function(e,t){var r=this.findEntry(e,t);return r?r[0]:-1},indexOf:function(e){var t=this.toKeyedSeq().keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.toKeyedSeq().reverse().keyOf(e);return void 0===t?-1:t},reverse:function(){return mr(this,Zt(this,!1))},slice:function(e,t){return mr(this,nr(this,e,t,!1))},splice:function(e,t){var r=arguments.length;if(t=Math.max(0|t,0),0===r||2===r&&!t)return this;e=O(e,e<0?this.count():this.size);var n=this.slice(0,e);return mr(this,1===r?n:n.concat(k(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var r=this.toKeyedSeq().findLastKey(e,t);return void 0===r?-1:r},first:function(){return this.get(0)},flatten:function(e){return mr(this,sr(this,e,!1))},get:function(e,t){return(e=M(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find((function(t,r){return r===e}),void 0,t)},has:function(e){return(e=M(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return mr(this,lr(this,e))},interleave:function(){var e=[this].concat(k(arguments)),t=fr(this.toSeq(),Q.of,e),r=t.flatten(!0);return t.size&&(r.size=t.size*e.length),mr(this,r)},last:function(){return this.get(-1)},skipWhile:function(e,t){return mr(this,ir(this,e,t,!1))},zip:function(){return mr(this,fr(this,nn,[this].concat(k(arguments))))},zipWith:function(e){var t=k(arguments);return t[0]=this,mr(this,fr(this,e,t))}}),o.prototype[f]=!0,o.prototype[m]=!0,Qr(i,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=Jr.includes,Qr(G,n.prototype),Qr(Q,o.prototype),Qr(J,i.prototype),Qr(we,n.prototype),Qr(Ee,o.prototype),Qr(ke,i.prototype),{Iterable:r,Seq:$,Collection:Se,Map:He,OrderedMap:Ut,List:Et,Stack:Ur,Set:Tr,OrderedSet:jr,Record:Sr,Range:xe,Repeat:ye,is:_e,fromJS:fe}}();var E=w.exports.OrderedMap,k={createFromArray:function(e){return E(e.map((function(e){return[e.getKey(),e]})))}};var C=w.exports,M=C.Map,T=C.OrderedSet,A=C.Record,O=T(),D={style:O,entity:null},I=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.getStyle=function(){return this.get("style")},o.getEntity=function(){return this.get("entity")},o.hasStyle=function(e){return this.getStyle().includes(e)},n.applyStyle=function(e,t){var r=e.set("style",e.getStyle().add(t));return n.create(r)},n.removeStyle=function(e,t){var r=e.set("style",e.getStyle().remove(t));return n.create(r)},n.applyEntity=function(e,t){var r=e.getEntity()===t?e:e.set("entity",t);return n.create(r)},n.create=function(e){if(!e)return R;var t=M({style:O,entity:null}).merge(e),r=B.get(t);if(r)return r;var o=new n(t);return B=B.set(t,o),o},n.fromJS=function(e){var t=e.style,r=e.entity;return new n({style:Array.isArray(t)?T(t):t,entity:Array.isArray(r)?T(r):r})},n}(A(D)),R=new I,B=M([[M(D),R]]);I.EMPTY=R;var P=I;var j=function(e,t,r,n){if(e.size){var o=0;e.reduce((function(e,i,a){return t(e,i)||(r(e)&&n(o,a),o=a),i})),r(e.last())&&n(o,e.count())}};var z=P,N=j,F=w.exports,K=F.List,L=F.Map,U=F.OrderedSet,q=F.Record,H=F.Repeat,W=U(),V=q({key:"",type:"unstyled",text:"",characterList:K(),depth:0,data:L()}),$=function(e){var t,r;function n(t){return e.call(this,function(e){if(!e)return e;var t=e.characterList,r=e.text;return r&&!t&&(e.characterList=K(H(z.EMPTY,r.length))),e}(t))||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.getKey=function(){return this.get("key")},o.getType=function(){return this.get("type")},o.getText=function(){return this.get("text")},o.getCharacterList=function(){return this.get("characterList")},o.getLength=function(){return this.getText().length},o.getDepth=function(){return this.get("depth")},o.getData=function(){return this.get("data")},o.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():W},o.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},o.findStyleRanges=function(e,t){N(this.getCharacterList(),G,e,t)},o.findEntityRanges=function(e,t){N(this.getCharacterList(),Q,e,t)},n}(V);function G(e,t){return e.getStyle()===t.getStyle()}function Q(e,t){return e.getEntity()===t.getEntity()}var J=$;var X=P,Y=j,Z=w.exports,ee=Z.List,te=Z.Map,re=Z.OrderedSet,ne=Z.Record,oe=Z.Repeat,ie=re(),ae={parent:null,characterList:ee(),data:te(),depth:0,key:"",text:"",type:"unstyled",children:ee(),prevSibling:null,nextSibling:null},se=function(e,t){return e.getStyle()===t.getStyle()},ce=function(e,t){return e.getEntity()===t.getEntity()},le=function(e){if(!e)return e;var t=e.characterList,r=e.text;return r&&!t&&(e.characterList=ee(oe(X.EMPTY,r.length))),e},ue=function(e){var t,r;function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae;return e.call(this,le(t))||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.getKey=function(){return this.get("key")},o.getType=function(){return this.get("type")},o.getText=function(){return this.get("text")},o.getCharacterList=function(){return this.get("characterList")},o.getLength=function(){return this.getText().length},o.getDepth=function(){return this.get("depth")},o.getData=function(){return this.get("data")},o.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():ie},o.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},o.getChildKeys=function(){return this.get("children")},o.getParentKey=function(){return this.get("parent")},o.getPrevSiblingKey=function(){return this.get("prevSibling")},o.getNextSiblingKey=function(){return this.get("nextSibling")},o.findStyleRanges=function(e,t){Y(this.getCharacterList(),se,e,t)},o.findEntityRanges=function(e,t){Y(this.getCharacterList(),ce,e,t)},n}(ne(ae)),de=ue,pe=P,fe=w.exports.Map;function me(e,t,r,n){var o=e.getBlockMap(),i=t.getStartKey(),a=t.getStartOffset(),s=t.getEndKey(),c=t.getEndOffset(),l=o.skipUntil((function(e,t){return t===i})).takeUntil((function(e,t){return t===s})).concat(fe([[s,o.get(s)]])).map((function(e,t){var o,l;i===s?(o=a,l=c):(o=t===i?a:0,l=t===s?c:e.getLength());for(var u,d=e.getCharacterList();o<l;)u=d.get(o),d=d.set(o,n?pe.applyStyle(u,r):pe.removeStyle(u,r)),o++;return e.set("characterList",d)}));return e.merge({blockMap:o.merge(l),selectionBefore:t,selectionAfter:t})}var he={add:function(e,t,r){return me(e,t,r,!0)},remove:function(e,t,r){return me(e,t,r,!1)}},ge=P;var _e=function(e,t,r,n){for(var o=t,i=e.getCharacterList();o<r;)i=i.set(o,ge.applyEntity(i.get(o),n)),o++;return e.set("characterList",i)},ve=w.exports;var ye=function(e,t,r){var n=e.getBlockMap(),o=t.getStartKey(),i=t.getStartOffset(),a=t.getEndKey(),s=t.getEndOffset(),c=n.skipUntil((function(e,t){return t===o})).takeUntil((function(e,t){return t===a})).toOrderedMap().merge(ve.OrderedMap([[a,n.get(a)]])).map((function(e,t){var n=t===o?i:0,c=t===a?s:e.getLength();return _e(e,n,c,r)}));return e.merge({blockMap:n.merge(c),selectionBefore:t,selectionAfter:t})};var be=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];if(!e){var i;if(void 0===t)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;(i=new Error(t.replace(/%s/g,(function(){return String(n[a++])})))).name="Invariant Violation"}throw i.framesToPop=1,i}},xe=be;var Se={getRemovalRange:function(e,t,r,n,o){var i=r.split(" ");i=i.map((function(e,t){if("forward"===o){if(t>0)return" "+e}else if(t<i.length-1)return e+" ";return e}));for(var a,s=n,c=null,l=null,u=0;u<i.length;u++){if(e<(a=s+i[u].length)&&s<t)null!==c||(c=s),l=a;else if(null!==c)break;s=a}var d=n+r.length,p=c===n,f=l===d;return(!p&&f||p&&!f)&&("forward"===o?l!==d&&l++:c!==n&&c--),{start:c,end:l}}},we=function(e,t){var r=[];return e.findEntityRanges((function(e){return e.getEntity()===t}),(function(e,t){r.push({start:e,end:t})})),r.length||xe(!1),r},Ee=be;function ke(e,t,r,n,o,i,a){var s=r.getStartOffset(),c=r.getEndOffset(),l=e.__get(o).getMutability(),u=a?s:c;if("MUTABLE"===l)return r;var d=we(t,o).filter((function(e){return u<=e.end&&u>=e.start}));1!=d.length&&Ee(!1);var p=d[0];if("IMMUTABLE"===l)return r.merge({anchorOffset:p.start,focusOffset:p.end,isBackward:!1});i||(a?c=p.end:s=p.start);var f=Se.getRemovalRange(s,c,t.getText().slice(p.start,p.end),p.start,n);return r.merge({anchorOffset:f.start,focusOffset:f.end,isBackward:!1})}var Ce=function(e,t,r,n,o){var i=n.getStartOffset(),a=n.getEndOffset(),s=t.getEntityAt(i),c=r.getEntityAt(a-1);if(!s&&!c)return n;var l=n;if(s&&s===c)l=ke(e,t,l,o,s,!0,!0);else if(s&&c){var u=ke(e,t,l,o,s,!1,!0),d=ke(e,r,l,o,c,!1,!1);l=l.merge({anchorOffset:u.getAnchorOffset(),focusOffset:d.getFocusOffset(),isBackward:!1})}else if(s){var p=ke(e,t,l,o,s,!1,!0);l=l.merge({anchorOffset:p.getStartOffset(),isBackward:!1})}else if(c){var f=ke(e,r,l,o,c,!1,!1);l=l.merge({focusOffset:f.getEndOffset(),isBackward:!1})}return l},Me={},Te=Math.pow(2,24);var Ae=function(){for(var e;void 0===e||Me.hasOwnProperty(e)||!isNaN(+e);)e=Math.floor(Math.random()*Te).toString(32);return Me[e]=!0,e},Oe=de,De=Ae,Ie=w.exports.OrderedMap,Re=function(e){return e.first()instanceof Oe?function(e){var t,r={};return Ie(e.withMutations((function(e){e.forEach((function(n,o){var i=n.getKey(),a=n.getNextSiblingKey(),s=n.getPrevSiblingKey(),c=n.getChildKeys(),l=n.getParentKey(),u=De();if(r[i]=u,a&&(e.get(a)?e.setIn([a,"prevSibling"],u):e.setIn([i,"nextSibling"],null)),s&&(e.get(s)?e.setIn([s,"nextSibling"],u):e.setIn([i,"prevSibling"],null)),l&&e.get(l)){var d=e.get(l).getChildKeys();e.setIn([l,"children"],d.set(d.indexOf(n.getKey()),u))}else e.setIn([i,"parent"],null),t&&(e.setIn([t.getKey(),"nextSibling"],u),e.setIn([i,"prevSibling"],r[t.getKey()])),t=e.get(i);c.forEach((function(t){e.get(t)?e.setIn([t,"parent"],u):e.setIn([i,"children"],n.getChildKeys().filter((function(e){return e!==t})))}))}))})).toArray().map((function(e){return[r[e.getKey()],e.set("key",r[e.getKey()])]})))}(e):function(e){return Ie(e.toArray().map((function(e){var t=De();return[t,e.set("key",t)]})))}(e)},Be=P,Pe=j,je=be;function ze(e,t,r){var n=t.getCharacterList(),o=r>0?n.get(r-1):void 0,i=r<n.count()?n.get(r):void 0,a=o?o.getEntity():void 0,s=i?i.getEntity():void 0;if(s&&s===a&&"MUTABLE"!==e.__get(s).getMutability()){for(var c,l=function(e,t,r){var n;return Pe(e,(function(e,t){return e.getEntity()===t.getEntity()}),(function(e){return e.getEntity()===t}),(function(e,t){e<=r&&t>=r&&(n={start:e,end:t})})),"object"!=typeof n&&je(!1),n}(n,s,r),u=l.start,d=l.end;u<d;)c=n.get(u),n=n.set(u,Be.applyEntity(c,null)),u++;return t.set("characterList",n)}return t}var Ne=function(e,t){var r=e.getBlockMap(),n=e.getEntityMap(),o={},i=t.getStartKey(),a=t.getStartOffset(),s=r.get(i),c=ze(n,s,a);c!==s&&(o[i]=c);var l=t.getEndKey(),u=t.getEndOffset(),d=r.get(l);i===l&&(d=c);var p=ze(n,d,u);return p!==d&&(o[l]=p),Object.keys(o).length?e.merge({blockMap:r.merge(o),selectionAfter:t}):e.set("selectionAfter",t)},Fe=Re,Ke=Ne,Le=function(e,t){var r=t.getStartKey(),n=t.getStartOffset(),o=t.getEndKey(),i=t.getEndOffset(),a=Ke(e,t).getBlockMap(),s=a.keySeq(),c=s.indexOf(r),l=s.indexOf(o)+1;return Fe(a.slice(c,l).map((function(e,t){var a=e.getText(),s=e.getCharacterList();return r===o?e.merge({text:a.slice(n,i),characterList:s.slice(n,i)}):t===r?e.merge({text:a.slice(n),characterList:s.slice(n)}):t===o?e.merge({text:a.slice(0,i),characterList:s.slice(0,i)}):e})))};var Ue=function(e,t,r){var n=e;if(r===n.count())t.forEach((function(e){n=n.push(e)}));else if(0===r)t.reverse().forEach((function(e){n=n.unshift(e)}));else{var o=n.slice(0,r),i=n.slice(r);n=o.concat(t,i).toList()}return n},qe=k,He=de,We=Ue,Ve=be,$e=Re,Ge=w.exports.List,Qe=function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"REPLACE_WITH_NEW_DATA",s=r.get(o),c=s.getText(),l=s.getCharacterList(),u=o,d=i+n.getText().length,p=null;switch(a){case"MERGE_OLD_DATA_TO_NEW_DATA":p=n.getData().merge(s.getData());break;case"REPLACE_WITH_NEW_DATA":p=n.getData()}var f=s.getType();c&&"unstyled"===f&&(f=n.getType());var m=s.merge({text:c.slice(0,i)+n.getText()+c.slice(i),characterList:We(l,n.getCharacterList(),i),type:f,data:p});return e.merge({blockMap:r.set(o,m),selectionBefore:t,selectionAfter:t.merge({anchorKey:u,anchorOffset:d,focusKey:u,focusOffset:d,isBackward:!1})})},Je=function(e,t,r,n,o,i){var a=r.first()instanceof He,s=[],c=n.size,l=r.get(o),u=n.first(),d=n.last(),p=d.getLength(),f=d.getKey(),m=a&&(!l.getChildKeys().isEmpty()||!u.getChildKeys().isEmpty());r.forEach((function(e,t){t===o?(m?s.push(e):s.push(function(e,t,r){var n=e.getText(),o=e.getCharacterList(),i=n.slice(0,t),a=o.slice(0,t),s=r.first();return e.merge({text:i+s.getText(),characterList:a.concat(s.getCharacterList()),type:i?e.getType():s.getType(),data:s.getData()})}(e,i,n)),n.slice(m?0:1,c-1).forEach((function(e){return s.push(e)})),s.push(function(e,t,r){var n=e.getText(),o=e.getCharacterList(),i=n.length,a=n.slice(t,i),s=o.slice(t,i),c=r.last();return c.merge({text:c.getText()+a,characterList:c.getCharacterList().concat(s),data:c.getData()})}(e,i,n))):s.push(e)}));var h=qe.createFromArray(s);return a&&(h=function(e,t,r,n){return e.withMutations((function(t){var o=r.getKey(),i=n.getKey(),a=r.getNextSiblingKey(),s=r.getParentKey(),c=function(e,t){var r=e.getKey(),n=e,o=[];for(t.get(r)&&o.push(r);n&&n.getNextSiblingKey();){var i=n.getNextSiblingKey();if(!i)break;o.push(i),n=t.get(i)}return o}(n,e),l=c[c.length-1];if(t.get(i)?(t.setIn([o,"nextSibling"],i),t.setIn([i,"prevSibling"],o)):(t.setIn([o,"nextSibling"],n.getNextSiblingKey()),t.setIn([n.getNextSiblingKey(),"prevSibling"],o)),t.setIn([l,"nextSibling"],a),a&&t.setIn([a,"prevSibling"],l),c.forEach((function(e){return t.setIn([e,"parent"],s)})),s){var u=e.get(s).getChildKeys(),d=u.indexOf(o)+1,p=u.toArray();p.splice.apply(p,[d,0].concat(c)),t.setIn([s,"children"],Ge(p))}}))}(h,0,l,u)),e.merge({blockMap:h,selectionBefore:t,selectionAfter:t.merge({anchorKey:f,anchorOffset:p,focusKey:f,focusOffset:p,isBackward:!1})})},Xe=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"REPLACE_WITH_NEW_DATA";t.isCollapsed()||Ve(!1);var o=e.getBlockMap(),i=$e(r),a=t.getStartKey(),s=t.getStartOffset(),c=o.get(a);return c instanceof He&&(c.getChildKeys().isEmpty()||Ve(!1)),1===i.size?Qe(e,t,o,i.first(),a,s,n):Je(e,t,o,i,a,s)},Ye=Ue,Ze=be,et=w.exports.Repeat;var tt=function(e,t,r,n){t.isCollapsed()||Ze(!1);var o=null;if(null!=r&&(o=r.length),null==o||0===o)return e;var i=e.getBlockMap(),a=t.getStartKey(),s=t.getStartOffset(),c=i.get(a),l=c.getText(),u=c.merge({text:l.slice(0,s)+r+l.slice(s,c.getLength()),characterList:Ye(c.getCharacterList(),et(n,o).toList(),s)}),d=s+o;return e.merge({blockMap:i.set(a,u),selectionAfter:t.merge({anchorOffset:d,focusOffset:d})})},rt=w.exports.Map;var nt=function(e,t,r){var n=t.getStartKey(),o=t.getEndKey(),i=e.getBlockMap(),a=i.toSeq().skipUntil((function(e,t){return t===n})).takeUntil((function(e,t){return t===o})).concat(rt([[o,i.get(o)]])).map(r);return e.merge({blockMap:i.merge(a),selectionBefore:t,selectionAfter:t})},ot=de,it=function(e,t){if(!(e instanceof ot))return null;var r=e.getNextSiblingKey();if(r)return r;var n=e.getParentKey();if(!n)return null;for(var o=t.get(n);o&&!o.getNextSiblingKey();){var i=o.getParentKey();o=i?t.get(i):null}return o?o.getNextSiblingKey():null},at=de,st=it,ct=w.exports;ct.List;var lt=ct.Map,ut=function(e,t,r){if(e){var n=t.get(e);n&&t.set(e,r(n))}},dt=function(e,t){var r=[];if(!e)return r;for(var n=t.get(e);n&&n.getParentKey();){var o=n.getParentKey();o&&r.push(o),n=o?t.get(o):null}return r},pt=function(e,t,r){if(!e)return null;for(var n=r.get(e.getKey()).getNextSiblingKey();n&&!t.get(n);)n=r.get(n).getNextSiblingKey()||null;return n},ft=function(e,t,r){if(!e)return null;for(var n=r.get(e.getKey()).getPrevSiblingKey();n&&!t.get(n);)n=r.get(n).getPrevSiblingKey()||null;return n},mt=function(e,t,r,n){return e.withMutations((function(o){if(ut(t.getKey(),o,(function(e){return e.merge({nextSibling:pt(e,o,n),prevSibling:ft(e,o,n)})})),ut(r.getKey(),o,(function(e){return e.merge({nextSibling:pt(e,o,n),prevSibling:ft(e,o,n)})})),dt(t.getKey(),n).forEach((function(e){return ut(e,o,(function(e){return e.merge({children:e.getChildKeys().filter((function(e){return o.get(e)})),nextSibling:pt(e,o,n),prevSibling:ft(e,o,n)})}))})),ut(t.getNextSiblingKey(),o,(function(e){return e.merge({prevSibling:t.getPrevSiblingKey()})})),ut(t.getPrevSiblingKey(),o,(function(e){return e.merge({nextSibling:pt(e,o,n)})})),ut(r.getNextSiblingKey(),o,(function(e){return e.merge({prevSibling:ft(e,o,n)})})),ut(r.getPrevSiblingKey(),o,(function(e){return e.merge({nextSibling:r.getNextSiblingKey()})})),dt(r.getKey(),n).forEach((function(e){ut(e,o,(function(e){return e.merge({children:e.getChildKeys().filter((function(e){return o.get(e)})),nextSibling:pt(e,o,n),prevSibling:ft(e,o,n)})}))})),function(e,t){var r=[];if(!e)return r;for(var n=st(e,t);n&&t.get(n);){var o=t.get(n);r.push(n),n=o.getParentKey()?st(o,t):null}return r}(r,n).forEach((function(e){return ut(e,o,(function(e){return e.merge({nextSibling:pt(e,o,n),prevSibling:ft(e,o,n)})}))})),null==e.get(t.getKey())&&null!=e.get(r.getKey())&&r.getParentKey()===t.getKey()&&null==r.getPrevSiblingKey()){var i=t.getPrevSiblingKey();ut(r.getKey(),o,(function(e){return e.merge({prevSibling:i})})),ut(i,o,(function(e){return e.merge({nextSibling:r.getKey()})}));var a=i?e.get(i):null,s=a?a.getParentKey():null;if(t.getChildKeys().forEach((function(e){ut(e,o,(function(e){return e.merge({parent:s})}))})),null!=s){var c=e.get(s);ut(s,o,(function(e){return e.merge({children:c.getChildKeys().concat(t.getChildKeys())})}))}ut(t.getChildKeys().find((function(t){return null===e.get(t).getNextSiblingKey()})),o,(function(e){return e.merge({nextSibling:t.getNextSiblingKey()})}))}}))},ht=function(e,t,r){if(0===t)for(;t<r;)e=e.shift(),t++;else if(r===e.count())for(;r>t;)e=e.pop(),r--;else{var n=e.slice(0,t),o=e.slice(r);e=n.concat(o).toList()}return e},gt=function(e,t){if(t.isCollapsed())return e;var r,n=e.getBlockMap(),o=t.getStartKey(),i=t.getStartOffset(),a=t.getEndKey(),s=t.getEndOffset(),c=n.get(o),l=n.get(a),u=c instanceof at,d=[];if(u){var p=l.getChildKeys(),f=dt(a,n);l.getNextSiblingKey()&&(d=d.concat(f)),p.isEmpty()||(d=d.concat(f.concat([a]))),d=d.concat(dt(st(l,n),n))}r=c===l?ht(c.getCharacterList(),i,s):c.getCharacterList().slice(0,i).concat(l.getCharacterList().slice(s));var m=c.merge({text:c.getText().slice(0,i)+l.getText().slice(s),characterList:r}),h=u&&0===i&&0===s&&l.getParentKey()===o&&null==l.getPrevSiblingKey()?lt([[o,null]]):n.toSeq().skipUntil((function(e,t){return t===o})).takeUntil((function(e,t){return t===a})).filter((function(e,t){return-1===d.indexOf(t)})).concat(lt([[a,null]])).map((function(e,t){return t===o?m:null})),g=n.merge(h).filter((function(e){return!!e}));return u&&c!==l&&(g=mt(g,c,l,n)),e.merge({blockMap:g,selectionBefore:t,selectionAfter:t.merge({anchorKey:o,anchorOffset:i,focusKey:o,focusOffset:i,isBackward:!1})})},_t=de,vt=Ae,yt=w.exports,bt=be,xt=nt,St=yt.List,wt=yt.Map,Et=function(e,t,r){if(e){var n=t.get(e);n&&t.set(e,r(n))}},kt=P,Ct=he,Mt=ye,Tt=Ce,At=Le,Ot=Xe,Dt=tt,It=be,Rt=nt,Bt=Ne,Pt=gt,jt=function(e,t){t.isCollapsed()||bt(!1);var r=t.getAnchorKey(),n=e.getBlockMap(),o=n.get(r),i=o.getText();if(!i){var a=o.getType();if("unordered-list-item"===a||"ordered-list-item"===a)return xt(e,t,(function(e){return e.merge({type:"unstyled",depth:0})}))}var s=t.getAnchorOffset(),c=o.getCharacterList(),l=vt(),u=o instanceof _t,d=o.merge({text:i.slice(0,s),characterList:c.slice(0,s)}),p=d.merge({key:l,text:i.slice(s),characterList:c.slice(s),data:wt()}),f=n.toSeq().takeUntil((function(e){return e===o})),m=n.toSeq().skipUntil((function(e){return e===o})).rest(),h=f.concat([[r,d],[l,p]],m).toOrderedMap();return u&&(o.getChildKeys().isEmpty()||bt(!1),h=function(e,t,r){return e.withMutations((function(e){var n=t.getKey(),o=r.getKey();Et(t.getParentKey(),e,(function(e){var t=e.getChildKeys(),r=t.indexOf(n)+1,i=t.toArray();return i.splice(r,0,o),e.merge({children:St(i)})})),Et(t.getNextSiblingKey(),e,(function(e){return e.merge({prevSibling:o})})),Et(n,e,(function(e){return e.merge({nextSibling:o})})),Et(o,e,(function(e){return e.merge({prevSibling:n})}))}))}(h,d,p)),e.merge({blockMap:h,selectionBefore:t,selectionAfter:t.merge({anchorKey:l,anchorOffset:0,focusKey:l,focusOffset:0,isBackward:!1})})},zt=w.exports.OrderedSet,Nt={replaceText:function(e,t,r,n,o){var i=Bt(e,t),a=Pt(i,t),s=kt.create({style:n||zt(),entity:o||null});return Dt(a,a.getSelectionAfter(),r,s)},insertText:function(e,t,r,n,o){return t.isCollapsed()||It(!1),Nt.replaceText(e,t,r,n,o)},moveText:function(e,t,r){var n=At(e,t),o=Nt.removeRange(e,t,"backward");return Nt.replaceWithFragment(o,r,n)},replaceWithFragment:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"REPLACE_WITH_NEW_DATA",o=Bt(e,t),i=Pt(o,t);return Ot(i,i.getSelectionAfter(),r,n)},removeRange:function(e,t,r){var n,o,i,a;t.getIsBackward()&&(t=t.merge({anchorKey:t.getFocusKey(),anchorOffset:t.getFocusOffset(),focusKey:t.getAnchorKey(),focusOffset:t.getAnchorOffset(),isBackward:!1})),n=t.getAnchorKey(),o=t.getFocusKey(),i=e.getBlockForKey(n),a=e.getBlockForKey(o);var s=t.getStartOffset(),c=t.getEndOffset(),l=i.getEntityAt(s),u=a.getEntityAt(c-1);if(n===o&&l&&l===u){var d=Tt(e.getEntityMap(),i,a,t,r);return Pt(e,d)}var p=Bt(e,t);return Pt(p,t)},splitBlock:function(e,t){var r=Bt(e,t),n=Pt(r,t);return jt(n,n.getSelectionAfter())},applyInlineStyle:function(e,t,r){return Ct.add(e,t,r)},removeInlineStyle:function(e,t,r){return Ct.remove(e,t,r)},setBlockType:function(e,t,r){return Rt(e,t,(function(e){return e.merge({type:r,depth:0})}))},setBlockData:function(e,t,r){return Rt(e,t,(function(e){return e.merge({data:r})}))},mergeBlockData:function(e,t,r){return Rt(e,t,(function(e){return e.merge({data:e.getData().merge(r)})}))},applyEntity:function(e,t,r){var n=Bt(e,t);return Mt(n,t,r)}},Ft=Nt;var Kt=function(e){return Object.keys(e).map((function(t){return e[t]}))};function Lt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ut=j,qt=Kt,Ht=w.exports,Wt=Ht.List,Vt=Ht.Repeat,$t=Ht.Record,Gt=function(){return!0},Qt=$t({start:null,end:null}),Jt=$t({start:null,end:null,decoratorKey:null,leaves:null}),Xt={generate:function(e,t,r){var n=t.getLength();if(!n)return Wt.of(new Jt({start:0,end:0,decoratorKey:null,leaves:Wt.of(new Qt({start:0,end:0}))}));var o=[],i=r?r.getDecorations(t,e):Wt(Vt(null,n)),a=t.getCharacterList();return Ut(i,Zt,Gt,(function(e,t){o.push(new Jt({start:e,end:t,decoratorKey:i.get(e),leaves:Yt(a.slice(e,t).toList(),e)}))})),Wt(o)},fromJS:function(e){var t=e.leaves,r=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,["leaves"]);return new Jt(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Lt(e,t,r[t])}))}return e}({},r,{leaves:null!=t?Wt(Array.isArray(t)?t:qt(t)).map((function(e){return Qt(e)})):null}))}};function Yt(e,t){var r=[],n=e.map((function(e){return e.getStyle()})).toList();return Ut(n,Zt,Gt,(function(e,n){r.push(new Qt({start:e+t,end:n+t}))})),Wt(r)}function Zt(e,t){return e===t}var er=Xt;var tr=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.getType=function(){return this.get("type")},o.getMutability=function(){return this.get("mutability")},o.getData=function(){return this.get("data")},n}((0,w.exports.Record)({type:"TOKEN",mutability:"IMMUTABLE",data:Object})),rr=tr;function nr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var or=rr,ir=be,ar=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},sr=(0,w.exports.Map)(),cr=ar();function lr(e,t){console.warn("WARNING: "+e+' will be deprecated soon!\nPlease use "'+t+'" instead.')}var ur={getLastCreatedEntityKey:function(){return lr("DraftEntity.getLastCreatedEntityKey","contentState.getLastCreatedEntityKey"),ur.__getLastCreatedEntityKey()},create:function(e,t,r){return lr("DraftEntity.create","contentState.createEntity"),ur.__create(e,t,r)},add:function(e){return lr("DraftEntity.add","contentState.addEntity"),ur.__add(e)},get:function(e){return lr("DraftEntity.get","contentState.getEntity"),ur.__get(e)},__getAll:function(){return sr},__loadWithEntities:function(e){sr=e,cr=ar()},mergeData:function(e,t){return lr("DraftEntity.mergeData","contentState.mergeEntityData"),ur.__mergeData(e,t)},replaceData:function(e,t){return lr("DraftEntity.replaceData","contentState.replaceEntityData"),ur.__replaceData(e,t)},__getLastCreatedEntityKey:function(){return cr},__create:function(e,t,r){return ur.__add(new or({type:e,mutability:t,data:r||{}}))},__add:function(e){return cr=ar(),sr=sr.set(cr,e),cr},__get:function(e){var t=sr.get(e);return t||ir(!1),t},__mergeData:function(e,t){var r=ur.__get(e),n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){nr(e,t,r[t])}))}return e}({},r.getData(),t),o=r.set("data",n);return sr=sr.set(e,o),o},__replaceData:function(e,t){var r=ur.__get(e).set("data",t);return sr=sr.set(e,r),r}},dr=ur;var pr=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.serialize=function(){return"Anchor: "+this.getAnchorKey()+":"+this.getAnchorOffset()+", Focus: "+this.getFocusKey()+":"+this.getFocusOffset()+", Is Backward: "+String(this.getIsBackward())+", Has Focus: "+String(this.getHasFocus())},o.getAnchorKey=function(){return this.get("anchorKey")},o.getAnchorOffset=function(){return this.get("anchorOffset")},o.getFocusKey=function(){return this.get("focusKey")},o.getFocusOffset=function(){return this.get("focusOffset")},o.getIsBackward=function(){return this.get("isBackward")},o.getHasFocus=function(){return this.get("hasFocus")},o.hasEdgeWithin=function(e,t,r){var n=this.getAnchorKey(),o=this.getFocusKey();if(n===o&&n===e){var i=this.getStartOffset(),a=this.getEndOffset();return t<=i&&i<=r||t<=a&&a<=r}if(e!==n&&e!==o)return!1;var s=e===n?this.getAnchorOffset():this.getFocusOffset();return t<=s&&r>=s},o.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset()},o.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey()},o.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset()},o.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey()},o.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset()},n.createEmpty=function(e){return new n({anchorKey:e,anchorOffset:0,focusKey:e,focusOffset:0,isBackward:!1,hasFocus:!1})},n}((0,w.exports.Record)({anchorKey:"",anchorOffset:0,focusKey:"",focusOffset:0,isBackward:!1,hasFocus:!1})),fr=pr,mr=function(e){return!("undefined"==typeof window||!window.__DRAFT_GKX)&&!!window.__DRAFT_GKX[e]},hr=new RegExp("\r","g");var gr=function(e){return e.replace(hr,"")};function _r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){vr(e,t,r[t])}))}return e}function vr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yr=k,br=P,xr=J,Sr=de,wr=dr,Er=fr,kr=Ae,Cr=Kt,Mr=mr,Tr=w.exports,Ar=gr,Or=Tr.List,Dr=Tr.Record,Ir=Tr.Repeat,Rr=Tr.Map,Br=Tr.OrderedMap,Pr=Dr({entityMap:null,blockMap:null,selectionBefore:null,selectionAfter:null}),jr=Mr("draft_tree_data_support")?Sr:xr,zr=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.getEntityMap=function(){return wr},o.getBlockMap=function(){return this.get("blockMap")},o.getSelectionBefore=function(){return this.get("selectionBefore")},o.getSelectionAfter=function(){return this.get("selectionAfter")},o.getBlockForKey=function(e){return this.getBlockMap().get(e)},o.getKeyBefore=function(e){return this.getBlockMap().reverse().keySeq().skipUntil((function(t){return t===e})).skip(1).first()},o.getKeyAfter=function(e){return this.getBlockMap().keySeq().skipUntil((function(t){return t===e})).skip(1).first()},o.getBlockAfter=function(e){return this.getBlockMap().skipUntil((function(t,r){return r===e})).skip(1).first()},o.getBlockBefore=function(e){return this.getBlockMap().reverse().skipUntil((function(t,r){return r===e})).skip(1).first()},o.getBlocksAsArray=function(){return this.getBlockMap().toArray()},o.getFirstBlock=function(){return this.getBlockMap().first()},o.getLastBlock=function(){return this.getBlockMap().last()},o.getPlainText=function(e){return this.getBlockMap().map((function(e){return e?e.getText():""})).join(e||"\n")},o.getLastCreatedEntityKey=function(){return wr.__getLastCreatedEntityKey()},o.hasText=function(){var e=this.getBlockMap();return e.size>1||escape(e.first().getText()).replace(/%u200B/g,"").length>0},o.createEntity=function(e,t,r){return wr.__create(e,t,r),this},o.mergeEntityData=function(e,t){return wr.__mergeData(e,t),this},o.replaceEntityData=function(e,t){return wr.__replaceData(e,t),this},o.addEntity=function(e){return wr.__add(e),this},o.getEntity=function(e){return wr.__get(e)},o.getAllEntities=function(){return wr.__getAll()},o.loadWithEntities=function(e){return wr.__loadWithEntities(e)},n.createFromBlockArray=function(e,t){var r=Array.isArray(e)?e:e.contentBlocks,o=yr.createFromArray(r),i=o.isEmpty()?new Er:Er.createEmpty(o.first().getKey());return new n({blockMap:o,entityMap:t||wr,selectionBefore:i,selectionAfter:i})},n.createFromText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/\r\n?|\n/g,r=e.split(t),o=r.map((function(e){return e=Ar(e),new jr({key:kr(),text:e,type:"unstyled",characterList:Or(Ir(br.EMPTY,e.length))})}));return n.createFromBlockArray(o)},n.fromJS=function(e){return new n(_r({},e,{blockMap:Br(e.blockMap).map(n.createContentBlockFromJS),selectionBefore:new Er(e.selectionBefore),selectionAfter:new Er(e.selectionAfter)}))},n.createContentBlockFromJS=function(e){var t=e.characterList;return new jr(_r({},e,{data:Rr(e.data),characterList:null!=t?Or((Array.isArray(t)?t:Cr(t)).map((function(e){return br.fromJS(e)}))):void 0}))},n}(Pr),Nr=zr,Fr=be,Kr="LTR",Lr=null;function Ur(e){return e===Kr||"RTL"===e}function qr(e){return Ur(e)||Fr(!1),e===Kr?"ltr":"rtl"}function Hr(e){Lr=e}var Wr={NEUTRAL:"NEUTRAL",LTR:Kr,RTL:"RTL",isStrong:Ur,getHTMLDir:qr,getHTMLDirIfDifferent:function(e,t){return Ur(e)||Fr(!1),Ur(t)||Fr(!1),e===t?null:qr(e)},setGlobalDir:Hr,initGlobalDir:function(){Hr(Kr)},getGlobalDir:function(){return Lr||this.initGlobalDir(),Lr||Fr(!1),Lr}},Vr=Wr,$r=be,Gr="֐־׀׃׆׈-׏א-ת׫-ׯװ-ײ׳-״׵-׿߀-߉ߊ-ߪߴ-ߵߺ߻-߿ࠀ-ࠕࠚࠤࠨ࠮-࠯࠰-࠾࠿ࡀ-ࡘ࡜-࡝࡞࡟-࢟‏יִײַ-ﬨשׁ-זּ﬷טּ-לּ﬽מּ﬿נּ-סּ﭂ףּ-פּ﭅צּ-ﭏ",Qr="؈؋؍؛؜؝؞-؟ؠ-ؿـف-ي٭ٮ-ٯٱ-ۓ۔ەۥ-ۦۮ-ۯۺ-ۼ۽-۾ۿ܀-܍܎܏ܐܒ-ܯ݋-݌ݍ-ޥޱ޲-޿ࢠ-ࢲࢳ-ࣣﭐ-ﮱ﮲-﯁﯂-﯒ﯓ-ﴽ﵀-﵏ﵐ-ﶏ﶐-﶑ﶒ-ﷇ﷈-﷏ﷰ-ﷻ﷼﷾-﷿ﹰ-ﹴ﹵ﹶ-ﻼ﻽-﻾",Jr=new RegExp("["+"A-Za-zªµºÀ-ÖØ-öø-ƺƻƼ-ƿǀ-ǃǄ-ʓʔʕ-ʯʰ-ʸʻ-ˁː-ˑˠ-ˤˮͰ-ͳͶ-ͷͺͻ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҂Ҋ-ԯԱ-Ֆՙ՚-՟ա-և։ःऄ-हऻऽा-ीॉ-ौॎ-ॏॐक़-ॡ।-॥०-९॰ॱॲ-ঀং-ঃঅ-ঌএ-ঐও-নপ-রলশ-হঽা-ীে-ৈো-ৌৎৗড়-ঢ়য়-ৡ০-৯ৰ-ৱ৴-৹৺ਃਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਾ-ੀਖ਼-ੜਫ਼੦-੯ੲ-ੴઃઅ-ઍએ-ઑઓ-નપ-રલ-ળવ-હઽા-ીૉો-ૌૐૠ-ૡ૦-૯૰ଂ-ଃଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଵ-ହଽାୀେ-ୈୋ-ୌୗଡ଼-ଢ଼ୟ-ୡ୦-୯୰ୱ୲-୷ஃஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-ஹா-ிு-ூெ-ைொ-ௌௐௗ௦-௯௰-௲ఁ-ఃఅ-ఌఎ-ఐఒ-నప-హఽు-ౄౘ-ౙౠ-ౡ౦-౯౿ಂ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽಾಿೀ-ೄೆೇ-ೈೊ-ೋೕ-ೖೞೠ-ೡ೦-೯ೱ-ೲം-ഃഅ-ഌഎ-ഐഒ-ഺഽാ-ീെ-ൈൊ-ൌൎൗൠ-ൡ൦-൯൰-൵൹ൺ-ൿං-ඃඅ-ඖක-නඳ-රලව-ෆා-ෑෘ-ෟ෦-෯ෲ-ෳ෴ก-ะา-ำเ-ๅๆ๏๐-๙๚-๛ກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ະາ-ຳຽເ-ໄໆ໐-໙ໜ-ໟༀ༁-༃༄-༒༓༔༕-༗༚-༟༠-༩༪-༳༴༶༸༾-༿ཀ-ཇཉ-ཬཿ྅ྈ-ྌ྾-࿅࿇-࿌࿎-࿏࿐-࿔࿕-࿘࿙-࿚က-ဪါ-ာေးျ-ြဿ၀-၉၊-၏ၐ-ၕၖ-ၗၚ-ၝၡၢ-ၤၥ-ၦၧ-ၭၮ-ၰၵ-ႁႃ-ႄႇ-ႌႎႏ႐-႙ႚ-ႜ႞-႟Ⴀ-ჅჇჍა-ჺ჻ჼჽ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፠-፨፩-፼ᎀ-ᎏᎠ-Ᏼᐁ-ᙬ᙭-᙮ᙯ-ᙿᚁ-ᚚᚠ-ᛪ᛫-᛭ᛮ-ᛰᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱ᜵-᜶ᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳាើ-ៅះ-ៈ។-៖ៗ៘-៚ៜ០-៩᠐-᠙ᠠ-ᡂᡃᡄ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᤣ-ᤦᤩ-ᤫᤰ-ᤱᤳ-ᤸ᥆-᥏ᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧀᧁ-ᧇᧈ-ᧉ᧐-᧙᧚ᨀ-ᨖᨙ-ᨚ᨞-᨟ᨠ-ᩔᩕᩗᩡᩣ-ᩤᩭ-ᩲ᪀-᪉᪐-᪙᪠-᪦ᪧ᪨-᪭ᬄᬅ-ᬳᬵᬻᬽ-ᭁᭃ-᭄ᭅ-ᭋ᭐-᭙᭚-᭠᭡-᭪᭴-᭼ᮂᮃ-ᮠᮡᮦ-ᮧ᮪ᮮ-ᮯ᮰-᮹ᮺ-ᯥᯧᯪ-ᯬᯮ᯲-᯳᯼-᯿ᰀ-ᰣᰤ-ᰫᰴ-ᰵ᰻-᰿᱀-᱉ᱍ-ᱏ᱐-᱙ᱚ-ᱷᱸ-ᱽ᱾-᱿᳀-᳇᳓᳡ᳩ-ᳬᳮ-ᳱᳲ-ᳳᳵ-ᳶᴀ-ᴫᴬ-ᵪᵫ-ᵷᵸᵹ-ᶚᶛ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‎ⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℴℵ-ℸℹℼ-ℿⅅ-ⅉⅎ⅏Ⅰ-ↂↃ-ↄↅ-ↈ⌶-⍺⎕⒜-ⓩ⚬⠀-⣿Ⰰ-Ⱞⰰ-ⱞⱠ-ⱻⱼ-ⱽⱾ-ⳤⳫ-ⳮⳲ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵰ⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々〆〇〡-〩〮-〯〱-〵〸-〺〻〼ぁ-ゖゝ-ゞゟァ-ヺー-ヾヿㄅ-ㄭㄱ-ㆎ㆐-㆑㆒-㆕㆖-㆟ㆠ-ㆺㇰ-ㇿ㈀-㈜㈠-㈩㈪-㉇㉈-㉏㉠-㉻㉿㊀-㊉㊊-㊰㋀-㋋㋐-㋾㌀-㍶㍻-㏝㏠-㏾㐀-䶵一-鿌ꀀ-ꀔꀕꀖ-ꒌꓐ-ꓷꓸ-ꓽ꓾-꓿ꔀ-ꘋꘌꘐ-ꘟ꘠-꘩ꘪ-ꘫꙀ-ꙭꙮꚀ-ꚛꚜ-ꚝꚠ-ꛥꛦ-ꛯ꛲-꛷Ꜣ-ꝯꝰꝱ-ꞇ꞉-꞊Ꞌ-ꞎꞐ-ꞭꞰ-Ʇꟷꟸ-ꟹꟺꟻ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꠣ-ꠤꠧ꠰-꠵꠶-꠷ꡀ-ꡳꢀ-ꢁꢂ-ꢳꢴ-ꣃ꣎-꣏꣐-꣙ꣲ-ꣷ꣸-꣺ꣻ꤀-꤉ꤊ-ꤥ꤮-꤯ꤰ-ꥆꥒ-꥓꥟ꥠ-ꥼꦃꦄ-ꦲꦴ-ꦵꦺ-ꦻꦽ-꧀꧁-꧍ꧏ꧐-꧙꧞-꧟ꧠ-ꧤꧦꧧ-ꧯ꧰-꧹ꧺ-ꧾꨀ-ꨨꨯ-ꨰꨳ-ꨴꩀ-ꩂꩄ-ꩋꩍ꩐-꩙꩜-꩟ꩠ-ꩯꩰꩱ-ꩶ꩷-꩹ꩺꩻꩽꩾ-ꪯꪱꪵ-ꪶꪹ-ꪽꫀꫂꫛ-ꫜꫝ꫞-꫟ꫠ-ꫪꫫꫮ-ꫯ꫰-꫱ꫲꫳ-ꫴꫵꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚ꭛ꭜ-ꭟꭤ-ꭥꯀ-ꯢꯣ-ꯤꯦ-ꯧꯩ-ꯪ꯫꯬꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ-豈-舘並-龎ﬀ-ﬆﬓ-ﬗＡ-Ｚａ-ｚｦ-ｯｰｱ-ﾝﾞ-ﾟﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ"+Gr+Qr+"]"),Xr=new RegExp("["+Gr+Qr+"]");function Yr(e){var t=Jr.exec(e);return null==t?null:t[0]}function Zr(e){var t=Yr(e);return null==t?Vr.NEUTRAL:Xr.exec(t)?Vr.RTL:Vr.LTR}function en(e,t){if(t=t||Vr.NEUTRAL,!e.length)return t;var r=Zr(e);return r===Vr.NEUTRAL?t:r}function tn(e,t){return t||(t=Vr.getGlobalDir()),Vr.isStrong(t)||$r(!1),en(e,t)}var rn={firstStrongChar:Yr,firstStrongCharDir:Zr,resolveBlockDir:en,getDirection:tn,isDirectionLTR:function(e,t){return tn(e,t)===Vr.LTR},isDirectionRTL:function(e,t){return tn(e,t)===Vr.RTL}};function nn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var on,an=rn,sn=Wr,cn=be,ln=function(){function e(e){nn(this,"_defaultDir",void 0),nn(this,"_lastDir",void 0),e?sn.isStrong(e)||cn(!1):e=sn.getGlobalDir(),this._defaultDir=e,this.reset()}var t=e.prototype;return t.reset=function(){this._lastDir=this._defaultDir},t.getDirection=function(e){return this._lastDir=an.getDirection(e,this._lastDir),this._lastDir},e}(),un=function(e){if(null!=e)return e;throw new Error("Got unexpected null or undefined")},dn=ln,pn=w.exports,fn=un,mn=pn.OrderedMap;function hn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){gn(e,t,r[t])}))}return e}function gn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _n=er,vn=Nr,yn={getDirectionMap:function(e,t){on?on.reset():on=new dn;var r=e.getBlockMap(),n=r.valueSeq().map((function(e){return fn(on).getDirection(e.getText())})),o=mn(r.keySeq().zip(n));return null!=t&&pn.is(t,o)?t:o}},bn=fr,xn=w.exports,Sn=xn.OrderedSet,wn=xn.Record,En=xn.Stack,kn=xn.OrderedMap,Cn=xn.List,Mn=wn({allowUndo:!0,currentContent:null,decorator:null,directionMap:null,forceSelection:!1,inCompositionMode:!1,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:En(),selection:null,treeMap:null,undoStack:En()}),Tn=function(){t.createEmpty=function(e){return this.createWithText("",e)},t.createWithText=function(e,r){return t.createWithContent(vn.createFromText(e),r)},t.createWithContent=function(e,r){if(0===e.getBlockMap().count())return t.createEmpty(r);var n=e.getBlockMap().first().getKey();return t.create({currentContent:e,undoStack:En(),redoStack:En(),decorator:r||null,selection:bn.createEmpty(n)})},t.create=function(e){var r=e.currentContent,n=hn({},e,{treeMap:On(r,e.decorator),directionMap:yn.getDirectionMap(r)});return new t(new Mn(n))},t.fromJS=function(e){return new t(new Mn(hn({},e,{directionMap:null!=e.directionMap?kn(e.directionMap):e.directionMap,inlineStyleOverride:null!=e.inlineStyleOverride?Sn(e.inlineStyleOverride):e.inlineStyleOverride,nativelyRenderedContent:null!=e.nativelyRenderedContent?vn.fromJS(e.nativelyRenderedContent):e.nativelyRenderedContent,redoStack:null!=e.redoStack?En(e.redoStack.map((function(e){return vn.fromJS(e)}))):e.redoStack,selection:null!=e.selection?new bn(e.selection):e.selection,treeMap:null!=e.treeMap?kn(e.treeMap).map((function(e){return Cn(e).map((function(e){return _n.fromJS(e)}))})):e.treeMap,undoStack:null!=e.undoStack?En(e.undoStack.map((function(e){return vn.fromJS(e)}))):e.undoStack,currentContent:vn.fromJS(e.currentContent)})))},t.set=function(e,r){return new t(e.getImmutable().withMutations((function(t){var n=t.get("decorator"),o=n;null===r.decorator?o=null:r.decorator&&(o=r.decorator);var i=r.currentContent||e.getCurrentContent();if(o!==n){var a,s=t.get("treeMap");return a=o&&n?function(e,t,r,n,o){return r.merge(t.toSeq().filter((function(t){return n.getDecorations(t,e)!==o.getDecorations(t,e)})).map((function(t){return _n.generate(e,t,n)})))}(i,i.getBlockMap(),s,o,n):On(i,o),void t.merge({decorator:o,treeMap:a,nativelyRenderedContent:null})}i!==e.getCurrentContent()&&t.set("treeMap",function(e,t,r,n){var o=e.getCurrentContent().set("entityMap",r),i=o.getBlockMap();return e.getImmutable().get("treeMap").merge(t.toSeq().filter((function(e,t){return e!==i.get(t)})).map((function(e){return _n.generate(o,e,n)})))}(e,i.getBlockMap(),i.getEntityMap(),o)),t.merge(r)})))};var e=t.prototype;function t(e){gn(this,"_immutable",void 0),this._immutable=e}return e.toJS=function(){return this.getImmutable().toJS()},e.getAllowUndo=function(){return this.getImmutable().get("allowUndo")},e.getCurrentContent=function(){return this.getImmutable().get("currentContent")},e.getUndoStack=function(){return this.getImmutable().get("undoStack")},e.getRedoStack=function(){return this.getImmutable().get("redoStack")},e.getSelection=function(){return this.getImmutable().get("selection")},e.getDecorator=function(){return this.getImmutable().get("decorator")},e.isInCompositionMode=function(){return this.getImmutable().get("inCompositionMode")},e.mustForceSelection=function(){return this.getImmutable().get("forceSelection")},e.getNativelyRenderedContent=function(){return this.getImmutable().get("nativelyRenderedContent")},e.getLastChangeType=function(){return this.getImmutable().get("lastChangeType")},e.getInlineStyleOverride=function(){return this.getImmutable().get("inlineStyleOverride")},t.setInlineStyleOverride=function(e,r){return t.set(e,{inlineStyleOverride:r})},e.getCurrentInlineStyle=function(){var e=this.getInlineStyleOverride();if(null!=e)return e;var t=this.getCurrentContent(),r=this.getSelection();return r.isCollapsed()?function(e,t){var r=t.getStartKey(),n=t.getStartOffset(),o=e.getBlockForKey(r);if(n>0)return o.getInlineStyleAt(n-1);if(o.getLength())return o.getInlineStyleAt(0);return In(e,r)}(t,r):function(e,t){var r=t.getStartKey(),n=t.getStartOffset(),o=e.getBlockForKey(r);if(n<o.getLength())return o.getInlineStyleAt(n);if(n>0)return o.getInlineStyleAt(n-1);return In(e,r)}(t,r)},e.getBlockTree=function(e){return this.getImmutable().getIn(["treeMap",e])},e.isSelectionAtStartOfContent=function(){var e=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(e,0,0)},e.isSelectionAtEndOfContent=function(){var e=this.getCurrentContent().getBlockMap().last(),t=e.getLength();return this.getSelection().hasEdgeWithin(e.getKey(),t,t)},e.getDirectionMap=function(){return this.getImmutable().get("directionMap")},t.acceptSelection=function(e,t){return An(e,t,!1)},t.forceSelection=function(e,t){return t.getHasFocus()||(t=t.set("hasFocus",!0)),An(e,t,!0)},t.moveSelectionToEnd=function(e){var r=e.getCurrentContent().getLastBlock(),n=r.getKey(),o=r.getLength();return t.acceptSelection(e,new bn({anchorKey:n,anchorOffset:o,focusKey:n,focusOffset:o,isBackward:!1}))},t.moveFocusToEnd=function(e){var r=t.moveSelectionToEnd(e);return t.forceSelection(r,r.getSelection())},t.push=function(e,r,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.getCurrentContent()===r)return e;var i=yn.getDirectionMap(r,e.getDirectionMap());if(!e.getAllowUndo())return t.set(e,{currentContent:r,directionMap:i,lastChangeType:n,selection:r.getSelectionAfter(),forceSelection:o,inlineStyleOverride:null});var a=e.getSelection(),s=e.getCurrentContent(),c=e.getUndoStack(),l=r;a!==s.getSelectionAfter()||Dn(e,n)?(c=c.push(s),l=l.set("selectionBefore",a)):"insert-characters"!==n&&"backspace-character"!==n&&"delete-character"!==n||(l=l.set("selectionBefore",s.getSelectionBefore()));var u=e.getInlineStyleOverride(),d=["adjust-depth","change-block-type","split-block"];-1===d.indexOf(n)&&(u=null);var p={currentContent:l,directionMap:i,undoStack:c,redoStack:En(),lastChangeType:n,selection:r.getSelectionAfter(),forceSelection:o,inlineStyleOverride:u};return t.set(e,p)},t.undo=function(e){if(!e.getAllowUndo())return e;var r=e.getUndoStack(),n=r.peek();if(!n)return e;var o=e.getCurrentContent(),i=yn.getDirectionMap(n,e.getDirectionMap());return t.set(e,{currentContent:n,directionMap:i,undoStack:r.shift(),redoStack:e.getRedoStack().push(o),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"undo",nativelyRenderedContent:null,selection:o.getSelectionBefore()})},t.redo=function(e){if(!e.getAllowUndo())return e;var r=e.getRedoStack(),n=r.peek();if(!n)return e;var o=e.getCurrentContent(),i=yn.getDirectionMap(n,e.getDirectionMap());return t.set(e,{currentContent:n,directionMap:i,undoStack:e.getUndoStack().push(o),redoStack:r.shift(),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"redo",nativelyRenderedContent:null,selection:n.getSelectionAfter()})},e.getImmutable=function(){return this._immutable},t}();function An(e,t,r){return Tn.set(e,{selection:t,forceSelection:r,nativelyRenderedContent:null,inlineStyleOverride:null})}function On(e,t){return e.getBlockMap().map((function(r){return _n.generate(e,r,t)})).toOrderedMap()}function Dn(e,t){return t!==e.getLastChangeType()||"insert-characters"!==t&&"backspace-character"!==t&&"delete-character"!==t}function In(e,t){var r=e.getBlockMap().reverse().skipUntil((function(e,r){return r===t})).skip(1).skipUntil((function(e,t){return e.getLength()})).first();return r?r.getInlineStyleAt(r.getLength()-1):Sn()}var Rn=Tn,Bn=de,Pn=it,jn=w.exports,zn=be,Nn=jn.OrderedMap,Fn=jn.List,Kn=function(e,t,r){if(e){var n=t.get(e);n&&t.set(e,r(n))}},Ln=function(e,t,r,n,o){if(!o)return e;var i="after"===n,a=t.getKey(),s=r.getKey(),c=t.getParentKey(),l=t.getNextSiblingKey(),u=t.getPrevSiblingKey(),d=r.getParentKey(),p=i?r.getNextSiblingKey():s,f=i?s:r.getPrevSiblingKey();return e.withMutations((function(e){Kn(c,e,(function(e){var t=e.getChildKeys();return e.merge({children:t.delete(t.indexOf(a))})})),Kn(u,e,(function(e){return e.merge({nextSibling:l})})),Kn(l,e,(function(e){return e.merge({prevSibling:u})})),Kn(p,e,(function(e){return e.merge({prevSibling:a})})),Kn(f,e,(function(e){return e.merge({nextSibling:a})})),Kn(d,e,(function(e){var t=e.getChildKeys(),r=t.indexOf(s),n=i?r+1:0!==r?r-1:0,o=t.toArray();return o.splice(n,0,a),e.merge({children:Fn(o)})})),Kn(a,e,(function(e){return e.merge({nextSibling:p,prevSibling:f,parent:d})}))}))};function Un(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){qn(e,t,r[t])}))}return e}function qn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Hn=k,Wn=P,Vn=J,$n=de,Gn=Ft,Qn=Rn,Jn=Ae,Xn=w.exports,Yn=function(e,t,r,n){"replace"===n&&zn(!1);var o=r.getKey(),i=t.getKey();i===o&&zn(!1);var a=e.getBlockMap(),s=t instanceof Bn,c=[t],l=a.delete(i);s&&(c=[],l=a.withMutations((function(e){var r=t.getNextSiblingKey(),n=Pn(t,e);e.toSeq().skipUntil((function(e){return e.getKey()===i})).takeWhile((function(e){var t=e.getKey(),o=t===i,a=r&&t!==r,s=!r&&e.getParentKey()&&(!n||t!==n);return!!(o||a||s)})).forEach((function(t){c.push(t),e.delete(t.getKey())}))})));var u=l.toSeq().takeUntil((function(e){return e===r})),d=l.toSeq().skipUntil((function(e){return e===r})).skip(1),p=c.map((function(e){return[e.getKey(),e]})),f=Nn();if("before"===n){var m=e.getBlockBefore(o);m&&m.getKey()===t.getKey()&&zn(!1),f=u.concat([].concat(p,[[o,r]]),d).toOrderedMap()}else if("after"===n){var h=e.getBlockAfter(o);h&&h.getKey()===i&&zn(!1),f=u.concat([[o,r]].concat(p),d).toOrderedMap()}return e.merge({blockMap:Ln(f,t,r,n,s),selectionBefore:e.getSelectionAfter(),selectionAfter:e.getSelectionAfter().merge({anchorKey:i,focusKey:i})})},Zn=mr("draft_tree_data_support"),eo=Zn?$n:Vn,to=Xn.List,ro=Xn.Repeat,no={insertAtomicBlock:function(e,t,r){var n=e.getCurrentContent(),o=e.getSelection(),i=Gn.removeRange(n,o,"backward"),a=i.getSelectionAfter(),s=Gn.splitBlock(i,a),c=s.getSelectionAfter(),l=Gn.setBlockType(s,c,"atomic"),u=Wn.create({entity:t}),d={key:Jn(),type:"atomic",text:r,characterList:to(ro(u,r.length))},p={key:Jn(),type:"unstyled"};Zn&&(d=Un({},d,{nextSibling:p.key}),p=Un({},p,{prevSibling:d.key}));var f=[new eo(d),new eo(p)],m=Hn.createFromArray(f),h=Gn.replaceWithFragment(l,c,m),g=h.merge({selectionBefore:o,selectionAfter:h.getSelectionAfter().set("hasFocus",!0)});return Qn.push(e,g,"insert-fragment")},moveAtomicBlock:function(e,t,r,n){var o,i=e.getCurrentContent(),a=e.getSelection();if("before"===n||"after"===n){var s=i.getBlockForKey("before"===n?r.getStartKey():r.getEndKey());o=Yn(i,t,s,n)}else{var c=Gn.removeRange(i,r,"backward"),l=c.getSelectionAfter(),u=c.getBlockForKey(l.getFocusKey());if(0===l.getStartOffset())o=Yn(c,t,u,"before");else if(l.getEndOffset()===u.getLength())o=Yn(c,t,u,"after");else{var d=Gn.splitBlock(c,l),p=d.getSelectionAfter(),f=d.getBlockForKey(p.getFocusKey());o=Yn(d,t,f,"before")}}var m=o.merge({selectionBefore:a,selectionAfter:o.getSelectionAfter().set("hasFocus",!0)});return Qn.push(e,m,"move-block")}};var oo=w.exports.List,io=function(){function e(e){var t,r,n;n=void 0,(r="_decorators")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this._decorators=e.slice()}var t=e.prototype;return t.getDecorations=function(e,t){var r=Array(e.getText().length).fill(null);return this._decorators.forEach((function(n,o){var i=0;(0,n.strategy)(e,(function(e,t){(function(e,t,r){for(var n=t;n<r;n++)if(null!=e[n])return!1;return!0})(r,e,t)&&(!function(e,t,r,n){for(var o=t;o<r;o++)e[o]=n}(r,e,t,o+"."+i),i++)}),t)})),oo(r)},t.getComponentForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].component},t.getPropsForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].props},e}();var ao=io;function so(e){return e.replace(/\//g,"-")}var co=function(e){return"object"==typeof e?Object.keys(e).filter((function(t){return e[t]})).map(so).join(" "):Array.prototype.map.call(arguments,so).join(" ")},lo=t.react.exports,uo=co,po=(0,w.exports.Map)({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},section:{element:"section"},article:{element:"article"},"unordered-list-item":{element:"li",wrapper:lo.createElement("ul",{className:uo("public/DraftStyleDefault/ul")})},"ordered-list-item":{element:"li",wrapper:lo.createElement("ol",{className:uo("public/DraftStyleDefault/ol")})},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:lo.createElement("pre",{className:uo("public/DraftStyleDefault/pre")})},unstyled:{element:"div",aliasedElements:["p"]}}),fo={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}},mo=Object.getOwnPropertySymbols,ho=Object.prototype.hasOwnProperty,go=Object.prototype.propertyIsEnumerable;function _o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var vo=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,n,o=_o(e),i=1;i<arguments.length;i++){for(var a in r=Object(arguments[i]))ho.call(r,a)&&(o[a]=r[a]);if(mo){n=mo(r);for(var s=0;s<n.length;s++)go.call(r,n[s])&&(o[n[s]]=r[n[s]])}}return o},yo={exports:{}};!function(e,t){!function(r,n){var o="function",i="object",a="string",s="model",c="name",l="type",u="vendor",d="version",p="architecture",f="console",m="mobile",h="tablet",g="smarttv",_="wearable",v="embedded",y={extend:function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},has:function(e,t){return typeof e===a&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===a?e.replace(/[^\d\.]/g,"").split(".")[0]:n},trim:function(e,t){return e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),void 0===t?e:e.substring(0,255)}},b={rgx:function(e,t){for(var r,a,s,c,l,u,d=0;d<t.length&&!l;){var p=t[d],f=t[d+1];for(r=a=0;r<p.length&&!l;)if(l=p[r++].exec(e))for(s=0;s<f.length;s++)u=l[++a],typeof(c=f[s])===i&&c.length>0?2==c.length?typeof c[1]==o?this[c[0]]=c[1].call(this,u):this[c[0]]=c[1]:3==c.length?typeof c[1]!==o||c[1].exec&&c[1].test?this[c[0]]=u?u.replace(c[1],c[2]):n:this[c[0]]=u?c[1].call(this,u,c[2]):n:4==c.length&&(this[c[0]]=u?c[3].call(this,u.replace(c[1],c[2])):n):this[c]=u||n;d+=2}},str:function(e,t){for(var r in t)if(typeof t[r]===i&&t[r].length>0){for(var o=0;o<t[r].length;o++)if(y.has(t[r][o],e))return"?"===r?n:r}else if(y.has(t[r],e))return"?"===r?n:r;return e}},x={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},S={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[d,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[d,[c,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[c,d],[/opios[\/\s]+([\w\.]+)/i],[d,[c,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[d,[c,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[c,d],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[d,[c,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[d,[c,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[d,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[d,[c,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[d,[c,"IE"]],[/yabrowser\/([\w\.]+)/i],[d,[c,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure Browser"],d],[/focus\/([\w\.]+)/i],[d,[c,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[d,[c,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[d,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[d,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[d,[c,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[d,[c,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[d,[c,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[c,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 Browser"],d],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],d],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[c,d],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[c],[/;fbav\/([\w\.]+);/i],[d,[c,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[c,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[c,d],[/\bgsa\/([\w\.]+)\s.*safari\//i],[d,[c,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[d,[c,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[c,"Chrome WebView"],d],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[d,[c,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[c,d],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[d,[c,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[d,c],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[c,[d,b.str,x.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[c,d],[/(navigator|netscape)\/([\w\.-]+)/i],[[c,"Netscape"],d],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[d,[c,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[c,d]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,y.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[p,/ower/,"",y.lowerize]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,y.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[s,[u,"Samsung"],[l,h]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[s,[u,"Samsung"],[l,m]],[/\((ip(?:hone|od)[\s\w]*);/i],[s,[u,"Apple"],[l,m]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[s,[u,"Apple"],[l,h]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[s,[u,"Huawei"],[l,h]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[s,[u,"Huawei"],[l,m]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[s,/_/g," "],[u,"Xiaomi"],[l,m]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[s,/_/g," "],[u,"Xiaomi"],[l,h]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[s,[u,"OPPO"],[l,m]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[s,[u,"Vivo"],[l,m]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[s,[u,"Realme"],[l,m]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[s,[u,"Motorola"],[l,m]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[s,[u,"Motorola"],[l,h]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[s,[u,"LG"],[l,h]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[s,[u,"LG"],[l,m]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[s,[u,"Lenovo"],[l,h]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[s,/_/g," "],[u,"Nokia"],[l,m]],[/droid.+;\s(pixel\sc)[\s)]/i],[s,[u,"Google"],[l,h]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[s,[u,"Google"],[l,m]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[s,[u,"Sony"],[l,m]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[s,"Xperia Tablet"],[u,"Sony"],[l,h]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[s,[u,"OnePlus"],[l,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[s,[u,"Amazon"],[l,h]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[s,"Fire Phone"],[u,"Amazon"],[l,m]],[/\((playbook);[\w\s\),;-]+(rim)/i],[s,u,[l,h]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[s,[u,"BlackBerry"],[l,m]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[s,[u,"ASUS"],[l,h]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[s,[u,"ASUS"],[l,m]],[/(nexus\s9)/i],[s,[u,"HTC"],[l,h]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[u,[s,/_/g," "],[l,m]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[s,[u,"Acer"],[l,h]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[s,[u,"Meizu"],[l,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[u,s,[l,m]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[u,s,[l,h]],[/\s(surface\sduo)\s/i],[s,[u,"Microsoft"],[l,h]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[s,[u,"Fairphone"],[l,m]],[/\s(u304aa)\sbuild/i],[s,[u,"AT&T"],[l,m]],[/sie-(\w*)/i],[s,[u,"Siemens"],[l,m]],[/[;\/]\s?(rct\w+)\sbuild/i],[s,[u,"RCA"],[l,h]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[s,[u,"Dell"],[l,h]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[s,[u,"Verizon"],[l,h]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[s,[u,"Barnes & Noble"],[l,h]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[s,[u,"NuVision"],[l,h]],[/;\s(k88)\sbuild/i],[s,[u,"ZTE"],[l,h]],[/;\s(nx\d{3}j)\sbuild/i],[s,[u,"ZTE"],[l,m]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[s,[u,"Swiss"],[l,m]],[/[;\/]\s?(zur\d{3})\sbuild/i],[s,[u,"Swiss"],[l,h]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[s,[u,"Zeki"],[l,h]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[u,"Dragon Touch"],s,[l,h]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[s,[u,"Insignia"],[l,h]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[s,[u,"NextBook"],[l,h]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[u,"Voice"],s,[l,m]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[u,"LvTel"],s,[l,m]],[/;\s(ph-1)\s/i],[s,[u,"Essential"],[l,m]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[s,[u,"Envizen"],[l,h]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[s,[u,"MachSpeed"],[l,h]],[/[;\/]\s?tu_(1491)\sbuild/i],[s,[u,"Rotor"],[l,h]],[/(shield[\w\s]+)\sbuild/i],[s,[u,"Nvidia"],[l,h]],[/(sprint)\s(\w+)/i],[u,s,[l,m]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[u,"Microsoft"],[l,m]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[s,[u,"Zebra"],[l,h]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[s,[u,"Zebra"],[l,m]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[u,s,[l,f]],[/droid.+;\s(shield)\sbuild/i],[s,[u,"Nvidia"],[l,f]],[/(playstation\s[345portablevi]+)/i],[s,[u,"Sony"],[l,f]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[s,[u,"Microsoft"],[l,f]],[/smart-tv.+(samsung)/i],[u,[l,g]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[u,"Samsung"],[l,g]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[u,"LG"],[l,g]],[/(apple)\s?tv/i],[u,[s,"Apple TV"],[l,g]],[/crkey/i],[[s,"Chromecast"],[u,"Google"],[l,g]],[/droid.+aft([\w])(\sbuild\/|\))/i],[s,[u,"Amazon"],[l,g]],[/\(dtv[\);].+(aquos)/i],[s,[u,"Sharp"],[l,g]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[u,y.trim],[s,y.trim],[l,g]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[l,g]],[/((pebble))app\/[\d\.]+\s/i],[u,s,[l,_]],[/droid.+;\s(glass)\s\d/i],[s,[u,"Google"],[l,_]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[s,[u,"Zebra"],[l,_]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[u,[l,v]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[s,[l,m]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[s,[l,h]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[l,y.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[s,[u,"Generic"]],[/(phone)/i],[[l,m]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[d,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[d,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[c,d],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[d,c]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[c,d],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[c,[d,b.str,x.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[c,"Windows"],[d,b.str,x.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[d,/_/g,"."],[c,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[c,"Mac OS"],[d,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[c,d],[/\(bb(10);/i],[d,[c,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[d,[c,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[c,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[d,[c,"webOS"]],[/crkey\/([\d\.]+)/i],[d,[c,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[c,"Chromium OS"],d],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[c,d],[/(sunos)\s?([\w\.\d]*)/i],[[c,"Solaris"],d],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[c,d]]},w=function(e,t){if("object"==typeof e&&(t=e,e=n),!(this instanceof w))return new w(e,t).getResult();var o=e||(void 0!==r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=t?y.extend(S,t):S;return this.getBrowser=function(){var e={name:n,version:n};return b.rgx.call(e,o,i.browser),e.major=y.major(e.version),e},this.getCPU=function(){var e={architecture:n};return b.rgx.call(e,o,i.cpu),e},this.getDevice=function(){var e={vendor:n,model:n,type:n};return b.rgx.call(e,o,i.device),e},this.getEngine=function(){var e={name:n,version:n};return b.rgx.call(e,o,i.engine),e},this.getOS=function(){var e={name:n,version:n};return b.rgx.call(e,o,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return o},this.setUA=function(e){return o=typeof e===a&&e.length>255?y.trim(e,255):e,this},this.setUA(o),this};w.VERSION="0.7.28",w.BROWSER={NAME:c,MAJOR:"major",VERSION:d},w.CPU={ARCHITECTURE:p},w.DEVICE={MODEL:s,VENDOR:u,TYPE:l,CONSOLE:f,MOBILE:m,SMARTTV:g,TABLET:h,WEARABLE:_,EMBEDDED:v},w.ENGINE={NAME:c,VERSION:d},w.OS={NAME:c,VERSION:d},e.exports&&(t=e.exports=w),t.UAParser=w;var E=void 0!==r&&(r.jQuery||r.Zepto);if(E&&!E.ua){var k=new w;E.ua=k.getResult(),E.ua.get=function(){return k.getUA()},E.ua.set=function(e){k.setUA(e);var t=k.getResult();for(var r in t)E.ua[r]=t[r]}}}("object"==typeof window?window:l.commonjsGlobal)}(yo,yo.exports);var bo="Unknown",xo={"Mac OS":"Mac OS X"};var So,wo=(new(0,yo.exports)).getResult(),Eo=function(e){if(!e)return{major:"",minor:""};var t=e.split(".");return{major:t[0],minor:t[1]}}(wo.browser.version),ko={browserArchitecture:wo.cpu.architecture||bo,browserFullVersion:wo.browser.version||bo,browserMinorVersion:Eo.minor||bo,browserName:wo.browser.name||bo,browserVersion:wo.browser.major||bo,deviceName:wo.device.model||bo,engineName:wo.engine.name||bo,engineVersion:wo.engine.version||bo,platformArchitecture:wo.cpu.architecture||bo,platformName:(So=wo.os.name,xo[So]||So||bo),platformVersion:wo.os.version||bo,platformFullVersion:wo.os.version||bo},Co=be,Mo=/\./,To=/\|\|/,Ao=/\s+\-\s+/,Oo=/^(<=|<|=|>=|~>|~|>|)?\s*(.+)/,Do=/^(\d*)(.*)/;function Io(e,t){var r=e.split(To);return r.length>1?r.some((function(e){return qo.contains(e,t)})):function(e,t){var r=e.split(Ao);if(r.length>0&&r.length<=2||Co(!1),1===r.length)return Ro(r[0],t);var n=r[0],o=r[1];return No(n)&&No(o)||Co(!1),Ro(">="+n,t)&&Ro("<="+o,t)}(e=r[0].trim(),t)}function Ro(e,t){if(""===(e=e.trim()))return!0;var r,n=t.split(Mo),o=jo(e),i=o.modifier,a=o.rangeComponents;switch(i){case"<":return Bo(n,a);case"<=":return-1===(r=Uo(n,a))||0===r;case">=":return Po(n,a);case">":return function(e,t){return 1===Uo(e,t)}(n,a);case"~":case"~>":return function(e,t){var r=t.slice(),n=t.slice();n.length>1&&n.pop();var o=n.length-1,i=parseInt(n[o],10);zo(i)&&(n[o]=i+1+"");return Po(e,r)&&Bo(e,n)}(n,a);default:return function(e,t){return 0===Uo(e,t)}(n,a)}}function Bo(e,t){return-1===Uo(e,t)}function Po(e,t){var r=Uo(e,t);return 1===r||0===r}function jo(e){var t=e.split(Mo),r=t[0].match(Oo);return r||Co(!1),{modifier:r[1],rangeComponents:[r[2]].concat(t.slice(1))}}function zo(e){return!isNaN(e)&&isFinite(e)}function No(e){return!jo(e).modifier}function Fo(e,t){for(var r=e.length;r<t;r++)e[r]="0"}function Ko(e,t){var r=e.match(Do)[1],n=t.match(Do)[1],o=parseInt(r,10),i=parseInt(n,10);return zo(o)&&zo(i)&&o!==i?Lo(o,i):Lo(e,t)}function Lo(e,t){return typeof e!=typeof t&&Co(!1),e>t?1:e<t?-1:0}function Uo(e,t){for(var r=function(e,t){Fo(e=e.slice(),(t=t.slice()).length);for(var r=0;r<t.length;r++){var n=t[r].match(/^[x*]$/i);if(n&&(t[r]=e[r]="0","*"===n[0]&&r===t.length-1))for(var o=r;o<e.length;o++)e[o]="0"}return Fo(t,e.length),[e,t]}(e,t),n=r[0],o=r[1],i=0;i<o.length;i++){var a=Ko(n[i],o[i]);if(a)return a}return 0}var qo={contains:function(e,t){return Io(e.trim(),t.trim())}},Ho=qo,Wo=Object.prototype.hasOwnProperty;var Vo=function(e,t,r){if(!e)return null;var n={};for(var o in e)Wo.call(e,o)&&(n[o]=t.call(r,e[o],o,e));return n};var $o=ko,Go=Ho;function Qo(e,t,r,n){if(e===r)return!0;if(!r.startsWith(e))return!1;var o=r.slice(e.length);return!!t&&(o=n?n(o):o,Go.contains(o,t))}function Jo(e){return"Windows"===$o.platformName?e.replace(/^\s*NT/,""):e}var Xo=Vo({isBrowser:function(e){return Qo($o.browserName,$o.browserFullVersion,e)},isBrowserArchitecture:function(e){return Qo($o.browserArchitecture,null,e)},isDevice:function(e){return Qo($o.deviceName,null,e)},isEngine:function(e){return Qo($o.engineName,$o.engineVersion,e)},isPlatform:function(e){return Qo($o.platformName,$o.platformFullVersion,e,Jo)},isPlatformArchitecture:function(e){return Qo($o.platformArchitecture,null,e)}},(function(e){var t={};return function(r){return t.hasOwnProperty(r)||(t[r]=e.call(this,r)),t[r]}}));var Yo=function(e){return e&&e.ownerDocument?e.ownerDocument:document};var Zo=function(e){return!(!e||!e.ownerDocument)&&e.nodeType===Node.ELEMENT_NODE},ei=Zo;var ti=function e(t){if(ei(t)){var r=t,n=r.getAttribute("data-offset-key");if(n)return n;for(var o=0;o<r.childNodes.length;o++){var i=e(r.childNodes[o]);if(i)return i}}return null},ri=Yo,ni=ti;var oi=function(e){for(var t=e;t&&t!==ri(e).documentElement;){var r=ni(t);if(null!=r)return r;t=t.parentNode}return null};var ii=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window};function ai(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var si=Xo,ci=oi,li=ii,ui=be,di=un,pi=w.exports.Map,fi={subtree:!0,characterData:!0,childList:!0,characterDataOldValue:!1,attributes:!1},mi=si.isBrowser("IE <= 11"),hi=function(){function e(e){var t=this;ai(this,"observer",void 0),ai(this,"container",void 0),ai(this,"mutations",void 0),ai(this,"onCharData",void 0),this.container=e,this.mutations=pi();var r=li(e);r.MutationObserver&&!mi?this.observer=new r.MutationObserver((function(e){return t.registerMutations(e)})):this.onCharData=function(e){e.target instanceof Node||ui(!1),t.registerMutation({type:"characterData",target:e.target})}}var t=e.prototype;return t.start=function(){this.observer?this.observer.observe(this.container,fi):this.container.addEventListener("DOMCharacterDataModified",this.onCharData)},t.stopAndFlushMutations=function(){var e=this.observer;e?(this.registerMutations(e.takeRecords()),e.disconnect()):this.container.removeEventListener("DOMCharacterDataModified",this.onCharData);var t=this.mutations;return this.mutations=pi(),t},t.registerMutations=function(e){for(var t=0;t<e.length;t++)this.registerMutation(e[t])},t.getMutationTextContent=function(e){var t=e.type,r=e.target,n=e.removedNodes;if("characterData"===t){if(""!==r.textContent)return mi?r.textContent.replace("\n",""):r.textContent}else if("childList"===t){if(n&&n.length)return"";if(""!==r.textContent)return r.textContent}return null},t.registerMutation=function(e){var t=this.getMutationTextContent(e);if(null!=t){var r=di(ci(e.target));this.mutations=this.mutations.set(r,t)}},e}(),gi="-",_i={encode:function(e,t,r){return e+gi+t+gi+r},decode:function(e){var t=e.split(gi).reverse(),r=t[0],n=t[1];return{blockKey:t.slice(2).reverse().join(gi),decoratorKey:parseInt(n,10),leafKey:parseInt(r,10)}}},vi={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90,ZERO:48,NUMPAD_0:96,NUMPAD_9:105},yi={logBlockedSelectionEvent:function(){return null},logSelectionStateFailure:function(){return null}};var bi=function(e){return!(!e||!e.ownerDocument)&&(e.ownerDocument.defaultView?e instanceof e.ownerDocument.defaultView.HTMLElement:e instanceof HTMLElement)},xi=be,Si=bi;var wi=function(e){var t=e.editorContainer;return t||xi(!1),Si(t.firstChild)||xi(!1),t.firstChild},Ei=_i,ki=un;var Ci=function(e,t,r,n,o){var i=ki(e.getSelection());if(!t||!n)return i;var a=Ei.decode(t),s=a.blockKey,c=e.getBlockTree(s),l=c&&c.getIn([a.decoratorKey,"leaves",a.leafKey]),u=Ei.decode(n),d=u.blockKey,p=e.getBlockTree(d),f=p&&p.getIn([u.decoratorKey,"leaves",u.leafKey]);if(!l||!f)return i;var m=l.get("start"),h=f.get("start"),g=l?m+r:null,_=f?h+o:null;if(i.getAnchorKey()===s&&i.getAnchorOffset()===g&&i.getFocusKey()===d&&i.getFocusOffset()===_)return i;var v=!1;if(s===d){var y=l.get("end"),b=f.get("end");v=h===m&&b===y?o<r:h<m}else{v=e.getCurrentContent().getBlockMap().keySeq().skipUntil((function(e){return e===s||e===d})).first()===d}return i.merge({anchorKey:s,anchorOffset:g,focusKey:d,focusOffset:_,isBackward:v})},Mi=oi,Ti=ti,Ai=Ci,Oi=be,Di=Zo,Ii=un;function Ri(e,t,r){var n=t,o=Mi(n);(null!=o||e&&(e===n||e.firstChild===n)||Oi(!1),e===n)&&(n=n.firstChild,Di(n)||Oi(!1),"true"!==(n=n).getAttribute("data-contents")&&Oi(!1),r>0&&(r=n.childNodes.length));if(0===r){var i=null;if(null!=o)i=o;else{var a=function(e){for(;e.firstChild&&(Di(e.firstChild)&&"true"===e.firstChild.getAttribute("data-blocks")||Ti(e.firstChild));)e=e.firstChild;return e}(n);i=Ii(Ti(a))}return{key:i,offset:0}}var s=n.childNodes[r-1],c=null,l=null;if(Ti(s)){var u=function(e){for(;e.lastChild&&(Di(e.lastChild)&&"true"===e.lastChild.getAttribute("data-blocks")||Ti(e.lastChild));)e=e.lastChild;return e}(s);c=Ii(Ti(u)),l=Bi(u)}else c=Ii(o),l=Bi(s);return{key:c,offset:l}}function Bi(e){var t=e.textContent;return"\n"===t?0:t.length}var Pi=function(e,t,r,n,o,i){var a=r.nodeType===Node.TEXT_NODE,s=o.nodeType===Node.TEXT_NODE;if(a&&s)return{selectionState:Ai(e,Ii(Mi(r)),n,Ii(Mi(o)),i),needsRecovery:!1};var c=null,l=null,u=!0;return a?(c={key:Ii(Mi(r)),offset:n},l=Ri(t,o,i)):s?(l={key:Ii(Mi(o)),offset:i},c=Ri(t,r,n)):(c=Ri(t,r,n),l=Ri(t,o,i),r===o&&n===i&&(u=!!r.firstChild&&"BR"!==r.firstChild.nodeName)),{selectionState:Ai(e,c.key,c.offset,l.key,l.offset),needsRecovery:u}},ji=Pi;var zi=function(e,t){var r=t.ownerDocument.defaultView.getSelection(),n=r.anchorNode,o=r.anchorOffset,i=r.focusNode,a=r.focusOffset;return 0===r.rangeCount||null==n||null==i?{selectionState:e.getSelection().set("hasFocus",!1),needsRecovery:!1}:ji(e,t,n,o,i,a)},Ni=yi,Fi=Rn,Ki=wi,Li=zi;var Ui=function(e){if(e._blockSelectEvents||e._latestEditorState!==e.props.editorState){if(e._blockSelectEvents){var t=e.props.editorState.getSelection();Ni.logBlockedSelectionEvent({anonymizedDom:"N/A",extraParams:JSON.stringify({stacktrace:(new Error).stack}),selectionState:JSON.stringify(t.toJS())})}}else{var r=e.props.editorState,n=Li(r,Ki(e)),o=n.selectionState;o!==r.getSelection()&&(r=n.needsRecovery?Fi.forceSelection(r,o):Fi.acceptSelection(r,o),e.update(r))}};var qi={notEmptyKey:function(e){return null!=e&&""!=e}},Hi=qi.notEmptyKey;function Wi(e,t){return Hi(t)&&"MUTABLE"===e.__get(t).getMutability()?t:null}var Vi=function(e,t){var r;if(t.isCollapsed()){var n=t.getAnchorKey(),o=t.getAnchorOffset();return o>0?(r=e.getBlockForKey(n).getEntityAt(o-1))!==e.getBlockForKey(n).getEntityAt(o)?null:Wi(e.getEntityMap(),r):null}var i=t.getStartKey(),a=t.getStartOffset(),s=e.getBlockForKey(i);return r=a===s.getLength()?null:s.getEntityAt(a),Wi(e.getEntityMap(),r)},$i=hi,Gi=Ft,Qi=_i,Ji=Rn,Xi=vi,Yi=Ui,Zi=wi,ea=zi,ta=Vi,ra=un,na=Xo.isBrowser("IE"),oa=!1,ia=!1,aa=null;var sa={onCompositionStart:function(e){ia=!0,function(e){aa||(aa=new $i(Zi(e))).start()}(e)},onCompositionEnd:function(e){oa=!1,ia=!1,setTimeout((function(){oa||sa.resolveComposition(e)}),20)},onSelect:Yi,onKeyDown:function(e,t){if(!ia)return sa.resolveComposition(e),void e._onKeyDown(t);t.which!==Xi.RIGHT&&t.which!==Xi.LEFT||t.preventDefault()},onKeyPress:function(e,t){t.which===Xi.RETURN&&t.preventDefault()},resolveComposition:function(e){if(!ia){var t=ra(aa).stopAndFlushMutations();aa=null,oa=!0;var r=Ji.set(e._latestEditorState,{inCompositionMode:!1});if(e.exitCurrentMode(),t.size){var n=r.getCurrentContent();t.forEach((function(e,t){var o=Qi.decode(t),i=o.blockKey,a=o.decoratorKey,s=o.leafKey,c=r.getBlockTree(i).getIn([a,"leaves",s]),l=c.start,u=c.end,d=r.getSelection().merge({anchorKey:i,focusKey:i,anchorOffset:l,focusOffset:u,isBackward:!1}),p=ta(n,d),f=n.getBlockForKey(i).getInlineStyleAt(l);n=Gi.replaceText(n,d,e,f,p),r=Ji.set(r,{currentContent:n})}));var o=ea(r,Zi(e)).selectionState;e.restoreEditorDOM();var i=na?Ji.forceSelection(r,o):Ji.acceptSelection(r,o);e.update(Ji.push(i,n,"insert-characters"))}else e.update(r)}}},ca=sa,la=vo;function ua(){return ua=la||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ua.apply(this,arguments)}var da=_i,pa=t.react.exports,fa=rn,ma=Wr,ha=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.render=function(){var e=this.props,t=e.block,r=e.children,n=e.contentState,o=e.decorator,i=e.decoratorKey,a=e.direction,s=e.leafSet,c=e.text,l=t.getKey(),u=s.get("leaves"),d=o.getComponentForKey(i),p=o.getPropsForKey(i),f=da.encode(l,parseInt(i,10),0),m=c.slice(u.first().get("start"),u.last().get("end")),h=ma.getHTMLDirIfDifferent(fa.getDirection(m),a);return pa.createElement(d,ua({},p,{contentState:n,decoratedText:m,dir:h,key:f,entityKey:t.getEntityAt(s.get("start")),offsetKey:f}),r)},n}(pa.Component),ga=ha;function _a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function va(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ya=t.react.exports,ba=be,xa=Zo,Sa=Xo.isBrowser("IE <= 11");var wa=function(e){var t,r;function n(t){var r;return va(_a(r=e.call(this,t)||this),"_forceFlag",void 0),va(_a(r),"_node",void 0),r._forceFlag=!1,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.shouldComponentUpdate=function(e){var t=this._node,r=""===e.children;xa(t)||ba(!1);var n=t;return r?!function(e){return Sa?"\n"===e.textContent:"BR"===e.tagName}(n):n.textContent!==e.children},o.componentDidMount=function(){this._forceFlag=!this._forceFlag},o.componentDidUpdate=function(){this._forceFlag=!this._forceFlag},o.render=function(){var e,t=this;return""===this.props.children?this._forceFlag?(e=function(e){return t._node=e},Sa?ya.createElement("span",{key:"A","data-text":"true",ref:e},"\n"):ya.createElement("br",{key:"A","data-text":"true",ref:e})):function(e){return Sa?ya.createElement("span",{key:"B","data-text":"true",ref:e},"\n"):ya.createElement("br",{key:"B","data-text":"true",ref:e})}((function(e){return t._node=e})):ya.createElement("span",{key:this._forceFlag?"A":"B","data-text":"true",ref:function(e){return t._node=e}},this.props.children)},n}(ya.Component),Ea=wa,ka=Zo;var Ca=function(e){return!(!e||!e.ownerDocument)&&(ka(e)&&"BR"===e.nodeName)};var Ma=function(e){var t=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof t.Node?e instanceof t.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))};var Ta=function(e){return Ma(e)&&3==e.nodeType};var Aa=function e(t,r){return!(!t||!r)&&(t===r||!Ta(t)&&(Ta(r)?e(t,r.parentNode):"contains"in t?t.contains(r):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(r))))};var Oa=function(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}},Da=yi,Ia=Aa,Ra=Oa,Ba=Yo,Pa=be,ja=Zo,za=Xo.isBrowser("IE");function Na(e,t){if(!e)return"[empty]";var r=Fa(e,t);return r.nodeType===Node.TEXT_NODE?r.textContent:(ja(r)||Pa(!1),r.outerHTML)}function Fa(e,t){var r=void 0!==t?t(e):[];if(e.nodeType===Node.TEXT_NODE){var n=e.textContent.length;return Ba(e).createTextNode("[text "+n+(r.length?" | "+r.join(", "):"")+"]")}var o=e.cloneNode();1===o.nodeType&&r.length&&o.setAttribute("data-labels",r.join(", "));for(var i=e.childNodes,a=0;a<i.length;a++)o.appendChild(Fa(i[a],t));return o}function Ka(e,t){for(var r=e,n=r;r;){if(ja(r)&&n.hasAttribute("contenteditable"))return Na(r,t);n=r=r.parentNode}return"Could not find contentEditable parent of node"}function La(e){return null===e.nodeValue?e.childNodes.length:e.nodeValue.length}function Ua(e,t,r,n){var o=Ra();if(e.extend&&null!=t&&Ia(o,t)){r>La(t)&&Da.logSelectionStateFailure({anonymizedDom:Ka(t),extraParams:JSON.stringify({offset:r}),selectionState:JSON.stringify(n.toJS())});var i=t===e.focusNode;try{e.rangeCount>0&&e.extend&&e.extend(t,r)}catch(a){throw Da.logSelectionStateFailure({anonymizedDom:Ka(t,(function(t){var r=[];return t===o&&r.push("active element"),t===e.anchorNode&&r.push("selection anchor node"),t===e.focusNode&&r.push("selection focus node"),r})),extraParams:JSON.stringify({activeElementName:o?o.nodeName:null,nodeIsFocus:t===e.focusNode,nodeWasFocus:i,selectionRangeCount:e.rangeCount,selectionAnchorNodeName:e.anchorNode?e.anchorNode.nodeName:null,selectionAnchorOffset:e.anchorOffset,selectionFocusNodeName:e.focusNode?e.focusNode.nodeName:null,selectionFocusOffset:e.focusOffset,message:a?""+a:null,offset:r},null,2),selectionState:JSON.stringify(n.toJS(),null,2)}),a}}else if(t&&e.rangeCount>0){var a=e.getRangeAt(0);a.setEnd(t,r),e.addRange(a.cloneRange())}}function qa(e,t,r,n){var o=Ba(t).createRange();if(r>La(t)&&Da.logSelectionStateFailure({anonymizedDom:Ka(t),extraParams:JSON.stringify({offset:r}),selectionState:JSON.stringify(n.toJS())}),o.setStart(t,r),za)try{e.addRange(o)}catch(e){}else e.addRange(o)}var Ha=function(e,t,r,n,o){var i=Ba(t);if(Ia(i.documentElement,t)){var a=i.defaultView.getSelection(),s=e.getAnchorKey(),c=e.getAnchorOffset(),l=e.getFocusKey(),u=e.getFocusOffset(),d=e.getIsBackward();if(!a.extend&&d){var p=s,f=c;s=l,c=u,l=p,u=f,d=!1}var m=s===r&&n<=c&&o>=c,h=l===r&&n<=u&&o>=u;if(m&&h)return a.removeAllRanges(),qa(a,t,c-n,e),void Ua(a,t,u-n,e);if(d){if(h&&(a.removeAllRanges(),qa(a,t,u-n,e)),m){var g=a.focusNode,_=a.focusOffset;a.removeAllRanges(),qa(a,t,c-n,e),Ua(a,g,_,e)}}else m&&(a.removeAllRanges(),qa(a,t,c-n,e)),h&&Ua(a,t,u-n,e)}},Wa=vo;function Va(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ga=Ea,Qa=t.react.exports,Ja=be,Xa=Ca,Ya=Ha,Za=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return $a(Va(t=e.call.apply(e,[this].concat(n))||this),"leaf",void 0),t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o._setSelection=function(){var e=this.props.selection;if(null!=e&&e.getHasFocus()){var t=this.props,r=t.block,n=t.start,o=t.text,i=r.getKey(),a=n+o.length;if(e.hasEdgeWithin(i,n,a)){var s=this.leaf;s||Ja(!1);var c,l=s.firstChild;l||Ja(!1),l.nodeType===Node.TEXT_NODE?c=l:Xa(l)?c=s:(c=l.firstChild)||Ja(!1),Ya(e,c,i,n,a)}}},o.shouldComponentUpdate=function(e){var t=this.leaf;return t||Ja(!1),t.textContent!==e.text||e.styleSet!==this.props.styleSet||e.forceSelection},o.componentDidUpdate=function(){this._setSelection()},o.componentDidMount=function(){this._setSelection()},o.render=function(){var e=this,t=this.props.block,r=this.props.text;r.endsWith("\n")&&this.props.isLast&&(r+="\n");var n=this.props,o=n.customStyleMap,i=n.customStyleFn,a=n.offsetKey,s=n.styleSet,c=s.reduce((function(e,t){var r={},n=o[t];return void 0!==n&&e.textDecoration!==n.textDecoration&&(r.textDecoration=[e.textDecoration,n.textDecoration].join(" ").trim()),Wa(e,n,r)}),{});if(i){var l=i(s,t);c=Wa(c,l)}return Qa.createElement("span",{"data-offset-key":a,ref:function(t){return e.leaf=t},style:c},Qa.createElement(Ga,null,r))},n}(Qa.Component),es=Za;var ts=ga,rs=es,ns=_i,os=w.exports,is=t.react.exports,as=co;os.List;var ss=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.render=function(){var e=this.props,t=e.block,r=e.contentState,n=e.customStyleFn,o=e.customStyleMap,i=e.decorator,a=e.direction,s=e.forceSelection,c=e.hasSelection,l=e.selection,u=e.tree,d=t.getKey(),p=t.getText(),f=u.size-1,m=this.props.children||u.map((function(e,u){var m=e.get("decoratorKey"),h=e.get("leaves"),g=h.size-1,_=h.map((function(e,r){var i=ns.encode(d,u,r),a=e.get("start"),h=e.get("end");return is.createElement(rs,{key:i,offsetKey:i,block:t,start:a,selection:c?l:null,forceSelection:s,text:p.slice(a,h),styleSet:t.getInlineStyleAt(a),customStyleMap:o,customStyleFn:n,isLast:m===f&&r===g})})).toArray();return m&&i?is.createElement(ts,{block:t,children:_,contentState:r,decorator:i,decoratorKey:m,direction:a,leafSet:e,text:p,key:u}):_})).toArray();return is.createElement("div",{"data-offset-key":ns.encode(d,0,0),className:as({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":"LTR"===a,"public/DraftStyleDefault/rtl":"RTL"===a})},m)},n}(is.Component),cs=ss;function ls(e,t){return!!t&&(e===t.documentElement||e===t.body)}var us={getTop:function(e){var t=e.ownerDocument;return ls(e,t)?t.body.scrollTop||t.documentElement.scrollTop:e.scrollTop},setTop:function(e,t){var r=e.ownerDocument;ls(e,r)?r.body.scrollTop=r.documentElement.scrollTop=t:e.scrollTop=t},getLeft:function(e){var t=e.ownerDocument;return ls(e,t)?t.body.scrollLeft||t.documentElement.scrollLeft:e.scrollLeft},setLeft:function(e,t){var r=e.ownerDocument;ls(e,r)?r.body.scrollLeft=r.documentElement.scrollLeft=t:e.scrollLeft=t}},ds=/-(.)/g;var ps=/([A-Z])/g;var fs=function(e){return e.replace(ds,(function(e,t){return t.toUpperCase()}))},ms=function(e){return e.replace(ps,"-$1").toLowerCase()};function hs(e){return null==e?e:String(e)}var gs=function(e,t){var r;if(window.getComputedStyle&&(r=window.getComputedStyle(e,null)))return hs(r.getPropertyValue(ms(t)));if(document.defaultView&&document.defaultView.getComputedStyle){if(r=document.defaultView.getComputedStyle(e,null))return hs(r.getPropertyValue(ms(t)));if("display"===t)return"none"}return e.currentStyle?hs("float"===t?e.currentStyle.cssFloat||e.currentStyle.styleFloat:e.currentStyle[fs(t)]):hs(e.style&&e.style[fs(t)])};function _s(e,t){var r=vs.get(e,t);return"auto"===r||"scroll"===r}var vs={get:gs,getScrollParent:function(e){if(!e)return null;for(var t=e.ownerDocument;e&&e!==t.body;){if(_s(e,"overflow")||_s(e,"overflowY")||_s(e,"overflowX"))return e;e=e.parentNode}return t.defaultView||t.parentWindow}},ys=vs,bs=Aa;var xs=function(e){var t=e.ownerDocument.documentElement;if(!("getBoundingClientRect"in e)||!bs(t,e))return{left:0,right:0,top:0,bottom:0};var r=e.getBoundingClientRect();return{left:Math.round(r.left)-t.clientLeft,right:Math.round(r.right)-t.clientLeft,top:Math.round(r.top)-t.clientTop,bottom:Math.round(r.bottom)-t.clientTop}};var Ss=function(e){var t=xs(e);return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}},ws="undefined"!=typeof navigator&&navigator.userAgent.indexOf("AppleWebKit")>-1;var Es=function(e){return(e=e||document).scrollingElement?e.scrollingElement:ws||"CSS1Compat"!==e.compatMode?e.body:e.documentElement},ks=function(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}};var Cs=function(e){var t=Es(e.ownerDocument||e.document);e.Window&&e instanceof e.Window&&(e=t);var r=ks(e),n=e===t?e.ownerDocument.documentElement:e,o=e.scrollWidth-n.clientWidth,i=e.scrollHeight-n.clientHeight;return r.x=Math.max(0,Math.min(r.x,o)),r.y=Math.max(0,Math.min(r.y,i)),r};function Ms(){var e;return document.documentElement&&(e=document.documentElement.clientWidth),!e&&document.body&&(e=document.body.clientWidth),e||0}function Ts(){var e;return document.documentElement&&(e=document.documentElement.clientHeight),!e&&document.body&&(e=document.body.clientHeight),e||0}function As(){return{width:window.innerWidth||Ms(),height:window.innerHeight||Ts()}}As.withoutScrollbars=function(){return{width:Ms(),height:Ts()}};var Os=As,Ds=vo;function Is(){return Is=Ds||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Is.apply(this,arguments)}function Rs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ps(e,t,r[t])}))}return e}function Ps(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var js=cs,zs=_i,Ns=t.react.exports,Fs=us,Ks=ys,Ls=Ss,Us=Cs,qs=Os,Hs=be,Ws=bi;w.exports.List;var Vs=function(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t},$s=function(e,t){var r=t.get(e.getType())||t.get("unstyled"),n=r.wrapper;return{Element:r.element||t.get("unstyled").element,wrapperTemplate:n}},Gs=function(e,t){var r=t(e);return r?{CustomComponent:r.component,customProps:r.props,customEditable:r.editable}:{}},Qs=function(e,t,r,n,o,i){var a={"data-block":!0,"data-editor":t,"data-offset-key":r,key:e.getKey(),ref:i},s=n(e);return s&&(a.className=s),void 0!==o.customEditable&&(a=Bs({},a,{contentEditable:o.customEditable,suppressContentEditableWarning:!0})),a},Js=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ps(Rs(t=e.call.apply(e,[this].concat(n))||this),"wrapperRef",Ns.createRef()),t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.shouldComponentUpdate=function(e){var t=this.props,r=t.block,n=t.direction,o=t.tree,i=!r.getChildKeys().isEmpty(),a=r!==e.block||o!==e.tree||n!==e.direction||Vs(e.selection,e.block.getKey())&&e.forceSelection;return i||a},o.componentDidMount=function(){var e=this.props.selection,t=e.getEndKey();if(e.getHasFocus()&&t===this.props.block.getKey()){var r=this.wrapperRef.current;if(r){var n,o=Ks.getScrollParent(r),i=Us(o);if(o===window){var a=Ls(r);(n=a.y+a.height-qs().height)>0&&window.scrollTo(i.x,i.y+n+10)}else{Ws(r)||Hs(!1);var s=r;(n=s.offsetHeight+s.offsetTop-(o.offsetHeight+i.y))>0&&Fs.setTop(o,Fs.getTop(o)+n+10)}}}},o.render=function(){var e=this,t=this.props,r=t.block,o=t.blockRenderMap,i=t.blockRendererFn,a=t.blockStyleFn,s=t.contentState,c=t.decorator,l=t.editorKey,u=t.editorState,d=t.customStyleFn,p=t.customStyleMap,f=t.direction,m=t.forceSelection,h=t.selection,g=t.tree,_=null;r.children.size&&(_=r.children.reduce((function(t,r){var c=zs.encode(r,0,0),d=s.getBlockForKey(r),p=Gs(d,i),f=p.CustomComponent||n,m=$s(d,o),h=m.Element,g=m.wrapperTemplate,_=Qs(d,l,c,a,p,null),v=Bs({},e.props,{tree:u.getBlockTree(r),blockProps:p.customProps,offsetKey:c,block:d});return t.push(Ns.createElement(h,_,Ns.createElement(f,v))),!g||function(e,t){var r=e.getNextSiblingKey();return!!r&&t.getBlockForKey(r).getType()===e.getType()}(d,s)||function(e,t,r){var n=[],o=!0,i=!1,a=void 0;try{for(var s,c=r.reverse()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value;if(l.type!==t)break;n.push(l)}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}r.splice(r.indexOf(n[0]),n.length+1);var u=n.reverse(),d=u[0].key;r.push(Ns.cloneElement(e,{key:"".concat(d,"-wrap"),"data-offset-key":zs.encode(d,0,0)},u))}(g,h,t),t}),[]));var v=r.getKey(),y=zs.encode(v,0,0),b=Gs(r,i),x=b.CustomComponent,S=null!=x?Ns.createElement(x,Is({},this.props,{tree:u.getBlockTree(v),blockProps:b.customProps,offsetKey:y,block:r})):Ns.createElement(js,{block:r,children:_,contentState:s,customStyleFn:d,customStyleMap:p,decorator:c,direction:f,forceSelection:m,hasSelection:Vs(h,v),selection:h,tree:g});if(r.getParentKey())return S;var w=$s(r,o).Element,E=Qs(r,l,y,a,b,this.wrapperRef);return Ns.createElement(w,E,S)},n}(Ns.Component),Xs=vo;function Ys(){return Ys=Xs||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ys.apply(this,arguments)}var Zs=Js,ec=_i,tc=t.react.exports,rc=un,nc=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.shouldComponentUpdate=function(e){var t=this.props.editorState,r=e.editorState;if(t.getDirectionMap()!==r.getDirectionMap())return!0;if(t.getSelection().getHasFocus()!==r.getSelection().getHasFocus())return!0;var n=r.getNativelyRenderedContent(),o=t.isInCompositionMode(),i=r.isInCompositionMode();if(t===r||null!==n&&r.getCurrentContent()===n||o&&i)return!1;var a=t.getCurrentContent(),s=r.getCurrentContent(),c=t.getDecorator(),l=r.getDecorator();return o!==i||a!==s||c!==l||r.mustForceSelection()},o.render=function(){for(var e=this.props,t=e.blockRenderMap,r=e.blockRendererFn,n=e.blockStyleFn,o=e.customStyleMap,i=e.customStyleFn,a=e.editorState,s=e.editorKey,c=e.textDirectionality,l=a.getCurrentContent(),u=a.getSelection(),d=a.mustForceSelection(),p=a.getDecorator(),f=rc(a.getDirectionMap()),m=[],h=l.getBlocksAsArray()[0];h;){var g=h.getKey(),_={blockRenderMap:t,blockRendererFn:r,blockStyleFn:n,contentState:l,customStyleFn:i,customStyleMap:o,decorator:p,editorKey:s,editorState:a,forceSelection:d,selection:u,block:h,direction:c||f.get(g),tree:a.getBlockTree(g)},v=(t.get(h.getType())||t.get("unstyled")).wrapper;m.push({block:tc.createElement(Zs,Ys({key:g},_)),wrapperTemplate:v,key:g,offsetKey:ec.encode(g,0,0)});var y=h.getNextSiblingKey();h=y?l.getBlockForKey(y):null}for(var b=[],x=0;x<m.length;){var S=m[x];if(S.wrapperTemplate){var w=[];do{w.push(m[x].block),x++}while(x<m.length&&m[x].wrapperTemplate===S.wrapperTemplate);var E=tc.cloneElement(S.wrapperTemplate,{key:S.key+"-wrap","data-offset-key":S.offsetKey},w);b.push(E)}else b.push(S.block),x++}return tc.createElement("div",{"data-contents":"true"},b)},n}(tc.Component),oc=nc,ic=vo;function ac(){return ac=ic||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ac.apply(this,arguments)}function sc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lc=es,uc=_i,dc=t.react.exports,pc=us,fc=ys,mc=rn,hc=Wr,gc=co,_c=Ss,vc=Cs,yc=Os,bc=be,xc=bi,Sc=un,wc=function(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t},Ec=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return cc(sc(t=e.call.apply(e,[this].concat(n))||this),"_node",void 0),t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.shouldComponentUpdate=function(e){return this.props.block!==e.block||this.props.tree!==e.tree||this.props.direction!==e.direction||wc(e.selection,e.block.getKey())&&e.forceSelection},o.componentDidMount=function(){if(!this.props.preventScroll){var e=this.props.selection,t=e.getEndKey();if(e.getHasFocus()&&t===this.props.block.getKey()){var r=this._node;if(null!=r){var n,o=fc.getScrollParent(r),i=vc(o);if(o===window){var a=_c(r);(n=a.y+a.height-yc().height)>0&&window.scrollTo(i.x,i.y+n+10)}else{xc(r)||bc(!1),(n=r.offsetHeight+r.offsetTop-(o.offsetTop+o.offsetHeight+i.y))>0&&pc.setTop(o,pc.getTop(o)+n+10)}}}}},o._renderChildren=function(){var e=this,t=this.props.block,r=t.getKey(),n=t.getText(),o=this.props.tree.size-1,i=wc(this.props.selection,r);return this.props.tree.map((function(a,s){var c=a.get("leaves");if(0===c.size)return null;var l=c.size-1,u=c.map((function(a,c){var u=uc.encode(r,s,c),d=a.get("start"),p=a.get("end");return dc.createElement(lc,{key:u,offsetKey:u,block:t,start:d,selection:i?e.props.selection:null,forceSelection:e.props.forceSelection,text:n.slice(d,p),styleSet:t.getInlineStyleAt(d),customStyleMap:e.props.customStyleMap,customStyleFn:e.props.customStyleFn,isLast:s===o&&c===l})})).toArray(),d=a.get("decoratorKey");if(null==d)return u;if(!e.props.decorator)return u;var p=Sc(e.props.decorator),f=p.getComponentForKey(d);if(!f)return u;var m=p.getPropsForKey(d),h=uc.encode(r,s,0),g=c.first().get("start"),_=c.last().get("end"),v=n.slice(g,_),y=t.getEntityAt(a.get("start")),b=hc.getHTMLDirIfDifferent(mc.getDirection(v),e.props.direction),x={contentState:e.props.contentState,decoratedText:v,dir:b,start:g,end:_,blockKey:r,entityKey:y,offsetKey:h};return dc.createElement(f,ac({},m,x,{key:h}),u)})).toArray()},o.render=function(){var e=this,t=this.props,r=t.direction,n=t.offsetKey,o=gc({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":"LTR"===r,"public/DraftStyleDefault/rtl":"RTL"===r});return dc.createElement("div",{"data-offset-key":n,className:o,ref:function(t){return e._node=t}},this._renderChildren())},n}(dc.Component),kc=Ec;var Cc=function(e){var t=e||"",r=arguments.length;if(r>1)for(var n=1;n<r;n++){var o=arguments[n];o&&(t=(t?t+" ":"")+o)}return t},Mc=vo;function Tc(){return Tc=Mc||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tc.apply(this,arguments)}function Ac(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Oc(e,t,r[t])}))}return e}function Oc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dc=kc,Ic=_i,Rc=t.react.exports,Bc=co,Pc=Cc,jc=un,zc=function(e,t,r,n){return Bc({"public/DraftStyleDefault/unorderedListItem":"unordered-list-item"===e,"public/DraftStyleDefault/orderedListItem":"ordered-list-item"===e,"public/DraftStyleDefault/reset":r,"public/DraftStyleDefault/depth0":0===t,"public/DraftStyleDefault/depth1":1===t,"public/DraftStyleDefault/depth2":2===t,"public/DraftStyleDefault/depth3":3===t,"public/DraftStyleDefault/depth4":t>=4,"public/DraftStyleDefault/listLTR":"LTR"===n,"public/DraftStyleDefault/listRTL":"RTL"===n})},Nc=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.shouldComponentUpdate=function(e){var t=this.props.editorState,r=e.editorState;if(t.getDirectionMap()!==r.getDirectionMap())return!0;if(t.getSelection().getHasFocus()!==r.getSelection().getHasFocus())return!0;var n=r.getNativelyRenderedContent(),o=t.isInCompositionMode(),i=r.isInCompositionMode();if(t===r||null!==n&&r.getCurrentContent()===n||o&&i)return!1;var a=t.getCurrentContent(),s=r.getCurrentContent(),c=t.getDecorator(),l=r.getDecorator();return o!==i||a!==s||c!==l||r.mustForceSelection()},o.render=function(){for(var e=this.props,t=e.blockRenderMap,r=e.blockRendererFn,n=e.blockStyleFn,o=e.customStyleMap,i=e.customStyleFn,a=e.editorState,s=e.editorKey,c=e.preventScroll,l=e.textDirectionality,u=a.getCurrentContent(),d=a.getSelection(),p=a.mustForceSelection(),f=a.getDecorator(),m=jc(a.getDirectionMap()),h=u.getBlocksAsArray(),g=[],_=null,v=null,y=0;y<h.length;y++){var b=h[y],x=b.getKey(),S=b.getType(),w=r(b),E=void 0,k=void 0,C=void 0;w&&(E=w.component,k=w.props,C=w.editable);var M=l||m.get(x),T=Ic.encode(x,0,0),A={contentState:u,block:b,blockProps:k,blockStyleFn:n,customStyleMap:o,customStyleFn:i,decorator:f,direction:M,forceSelection:p,offsetKey:T,preventScroll:c,selection:d,tree:a.getBlockTree(x)},O=t.get(S)||t.get("unstyled"),D=O.wrapper,I=O.element||t.get("unstyled").element,R=b.getDepth(),B="";if(n&&(B=n(b)),"li"===I)B=Pc(B,zc(S,R,v!==D||null===_||R>_,M));var P=E||Dc,j={className:B,"data-block":!0,"data-editor":s,"data-offset-key":T,key:x};void 0!==C&&(j=Ac({},j,{contentEditable:C,suppressContentEditableWarning:!0}));var z=Rc.createElement(I,j,Rc.createElement(P,Tc({},A,{key:x})));g.push({block:z,wrapperTemplate:D,key:x,offsetKey:T}),_=D?b.getDepth():null,v=D}for(var N=[],F=0;F<g.length;){var K=g[F];if(K.wrapperTemplate){var L=[];do{L.push(g[F].block),F++}while(F<g.length&&g[F].wrapperTemplate===K.wrapperTemplate);var U=Rc.cloneElement(K.wrapperTemplate,{key:K.key+"-wrap","data-offset-key":K.offsetKey},L);N.push(U)}else N.push(K.block),F++}return Rc.createElement("div",{"data-contents":"true"},N)},n}(Rc.Component),Fc=Nc,Kc=mr("draft_tree_data_support")?oc:Fc,Lc={isImage:function(e){return"image"===Uc(e)[0]},isJpeg:function(e){var t=Uc(e);return Lc.isImage(e)&&("jpeg"===t[1]||"pjpeg"===t[1])}};function Uc(e){return e.split("/")}var qc=Lc,Hc=be;var Wc=function(e){return function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}(e)?Array.isArray(e)?e.slice():function(e){var t=e.length;if((Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e)&&Hc(!1),"number"!=typeof t&&Hc(!1),0===t||t-1 in e||Hc(!1),"function"==typeof e.callee&&Hc(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var r=Array(t),n=0;n<t;n++)r[n]=e[n];return r}(e):[e]};function Vc(e){return function(){return e}}var $c=function(){};$c.thatReturns=Vc,$c.thatReturnsFalse=Vc(!1),$c.thatReturnsTrue=Vc(!0),$c.thatReturnsNull=Vc(null),$c.thatReturnsThis=function(){return this},$c.thatReturnsArgument=function(e){return e};var Gc=$c,Qc=qc,Jc=Wc,Xc=Gc,Yc=new RegExp("\r\n","g"),Zc={"text/rtf":1,"text/html":1};function el(e){if("file"==e.kind)return e.getAsFile()}var tl=function(){function e(e){this.data=e,this.types=e.types?Jc(e.types):[]}var t=e.prototype;return t.isRichText=function(){return!(!this.getHTML()||!this.getText())||!this.isImage()&&this.types.some((function(e){return Zc[e]}))},t.getText=function(){var e;return this.data.getData&&(this.types.length?-1!=this.types.indexOf("text/plain")&&(e=this.data.getData("text/plain")):e=this.data.getData("Text")),e?e.replace(Yc,"\n"):null},t.getHTML=function(){if(this.data.getData){if(!this.types.length)return this.data.getData("Text");if(-1!=this.types.indexOf("text/html"))return this.data.getData("text/html")}},t.isLink=function(){return this.types.some((function(e){return-1!=e.indexOf("Url")||-1!=e.indexOf("text/uri-list")||e.indexOf("text/x-moz-url")}))},t.getLink=function(){return this.data.getData?-1!=this.types.indexOf("text/x-moz-url")?this.data.getData("text/x-moz-url").split("\n")[0]:-1!=this.types.indexOf("text/uri-list")?this.data.getData("text/uri-list"):this.data.getData("url"):null},t.isImage=function(){var e=this.types.some((function(e){return-1!=e.indexOf("application/x-moz-file")}));if(e)return!0;for(var t=this.getFiles(),r=0;r<t.length;r++){var n=t[r].type;if(!Qc.isImage(n))return!1}return!0},t.getCount=function(){return this.data.hasOwnProperty("items")?this.data.items.length:this.data.hasOwnProperty("mozItemCount")?this.data.mozItemCount:this.data.files?this.data.files.length:null},t.getFiles=function(){return this.data.items?Array.prototype.slice.call(this.data.items).map(el).filter(Xc.thatReturnsArgument):this.data.files?Array.prototype.slice.call(this.data.files):[]},t.hasFiles=function(){return this.getFiles().length>0},e}(),rl=tl,nl=be,ol=/\.textClipping$/,il={"text/plain":!0,"text/html":!0,"text/rtf":!0};var al=function(e,t){var r=0,n=[];e.forEach((function(o){!function(e,t){if(!l.commonjsGlobal.FileReader||e.type&&!(e.type in il))return void t("");if(""===e.type){var r="";return ol.test(e.name)&&(r=e.name.replace(ol,"")),void t(r)}var n=new FileReader;n.onload=function(){var e=n.result;"string"!=typeof e&&nl(!1),t(e)},n.onerror=function(){t("")},n.readAsText(e)}(o,(function(o){r++,o&&n.push(o.slice(0,5e3)),r==e.length&&t(n.join("\r"))}))}))};var sl=function(e){return"handled"===e||!0===e},cl=rl,ll=Ft,ul=Rn,dl=oi,pl=Yo,fl=al,ml=Ci,hl=ii,gl=sl,_l=un;function vl(e){e._internalDrag=!1;var t=e.editorContainer;if(t){var r=new MouseEvent("mouseup",{view:hl(t),bubbles:!0,cancelable:!0});t.dispatchEvent(r)}}function yl(e,t,r){var n=ll.insertText(e.getCurrentContent(),t,r,e.getCurrentInlineStyle());return ul.push(e,n,"insert-fragment")}var bl={onDragEnd:function(e){e.exitCurrentMode(),vl(e)},onDrop:function(e,t){var r=new cl(t.nativeEvent.dataTransfer),n=e._latestEditorState,o=function(e,t){var r=null,n=null,o=pl(e.currentTarget);if("function"==typeof o.caretRangeFromPoint){var i=o.caretRangeFromPoint(e.x,e.y);r=i.startContainer,n=i.startOffset}else{if(!e.rangeParent)return null;r=e.rangeParent,n=e.rangeOffset}r=_l(r),n=_l(n);var a=_l(dl(r));return ml(t,a,n,a,n)}(t.nativeEvent,n);if(t.preventDefault(),e._dragCount=0,e.exitCurrentMode(),null!=o){var i=r.getFiles();if(i.length>0){if(e.props.handleDroppedFiles&&gl(e.props.handleDroppedFiles(o,i)))return;fl(i,(function(t){t&&e.update(yl(n,o,t))}))}else{var a=e._internalDrag?"internal":"external";e.props.handleDrop&&gl(e.props.handleDrop(o,r,a))||(e._internalDrag?e.update(function(e,t){var r=ll.moveText(e.getCurrentContent(),e.getSelection(),t);return ul.push(e,r,"insert-fragment")}(n,o)):e.update(yl(n,o,r.getText()))),vl(e)}}}};var xl=function(e){var t=e.getSelection(),r=t.getAnchorKey(),n=e.getBlockTree(r),o=t.getStartOffset(),i=!1;return n.some((function(e){return o===e.get("start")?(i=!0,!0):o<e.get("end")&&e.get("leaves").some((function(e){var t=e.get("start");return o===t&&(i=!0,!0)}))})),i};!function(e,t){if(!e.setImmediate){var r,n,o,i,a,s=1,c={},l=!1,u=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){process.nextTick((function(){f(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){f(e.data)},r=function(e){o.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(n=u.documentElement,r=function(e){var t=u.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):r=function(e){setTimeout(f,0,e)}:(i="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&f(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(i+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return c[s]=o,r(s),s++},d.clearImmediate=p}function p(e){delete c[e]}function f(e){if(l)setTimeout(f,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?(l.commonjsGlobal,l.commonjsGlobal):self);var Sl=l.commonjsGlobal.setImmediate,wl=Ft,El=Rn,kl=Vi,Cl=sl,Ml=xl,Tl=un,Al=Sl,Ol=Xo.isBrowser("Firefox");function Dl(e,t,r,n,o){var i=wl.replaceText(e.getCurrentContent(),e.getSelection(),t,r,n);return El.push(e,i,"insert-characters",o)}var Il=function(e,t){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var r=e._latestEditorState,n=t.data;if(n)if(e.props.handleBeforeInput&&Cl(e.props.handleBeforeInput(n,r,t.timeStamp)))t.preventDefault();else{var o=r.getSelection(),i=o.getStartOffset(),a=o.getAnchorKey();if(!o.isCollapsed())return t.preventDefault(),void e.update(Dl(r,n,r.getCurrentInlineStyle(),kl(r.getCurrentContent(),r.getSelection()),!0));var s,c=Dl(r,n,r.getCurrentInlineStyle(),kl(r.getCurrentContent(),r.getSelection()),!1),l=!1;if(l||(l=Ml(e._latestCommittedEditorState)),!l){var u=r.getBlockTree(a),d=c.getBlockTree(a);l=u.size!==d.size||u.zip(d).some((function(e){var t=e[0],r=e[1],o=t.get("start"),a=o+(o>=i?n.length:0),s=t.get("end"),c=s+(s>=i?n.length:0),l=r.get("start"),u=r.get("end"),d=r.get("decoratorKey");return t.get("decoratorKey")!==d||t.get("leaves").size!==r.get("leaves").size||a!==l||c!==u||null!=d&&u-l!=s-o}))}if(l||(s=n,l=Ol&&("'"==s||"/"==s)),l||(l=Tl(c.getDirectionMap()).get(a)!==Tl(r.getDirectionMap()).get(a)),l)return t.preventDefault(),c=El.set(c,{forceSelection:!0}),void e.update(c);c=El.set(c,{nativelyRenderedContent:c.getCurrentContent()}),e._pendingStateFromBeforeInput=c,Al((function(){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0)}))}},Rl=Rn,Bl=Aa,Pl=Oa;var jl=function(e,t){var r=t.currentTarget.ownerDocument;if(!Boolean(e.props.preserveSelectionOnBlur)&&Pl(r)===r.body){var n=r.defaultView.getSelection(),o=e.editor;1===n.rangeCount&&Bl(o,n.anchorNode)&&Bl(o,n.focusNode)&&n.removeAllRanges()}var i=e._latestEditorState,a=i.getSelection();if(a.getHasFocus()){var s=a.set("hasFocus",!1);e.props.onBlur&&e.props.onBlur(t),e.update(Rl.acceptSelection(i,s))}},zl=Rn;var Nl=function(e,t){e.setMode("composite"),e.update(zl.set(e._latestEditorState,{inCompositionMode:!0})),e._onCompositionStart(t)},Fl=Le;var Kl=function(e){var t=e.getSelection();return t.isCollapsed()?null:Fl(e.getCurrentContent(),t)},Ll=Kl;var Ul=function(e,t){e._latestEditorState.getSelection().isCollapsed()?t.preventDefault():e.setClipboard(Ll(e._latestEditorState))};var ql=Ft,Hl=Rn,Wl=ys,Vl=Kl,$l=Cs,Gl=function(e){if(!e||!("ownerDocument"in e))return!1;if("ownerDocument"in e){var t=e;if(!t.ownerDocument.defaultView)return t instanceof Node;if(t instanceof t.ownerDocument.defaultView.Node)return!0}return!1};var Ql=function(e,t){var r,n=e._latestEditorState,o=n.getSelection(),i=t.target;if(o.isCollapsed())t.preventDefault();else{if(Gl(i)){var a=i;r=$l(Wl.getScrollParent(a))}var s=Vl(n);e.setClipboard(s),e.setMode("cut"),setTimeout((function(){e.restoreEditorDOM(r),e.exitCurrentMode(),e.update(function(e){var t=ql.removeRange(e.getCurrentContent(),e.getSelection(),"forward");return Hl.push(e,t,"remove-range")}(n))}),0)}};var Jl=function(e,t){e.setMode("drag"),t.preventDefault()};var Xl=function(e){e._internalDrag=!0,e.setMode("drag")},Yl=Rn,Zl=Xo;var eu=function(e,t){var r=e._latestEditorState,n=r.getSelection();if(!n.getHasFocus()){var o=n.set("hasFocus",!0);e.props.onFocus&&e.props.onFocus(t),Zl.isBrowser("Chrome < 60.0.3081.0")?e.update(Yl.forceSelection(r,o)):e.update(Yl.acceptSelection(r,o))}},tu=be,ru=/[\uD800-\uDFFF]/;function nu(e){return 55296<=e&&e<=57343}function ou(e){return ru.test(e)}function iu(e,t){return 1+nu(e.charCodeAt(t))}function au(e,t,r){if(t=t||0,r=void 0===r?1/0:r||0,!ou(e))return e.substr(t,r);var n=e.length;if(n<=0||t>n||r<=0)return"";var o=0;if(t>0){for(;t>0&&o<n;t--)o+=iu(e,o);if(o>=n)return""}else if(t<0){for(o=n;t<0&&0<o;t++)o-=iu(e,o-1);o<0&&(o=0)}var i=n;if(r<n)for(i=o;r>0&&i<n;r--)i+=iu(e,i);return e.substring(o,i)}var su={getCodePoints:function(e){for(var t=[],r=0;r<e.length;r+=iu(e,r))t.push(e.codePointAt(r));return t},getUTF16Length:iu,hasSurrogateUnit:ou,isCodeUnitInSurrogateRange:nu,isSurrogatePair:function(e,t){if(0<=t&&t<e.length||tu(!1),t+1===e.length)return!1;var r=e.charCodeAt(t),n=e.charCodeAt(t+1);return 55296<=r&&r<=56319&&56320<=n&&n<=57343},strlen:function(e){if(!ou(e))return e.length;for(var t=0,r=0;r<e.length;r+=iu(e,r))t++;return t},substring:function(e,t,r){(t=t||0)<0&&(t=0),(r=void 0===r?1/0:r||0)<0&&(r=0);var n=Math.abs(r-t);return au(e,t=t<r?t:r,n)},substr:au};var cu=function(e,t){var r=e.getSelection(),n=e.getCurrentContent(),o=r.getStartKey(),i=r.getStartOffset(),a=o,s=0;if(t>i){var c=n.getKeyBefore(o);if(null==c)a=o;else a=c,s=n.getBlockForKey(c).getText().length}else s=i-t;return r.merge({focusKey:a,focusOffset:s,isBackward:!0})},lu=Ft,uu=mr("draft_tree_data_support");var du=function(e,t,r){var n=e.getSelection(),o=e.getCurrentContent(),i=n,a=n.getAnchorKey(),s=n.getFocusKey(),c=o.getBlockForKey(a);if(uu&&"forward"===r&&a!==s)return o;if(n.isCollapsed()){if("forward"===r){if(e.isSelectionAtEndOfContent())return o;if(uu)if(n.getAnchorOffset()===o.getBlockForKey(a).getLength()){var l=o.getBlockForKey(c.nextSibling);if(!l||0===l.getLength())return o}}else if(e.isSelectionAtStartOfContent())return o;if((i=t(e))===n)return o}return lu.removeRange(o,i,r)},pu=Rn,fu=su,mu=cu,hu=du;var gu=function(e){var t=hu(e,(function(e){var t=e.getSelection(),r=e.getCurrentContent(),n=t.getAnchorKey(),o=t.getAnchorOffset(),i=r.getBlockForKey(n).getText()[o-1];return mu(e,i?fu.getUTF16Length(i,0):1)}),"backward");if(t===e.getCurrentContent())return e;var r=e.getSelection();return pu.push(e,t.set("selectionBefore",r),r.isCollapsed()?"backspace-character":"remove-range")},_u=Ft,vu=_i,yu=Rn,bu=qi.notEmptyKey,xu=oi,Su=gu,wu=un,Eu=Xo.isEngine("Gecko");var ku=function(e,t){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var r=e.editor.ownerDocument.defaultView.getSelection(),n=r.anchorNode,o=r.isCollapsed,i=(null==n?void 0:n.nodeType)!==Node.TEXT_NODE&&(null==n?void 0:n.nodeType)!==Node.ELEMENT_NODE;if(null!=n&&!i){if(n.nodeType===Node.TEXT_NODE&&(null!==n.previousSibling||null!==n.nextSibling)){var a=n.parentNode;if(null==a)return;n.nodeValue=a.textContent;for(var s=a.firstChild;null!=s;s=s.nextSibling)s!==n&&a.removeChild(s)}var c=n.textContent,l=e._latestEditorState,u=wu(xu(n)),d=vu.decode(u),p=d.blockKey,f=d.decoratorKey,m=d.leafKey,h=l.getBlockTree(p).getIn([f,"leaves",m]),g=h.start,_=h.end,v=l.getCurrentContent(),y=v.getBlockForKey(p),b=y.getText().slice(g,_);if(c.endsWith("\n\n")&&(c=c.slice(0,-1)),c!==b){var x,S,w,E,k=l.getSelection(),C=k.merge({anchorOffset:g,focusOffset:_,isBackward:!1}),M=y.getEntityAt(g),T=bu(M)?v.getEntity(M):null,A="MUTABLE"===(null!=T?T.getMutability():null),O=A?"spellcheck-change":"apply-entity",D=_u.replaceText(v,C,c,y.getInlineStyleAt(g),A?y.getEntityAt(g):null);if(Eu)x=r.anchorOffset,S=r.focusOffset,E=(w=g+Math.min(x,S))+Math.abs(x-S),x=w,S=E;else{var I=c.length-b.length;w=k.getStartOffset(),E=k.getEndOffset(),x=o?E+I:w,S=E+I}var R=D.merge({selectionBefore:v.getSelectionAfter(),selectionAfter:k.merge({anchorOffset:x,focusOffset:S})});e.update(yu.push(l,R,O))}else{var B=t.nativeEvent.inputType;if(B){var P=function(e,t){return"deleteContentBackward"===e?Su(t):t}(B,l);if(P!==l)return e.restoreEditorDOM(),void e.update(P)}}}},Cu=vi;var Mu=function(e){return e.which===Cu.RETURN&&(e.getModifierState("Shift")||e.getModifierState("Alt")||e.getModifierState("Control"))},Tu=Xo.isPlatform("Mac OS X"),Au={isCtrlKeyCommand:function(e){return!!e.ctrlKey&&!e.altKey},isOptionKeyCommand:function(e){return Tu&&e.altKey},usesMacOSHeuristics:function(){return Tu},hasCommandModifier:function(e){return Tu?!!e.metaKey&&!e.altKey:Au.isCtrlKeyCommand(e)},isSoftNewlineEvent:Mu},Ou=Au,Du=Ft,Iu=Rn,Ru=Le,Bu=un,Pu=null,ju={cut:function(e){var t=e.getCurrentContent(),r=e.getSelection(),n=null;if(r.isCollapsed()){var o=r.getAnchorKey(),i=t.getBlockForKey(o).getLength();if(i===r.getAnchorOffset()){var a=t.getKeyAfter(o);if(null==a)return e;n=r.set("focusKey",a).set("focusOffset",0)}else n=r.set("focusOffset",i)}else n=r;n=Bu(n),Pu=Ru(t,n);var s=Du.removeRange(t,n,"forward");return s===t?e:Iu.push(e,s,"remove-range")},paste:function(e){if(!Pu)return e;var t=Du.replaceWithFragment(e.getCurrentContent(),e.getSelection(),Pu);return Iu.push(e,t,"insert-fragment")}},zu=be;var Nu=Xo.isBrowser("Chrome")?function(e){for(var t=e.cloneRange(),r=[],n=e.endContainer;null!=n;n=n.parentNode){var o=n===e.commonAncestorContainer;o?t.setStart(e.startContainer,e.startOffset):t.setStart(t.endContainer,0);var i,a=Array.from(t.getClientRects());if(r.push(a),o)return r.reverse(),(i=[]).concat.apply(i,r);t.setEndBefore(n)}zu(!1)}:function(e){return Array.from(e.getClientRects())},Fu=su,Ku=Yo,Lu=Nu,Uu=be;function qu(e,t){for(var r=1/0,n=1/0,o=-1/0,i=-1/0,a=0;a<e.length;a++){var s=e[a];0!==s.width&&1!==s.width&&(r=Math.min(r,s.top),n=Math.min(n,s.bottom),o=Math.max(o,s.top),i=Math.max(i,s.bottom))}return o<=n&&o-r<t&&i-n<t}function Hu(e){switch(e.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return e.length;default:return e.childNodes.length}}var Wu=Rn,Vu=function(e){e.collapsed||Uu(!1);var t=(e=e.cloneRange()).startContainer;1!==t.nodeType&&(t=t.parentNode);var r=function(e){var t=getComputedStyle(e),r=Ku(e),n=r.createElement("div");n.style.fontFamily=t.fontFamily,n.style.fontSize=t.fontSize,n.style.fontStyle=t.fontStyle,n.style.fontWeight=t.fontWeight,n.style.lineHeight=t.lineHeight,n.style.position="absolute",n.textContent="M";var o=r.body;o||Uu(!1),o.appendChild(n);var i=n.getBoundingClientRect();return o.removeChild(n),i.height}(t),n=e.endContainer,o=e.endOffset;for(e.setStart(e.startContainer,0);qu(Lu(e),r)&&(n=e.startContainer,o=e.startOffset,n.parentNode||Uu(!1),e.setStartBefore(n),1!==n.nodeType||"inline"===getComputedStyle(n).display););for(var i=n,a=o-1;;){for(var s=i.nodeValue,c=a;c>=0;c--)if(!(null!=s&&c>0&&Fu.isSurrogatePair(s,c-1))){if(e.setStart(i,c),!qu(Lu(e),r))break;n=i,o=c}if(-1===c||0===i.childNodes.length)break;a=Hu(i=i.childNodes[c])}return e.setStart(n,o),e},$u=Pi,Gu=cu,Qu=du;var Ju=function(e,t){var r=Qu(e,(function(e){var r=e.getSelection();if(r.isCollapsed()&&0===r.getAnchorOffset())return Gu(e,1);var n=t.currentTarget.ownerDocument.defaultView.getSelection().getRangeAt(0);return n=Vu(n),$u(e,null,n.endContainer,n.endOffset,n.startContainer,n.startOffset).selectionState}),"backward");return r===e.getCurrentContent()?e:Wu.push(e,r,"remove-range")},Xu="\\s|(?![_])"+{getPunctuation:function(){return"[.,+*?$|#{}()'\\^\\-\\[\\]\\\\\\/!@%\"~=<>_:;・、。〈-】〔-〟：-？！-／［-｀｛-･⸮؟٪-٬؛،؍﴾﴿᠁।၊။‐-‧‰-⁞¡-±´-¸º»¿]"}}.getPunctuation(),Yu=new RegExp("^(?:"+Xu+")*(?:"+"['‘’]|(?!"+Xu+").)*(?:(?!"+Xu+").)"),Zu=new RegExp("(?:(?!"+Xu+").)(?:"+"['‘’]|(?!"+Xu+").)*(?:"+Xu+")*$");function ed(e,t){var r=t?Zu.exec(e):Yu.exec(e);return r?r[0]:e}var td={getBackward:function(e){return ed(e,!0)},getForward:function(e){return ed(e,!1)}},rd=td,nd=Rn,od=cu,id=du;var ad=function(e,t){var r,n=e.getSelection(),o=n.getStartKey(),i=n.getStartOffset(),a=e.getCurrentContent(),s=o;return t>a.getBlockForKey(o).getText().length-i?(s=a.getKeyAfter(o),r=0):r=i+t,n.merge({focusKey:s,focusOffset:r})},sd=td,cd=Rn,ld=ad,ud=du;var dd=Ft,pd=Rn;var fd=Rn;var md=Rn;var hd=Rn,gd=su,_d=ad,vd=du;var yd=Ft,bd=Rn,xd=Le;var Sd=Rn;var wd=Ft,Ed=Rn,kd=vi,Cd=ju,Md=Xo,Td=sl,Ad=Ju,Od=function(e){var t=id(e,(function(e){var t=e.getSelection(),r=t.getStartOffset();if(0===r)return od(e,1);var n=t.getStartKey(),o=e.getCurrentContent().getBlockForKey(n).getText().slice(0,r),i=rd.getBackward(o);return od(e,i.length||1)}),"backward");return t===e.getCurrentContent()?e:nd.push(e,t,"remove-range")},Dd=function(e){var t=ud(e,(function(e){var t=e.getSelection(),r=t.getStartOffset(),n=t.getStartKey(),o=e.getCurrentContent().getBlockForKey(n).getText().slice(r),i=sd.getForward(o);return ld(e,i.length||1)}),"forward");return t===e.getCurrentContent()?e:cd.push(e,t,"remove-range")},Id=function(e){var t=dd.splitBlock(e.getCurrentContent(),e.getSelection());return pd.push(e,t,"split-block")},Rd=function(e){var t=e.getSelection(),r=t.getEndKey(),n=e.getCurrentContent().getBlockForKey(r).getLength();return fd.set(e,{selection:t.merge({anchorKey:r,anchorOffset:n,focusKey:r,focusOffset:n,isBackward:!1}),forceSelection:!0})},Bd=function(e){var t=e.getSelection(),r=t.getStartKey();return md.set(e,{selection:t.merge({anchorKey:r,anchorOffset:0,focusKey:r,focusOffset:0,isBackward:!1}),forceSelection:!0})},Pd=gu,jd=function(e){var t=vd(e,(function(e){var t=e.getSelection(),r=e.getCurrentContent(),n=t.getAnchorKey(),o=t.getAnchorOffset(),i=r.getBlockForKey(n).getText()[o];return _d(e,i?gd.getUTF16Length(i,0):1)}),"forward");if(t===e.getCurrentContent())return e;var r=e.getSelection();return hd.push(e,t.set("selectionBefore",r),r.isCollapsed()?"delete-character":"remove-range")},zd=function(e){var t=e.getSelection();if(!t.isCollapsed())return e;var r=t.getAnchorOffset();if(0===r)return e;var n,o,i=t.getAnchorKey(),a=e.getCurrentContent(),s=a.getBlockForKey(i).getLength();if(s<=1)return e;r===s?(n=t.set("anchorOffset",r-1),o=t):o=(n=t.set("focusOffset",r+1)).set("anchorOffset",r+1);var c=xd(a,n),l=yd.removeRange(a,n,"backward"),u=l.getSelectionAfter(),d=u.getAnchorOffset()-1,p=u.merge({anchorOffset:d,focusOffset:d}),f=yd.replaceWithFragment(l,p,c),m=bd.push(e,f,"insert-fragment");return bd.acceptSelection(m,o)},Nd=function(e,t,r){var n=Sd.undo(t);if("spellcheck-change"!==t.getLastChangeType())e.preventDefault(),t.getNativelyRenderedContent()?(r(Sd.set(t,{nativelyRenderedContent:null})),setTimeout((function(){r(n)}),0)):r(n);else{var o=n.getCurrentContent();r(Sd.set(n,{nativelyRenderedContent:o}))}},Fd=Ou.isOptionKeyCommand,Kd=Md.isBrowser("Chrome");var Ld=function(e,t){var r=t.which,n=e._latestEditorState;function o(r){var n=e.props[r];return!!n&&(n(t),!0)}switch(r){case kd.RETURN:if(t.preventDefault(),e.props.handleReturn&&Td(e.props.handleReturn(t,n)))return;break;case kd.ESC:if(t.preventDefault(),o("onEscape"))return;break;case kd.TAB:if(o("onTab"))return;break;case kd.UP:if(o("onUpArrow"))return;break;case kd.RIGHT:if(o("onRightArrow"))return;break;case kd.DOWN:if(o("onDownArrow"))return;break;case kd.LEFT:if(o("onLeftArrow"))return;break;case kd.SPACE:Kd&&Fd(t)&&t.preventDefault()}var i=e.props.keyBindingFn(t);if(null!=i&&""!==i)if("undo"!==i){if(t.preventDefault(),!e.props.handleKeyCommand||!Td(e.props.handleKeyCommand(i,n,t.timeStamp))){var a=function(e,t,r){switch(e){case"redo":return Ed.redo(t);case"delete":return jd(t);case"delete-word":return Dd(t);case"backspace":return Pd(t);case"backspace-word":return Od(t);case"backspace-to-start-of-line":return Ad(t,r);case"split-block":return Id(t);case"transpose-characters":return zd(t);case"move-selection-to-start-of-block":return Bd(t);case"move-selection-to-end-of-block":return Rd(t);case"secondary-cut":return Cd.cut(t);case"secondary-paste":return Cd.paste(t);default:return t}}(i,n,t);a!==n&&e.update(a)}}else Nd(t,n,e.update);else if(r===kd.SPACE&&Kd&&Fd(t)){var s=wd.replaceText(n.getCurrentContent(),n.getSelection()," ");e.update(Ed.push(n,s,"insert-characters"))}};var Ud=function(){function e(e){var t,r,n;n=void 0,(r="_uri")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this._uri=e}return e.prototype.toString=function(){return this._uri},e}(),qd=Ud,Hd=be,Wd=Xo.isBrowser("IE <= 9");var Vd=function(e){var t,r=null;return!Wd&&document.implementation&&document.implementation.createHTMLDocument&&((t=document.implementation.createHTMLDocument("foo")).documentElement||Hd(!1),t.documentElement.innerHTML=e,r=t.getElementsByTagName("body")[0]),r},$d=Zo;var Gd=function(e){return!(!e||!e.ownerDocument)&&($d(e)&&"A"===e.nodeName)},Qd=Zo;var Jd,Xd=function(e){return!(!e||!e.ownerDocument)&&(Qd(e)&&"IMG"===e.nodeName)};function Yd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Zd(e,t,r[t])}))}return e}function Zd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ep=P,tp=J,rp=de,np=po,op=dr,ip=qd,ap=co,sp=Ae,cp=Vd,lp=mr,up=w.exports,dp=up.List,pp=up.Map,fp=up.OrderedSet,mp=Gd,hp=Ca,gp=bi,_p=Xd,vp=lp("draft_tree_data_support"),yp=new RegExp("\r","g"),bp=new RegExp("\n","g"),xp=new RegExp("^\n","g"),Sp=new RegExp("&nbsp;","g"),wp=new RegExp("&#13;?","g"),Ep=new RegExp("&#8203;?","g"),kp=["bold","bolder","500","600","700","800","900"],Cp=["light","lighter","normal","100","200","300","400"],Mp=["className","href","rel","target","title"],Tp=["alt","className","height","src","width"],Ap=(Zd(Jd={},ap("public/DraftStyleDefault/depth0"),0),Zd(Jd,ap("public/DraftStyleDefault/depth1"),1),Zd(Jd,ap("public/DraftStyleDefault/depth2"),2),Zd(Jd,ap("public/DraftStyleDefault/depth3"),3),Zd(Jd,ap("public/DraftStyleDefault/depth4"),4),Jd),Op=pp({b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE",mark:"HIGHLIGHT"}),Dp=function(e){var t={};return e.mapKeys((function(e,r){var n=[r.element];void 0!==r.aliasedElements&&n.push.apply(n,r.aliasedElements),n.forEach((function(r){void 0===t[r]?t[r]=e:"string"==typeof t[r]?t[r]=[t[r],e]:t[r].push(e)}))})),pp(t)},Ip=function(e){if(gp(e)&&e.style.fontFamily.includes("monospace"))return"CODE";return null},Rp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object.keys(Ap).some((function(r){e.classList.contains(r)&&(t=Ap[r])})),t},Bp=function(e){if(!mp(e))return!1;var t=e;if(!t.href||"http:"!==t.protocol&&"https:"!==t.protocol&&"mailto:"!==t.protocol&&"tel:"!==t.protocol)return!1;try{new ip(t.href);return!0}catch(e){return!1}},Pp=function(e){if(!_p(e))return!1;var t=e;return!(!t.attributes.getNamedItem("src")||!t.attributes.getNamedItem("src").value)},jp=function(e,t){if(!gp(e))return t;var r=e,n=r.style.fontWeight,o=r.style.fontStyle,i=r.style.textDecoration;return t.withMutations((function(e){kp.indexOf(n)>=0?e.add("BOLD"):Cp.indexOf(n)>=0&&e.remove("BOLD"),"italic"===o?e.add("ITALIC"):"normal"===o&&e.remove("ITALIC"),"underline"===i&&e.add("UNDERLINE"),"line-through"===i&&e.add("STRIKETHROUGH"),"none"===i&&(e.remove("UNDERLINE"),e.remove("STRIKETHROUGH"))}))},zp=function(e){return"ul"===e||"ol"===e},Np=function(){function e(e,t){Zd(this,"characterList",dp()),Zd(this,"currentBlockType","unstyled"),Zd(this,"currentDepth",0),Zd(this,"currentEntity",null),Zd(this,"currentText",""),Zd(this,"wrapper",null),Zd(this,"blockConfigs",[]),Zd(this,"contentBlocks",[]),Zd(this,"entityMap",op),Zd(this,"blockTypeMap",void 0),Zd(this,"disambiguate",void 0),this.clear(),this.blockTypeMap=e,this.disambiguate=t}var t=e.prototype;return t.clear=function(){this.characterList=dp(),this.blockConfigs=[],this.currentBlockType="unstyled",this.currentDepth=0,this.currentEntity=null,this.currentText="",this.entityMap=op,this.wrapper=null,this.contentBlocks=[]},t.addDOMNode=function(e){var t;return this.contentBlocks=[],this.currentDepth=0,(t=this.blockConfigs).push.apply(t,this._toBlockConfigs([e],fp())),this._trimCurrentText(),""!==this.currentText&&this.blockConfigs.push(this._makeBlockConfig()),this},t.getContentBlocks=function(){return 0===this.contentBlocks.length&&(vp?this._toContentBlocks(this.blockConfigs):this._toFlatContentBlocks(this.blockConfigs)),{contentBlocks:this.contentBlocks,entityMap:this.entityMap}},t._makeBlockConfig=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key||sp(),r=Yd({key:t,type:this.currentBlockType,text:this.currentText,characterList:this.characterList,depth:this.currentDepth,parent:null,children:dp(),prevSibling:null,nextSibling:null,childConfigs:[]},e);return this.characterList=dp(),this.currentBlockType="unstyled",this.currentText="",r},t._toBlockConfigs=function(e,t){for(var r=[],n=0;n<e.length;n++){var o=e[n],i=o.nodeName.toLowerCase();if("body"===i||zp(i)){this._trimCurrentText(),""!==this.currentText&&r.push(this._makeBlockConfig());var a=this.currentDepth,s=this.wrapper;zp(i)&&(this.wrapper=i,zp(s)&&this.currentDepth++),r.push.apply(r,this._toBlockConfigs(Array.from(o.childNodes),t)),this.currentDepth=a,this.wrapper=s}else{var c=this.blockTypeMap.get(i);if(void 0===c)if("#text"!==i)if("br"!==i)if(Pp(o))this._addImgNode(o,t);else if(Bp(o))this._addAnchorNode(o,r,t);else{var l=t;Op.has(i)&&(l=l.add(Op.get(i))),l=jp(o,l);var u=Ip(o);null!=u&&(l=l.add(u)),r.push.apply(r,this._toBlockConfigs(Array.from(o.childNodes),l))}else this._addBreakNode(o,t);else this._addTextNode(o,t);else{this._trimCurrentText(),""!==this.currentText&&r.push(this._makeBlockConfig());var d=this.currentDepth,p=this.wrapper;if(this.wrapper="pre"===i?"pre":this.wrapper,"string"!=typeof c&&(c=this.disambiguate(i,this.wrapper)||c[0]||"unstyled"),!vp&&gp(o)&&("unordered-list-item"===c||"ordered-list-item"===c)){var f=o;this.currentDepth=Rp(f,this.currentDepth)}var m=sp(),h=this._toBlockConfigs(Array.from(o.childNodes),t);this._trimCurrentText(),r.push(this._makeBlockConfig({key:m,childConfigs:h,type:c})),this.currentDepth=d,this.wrapper=p}}}return r},t._appendText=function(e,t){var r;this.currentText+=e;var n=ep.create({style:t,entity:this.currentEntity});this.characterList=(r=this.characterList).push.apply(r,Array(e.length).fill(n))},t._trimCurrentText=function(){var e=this.currentText.length,t=e-this.currentText.trimLeft().length,r=this.currentText.trimRight().length,n=this.characterList.findEntry((function(e){return null!==e.getEntity()}));(t=void 0!==n?Math.min(t,n[0]):t)>(r=void 0!==(n=this.characterList.reverse().findEntry((function(e){return null!==e.getEntity()})))?Math.max(r,e-n[0]):r)?(this.currentText="",this.characterList=dp()):(this.currentText=this.currentText.slice(t,r),this.characterList=this.characterList.slice(t,r))},t._addTextNode=function(e,t){var r=e.textContent;""===r.trim()&&"pre"!==this.wrapper&&(r=" "),"pre"!==this.wrapper&&(r=(r=r.replace(xp,"")).replace(bp," ")),this._appendText(r,t)},t._addBreakNode=function(e,t){hp(e)&&this._appendText("\n",t)},t._addImgNode=function(e,t){if(_p(e)){var r=e,n={};Tp.forEach((function(e){var t=r.getAttribute(e);t&&(n[e]=t)})),this.currentEntity=this.entityMap.__create("IMAGE","IMMUTABLE",n),lp("draftjs_fix_paste_for_img")?"presentation"!==r.getAttribute("role")&&this._appendText("📷",t):this._appendText("📷",t),this.currentEntity=null}},t._addAnchorNode=function(e,t,r){if(mp(e)){var n=e,o={};Mp.forEach((function(e){var t=n.getAttribute(e);t&&(o[e]=t)})),o.url=new ip(n.href).toString(),this.currentEntity=this.entityMap.__create("LINK","MUTABLE",o||{}),t.push.apply(t,this._toBlockConfigs(Array.from(e.childNodes),r)),this.currentEntity=null}},t._toContentBlocks=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.length-1,n=0;n<=r;n++){var o=e[n];o.parent=t,o.prevSibling=n>0?e[n-1].key:null,o.nextSibling=n<r?e[n+1].key:null,o.children=dp(o.childConfigs.map((function(e){return e.key}))),this.contentBlocks.push(new rp(Yd({},o))),this._toContentBlocks(o.childConfigs,o.key)}},t._hoistContainersInBlockConfigs=function(e){var t=this;return dp(e).flatMap((function(e){return"unstyled"!==e.type||""!==e.text?[e]:t._hoistContainersInBlockConfigs(e.childConfigs)}))},t._toFlatContentBlocks=function(e){var t=this;this._hoistContainersInBlockConfigs(e).forEach((function(e){var r=t._extractTextFromBlockConfigs(e.childConfigs),n=r.text,o=r.characterList;t.contentBlocks.push(new tp(Yd({},e,{text:e.text+n,characterList:e.characterList.concat(o)})))}))},t._extractTextFromBlockConfigs=function(e){for(var t=e.length-1,r="",n=dp(),o=0;o<=t;o++){var i=e[o];r+=i.text,n=n.concat(i.characterList),""!==r&&"unstyled"!==i.type&&(r+="\n",n=n.push(n.last()));var a=this._extractTextFromBlockConfigs(i.childConfigs);r+=a.text,n=n.concat(a.characterList)}return{text:r,characterList:n}},e}(),Fp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cp,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:np,n=t(e=e.trim().replace(yp,"").replace(Sp," ").replace(wp,"").replace(Ep,""));if(!n)return null;var o=Dp(r),i=function(e,t){return"li"===e?"ol"===t?"ordered-list-item":"unordered-list-item":null};return new Np(o,i).addDOMNode(n).getContentBlocks()};function Kp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Lp=J,Up=de,qp=Fp,Hp=Ae,Wp=Vd,Vp=mr,$p=w.exports,Gp=gr,Qp=$p.List,Jp=$p.Repeat,Xp=Vp("draft_tree_data_support"),Yp=Xp?Up:Lp,Zp={processHTML:function(e,t){return qp(e,Wp,t)},processText:function(e,t,r){return e.reduce((function(e,n,o){n=Gp(n);var i=Hp(),a={key:i,type:r,text:n,characterList:Qp(Jp(t,n.length))};if(Xp&&0!==o){var s=o-1;a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Kp(e,t,r[t])}))}return e}({},a,{prevSibling:(e[s]=e[s].merge({nextSibling:i})).getKey()})}return e.push(new Yp(a)),e}),[])}};var ef=Ft,tf=Rn,rf=function(e,t,r,n){var o=t.getStartKey(),i=t.getEndKey(),a=e.getBlockMap(),s=a.toSeq().skipUntil((function(e,t){return t===o})).takeUntil((function(e,t){return t===i})).concat([[i,a.get(i)]]).map((function(e){var t=e.getDepth()+r;return t=Math.max(0,Math.min(t,n)),e.set("depth",t)}));return a=a.merge(s),e.merge({blockMap:a,selectionBefore:t,selectionAfter:t})},nf=un,of={currentBlockContainsLink:function(e){var t=e.getSelection(),r=e.getCurrentContent(),n=r.getEntityMap();return r.getBlockForKey(t.getAnchorKey()).getCharacterList().slice(t.getStartOffset(),t.getEndOffset()).some((function(e){var t=e.getEntity();return!!t&&"LINK"===n.__get(t).getType()}))},getCurrentBlockType:function(e){var t=e.getSelection();return e.getCurrentContent().getBlockForKey(t.getStartKey()).getType()},getDataObjectForLinkURL:function(e){return{url:e.toString()}},handleKeyCommand:function(e,t,r){switch(t){case"bold":return of.toggleInlineStyle(e,"BOLD");case"italic":return of.toggleInlineStyle(e,"ITALIC");case"underline":return of.toggleInlineStyle(e,"UNDERLINE");case"code":return of.toggleCode(e);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return of.onBackspace(e);case"delete":case"delete-word":case"delete-to-end-of-block":return of.onDelete(e);default:return null}},insertSoftNewline:function(e){var t=ef.insertText(e.getCurrentContent(),e.getSelection(),"\n",e.getCurrentInlineStyle(),null),r=tf.push(e,t,"insert-characters");return tf.forceSelection(r,t.getSelectionAfter())},onBackspace:function(e){var t=e.getSelection();if(!t.isCollapsed()||t.getAnchorOffset()||t.getFocusOffset())return null;var r=e.getCurrentContent(),n=t.getStartKey(),o=r.getBlockBefore(n);if(o&&"atomic"===o.getType()){var i=r.getBlockMap().delete(o.getKey()),a=r.merge({blockMap:i,selectionAfter:t});if(a!==r)return tf.push(e,a,"remove-range")}var s=of.tryToRemoveBlockStyle(e);return s?tf.push(e,s,"change-block-type"):null},onDelete:function(e){var t=e.getSelection();if(!t.isCollapsed())return null;var r=e.getCurrentContent(),n=t.getStartKey(),o=r.getBlockForKey(n).getLength();if(t.getStartOffset()<o)return null;var i=r.getBlockAfter(n);if(!i||"atomic"!==i.getType())return null;var a=t.merge({focusKey:i.getKey(),focusOffset:i.getLength()}),s=ef.removeRange(r,a,"forward");return s!==r?tf.push(e,s,"remove-range"):null},onTab:function(e,t,r){var n=t.getSelection(),o=n.getAnchorKey();if(o!==n.getFocusKey())return t;var i=t.getCurrentContent(),a=i.getBlockForKey(o),s=a.getType();if("unordered-list-item"!==s&&"ordered-list-item"!==s)return t;e.preventDefault();var c=a.getDepth();if(!e.shiftKey&&c===r)return t;var l=rf(i,n,e.shiftKey?-1:1,r);return tf.push(t,l,"adjust-depth")},toggleBlockType:function(e,t){var r=e.getSelection(),n=r.getStartKey(),o=r.getEndKey(),i=e.getCurrentContent(),a=r;if(n!==o&&0===r.getEndOffset()){var s=nf(i.getBlockBefore(o));o=s.getKey(),a=a.merge({anchorKey:n,anchorOffset:r.getStartOffset(),focusKey:o,focusOffset:s.getLength(),isBackward:!1})}if(i.getBlockMap().skipWhile((function(e,t){return t!==n})).reverse().skipWhile((function(e,t){return t!==o})).some((function(e){return"atomic"===e.getType()})))return e;var c=i.getBlockForKey(n).getType()===t?"unstyled":t;return tf.push(e,ef.setBlockType(i,a,c),"change-block-type")},toggleCode:function(e){var t=e.getSelection(),r=t.getAnchorKey(),n=t.getFocusKey();return t.isCollapsed()||r!==n?of.toggleBlockType(e,"code-block"):of.toggleInlineStyle(e,"CODE")},toggleInlineStyle:function(e,t){var r=e.getSelection(),n=e.getCurrentInlineStyle();if(r.isCollapsed())return tf.setInlineStyleOverride(e,n.has(t)?n.remove(t):n.add(t));var o,i=e.getCurrentContent();return o=n.has(t)?ef.removeInlineStyle(i,r,t):ef.applyInlineStyle(i,r,t),tf.push(e,o,"change-inline-style")},toggleLink:function(e,t,r){var n=ef.applyEntity(e.getCurrentContent(),t,r);return tf.push(e,n,"apply-entity")},tryToRemoveBlockStyle:function(e){var t=e.getSelection(),r=t.getAnchorOffset();if(t.isCollapsed()&&0===r){var n=t.getAnchorKey(),o=e.getCurrentContent(),i=o.getBlockForKey(n).getType(),a=o.getBlockBefore(n);if("code-block"===i&&a&&"code-block"===a.getType()&&0!==a.getLength())return null;if("unstyled"!==i)return ef.setBlockType(o,t,"unstyled")}return null}},af=of,sf=/\r\n?|\n/g;var cf=k,lf=P,uf=rl,df=Ft,pf=Zp,ff=Rn,mf=af,hf=Vi,gf=al,_f=sl,vf=function(e){return e.split(sf)};function yf(e,t,r){var n=df.replaceWithFragment(e.getCurrentContent(),e.getSelection(),t);return ff.push(e,n.set("entityMap",r),"insert-fragment")}var bf=Xo,xf=Il,Sf=jl,wf=Nl,Ef=Ul,kf=Ql,Cf=Jl,Mf=Xl,Tf=eu,Af=ku,Of=Ld,Df=function(e,t){t.preventDefault();var r=new uf(t.clipboardData);if(!r.isRichText()){var n=r.getFiles(),o=r.getText();if(n.length>0){if(e.props.handlePastedFiles&&_f(e.props.handlePastedFiles(n)))return;return void gf(n,(function(t){if(t=t||o){var r=e._latestEditorState,n=vf(t),i=lf.create({style:r.getCurrentInlineStyle(),entity:hf(r.getCurrentContent(),r.getSelection())}),a=mf.getCurrentBlockType(r),s=pf.processText(n,i,a),c=cf.createFromArray(s),l=df.replaceWithFragment(r.getCurrentContent(),r.getSelection(),c);e.update(ff.push(r,l,"insert-fragment"))}}))}}var i=[],a=r.getText(),s=r.getHTML(),c=e._latestEditorState;if(e.props.formatPastedText){var l=e.props.formatPastedText(a,s);a=l.text,s=l.html}if(!e.props.handlePastedText||!_f(e.props.handlePastedText(a,s,c))){if(a&&(i=vf(a)),!e.props.stripPastedStyles){var u,d=e.getClipboard();if(!e.props.formatPastedText&&r.isRichText()&&d){if(-1!==(null===(u=s)||void 0===u?void 0:u.indexOf(e.getEditorKey()))||1===i.length&&1===d.size&&d.first().getText()===a)return void e.update(yf(e._latestEditorState,d))}else if(d&&r.types.includes("com.apple.webarchive")&&!r.types.includes("text/html")&&function(e,t){return e.length===t.size&&t.valueSeq().every((function(t,r){return t.getText()===e[r]}))}(i,d))return void e.update(yf(e._latestEditorState,d));if(s){var p=pf.processHTML(s,e.props.blockRenderMap);if(p){var f=p.contentBlocks,m=p.entityMap;if(f){var h=cf.createFromArray(f);return void e.update(yf(e._latestEditorState,h,m))}}}e.setClipboard(null)}if(i.length){var g=lf.create({style:c.getCurrentInlineStyle(),entity:hf(c.getCurrentContent(),c.getSelection())}),_=mf.getCurrentBlockType(c),v=pf.processText(i,g,_),y=cf.createFromArray(v);e.update(yf(e._latestEditorState,y))}}},If=Ui,Rf=bf.isBrowser("Chrome"),Bf=bf.isBrowser("Firefox"),Pf=Rf||Bf?If:function(e){},jf={onBeforeInput:xf,onBlur:Sf,onCompositionStart:wf,onCopy:Ef,onCut:kf,onDragOver:Cf,onDragStart:Mf,onFocus:Tf,onInput:Af,onKeyDown:Of,onPaste:Df,onSelect:If,onMouseUp:Pf,onKeyUp:Pf},zf=t.reactDom.exports.unstable_flushControlled;var Nf=t.react.exports,Ff=co,Kf=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.shouldComponentUpdate=function(e){return this.props.text!==e.text||this.props.editorState.getSelection().getHasFocus()!==e.editorState.getSelection().getHasFocus()},o.render=function(){var e=this.props.editorState.getSelection().getHasFocus(),t=Ff({"public/DraftEditorPlaceholder/root":!0,"public/DraftEditorPlaceholder/hasFocus":e});return Nf.createElement("div",{className:t},Nf.createElement("div",{className:Ff("public/DraftEditorPlaceholder/inner"),id:this.props.accessibilityID,style:{whiteSpace:"pre-wrap"}},this.props.text))},n}(Nf.Component),Lf=Kf,Uf=Ou,qf=vi,Hf=Xo,Wf=Hf.isPlatform("Mac OS X"),Vf=Wf&&Hf.isBrowser("Firefox < 29"),$f=Uf.hasCommandModifier,Gf=Uf.isCtrlKeyCommand;function Qf(e){return Wf&&e.altKey||Gf(e)}var Jf=function(e){switch(e.keyCode){case 66:return $f(e)?"bold":null;case 68:return Gf(e)?"delete":null;case 72:return Gf(e)?"backspace":null;case 73:return $f(e)?"italic":null;case 74:return $f(e)?"code":null;case 75:return Wf&&Gf(e)?"secondary-cut":null;case 77:case 79:return Gf(e)?"split-block":null;case 84:return Wf&&Gf(e)?"transpose-characters":null;case 85:return $f(e)?"underline":null;case 87:return Wf&&Gf(e)?"backspace-word":null;case 89:return Gf(e)?Wf?"secondary-paste":"redo":null;case 90:return function(e){return $f(e)?e.shiftKey?"redo":"undo":null}(e)||null;case qf.RETURN:return"split-block";case qf.DELETE:return function(e){return!Wf&&e.shiftKey?null:Qf(e)?"delete-word":"delete"}(e);case qf.BACKSPACE:return function(e){return $f(e)&&Wf?"backspace-to-start-of-line":Qf(e)?"backspace-word":"backspace"}(e);case qf.LEFT:return Vf&&$f(e)?"move-selection-to-start-of-block":null;case qf.RIGHT:return Vf&&$f(e)?"move-selection-to-end-of-block":null;default:return null}},Xf=vo;function Yf(){return Yf=Xf||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yf.apply(this,arguments)}function Zf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){tm(e,t,r[t])}))}return e}function em(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rm(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var nm=po,om=fo,im=ca,am=Kc,sm=bl,cm=jf,lm=zf,um=Lf,dm=Rn,pm=t.react.exports,fm=us,mm=ys,hm=co,gm=Ae,_m=Jf,vm=Cs,ym=mr,bm=be,xm=bi,Sm=un,wm=Xo.isBrowser("IE"),Em=!wm,km={edit:cm,composite:im,drag:sm,cut:null,render:null},Cm=!1,Mm=function(e){function t(){return e.apply(this,arguments)||this}rm(t,e);var r=t.prototype;return r.render=function(){return null},r.componentDidMount=function(){this._update()},r.componentDidUpdate=function(){this._update()},r._update=function(){var e=this.props.editor;e._latestEditorState=this.props.editorState,e._blockSelectEvents=!0},t}(pm.Component),Tm=function(e){function t(t){var r;return tm(em(r=e.call(this,t)||this),"_blockSelectEvents",void 0),tm(em(r),"_clipboard",void 0),tm(em(r),"_handler",void 0),tm(em(r),"_dragCount",void 0),tm(em(r),"_internalDrag",void 0),tm(em(r),"_editorKey",void 0),tm(em(r),"_placeholderAccessibilityID",void 0),tm(em(r),"_latestEditorState",void 0),tm(em(r),"_latestCommittedEditorState",void 0),tm(em(r),"_pendingStateFromBeforeInput",void 0),tm(em(r),"_onBeforeInput",void 0),tm(em(r),"_onBlur",void 0),tm(em(r),"_onCharacterData",void 0),tm(em(r),"_onCompositionEnd",void 0),tm(em(r),"_onCompositionStart",void 0),tm(em(r),"_onCopy",void 0),tm(em(r),"_onCut",void 0),tm(em(r),"_onDragEnd",void 0),tm(em(r),"_onDragOver",void 0),tm(em(r),"_onDragStart",void 0),tm(em(r),"_onDrop",void 0),tm(em(r),"_onInput",void 0),tm(em(r),"_onFocus",void 0),tm(em(r),"_onKeyDown",void 0),tm(em(r),"_onKeyPress",void 0),tm(em(r),"_onKeyUp",void 0),tm(em(r),"_onMouseDown",void 0),tm(em(r),"_onMouseUp",void 0),tm(em(r),"_onPaste",void 0),tm(em(r),"_onSelect",void 0),tm(em(r),"editor",void 0),tm(em(r),"editorContainer",void 0),tm(em(r),"focus",void 0),tm(em(r),"blur",void 0),tm(em(r),"setMode",void 0),tm(em(r),"exitCurrentMode",void 0),tm(em(r),"restoreEditorDOM",void 0),tm(em(r),"setClipboard",void 0),tm(em(r),"getClipboard",void 0),tm(em(r),"getEditorKey",void 0),tm(em(r),"update",void 0),tm(em(r),"onDragEnter",void 0),tm(em(r),"onDragLeave",void 0),tm(em(r),"_handleEditorContainerRef",(function(e){r.editorContainer=e,r.editor=null!==e?e.firstChild:null})),tm(em(r),"focus",(function(e){var t=r.props.editorState,n=t.getSelection().getHasFocus(),o=r.editor;if(o){var i=mm.getScrollParent(o),a=e||vm(i),s=a.x,c=a.y;xm(o)||bm(!1),o.focus(),i===window?window.scrollTo(s,c):fm.setTop(i,c),n||r.update(dm.forceSelection(t,t.getSelection()))}})),tm(em(r),"blur",(function(){var e=r.editor;e&&(xm(e)||bm(!1),e.blur())})),tm(em(r),"setMode",(function(e){var t=r.props,n=t.onPaste,o=t.onCut,i=t.onCopy,a=Zf({},km.edit);n&&(a.onPaste=n),o&&(a.onCut=o),i&&(a.onCopy=i);var s=Zf({},km,{edit:a});r._handler=s[e]})),tm(em(r),"exitCurrentMode",(function(){r.setMode("edit")})),tm(em(r),"restoreEditorDOM",(function(e){r.setState({contentsKey:r.state.contentsKey+1},(function(){r.focus(e)}))})),tm(em(r),"setClipboard",(function(e){r._clipboard=e})),tm(em(r),"getClipboard",(function(){return r._clipboard})),tm(em(r),"update",(function(e){r._latestEditorState=e,r.props.onChange(e)})),tm(em(r),"onDragEnter",(function(){r._dragCount++})),tm(em(r),"onDragLeave",(function(){r._dragCount--,0===r._dragCount&&r.exitCurrentMode()})),r._blockSelectEvents=!1,r._clipboard=null,r._handler=null,r._dragCount=0,r._editorKey=t.editorKey||gm(),r._placeholderAccessibilityID="placeholder-"+r._editorKey,r._latestEditorState=t.editorState,r._latestCommittedEditorState=t.editorState,r._onBeforeInput=r._buildHandler("onBeforeInput"),r._onBlur=r._buildHandler("onBlur"),r._onCharacterData=r._buildHandler("onCharacterData"),r._onCompositionEnd=r._buildHandler("onCompositionEnd"),r._onCompositionStart=r._buildHandler("onCompositionStart"),r._onCopy=r._buildHandler("onCopy"),r._onCut=r._buildHandler("onCut"),r._onDragEnd=r._buildHandler("onDragEnd"),r._onDragOver=r._buildHandler("onDragOver"),r._onDragStart=r._buildHandler("onDragStart"),r._onDrop=r._buildHandler("onDrop"),r._onInput=r._buildHandler("onInput"),r._onFocus=r._buildHandler("onFocus"),r._onKeyDown=r._buildHandler("onKeyDown"),r._onKeyPress=r._buildHandler("onKeyPress"),r._onKeyUp=r._buildHandler("onKeyUp"),r._onMouseDown=r._buildHandler("onMouseDown"),r._onMouseUp=r._buildHandler("onMouseUp"),r._onPaste=r._buildHandler("onPaste"),r._onSelect=r._buildHandler("onSelect"),r.getEditorKey=function(){return r._editorKey},r.state={contentsKey:0},r}rm(t,e);var r=t.prototype;return r._buildHandler=function(e){var t=this;return function(r){if(!t.props.readOnly){var n=t._handler&&t._handler[e];n&&(lm?lm((function(){return n(t,r)})):n(t,r))}}},r._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()},r._renderPlaceholder=function(){if(this._showPlaceholder()){var e={text:Sm(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID};return pm.createElement(um,e)}return null},r._renderARIADescribedBy=function(){var e=this.props.ariaDescribedBy||"",t=this._showPlaceholder()?this._placeholderAccessibilityID:"";return e.replace("{{editor_id_placeholder}}",t)||void 0},r.render=function(){var e=this.props,t=e.blockRenderMap,r=e.blockRendererFn,n=e.blockStyleFn,o=e.customStyleFn,i=e.customStyleMap,a=e.editorState,s=e.preventScroll,c=e.readOnly,l=e.textAlignment,u=e.textDirectionality,d=hm({"DraftEditor/root":!0,"DraftEditor/alignLeft":"left"===l,"DraftEditor/alignRight":"right"===l,"DraftEditor/alignCenter":"center"===l}),p=this.props.role||"textbox",f="combobox"===p?!!this.props.ariaExpanded:null,m={blockRenderMap:t,blockRendererFn:r,blockStyleFn:n,customStyleMap:Zf({},om,i),customStyleFn:o,editorKey:this._editorKey,editorState:a,preventScroll:s,textDirectionality:u};return pm.createElement("div",{className:d},this._renderPlaceholder(),pm.createElement("div",{className:hm("DraftEditor/editorContainer"),ref:this._handleEditorContainerRef},pm.createElement("div",{"aria-activedescendant":c?null:this.props.ariaActiveDescendantID,"aria-autocomplete":c?null:this.props.ariaAutoComplete,"aria-controls":c?null:this.props.ariaControls,"aria-describedby":this._renderARIADescribedBy(),"aria-expanded":c?null:f,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledBy,"aria-multiline":this.props.ariaMultiline,"aria-owns":c?null:this.props.ariaOwneeID,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:hm({notranslate:!c,"public/DraftEditor/content":!0}),contentEditable:!c,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:this.props.editorRef,role:c?null:p,spellCheck:Em&&this.props.spellCheck,style:{outline:"none",userSelect:"text",WebkitUserSelect:"text",whiteSpace:"pre-wrap",wordWrap:"break-word"},suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex},pm.createElement(Mm,{editor:this,editorState:a}),pm.createElement(am,Yf({},m,{key:"contents"+this.state.contentsKey})))))},r.componentDidMount=function(){this._blockSelectEvents=!1,!Cm&&ym("draft_ods_enabled")&&(Cm=!0),this.setMode("edit"),wm&&(this.editor?this.editor.ownerDocument.execCommand("AutoUrlDetect",!1,!1):l.commonjsGlobal.execCommand("AutoUrlDetect",!1,!1))},r.componentDidUpdate=function(){this._blockSelectEvents=!1,this._latestEditorState=this.props.editorState,this._latestCommittedEditorState=this.props.editorState},t}(pm.Component);tm(Tm,"defaultProps",{ariaDescribedBy:"{{editor_id_placeholder}}",blockRenderMap:nm,blockRendererFn:function(){return null},blockStyleFn:function(){return""},keyBindingFn:_m,readOnly:!1,spellCheck:!1,stripPastedStyles:!1});var Am=Tm,Om=Object.freeze({__proto__:null}),Dm=l.getAugmentedNamespace(Om),Im={stringify:function(e){return"_"+String(e)},unstringify:function(e){return e.slice(1)}},Rm=Im,Bm=su.strlen;var Pm=su,jm=j,zm=function(e,t){return e===t},Nm=function(e){return!!e},Fm=[];function Km(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Lm=J,Um=de,qm=Im,Hm=function(e,t){var r=[];return e.findEntityRanges((function(e){return!!e.getEntity()}),(function(n,o){var i=e.getText(),a=e.getEntityAt(n);r.push({offset:Bm(i.slice(0,n)),length:Bm(i.slice(n,o)),key:Number(t[Rm.stringify(a)])})})),r},Wm=function(e){var t=e.getCharacterList().map((function(e){return e.getStyle()})).toList(),r=t.flatten().toSet().map((function(r){return function(e,t,r){var n=[],o=t.map((function(e){return e.has(r)})).toList();return jm(o,zm,Nm,(function(t,o){var i=e.getText();n.push({offset:Pm.strlen(i.slice(0,t)),length:Pm.strlen(i.slice(t,o)),style:r})})),n}(e,t,r)}));return Array.prototype.concat.apply(Fm,r.toJS())},Vm=be,$m=function(e,t){return{key:e.getKey(),text:e.getText(),type:e.getType(),depth:e.getDepth(),inlineStyleRanges:Wm(e),entityRanges:Hm(e,t),data:e.getData().toObject()}},Gm=function(e,t,r,n){if(e instanceof Lm)r.push($m(e,t));else{e instanceof Um||Vm(!1);var o=e.getParentKey(),i=n[e.getKey()]=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Km(e,t,r[t])}))}return e}({},$m(e,t),{children:[]});o?n[o].children.push(i):r.push(i)}},Qm=function(e){var t={entityMap:{},blocks:[]};return t=function(e,t){var r=t.entityMap,n=[],o={},i={},a=0;return e.getBlockMap().forEach((function(e){e.findEntityRanges((function(e){return null!==e.getEntity()}),(function(t){var n=e.getEntityAt(t),o=qm.stringify(n);i[o]||(i[o]=n,r[o]="".concat(a),a++)})),Gm(e,r,n,o)})),{blocks:n,entityMap:r}}(e,t),t=function(e,t){var r=t.blocks,n=t.entityMap,o={};return Object.keys(n).forEach((function(t,r){var n=e.getEntity(qm.unstringify(t));o[r]={type:n.getType(),mutability:n.getMutability(),data:n.getData()}})),{blocks:r,entityMap:o}}(e,t),t};function Jm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Xm(e,t,r[t])}))}return e}function Xm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ym=Ae,Zm=be,eh=function(e){if(!e||!e.type)return!1;var t=e.type;return"unordered-list-item"===t||"ordered-list-item"===t},th={fromRawTreeStateToRawState:function(e){var t=e.blocks,r=[];return Array.isArray(t)||Zm(!1),Array.isArray(t)&&t.length?(function(e,t){for(var r=[].concat(e).reverse();r.length;){var n=r.pop();t(n);var o=n.children;Array.isArray(o)||Zm(!1),r=r.concat([].concat(o.reverse()))}}(t,(function(e){var t=Jm({},e);eh(e)&&(t.depth=t.depth||0,function(e){Array.isArray(e.children)&&(e.children=e.children.map((function(t){return t.type===e.type?Jm({},t,{depth:(e.depth||0)+1}):t})))}(e),null!=e.children&&e.children.length>0)||(delete t.children,r.push(t))})),e.blocks=r,Jm({},e,{blocks:r})):e},fromRawStateToRawTreeState:function(e){var t=[],r=[];return e.blocks.forEach((function(e){var n=eh(e),o=e.depth||0,i=Jm({},e,{children:[]});if(n){var a=r[0];if(null==a&&0===o)t.push(i);else if(null==a||a.depth<o-1){var s={key:Ym(),text:"",depth:o-1,type:e.type,children:[],entityRanges:[],inlineStyleRanges:[]};r.unshift(s),1===o?t.push(s):null!=a&&a.children.push(s),s.children.push(i)}else if(a.depth===o-1)a.children.push(i);else{for(;null!=a&&a.depth>=o;)r.shift(),a=r[0];o>0?a.children.push(i):t.push(i)}}else t.push(i)})),Jm({},e,{blocks:t})}},rh=P,nh=w.exports.List;var oh=function(e,t){var r=e.map((function(e,r){var n=t[r];return rh.create({style:e,entity:n})}));return nh(r)},ih=su.substr;var ah=function(e,t){var r=Array(e.length).fill(null);return t&&t.forEach((function(t){for(var n=ih(e,0,t.offset).length,o=n+ih(e,t.offset,t.length).length,i=n;i<o;i++)r[i]=t.key})),r},sh=su,ch=w.exports.OrderedSet,lh=sh.substr,uh=ch();function dh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){ph(e,t,r[t])}))}return e}function ph(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fh=J,mh=de,hh=Nr,gh=dr,_h=th,vh=fr,yh=oh,bh=ah,xh=function(e,t){var r=Array(e.length).fill(uh);return t&&t.forEach((function(t){for(var n=lh(e,0,t.offset).length,o=n+lh(e,t.offset,t.length).length;n<o;)r[n]=r[n].add(t.style),n++})),r},Sh=Ae,wh=w.exports,Eh=be,kh=mr("draft_tree_data_support"),Ch=wh.List,Mh=wh.Map,Th=wh.OrderedMap,Ah=function(e,t){var r=e.key,n=e.type,o=e.data;return{text:e.text,depth:e.depth||0,type:n||"unstyled",key:r||Sh(),data:Mh(o),characterList:Oh(e,t)}},Oh=function(e,t){var r=e.text,n=e.entityRanges,o=e.inlineStyleRanges,i=n||[];return yh(xh(r,o||[]),bh(r,i.filter((function(e){return t.hasOwnProperty(e.key)})).map((function(e){return dh({},e,{key:t[e.key]})}))))},Dh=function(e){return dh({},e,{key:e.key||Sh()})},Ih=function(e,t,r){var n=t.map((function(e){return dh({},e,{parentRef:r})}));return e.concat(n.reverse())},Rh=function(e,t){var r=e.blocks.find((function(e){return Array.isArray(e.children)&&e.children.length>0})),n=kh&&!r?_h.fromRawStateToRawTreeState(e).blocks:e.blocks;if(!kh)return function(e,t){return Th(e.map((function(e){var r=new fh(Ah(e,t));return[r.getKey(),r]})))}(r?_h.fromRawTreeStateToRawState(e).blocks:n,t);var o=function(e,t){return e.map(Dh).reduce((function(r,n,o){Array.isArray(n.children)||Eh(!1);var i=n.children.map(Dh),a=new mh(dh({},Ah(n,t),{prevSibling:0===o?null:e[o-1].key,nextSibling:o===e.length-1?null:e[o+1].key,children:Ch(i.map((function(e){return e.key})))}));r=r.set(a.getKey(),a);for(var s=Ih([],i,a);s.length>0;){var c=s.pop(),l=c.parentRef,u=l.getChildKeys(),d=u.indexOf(c.key),p=Array.isArray(c.children);if(!p){p||Eh(!1);break}var f=c.children.map(Dh),m=new mh(dh({},Ah(c,t),{parent:l.getKey(),children:Ch(f.map((function(e){return e.key}))),prevSibling:0===d?null:u.get(d-1),nextSibling:d===u.size-1?null:u.get(d+1)}));r=r.set(m.getKey(),m),s=Ih(s,f,m)}return r}),Th())}(n,t);return o},Bh=Nu;var Ph=function(e){var t=Bh(e),r=0,n=0,o=0,i=0;if(t.length){if(t.length>1&&0===t[0].width){var a=t[1];r=a.top,n=a.right,o=a.bottom,i=a.left}else{var s=t[0];r=s.top,n=s.right,o=s.bottom,i=s.left}for(var c=1;c<t.length;c++){var l=t[c];0!==l.height&&0!==l.width&&(r=Math.min(r,l.top),n=Math.max(n,l.right),o=Math.max(o,l.bottom),i=Math.min(i,l.left))}}return{top:r,right:n,bottom:o,left:i,width:n-i,height:o-r}};var jh={Editor:Am,EditorBlock:kc,EditorState:Rn,CompositeDecorator:ao,Entity:dr,EntityInstance:rr,BlockMapBuilder:k,CharacterMetadata:P,ContentBlock:J,ContentState:Nr,RawDraftContentState:Dm,SelectionState:fr,AtomicBlockUtils:no,KeyBindingUtil:Ou,Modifier:Ft,RichUtils:af,DefaultDraftBlockRenderMap:po,DefaultDraftInlineStyle:fo,convertFromHTML:Fp,convertFromRaw:function(e){Array.isArray(e.blocks)||Eh(!1);var t=function(e){var t=e.entityMap,r={};return Object.keys(t).forEach((function(e){var n=t[e],o=n.type,i=n.mutability,a=n.data;r[e]=gh.__create(o,i,a||{})})),r}(e),r=Rh(e,t),n=r.isEmpty()?new vh:vh.createEmpty(r.first().getKey());return new hh({blockMap:r,entityMap:t,selectionBefore:n,selectionAfter:n})},convertToRaw:Qm,genKey:Ae,getDefaultKeyBinding:Jf,getVisibleSelectionRect:function(e){var t=e.getSelection();if(!t.rangeCount)return null;var r=t.getRangeAt(0),n=Ph(r),o=n.top,i=n.right,a=n.bottom,s=n.left;return 0===o&&0===i&&0===a&&0===s?null:n}};r.injectInternalStyle("typescript/libraries/comments2/src/components/folder_overview_editor/index.module.out.css",(e=>':root{--folder-overview-padding-left:6px;--folder-overview-padding-top:8px;--fixed-toolbar-height:40px}._sc-folder-overview-interaction-container_tb7xr_9{padding-top:0;position:relative}._sc-folder-overview-editor_tb7xr_14 ._sc-folder-overview-draft_tb7xr_14{max-height:none;overflow-x:hidden;overflow-y:auto;padding:0}._sc-folder-overview-editor_tb7xr_14 .public-DraftEditor-content{overflow:hidden}._sc-toolbar-component_tb7xr_27{display:flex;height:32px;padding-left:5px;padding-right:9px;pointer-events:auto;z-index:10}._sc-toolbar-component_tb7xr_27 ._toolbar-divider_tb7xr_36{background-color:var(--color_white);height:100%;margin:0 6px 0 8px;opacity:.1;width:1px}._sc-toolbar-component_tb7xr_27 ._toolbar-spacer_tb7xr_44{flex:1}._sc-toolbar-component_tb7xr_27 ._toolbar-button_tb7xr_48{color:var(--color_white);cursor:pointer;padding:4px}._sc-toolbar-component_tb7xr_27 ._toolbar-button_tb7xr_48 svg{width:20px}._sc-contextual-toolbar-popover_tb7xr_60{margin-top:-40px;transition:opacity .2s,transform .2s}._sc-contextual-toolbar-popover_tb7xr_60 ._toolbar-button_tb7xr_48{opacity:.4}._sc-contextual-toolbar-popover_tb7xr_60 ._toolbar-button_tb7xr_48:hover{opacity:1}._sc-contextual-toolbar-popover_tb7xr_60 ._sc-toolbar-component_tb7xr_27{background-color:var(--color_ink_100);border-radius:5px}._sc-contextual-toolbar-popover_tb7xr_60._popover-enter_tb7xr_79,._sc-contextual-toolbar-popover_tb7xr_60._popover-leave_tb7xr_80{opacity:0;transform:translate(-50%,12px) scale(.8)}._sc-contextual-toolbar-popover_tb7xr_60._popover-enter-active_tb7xr_85._popover-enter_tb7xr_79{opacity:1;pointer-events:auto;transform:translate(-50%) scale(1)}._sc-link-prompt_tb7xr_93{background-color:var(--color_white);border-radius:0;box-shadow:0 5px 15px rgba(0,0,0,.2);display:flex;height:32px;margin-top:-48px;min-width:250px;padding:4px;position:absolute;transform:translate(-50%);width:250px;z-index:10}._sc-link-prompt_tb7xr_93 ._submit-button_tb7xr_112{margin-left:8px}._sc-link-prompt_tb7xr_93 ._link-prompt-input_tb7xr_116{background-color:transparent;background-image:none;border:0;border-radius:0;font-size:12px;height:100%;padding:4px 8px;width:100%}._sc-link-prompt_tb7xr_93 ._link-prompt-input_tb7xr_116:focus{outline:none}._sc-folder-overview-editor_tb7xr_14 .DraftEditor-root{font-size:14px;line-height:22px}._sc-folder-overview-editor_tb7xr_14 .public-DraftStyleDefault-ol,._sc-folder-overview-editor_tb7xr_14 .public-DraftStyleDefault-ul{margin-bottom:0;margin-top:0}._sc-folder-overview-editor_tb7xr_14 .public-DraftStyleDefault-ul li{font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);line-height:var(--type__body__small--lineheight)}._sc-folder-overview-editor_tb7xr_14 .public-DraftStyleDefault-ul li span{font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);line-height:var(--type__body__small--lineheight)}._sc-folder-overview-editor_tb7xr_14 .public-DraftStyleDefault-depth0.public-DraftStyleDefault-listLTR{margin-left:2.2em}._sc-folder-overview-editor_tb7xr_14 ._sc-editor-href_tb7xr_171{color:var(--color_text_link);cursor:pointer}._sc-toolbar-tooltip_tb7xr_177 ._sc-toolbar-button-tooltip-content_tb7xr_177{font-size:10px;font-weight:200;line-height:12px;text-align:center}._sc-toolbar-button-tooltip-content__message_tb7xr_184{font-weight:700;line-height:12px}._sc-toolbar-button-tooltip-content__shortcut_tb7xr_189{font-style:italic;line-height:12px;padding:0 2px 1px}._sc-folder-overview-editor_tb7xr_14 ._task-block_tb7xr_197{margin-bottom:6px;margin-top:6px;padding-left:22px;position:relative}._sc-folder-overview-editor_tb7xr_14 ._task-block_tb7xr_197._checked_tb7xr_204{color:var(--color_ink_60);text-decoration:line-through}._sc-folder-overview-editor_tb7xr_14 ._task-block-checkbox_tb7xr_209,._task-block-clickable-div_tb7xr_215{left:0;position:absolute;top:0}._task-block-clickable-div_tb7xr_215{cursor:default;height:24px;width:24px;z-index:1}._sc-folder-overview-editor_tb7xr_14 ._task-block_tb7xr_197._empty-block_tb7xr_226 ._task-placeholder_tb7xr_226{display:block;left:0;margin-left:22px;pointer-events:none;top:0;-webkit-user-select:none;user-select:none}._sc-folder-overview-editor_tb7xr_14 ._task-block_tb7xr_197._empty-block_tb7xr_226._readonly_tb7xr_236 ._task-placeholder_tb7xr_226{display:none}._sc-folder-overview-editor_tb7xr_14 ._task-block_tb7xr_197:after{background-color:var(--color_ink_5);border-radius:5px;content:"";display:block;height:calc(100% + 6px);left:-8px;opacity:0;position:absolute;top:-3px;transition:opacity .2s;width:calc(100% + 16px);z-index:-1}._sc-folder-overview-editor_tb7xr_14 ._task-block_tb7xr_197._focused_tb7xr_256:after,._sc-folder-overview-editor_tb7xr_14 ._task-block_tb7xr_197:not(._readonly_tb7xr_236):hover:after{opacity:1}._sc-popover_tb7xr_262{border-radius:5px;box-shadow:0 5px 10px rgba(0,0,0,.29);position:absolute;transform:translate(-50%);z-index:11}._sc-mention-share-popover_tb7xr_273{background-color:var(--color_white);border:1px solid var(--color_ink_5);border-radius:5px;margin-top:20px;padding:16px;transition:opacity .2s,transform .2s;width:320px}._sc-mention-share-popover_tb7xr_273 ._popup-title_tb7xr_283{font-size:14px;font-weight:700;line-height:16px;text-align:center}._sc-mention-share-popover_tb7xr_273 ._popup-message_tb7xr_290{font-size:12px;line-height:16px;margin-top:8px}._sc-mention-share-popover_tb7xr_273 ._button-container_tb7xr_296{float:right;margin-top:12px}._sc-mention-share-popover_tb7xr_273 ._cancel-button_tb7xr_301{margin-right:5px}._sc-mention-share-popover_tb7xr_273._popover-enter_tb7xr_79,._sc-mention-share-popover_tb7xr_273._popover-leave_tb7xr_80{opacity:0}._sc-mention-share-popover_tb7xr_273._popover-enter-active_tb7xr_85._popover-enter_tb7xr_79{opacity:1;pointer-events:auto}._sc-folder-overview-fixed-toolbar_tb7xr_319{box-sizing:border-box;margin-top:-48px;padding:0;pointer-events:none;position:absolute;width:100%;z-index:42}._sc-folder-overview-fixed-toolbar_tb7xr_319 ._sc-toolbar-component_tb7xr_27{background-color:var(--color__inverse__standard__background);border-radius:0;box-shadow:var(--boxshadow__elevation1);display:flex;height:var(--fixed-toolbar-height);justify-content:center;margin-left:auto;margin-right:auto;max-width:100%;min-width:0;pointer-events:auto;position:relative}._sc-folder-overview-fixed-toolbar_tb7xr_319 ._toolbar-button-done_tb7xr_344{font-size:14px;line-height:24px;margin-left:2px}._sc-folder-overview-fixed-toolbar_tb7xr_319 ._sc-link-prompt_tb7xr_93{box-sizing:border-box;margin-top:0;transform:none;width:100%}._sc-folder-overview-fixed-toolbar_tb7xr_319 ._sc-link-prompt_tb7xr_93 ._link-prompt-input_tb7xr_116{padding-top:0}._sc-folder-overview-fixed-toolbar_tb7xr_319 ._toolbar-button_tb7xr_48{fill:var(--color_ink_40);color:var(--color_ink_40);padding:8px 6px}._sc-folder-overview-fixed-toolbar_tb7xr_319 ._toolbar-button--active_tb7xr_369,._sc-folder-overview-fixed-toolbar_tb7xr_319 ._toolbar-button_tb7xr_48:hover{fill:var(--color__inverse__standard__text);color:var(--color__inverse__standard__text)}._sc-folder-overview-editor_tb7xr_14 ._sc-folder-overview-fixed-toolbar_tb7xr_319 ._sc-link-prompt_tb7xr_93,._sc-folder-overview-fixed-toolbar_tb7xr_319._docked_tb7xr_377 ._sc-link-prompt_tb7xr_93{height:100%}._sc-folder-overview-editor_tb7xr_14 ._sc-folder-overview-fixed-toolbar_tb7xr_319 ._sc-link-prompt_tb7xr_93 ._link-prompt-input_tb7xr_116{box-sizing:border-box;height:100%}._sc-folder-overview-fixed-toolbar_tb7xr_319 ._sc-link-prompt_tb7xr_93 ._submit-button_tb7xr_112{margin-right:4px;margin-top:4px}._folder-overview-limited-width_tb7xr_393 ._sc-mention-share-popover_tb7xr_273{box-sizing:border-box;transform:none;width:100%}._sc-folder-overview-editor_tb7xr_14 ._sc-contextual-toolbar-popover_tb7xr_60{z-index:200}._sc-folder-overview-editor_tb7xr_14 ._sc-editor-href_tb7xr_171{color:var(--color__attention__text)}._sc-folder-overview-editor_tb7xr_14 ._sc-link-prompt_tb7xr_93 ._submit-button_tb7xr_112,._sc-folder-overview-fixed-toolbar_tb7xr_319 ._sc-link-prompt_tb7xr_93 ._submit-button_tb7xr_112{display:none}._sc-folder-overview-editor_tb7xr_14 ._sc-link-prompt_tb7xr_93{background-color:var(--color_white);border:0;height:auto;padding:0;z-index:200}._sc-folder-overview-editor_tb7xr_14 ._sc-link-prompt_tb7xr_93 ._link-prompt-input_tb7xr_116{color:var(--color_text_link);padding:12px}._sc-folder-overview-editor_tb7xr_14 .DraftEditor-root{color:var(--color__standard__text);font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);line-height:var(--type__body__small--lineheight)}._sc-folder-overview-editor_tb7xr_14 ._task-block-clickable-div_tb7xr_215{cursor:pointer}._sc-folder-overview-editor_tb7xr_14 ._task-block-checkbox_tb7xr_209,._sc-folder-overview-editor_tb7xr_14 ._task-block-clickable-div_tb7xr_215{height:12px;left:2px;min-width:12px;top:4px;width:12px}._sc-mention-share-popover_tb7xr_273 ._popup-message_tb7xr_290{color:var(--color_stone);line-height:18px}._sc-folder-overview-editor_tb7xr_14 .public-DraftStyleDefault-orderedListItem.public-DraftStyleDefault-depth0.public-DraftStyleDefault-listLTR,._sc-folder-overview-editor_tb7xr_14 .public-DraftStyleDefault-unorderedListItem.public-DraftStyleDefault-depth0.public-DraftStyleDefault-listLTR{margin-left:28px}'));const zh={scFolderOverviewInteractionContainer:"_sc-folder-overview-interaction-container_tb7xr_9",scFolderOverviewEditor:"_sc-folder-overview-editor_tb7xr_14",scFolderOverviewDraft:"_sc-folder-overview-draft_tb7xr_14",scToolbarComponent:"_sc-toolbar-component_tb7xr_27",toolbarDivider:"_toolbar-divider_tb7xr_36",toolbarSpacer:"_toolbar-spacer_tb7xr_44",toolbarButton:"_toolbar-button_tb7xr_48",scContextualToolbarPopover:"_sc-contextual-toolbar-popover_tb7xr_60",popoverEnter:"_popover-enter_tb7xr_79",popoverLeave:"_popover-leave_tb7xr_80",popoverEnterActive:"_popover-enter-active_tb7xr_85",scLinkPrompt:"_sc-link-prompt_tb7xr_93",submitButton:"_submit-button_tb7xr_112",linkPromptInput:"_link-prompt-input_tb7xr_116",scEditorHref:"_sc-editor-href_tb7xr_171",scToolbarTooltip:"_sc-toolbar-tooltip_tb7xr_177",scToolbarButtonTooltipContent:"_sc-toolbar-button-tooltip-content_tb7xr_177",scToolbarButtonTooltipContentMessage:"_sc-toolbar-button-tooltip-content__message_tb7xr_184",scToolbarButtonTooltipContentShortcut:"_sc-toolbar-button-tooltip-content__shortcut_tb7xr_189",taskBlock:"_task-block_tb7xr_197",checked:"_checked_tb7xr_204",taskBlockCheckbox:"_task-block-checkbox_tb7xr_209",taskBlockClickableDiv:"_task-block-clickable-div_tb7xr_215",emptyBlock:"_empty-block_tb7xr_226",taskPlaceholder:"_task-placeholder_tb7xr_226",readonly:"_readonly_tb7xr_236",focused:"_focused_tb7xr_256",scPopover:"_sc-popover_tb7xr_262",scMentionSharePopover:"_sc-mention-share-popover_tb7xr_273",popupTitle:"_popup-title_tb7xr_283",popupMessage:"_popup-message_tb7xr_290",buttonContainer:"_button-container_tb7xr_296",cancelButton:"_cancel-button_tb7xr_301",scFolderOverviewFixedToolbar:"_sc-folder-overview-fixed-toolbar_tb7xr_319",toolbarButtonDone:"_toolbar-button-done_tb7xr_344",toolbarButtonActive:"_toolbar-button--active_tb7xr_369",docked:"_docked_tb7xr_377",folderOverviewLimitedWidth:"_folder-overview-limited-width_tb7xr_393"},Nh={evts:["focus","blur","updateFocus"],values:["isFocused"]},Fh={evts:["init","populateWithComment","change","key","keyCommand","returnKey","input","pasteText","pasteHTML","insertMacro","focus","blur","compositionStart","compositionEnd","readOnly"],values:["editorKey","editorState","readOnly","decorators","isComposing","isFocused","blockRenderers"]},Kh={evts:["cancel","post"],values:["content"]},Lh={evts:["update","apply","updateMacroRef","updateVisibility"],values:["active","macroRef","isVisible"]},Uh={evts:["queryUpdate","onApplyMentionToRange"],values:["userMap","users"]},qh={evts:["updateSelectedIndex","updateTotalSuggestions","up","down"],values:["selectedIndex","totalSuggestions"]},Hh={evts:["updateLinkPromptProps","createLink","openLink"],values:["linkPromptProps"]},Wh={evts:["updatePopupProps","onShare","onShareCompleted"],values:["popupProps"]},Vh={draft:Fh,comment:Kh,macro:Lh,suggestion:qh,mentionSuggestions:Uh,container:Nh,mentionShareFlow:Wh,hyperlink:Hh};function $h(e){return function(t,r){return[...e,null].reverse().reduce((function({nodes:e,result:t},r){const n=e.shift();return{nodes:e,result:null!==r?Object.assign(Object.assign({},n),{[r]:t}):t}}),{nodes:e.reduce((function([e,...t],r){return[e[r]||{},e,...t]}),[t]),result:r}).result}}function Gh(e,t){return Object.assign({},e.reduce((function(e,r){return Object.assign(Object.assign({},e),{[r]:t(r)})}),{}))}function Qh(e){return Gh(Object.keys(e),(function(t){return{__place__:$h(["composers",t]),on:Gh(e[t].evts,(function(r){return{__place__:$h(["reducers",t,"evts",r]),update:Gh(e[t].values,(function(e){return{__place__:$h(["reducers",t,"values",e,r])}}))}}))}}))}function Jh(e){return function(t,r){const n=t.scope;t.scope=function(){return e.__place__(n&&n.call(this)||{},t[r].bind(this))}}}const Xh=e=>({scope:()=>e}),Yh=Qh(Vh);function Zh(){return{draft:{editorKey:jh.genKey(),editorState:jh.EditorState.createEmpty(),decorators:[],blockRenderers:{},readOnly:!1,isComposing:!1,isFocused:!1,containerPostOnBlur:!1},comment:{content:{text:"",metadata:[]}},macro:{active:null,macroRef:null,isVisible:!0},suggestion:{selectedIndex:-1,totalSuggestions:0},mentionShareFlow:{popupProps:null},mentionSuggestions:{userMap:{},users:null},container:{isFocused:!1},hyperlink:{linkPromptProps:null}}}function eg(e,t){return Object.keys(t).reduce((function(t,r){if(!(r in e)||!e[r])throw new TypeError(`${r} is an unsupported feature`);return Object.assign(Object.assign({},t),{[r]:e[r]})}),{})}function tg(e){return eg(Zh(),e)}class rg{}class ng extends rg{updateEditorState(e){return e.innerProps.evt}handleKeyCommand(e){const{evt:t,value:r}=e.innerProps,n=jh.RichUtils.handleKeyCommand(r,t);return n||r}handleCompositionStart(){return!0}handleCompositionEnd(){return!1}setFocused(){return!0}setBlurred(){return!1}}c.__decorate([Jh(Yh.draft.on.change.update.editorState)],ng.prototype,"updateEditorState",null),c.__decorate([Jh(Yh.draft.on.keyCommand.update.editorState)],ng.prototype,"handleKeyCommand",null),c.__decorate([Jh(Yh.draft.on.compositionStart.update.isComposing)],ng.prototype,"handleCompositionStart",null),c.__decorate([Jh(Yh.draft.on.compositionEnd.update.isComposing)],ng.prototype,"handleCompositionEnd",null),c.__decorate([Jh(Yh.draft.on.focus.update.isFocused)],ng.prototype,"setFocused",null),c.__decorate([Jh(Yh.draft.on.blur.update.isFocused)],ng.prototype,"setBlurred",null);class og extends rg{initText(e){const{evt:t}=e.innerProps;return jh.EditorState.createWithContent(jh.ContentState.createFromText(t.text))}postText(e){const{evt:t}=e.innerProps;return{metadata:[],text:t.getCurrentContent().getPlainText()}}}c.__decorate([Jh(Yh.draft.on.populateWithComment.update.editorState)],og.prototype,"initText",null),c.__decorate([Jh(Yh.comment.on.post.update.content)],og.prototype,"postText",null);class ig extends rg{triggerInit(e){const t=e.status.comment.content;if(e.innerProps.prevStatus.comment.content!==t){e.triggers.draft.init(null);const{editorState:r}=e.triggers.draft.populateWithComment(t);e.triggers.draft.change(r)}}triggerChange(e){const{editorState:t}=e.status.draft;e.innerProps.prevStatus.draft.editorState!==t&&e.triggers.draft.change(t)}addDecoratorsOnChange(e){const{value:t}=e.innerProps,{decorators:r}=e.status.draft;return null===t.getDecorator()?this.addDecorators(t,r):void 0}addDecorators(e,t){return jh.EditorState.set(e,{decorator:new jh.CompositeDecorator(t)})}}c.__decorate([Jh(Yh.comment)],ig.prototype,"triggerInit",null),c.__decorate([Jh(Yh.draft)],ig.prototype,"triggerChange",null),c.__decorate([Jh(Yh.draft.on.change.update.editorState)],ig.prototype,"addDecoratorsOnChange",null);var ag={exports:{}};function sg(e){return 0===e.getCurrentContent().getPlainText().length}function cg(e,t){return jh.EditorState.forceSelection(jh.EditorState.push(e,t,"insert-fragment"),t.getSelectionAfter())}function lg(e,t,r,n,o,i){return jh.Modifier.replaceText(e,jh.SelectionState.createEmpty(t).merge({anchorOffset:r,focusOffset:n}),o,void 0,i)}function ug(e,t){let r=null,n=null;const o=e.start,i=e.end;let a,s,c=0;if(t.getBlockMap().forEach(((e,t)=>{if(e&&"atomic"!==e.getType()){const l=pg(e.getText());if(t&&null===r&&o<c+l.length){r=t;const e=o-c;a=fg(l.slice(0,e)).length}if(t&&null===n&&i<=c+l.length){n=t;const e=i-c;s=fg(l.slice(0,e)).length}c+=l.length}return r&&n})),!r||!n)throw new Error("Bad range");return jh.SelectionState.createEmpty(r).merge({anchorKey:r,anchorOffset:a,focusKey:n,focusOffset:s})}function dg(e){return e.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}!function(e,t){!function(r){var n=t&&!t.nodeType&&t,o=e&&!e.nodeType&&e,i="object"==typeof l.commonjsGlobal&&l.commonjsGlobal;i.global!==i&&i.window!==i&&i.self!==i||(r=i);var a,s,c=2147483647,u=36,d=/^xn--/,p=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,g=String.fromCharCode;function _(e){throw new RangeError(m[e])}function v(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function y(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+v((e=e.replace(f,".")).split("."),t).join(".")}function b(e){for(var t,r,n=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function x(e){return v(e,(function(e){var t="";return e>65535&&(t+=g((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=g(e)})).join("")}function S(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,r){var n=0;for(e=r?h(e/700):e>>1,e+=h(e/t);e>455;n+=u)e=h(e/35);return h(n+36*e/(e+38))}function E(e){var t,r,n,o,i,a,s,l,d,p,f,m=[],g=e.length,v=0,y=128,b=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&_("not-basic"),m.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<g;){for(i=v,a=1,s=u;o>=g&&_("invalid-input"),((l=(f=e.charCodeAt(o++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:u)>=u||l>h((c-v)/a))&&_("overflow"),v+=l*a,!(l<(d=s<=b?1:s>=b+26?26:s-b));s+=u)a>h(c/(p=u-d))&&_("overflow"),a*=p;b=w(v-i,t=m.length+1,0==i),h(v/t)>c-y&&_("overflow"),y+=h(v/t),v%=t,m.splice(v++,0,y)}return x(m)}function k(e){var t,r,n,o,i,a,s,l,d,p,f,m,v,y,x,E=[];for(m=(e=b(e)).length,t=128,r=0,i=72,a=0;a<m;++a)(f=e[a])<128&&E.push(g(f));for(n=o=E.length,o&&E.push("-");n<m;){for(s=c,a=0;a<m;++a)(f=e[a])>=t&&f<s&&(s=f);for(s-t>h((c-r)/(v=n+1))&&_("overflow"),r+=(s-t)*v,t=s,a=0;a<m;++a)if((f=e[a])<t&&++r>c&&_("overflow"),f==t){for(l=r,d=u;!(l<(p=d<=i?1:d>=i+26?26:d-i));d+=u)x=l-p,y=u-p,E.push(g(S(p+x%y,0))),l=h(x/y);E.push(g(S(l,0))),i=w(r,v,n==o),r=0,++n}++r,++t}return E.join("")}if(a={version:"1.4.1",ucs2:{decode:b,encode:x},decode:E,encode:k,toASCII:function(e){return y(e,(function(e){return p.test(e)?"xn--"+k(e):e}))},toUnicode:function(e){return y(e,(function(e){return d.test(e)?E(e.slice(4).toLowerCase()):e}))}},n&&o)if(e.exports==n)o.exports=a;else for(s in a)a.hasOwnProperty(s)&&(n[s]=a[s]);else r.punycode=a}(l.commonjsGlobal)}(ag,ag.exports),ag.exports;const pg=e=>ag.exports.ucs2.decode(e),fg=e=>ag.exports.ucs2.encode(e);function mg(e){if("img"===e.tagName.toLowerCase()){const t=e.getAttribute("data-emoji-ch");if(t){const e=document.createElement("span");return e.textContent=t,e}}return e}function hg(e){const t=e.style,r=e.tagName.toLowerCase();let n=[];return(parseInt(t.fontWeight||"0",10)>=600||"bold"===t.fontWeight||"b"===r||"strong"===r)&&(n=[...n,"BOLD"]),"underline"!==t.textDecoration&&"u"!==r||(n=[...n,"UNDERLINE"]),"strikethrough"!==t.textDecoration&&"s"!==r&&"strike"!==r||(n=[...n,"STRIKETHROUGH"]),"italic"!==t.fontStyle&&"i"!==r&&"em"!==r||(n=[...n,"ITALIC"]),n}function gg(e){const t=e.getSelection(),r=e.getCurrentContent(),n=t.getStartKey(),o=t.getEndKey(),i=r.getBlockMap();return i.toSeq().skipUntil(((e,t)=>t===n)).takeUntil(((e,t)=>t===o)).concat([[o,i.get(o)]]).toList()}class _g extends rg{initStyle(e){const{value:t,evt:r}=e.innerProps,{styles:n}=this.splitStyles(r.metadata);return jh.EditorState.createWithContent(n.reduce(((e,t)=>{const r=ug(t.location,e);return jh.Modifier.applyInlineStyle(e,r,t.style.toUpperCase())}),t.getCurrentContent()))}postStyles(e){const{evt:t,value:r}=e.innerProps,n=this.getStyleMetadata(jh.convertToRaw(t.getCurrentContent())),{other:o}=this.splitStyles(r.metadata);return Object.assign(Object.assign({},r),{metadata:[...o,...n]})}getStyleMetadata(e){const{blocks:t}=e,{metadata:r}=t.reduce(((e,t)=>{const{metadata:r,pos:n}=e;return{metadata:[...r,...t.inlineStyleRanges.map((function(e){return{type:"style",style:e.style.toLowerCase(),location:{start:n+e.offset,end:n+e.offset+e.length}}}))],pos:n+pg(t.text).length}}),{metadata:[],pos:0});return r}splitStyles(e){return e.reduce(((e,t)=>"style"===t.type?{styles:[...e.styles,t],other:e.other}:{styles:e.styles,other:[...e.other,t]}),{styles:[],other:[]})}}function vg(e){const{value:t}=e.innerProps;return t}c.__decorate([Jh(Yh.draft.on.populateWithComment.update.editorState)],_g.prototype,"initStyle",null),c.__decorate([Jh(Yh.comment.on.post.update.content)],_g.prototype,"postStyles",null);class yg{constructor(e,t,r){this.evts={},this.values={};for(const n of t.evts)this.evts[n]=r=>yg.reduceValue(e,t.values,n,r.innerProps.evt,this.values,r.innerProps.value,r.kernel),this.evts[n]=r.reduce((function(e,t){return function(r){const{innerProps:{evt:o,value:i},kernel:a}=r,s=t.evts&&t.evts[n],c=a.compose(e,{evt:o,value:i});if(void 0!==s){const e=a.compose(s,{evt:o,value:void 0!==c?c:i});if(void 0!==e)return e}return c}}),this.evts[n]);for(const n of t.values){const o=r.reduce((function(e,t){const r=t.values&&t.values[n];return void 0!==r?[...e,r]:e}),[]);this.values[n]={};for(const r in t.evts){const i=t.evts[r];this.values[n][i]=yg.reducePartialReducers(e,n,i,o,vg)}}}static reducePartialReducers(e,t,r,n,o){return n.reduce((function(n,o){return function(i){const{innerProps:{evt:a,value:s},kernel:c}=i,l=o[r];if(void 0!==l){const r=l;let o=c.compose(n,{evt:a,value:s});o=void 0!==o?c.compose((function(r){return Object.assign(Object.assign({},r.status[e]),{[t]:o})}))[t]:s;const i=c.compose(r,{evt:a,value:o});return void 0!==i?i:o}const u=c.compose(n,{evt:a,value:s});return void 0!==u?u:s}}),o)}static reduceValue(e,t,r,n,o,i,a){return t.reduce((function(t,s){const c=o[s],l=a.compose(c[r],{evt:n,value:i[s]});return void 0!==l?a.compose((function(r){return r.featureTriggers[e](Object.assign(Object.assign({},t),{[s]:l}))})):a.compose((function(t){return t.status[e]}))}),i)}}class bg{constructor(e,t,r){this.composers={};for(const t in e)this.composers[t]=function(e){e.innerProps.initial&&e.kernel.compose(e.innerProps.initial,{prevStatus:e.status}),r.forEach((function(r){void 0!==r[t]&&e.kernel.compose(r[t],{prevStatus:e.status})}))};this.reducers=bg.completeScopeReducers(e,t)}static create(e,t,r){return new bg(e,t,r)}static completeScopeReducers(e,t){const r={};for(const n in e)r[n]={evts:{},values:{}},r[n]=new yg(n,e[n],t.reduce((function(e,t){const r=t[n];return void 0!==r&&e.push(r),e}),[]));return r}}function xg(e,t,r,n,o){const i={};for(const a of e)i[a]=function(e){return o.compose((function(i){const s=i.status[n],c=o.compose(t[a],{evt:e,value:s});return r(c)}))};return i}class Sg extends class{constructor(e){this.listeners=[],this.status=e}setStatus(e,t=!1){this.status=Object.assign(Object.assign({},this.status),e),t||this.listeners.forEach((e=>e(this.getStatus())))}getStatus(){return this.status}subscribe(e){return this.listeners.push(e),{unsubscribe:()=>this.listeners=this.listeners.filter((t=>t!==e))}}}{constructor({scopeNames:e,defaultStatus:t}){super(t),this.scopeNames=e,this.memoizedCreateKernelAndTriggers=this.makeMemoizedCreateKernelAndTriggers()}makeMemoizedCreateKernelAndTriggers(){let e,t,r,n;return o=>(n!==o&&(e=this.createKernel(o),r=this.createFeatureTriggers(o),t=this.createTriggers(o,e,r),n=o),{kernel:e,triggers:t,featureTriggers:r})}createTriggers(e,t,r){return function(e,t,r,n){let o={};for(const i in t.reducers)o=Object.assign(Object.assign({},o),{[i]:xg(e[i].evts,t.reducers[i].evts,r[i],i,n)});return o}(this.scopeNames,e,r||this.createFeatureTriggers(e),t||this.createKernel(e))}getTriggers(e){return this.memoizedCreateKernelAndTriggers(e).triggers}compose(e,t,r){const n=this.getStatus(),{kernel:o,featureTriggers:i,triggers:a}=this.memoizedCreateKernelAndTriggers(t);return e({status:n,triggers:a,innerProps:r,kernel:o,featureTriggers:i})}updateStatus(e,t){const r=this.createFeatureTriggers(t),n=this.getStatus();for(const t in e){const o=e[t];n[t]!==o&&r[t](o)}return this.getStatus()}createKernel(e){return{compose:(t,r)=>this.compose(t,e,r)}}createFeatureTriggers(e){const t={};for(const r in this.scopeNames)t[r]=t=>{const n=this.getStatus();return this.compose(e.composers[r],e,{prevStatus:n,initial:()=>{this.setStatus(Object.assign(Object.assign({},n),{[r]:t}))}}),t};return t}}class wg extends t.react.exports.Component{constructor(e){super(e),this.subscriptionHandle={unsubscribe:()=>{}},this.handleContainerStatus=e=>{this.setState({status:e})},this.subscribeToContainer(e.container)}UNSAFE_componentWillReceiveProps(e){e.container!==this.props.container&&this.subscribeToContainer(e.container)}subscribeToContainer(e){this.subscriptionHandle.unsubscribe(),this.subscriptionHandle=e.subscribe(this.handleContainerStatus)}componentWillUnmount(){var e;null===(e=this.subscriptionHandle)||void 0===e||e.unsubscribe()}getChildContext(){return{container:this.props.container,scope:this.props.scope}}render(){return t.react.exports.createElement("div",null,this.props.children)}}function Eg(e,t){for(let r in e)if(e[r]!==t[r])return!1;return!0}wg.childContextTypes={container:r.PropTypes.object,scope:r.PropTypes.object},r.PropTypes.object,r.PropTypes.object;class kg extends t.react.exports.Component{constructor(){super(...arguments),this._container=new Sg({scopeNames:this.scopeNames,defaultStatus:this.createDefaultStatus()})}getLayerProps(e){return{}}UNSAFE_componentWillMount(){this.updateContainerStatus(this.props),this.subscribeToContainer()}UNSAFE_componentWillReceiveProps(e){Eg(this.getLayerProps(this.props),this.getLayerProps(e))||(this.cachedScope=void 0),this.updateContainerStatus(e)}componentWillUnmount(){this.unsubscribeFromContainer()}updateContainerStatus(e){this.container.updateStatus(this.mapPropsToUpdates(e,this.container.getStatus()),this.scope)}reloadCachedScope(){return function(e,t){const r=[],n=[];return t.forEach((e=>{const t=e.scope();t.reducers&&r.push(t.reducers),t.composers&&n.push(t.composers)})),bg.create(e,r,n)}(this.scopeNames,this.mapPropsToLayers(this.props))}get container(){return this._container}get scope(){return this.cachedScope||(this.cachedScope=this.reloadCachedScope()),this.cachedScope}render(){return t.react.exports.createElement(wg,{scope:this.scope,container:this.container},this.props.children)}subscribeToContainer(){this.subscriptionHandle=this.container.subscribe((e=>{this.setState(e)}))}unsubscribeFromContainer(){var e;null===(e=this.subscriptionHandle)||void 0===e||e.unsubscribe()}}kg.displayName="EditorContainer";const Cg={evts:["updateActiveFormatting"],values:["activeFormatting"]},Mg={evts:["toggleTaskBlock","setTaskState"],values:[]},Tg={evts:["setClassName"],values:["classNames"]},Ag={evts:["setCaptureTab"],values:["captureTab"]},Og={evts:[],values:["editorState"]};const Dg=Qh(Object.assign(Object.assign({},Vh),{folderOverview:Og,fixedToolbar:Cg,globalStyle:Tg,task:Mg,accessibility:Ag})),Ig=["mailto:","webcal:","tel:"],Rg=e=>{if(!e||!e.trim().length)return!1;try{const t=new URL(e);return!!t.host||Ig.includes(t.protocol)}catch(e){return!1}};class Bg extends t.react.exports.Component{constructor(){super(...arguments),this.onClick=e=>{const t=e.currentTarget.href;t&&Rg(t)&&(this.props.onOpenLink(t),e.preventDefault(),e.stopPropagation())},this.onMouseUp=e=>{e.preventDefault(),e.stopPropagation()},this.onMouseDown=e=>{e.preventDefault(),e.stopPropagation()}}getUrl(){const{url:e}=this.props.contentState.getEntity(this.props.entityKey).getData();return(e=>(e&&Ig.filter((t=>e.trim().startsWith(t))).length||e.match(/^[a-zA-Z0-9\+\-\.]+:\/\//)||(e="http://"+e),e))(e)}render(){const e=this.getUrl();return t.react.exports.createElement("a",{className:zh.scEditorHref,href:e,onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,title:e},this.props.children)}}Bg.displayName="LinkSpanComponent";r.injectInternalStyle("typescript/libraries/comments2/src/components/comment_editor/index.module.out.css",(e=>"._sc-comment-editor_1n7jd_1{position:relative}._mention-suggestion-list_1n7jd_5{-webkit-user-select:none;user-select:none}._mention-suggestion-row_1n7jd_9{display:flex}._sc-comment-editor-prefix_1n7jd_13{float:left;position:relative;z-index:2}._sc-comment-editor-right-accessory_1n7jd_19{margin-right:4px;margin-top:4px}._sc-comment-editor-placeholder_1n7jd_24{color:var(--color_ink_40);position:absolute;top:16px;white-space:nowrap;width:100%}._sc-comment-editor-inner--disabled_1n7jd_33 ._sc-comment-editor-placeholder_1n7jd_24{z-index:2}._sc-comment-editor-mentions-list-container_1n7jd_37{background:var(--color__standard__background);font-size:12px;max-height:180px;overflow-x:hidden;overflow-y:auto;width:calc(100% - 10px);z-index:1000}._sc-comment-editor-mentions-list_1n7jd_37{list-style:none;margin:0;padding:0}._sc-comment-editor-mentions-suggestion_1n7jd_53{background:inherit;border:none;font-size:12px;padding:8px;width:100%}._sc-comment-editor-mentions-suggestion_1n7jd_53>div{align-items:center;display:flex;text-align:left}._sc-comment-editor-mentions-suggestion_1n7jd_53 .mc-avatar,._sc-comment-editor-mentions-suggestion_1n7jd_53 .mc-avatar-text{margin-right:8px}._sc-comment-editor-mentions-email_1n7jd_73,._sc-comment-editor-mentions-name_1n7jd_72{overflow:hidden;text-overflow:ellipsis}._sc-comment-editor-mentions-name_1n7jd_72{font-size:var(--type__body__standard--fontsize)}._sc-comment-editor-mentions-email_1n7jd_73{font-size:var(--type__body__small--fontsize)}._active-macro-chrome_1n7jd_86{position:absolute;-webkit-user-select:none;user-select:none;width:100%;z-index:1000}._sc-comment-editor-mentions-user_1n7jd_93{overflow:hidden;white-space:nowrap}._sc-comment-editor-inner_1n7jd_33,._sc-comment-renderer-inner_1n7jd_99{position:relative;word-break:break-word}._sc-comment-editor-interaction-container_1n7jd_104{position:relative}._sc-comment-editor-draft_1n7jd_108{max-height:40vh;overflow:auto}._sc-comment-editor-controls_1n7jd_113{align-items:center;display:flex;height:100%;position:relative}._sc-comment-editor-controls_1n7jd_113 ._sc-comment-editor-controls-right_1n7jd_120{margin-left:auto;white-space:nowrap}._sc-comment-editor-inline-controls_1n7jd_126{align-items:center;display:flex;justify-items:center;z-index:10}._sc-comment-editor-style-bold_1n7jd_134{font-weight:700}._sc-comment-editor-style-code_1n7jd_138{word-wrap:break-word}._sc-comment-editor-style-italic_1n7jd_142{font-style:italic}._sc-comment-editor-style-strikethrough_1n7jd_146._sc-comment-editor-style-underline_1n7jd_146{text-decoration:line-through underline}._sc-comment-editor-style-strikethrough_1n7jd_146{text-decoration:line-through}._sc-comment-editor-style-underline_1n7jd_146{text-decoration:underline}._sc-comment-editor-coach-mark-container_1n7jd_160{position:relative}._sc-comment-editor-sticker_1n7jd_164{height:112px;width:112px}._sc-comment-editor-atomic-block_1n7jd_169{clear:both}._sc-comment-editor-control-btn_1n7jd_173 svg.mc-icon{height:100%;width:100%}._sc-comment-editor-tagline_1n7jd_178{color:var(--unified_color_text_subtext);font-size:var(--unified_font_size_small);padding:8px 16px}._sc-comment-editor_1n7jd_1{font-size:var(--web_comment_font_size);line-height:var(--web_comment_line_height)}._sc-comment-editor-prefix_1n7jd_13{height:20px}._sc-comment-editor_1n7jd_1 ._sc-comment-editor-prefix_1n7jd_13{padding:16px 0 0 58px}._sc-comment-editor-mentions-list-container_1n7jd_37{-webkit-font-smoothing:antialiased;border:1px solid var(--color_stone_forty)}._sc-comment-editor-mentions-suggestion_1n7jd_53{border-top:1px solid var(--color_stone_forty);font-size:var(--type__body__small--fontsize)}._sc-comment-editor-mentions-email_1n7jd_73{color:var(--color_stone)}._sc-comment-editor-mentions-list-header_1n7jd_214{color:var(--color_stone);padding:8px}._sc-comment-editor-mentions-suggestion_1n7jd_53._sc-comment-editor-mentions-suggestion-selected_1n7jd_220,._sc-comment-editor-mentions-suggestion_1n7jd_53:hover{background-color:var(--color_blue_sixteen)}._sc-comment-editor-inner_1n7jd_33 .DraftEditor-editorContainer [data-contents=true],._sc-comment-editor-inner_1n7jd_33 .public-DraftEditorPlaceholder-root{padding:16px 16px 16px 58px}._sc-comment-renderer-inner_1n7jd_99{padding:8px 16px 8px 58px}._sc-comment-editor-controls-container_1n7jd_235{background:inherit;height:40px;padding:0 8px}._sc-comment-editor-mention_1n7jd_37{color:var(--color__attention__text)}._sc-comment-editor_1n7jd_1._pending_1n7jd_245{color:var(--color__faint__text)}._sc-comment-editor-inner--disabled_1n7jd_33{background:var(--color__faint__background)}._sc-comment-editor-inner--right-rail_1n7jd_254{color:var(--color__standard__text);display:flex;font-family:var(--type__body__standard--fontfamily);font-size:var(--type__body__small--fontsize);line-height:var(--type__body__standard--lineheight)}._sc-comment-editor-inner--right-rail_1n7jd_254 ._sc-comment-editor-interaction-container_1n7jd_104{flex-grow:1;margin-left:6px}._sc-comment-editor-inner--right-rail_1n7jd_254 ._sc-comment-editor-prefix_1n7jd_13{padding:5px 0 0}._sc-comment-editor-inner--right-rail_1n7jd_254 .DraftEditor-editorContainer [data-contents=true],._sc-comment-editor-inner--right-rail_1n7jd_254 .public-DraftEditorPlaceholder-root{border-left:0;padding:5px 16px 5px 0}._sc-comment-editor-inner--right-rail_1n7jd_254 ._sc-comment-editor-placeholder_1n7jd_24{top:6px}._sc-comment-editor-avatar-wrapper_1n7jd_284{margin-left:6px;margin-top:4px}._sc-comment-editor-controls-post--right-rail_1n7jd_289{margin-left:8px}._sc-comment-editor-controls-cancel--right-rail_1n7jd_293{color:var(--color__faint__text);margin-left:8px}._sc-comment-editor-mention-btn_1n7jd_298{color:var(--color__faint__text)}._sc-comment-editor-post-bar-left-wrapper_1n7jd_302{display:flex}._sc-comment-editor-post-bar-annotation_1n7jd_306{align-items:center;display:flex;height:24px;margin-left:8px}._sc-comment-editor-tagline_1n7jd_178:empty{padding:0}"));const Pg={scCommentEditor:"_sc-comment-editor_1n7jd_1",mentionSuggestionList:"_mention-suggestion-list_1n7jd_5",mentionSuggestionRow:"_mention-suggestion-row_1n7jd_9",scCommentEditorPrefix:"_sc-comment-editor-prefix_1n7jd_13",scCommentEditorRightAccessory:"_sc-comment-editor-right-accessory_1n7jd_19",scCommentEditorPlaceholder:"_sc-comment-editor-placeholder_1n7jd_24",scCommentEditorInnerDisabled:"_sc-comment-editor-inner--disabled_1n7jd_33",scCommentEditorMentionsListContainer:"_sc-comment-editor-mentions-list-container_1n7jd_37",scCommentEditorMentionsList:"_sc-comment-editor-mentions-list_1n7jd_37",scCommentEditorMentionsSuggestion:"_sc-comment-editor-mentions-suggestion_1n7jd_53",scCommentEditorMentionsEmail:"_sc-comment-editor-mentions-email_1n7jd_73",scCommentEditorMentionsName:"_sc-comment-editor-mentions-name_1n7jd_72",activeMacroChrome:"_active-macro-chrome_1n7jd_86",scCommentEditorMentionsUser:"_sc-comment-editor-mentions-user_1n7jd_93",scCommentEditorInner:"_sc-comment-editor-inner_1n7jd_33",scCommentRendererInner:"_sc-comment-renderer-inner_1n7jd_99",scCommentEditorInteractionContainer:"_sc-comment-editor-interaction-container_1n7jd_104",scCommentEditorDraft:"_sc-comment-editor-draft_1n7jd_108",scCommentEditorControls:"_sc-comment-editor-controls_1n7jd_113",scCommentEditorControlsRight:"_sc-comment-editor-controls-right_1n7jd_120",scCommentEditorInlineControls:"_sc-comment-editor-inline-controls_1n7jd_126",scCommentEditorStyleBold:"_sc-comment-editor-style-bold_1n7jd_134",scCommentEditorStyleCode:"_sc-comment-editor-style-code_1n7jd_138",scCommentEditorStyleItalic:"_sc-comment-editor-style-italic_1n7jd_142",scCommentEditorStyleStrikethrough:"_sc-comment-editor-style-strikethrough_1n7jd_146",scCommentEditorStyleUnderline:"_sc-comment-editor-style-underline_1n7jd_146",scCommentEditorCoachMarkContainer:"_sc-comment-editor-coach-mark-container_1n7jd_160",scCommentEditorSticker:"_sc-comment-editor-sticker_1n7jd_164",scCommentEditorAtomicBlock:"_sc-comment-editor-atomic-block_1n7jd_169",scCommentEditorControlBtn:"_sc-comment-editor-control-btn_1n7jd_173",scCommentEditorTagline:"_sc-comment-editor-tagline_1n7jd_178",scCommentEditorMentionsListHeader:"_sc-comment-editor-mentions-list-header_1n7jd_214",scCommentEditorMentionsSuggestionSelected:"_sc-comment-editor-mentions-suggestion-selected_1n7jd_220",scCommentEditorControlsContainer:"_sc-comment-editor-controls-container_1n7jd_235",scCommentEditorMention:"_sc-comment-editor-mention_1n7jd_37",pending:"_pending_1n7jd_245",scCommentEditorInnerRightRail:"_sc-comment-editor-inner--right-rail_1n7jd_254",scCommentEditorAvatarWrapper:"_sc-comment-editor-avatar-wrapper_1n7jd_284",scCommentEditorControlsPostRightRail:"_sc-comment-editor-controls-post--right-rail_1n7jd_289",scCommentEditorControlsCancelRightRail:"_sc-comment-editor-controls-cancel--right-rail_1n7jd_293",scCommentEditorMentionBtn:"_sc-comment-editor-mention-btn_1n7jd_298",scCommentEditorPostBarLeftWrapper:"_sc-comment-editor-post-bar-left-wrapper_1n7jd_302",scCommentEditorPostBarAnnotation:"_sc-comment-editor-post-bar-annotation_1n7jd_306"};function jg(e){const n=e.contentState.getEntity(e.entityKey),o=n&&n.getData().pending,i=r.classnames(Pg.scCommentEditorMention,{[Pg.pending]:o});return t.react.exports.createElement("span",{className:i,"data-entity-key":e.entityKey,"data-editor":e.editorKey},e.children)}class zg extends rg{addDecorators(e){return[...e.innerProps.value,{strategy:function(e,t,r){e.findEntityRanges((function(e){const t=e.getEntity();return null!==t&&"mention"===r.getEntity(t).getType()}),t)},props:{editorKey:e.status.draft.editorKey},component:jg}]}initMentions(e){const{value:t,evt:r}=e.innerProps,{mentions:n}=this.splitMentions(r.metadata);return jh.EditorState.createWithContent(n.reduce(((e,t)=>{const r=e.createEntity("mention","IMMUTABLE",{identifier:t.user.identifier,type:t.user.type}),n=r.getLastCreatedEntityKey(),o=ug(t.location,r);return jh.Modifier.applyEntity(e,o,n)}),t.getCurrentContent()))}postMentions(e){const{evt:t,value:r}=e.innerProps,n=this.getMentionMetadata(jh.convertToRaw(t.getCurrentContent())),{other:o}=this.splitMentions(r.metadata);return Object.assign(Object.assign({},r),{metadata:[...o,...n]})}getMentionMetadata(e){const{blocks:t}=e,{metadata:r}=t.reduce(((t,r)=>{const{metadata:n,pos:o}=t;return{metadata:[...n,...r.entityRanges.filter((function(t){return"mention"===e.entityMap[t.key].type})).map((function(t){const r=e.entityMap[t.key].data;return{type:"mention",user:{type:r.type,identifier:r.identifier},location:{start:o+t.offset,end:o+t.offset+t.length}}}))],pos:o+pg(r.text).length}}),{metadata:[],pos:0});return r}splitMentions(e){return e.reduce(((e,t)=>"mention"===t.type?{mentions:[...e.mentions,t],other:e.other}:{mentions:e.mentions,other:[...e.other,t]}),{mentions:[],other:[]})}}c.__decorate([Jh(Yh.draft.on.init.update.decorators)],zg.prototype,"addDecorators",null),c.__decorate([Jh(Yh.draft.on.populateWithComment.update.editorState)],zg.prototype,"initMentions",null),c.__decorate([Jh(Yh.comment.on.post.update.content)],zg.prototype,"postMentions",null);const Ng=({style:e,className:r,children:n},{container:o,scope:i})=>{const a=o.getTriggers(i);return t.react.exports.createElement("span",{className:"active-macro",ref:a.macro.updateMacroRef},t.react.exports.createElement("span",{className:r,style:e},n))};Ng.displayName="ActiveMacroSpanComponent",Ng.contextTypes={container:r.PropTypes.object,scope:r.PropTypes.object};class Fg extends rg{constructor(e){super(),this.options=e}addDecorators(e){const{value:t}=e.innerProps;return[...t,{strategy:this.findActiveMacros.bind(this,this.options.type),component:Ng,props:this.options.spanProps}]}checkForActiveMacro(e){const{kernel:t,triggers:r}=e,n=this.onMacro,{delimiter:o,type:i}=this.options,a=e.status.draft.editorState,s=a.getSelection();if(s.isCollapsed()){const c=a.getCurrentContent(),l=s.getAnchorKey(),u=c.getBlockForKey(l),d=s.getAnchorOffset(),p=u.getEntityAt(d)||u.getEntityAt(d-1);if(null!==p&&c.getEntity(p).getType()===i){let a="",s=-1,c=-1;u.findEntityRanges((function(e){return e.getEntity()===p}),(function(e,t){s=e,c=t,a=u.getText().substring(e,t)}));const d=e.status.macro.active;(d&&d.entityKey!==p||a.length&&(!d||d.content!==a))&&r.macro.update(t.compose(n,{delimiter:o,content:a,entityKey:p,blockKey:l,macroStartOffset:s,macroEndOffset:c,type:i})||null)}else r.macro.update(null),r.macro.updateVisibility(!0)}}applyMacroOnRightArrow(e){const{status:t,innerProps:{evt:r}}=e,n=t.macro;if(n.active&&39===r.which&&n.active.type===this.options.type){e.innerProps.value.getSelection().getAnchorOffset()>=n.active.endOffset&&(e.triggers.macro.apply(null),r.preventDefault())}}applyMacroOnReturn(e){const{triggers:t,status:r}=e,n=r.macro;n.active&&n.active.type===this.options.type&&t.macro.apply(null)}insertMacro(e){const{delimiter:t}=this.options,{status:r,innerProps:{value:n}}=e;if(r.macro.active)return n;const o=n.getSelection(),i=n.getCurrentContent().getBlockForKey(o.getAnchorKey()).getText(),a=o.getStartOffset();function s(e,t,r){const n=e.getSelection();return cg(e,lg(e.getCurrentContent(),n.getFocusKey(),n.getStartOffset(),n.getEndOffset(),t,r))}let c=n;0!==a&&" "!==i.substr(a-1,1)&&(c=s(n," "));const l=c.getCurrentContent().createEntity(this.options.type,"MUTABLE");return s(c,t,l.getLastCreatedEntityKey())}updateActiveMacroEntity(e){const{delimiter:t}=this.options,{evt:r,value:n}=e.innerProps,o=n.getSelection(),i=n.getCurrentContent(),a=i.getBlockForKey(o.getAnchorKey());if(t.lastIndexOf(r)===t.length-1){const s=a.getText(),c=o.getStartOffset(),l=o.getEndOffset(),u=a.getEntityAt(c)||a.getEntityAt(c-1);if(null!==u&&0===i.getEntity(u).getType().indexOf("macro: ")){return cg(n,jh.Modifier.replaceText(i,o,r,void 0,u))}{const o=e.kernel.compose(this.onDelimiter,{text:s,startOffset:c,endOffset:l,input:r,delimiter:t});if(void 0!==o){const e=i.createEntity(this.options.type,"MUTABLE").getLastCreatedEntityKey();return cg(n,lg(i,a.getKey(),o.start,o.end,o.text,e))}}}const s=o.getAnchorOffset(),c=a.getEntityAt(s)||a.getEntityAt(s-1);if(null!==c&&i.getEntity(c).getType()===this.options.type){if(" "===r){let e=i;if(a.findEntityRanges((function(e){return e.getEntity()===c}),(function(t,n){const s=a.getText().substring(t,n);s.match(/\s/)&&(e=lg(i,o.getAnchorKey(),t,n,s+r))})),e!==i)return cg(n,e)}return cg(n,jh.Modifier.replaceText(i,o,r,void 0,c))}return n}updateActiveMacros(e){const{evt:t}=e.innerProps;return null===t?null:t&&t.type===this.options.type?t:void 0}updateMacroRef(e){const{active:t}=e.status.macro,{evt:r}=e.innerProps;return t&&t.type===this.options.type?r:void 0}updateVisibility(e){const{active:t}=e.status.macro,{evt:r}=e.innerProps;return t&&t.type!==this.options.type?void 0:r}applyMacro(e){const t=e.status.macro;t.active&&t.active.type===this.options.type&&e.kernel.compose(this.onAutoComplete)}findActiveMacros(e,t,r,n){t.findEntityRanges((function(t){const r=t.getEntity();return null!==r&&n.getEntity(r).getType()===e}),r)}}c.__decorate([Jh(Yh.draft.on.init.update.decorators)],Fg.prototype,"addDecorators",null),c.__decorate([Jh(Yh.draft.on.change.update.editorState)],Fg.prototype,"checkForActiveMacro",null),c.__decorate([Jh(Yh.draft.on.key.update.editorState)],Fg.prototype,"applyMacroOnRightArrow",null),c.__decorate([Jh(Yh.draft.on.returnKey.update.editorState)],Fg.prototype,"applyMacroOnReturn",null),c.__decorate([Jh(Yh.draft.on.insertMacro.update.editorState)],Fg.prototype,"insertMacro",null),c.__decorate([Jh(Yh.draft.on.input.update.editorState),Jh(Yh.draft.on.pasteText.update.editorState)],Fg.prototype,"updateActiveMacroEntity",null),c.__decorate([Jh(Yh.macro.on.update.update.active)],Fg.prototype,"updateActiveMacros",null),c.__decorate([Jh(Yh.macro.on.updateMacroRef.update.macroRef)],Fg.prototype,"updateMacroRef",null),c.__decorate([Jh(Yh.macro.on.updateVisibility.update.isVisible)],Fg.prototype,"updateVisibility",null),c.__decorate([Jh(Yh.macro.on.apply)],Fg.prototype,"applyMacro",null);r.injectInternalStyle("typescript/libraries/comments2/src/components/comment/index.module.out.css",(e=>"._sc-comment_lztvn_1{display:flex}._sc-comment-content-container_lztvn_5{width:100%}._sc-comment-content_lztvn_5,._sc-comment-renderer_lztvn_9{word-wrap:break-word;-webkit-text-size-adjust:none}._sc-comment-renderer_lztvn_9{font-size:var(--web_comment_font_size);line-height:var(--web_comment_line_height);position:relative}._sc-comment-author_lztvn_21{margin-right:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}._sc-comment-timestamp_lztvn_28{flex:1 0;white-space:nowrap}._sc-comment-separator_lztvn_34{border-radius:50%;display:inline-block;height:2px;margin:4px 6px;width:2px}._sc-comment-edit-controls_lztvn_42{margin-left:48px}._sc-comment-sticker_lztvn_46{display:block;height:112px;margin:0 auto;width:112px}._sc-comment-text_lztvn_53{white-space:pre-wrap}._sc-comment-deleted_lztvn_57 ._sc-comment-text_lztvn_53{font-style:italic}._sc-comment-info_lztvn_61{position:relative;width:100%}._sc-comment-author-timestamp_lztvn_66{align-items:baseline;display:flex;flex-wrap:nowrap;position:relative;width:100%}._sc-comment-actions_lztvn_75{align-items:center;display:flex;margin-top:8px}._sc-comment-actions_lztvn_75 button{font-size:var(--type__body__small--fontsize)!important}._sc-comment-actions-separator_lztvn_89{padding:0 4px}._sc-comment_lztvn_1{line-height:var(--web_comment_line_height);padding:8px 16px 8px 58px}._sc-comment-author_lztvn_21{color:var(--color_ink);font-size:13px;font-weight:500}._sc-comment-collapsed-timestamp-info_lztvn_106,._sc-comment-timestamp_lztvn_28{color:var(--color_stone);font-size:13px}._sc-comment-collapsed-timestamp-info_lztvn_106{margin-top:7px}._sc-comment-info_lztvn_61 ._sc-comment-older-version_lztvn_116{color:var(--color_stone);font-size:13px;padding:0}._sc-comment-older-version_lztvn_116 .mc-tertiary-icon-text{font-size:13px;line-height:var(--web_comment_line_height);padding:0}._sc-comment-separator_lztvn_34{background:var(--color_ink_40)}._sc-comment-deleted_lztvn_57{line-height:20px;padding:8px 16px 8px 58px}._sc-comment-deleted_lztvn_57 ._sc-comment-text_lztvn_53{color:var(--color_stone)}._sc-comment-info_lztvn_61{margin-bottom:4px}._sc-comment-author-timestamp_lztvn_66{height:var(--web_comment_line_height)}._sc-comment-actions_lztvn_75 .mc-tertiary-link-button{border-radius:0;display:inline-block;padding-right:0}._sc-comment-actions_lztvn_75 ._sc-comment-actions-separator_lztvn_89{color:var(--color_stone)}._sc-comment-renderer--right-rail_lztvn_164{padding:6px 8px 8px 6px}._sc-comment-renderer--right-rail_lztvn_164:last-child{padding-bottom:0}._sc-comment-renderer-inner--right-rail_lztvn_175{display:flex;font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);line-height:var(--type__body__small--lineheight);word-break:break-word}._sc-comment-renderer-avatar_lztvn_184{display:flex;margin-right:6px;z-index:2}._sc-comment-info--right-rail_lztvn_191{display:flex;height:24px}._sc-comment-info--right-rail_lztvn_191 ._sc-comment-author-timestamp_lztvn_66{align-items:center;display:flex;overflow:hidden;white-space:nowrap}._sc-comment-author--right-rail_lztvn_203{font-weight:var(--type__body__small--fontweight_strong);overflow:hidden;text-overflow:ellipsis}._sc-comment-timestamp--right-rail_lztvn_209{color:var(--color__faint__text);margin-left:4px}._sc-comments-thread-control-wrapper_lztvn_215{display:flex;margin-left:16px}._sc-comment-renderer--right-rail_lztvn_164 ._sc-comment-renderer-content-wrapper_lztvn_221{min-width:0;width:100%}._sc-comment-renderer-content-wrapper--last-approval-comment_lztvn_228{margin-bottom:var(--spacing__unit--1)}._sc-comment-dig-avatar_lztvn_232{margin-bottom:0;margin-top:0}._sc-annotation-label--right-rail_lztvn_237{color:var(--color__core__accent)}._sc-annotation-label--right-rail_lztvn_237 ._sc-annotation-label-link_lztvn_242:focus{box-shadow:none;margin:0;padding:0}._sc-annotation-label--right-rail_lztvn_237 ._sc-annotation-label-link_lztvn_242:focus-visible{box-shadow:inset 0 0 0 3px var(--color__utility__focusring);margin:0;padding:0}._sc-comment-deleted--right-rail_lztvn_255{display:flex}._sc-comment-deleted_lztvn_57._sc-comment-deleted--right-rail_lztvn_255{padding:6px 8px 8px 6px}._sc-deleted-comment-icon_lztvn_262{color:var(--color__faint__text)}._sc-deleted-comment-avatar-wrapper_lztvn_266{align-items:center;border:1px solid var(--color__disabled__border);border-radius:50%;display:flex;height:24px;justify-content:center;margin:0 8px 0 2px;width:24px}._sc-comment-deleted--right-rail_lztvn_255 ._sc-comment-text_lztvn_53{color:var(--color__faint__text);font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);font-style:normal;line-height:var(--type__body__small--lineheight)}"));const Kg="_sc-comment-content-container_lztvn_5",Lg="_sc-comment-content_lztvn_5",Ug="_sc-comment-separator_lztvn_34",qg="_sc-comment-text_lztvn_53",Hg="_sc-comment-deleted_lztvn_57",Wg="_sc-comment-author-timestamp_lztvn_66",Vg="_sc-comment-actions_lztvn_75",$g="_sc-comment-actions-separator_lztvn_89",Gg="_sc-comment-older-version_lztvn_116",Qg="_sc-comment-renderer--right-rail_lztvn_164",Jg="_sc-comment-renderer-inner--right-rail_lztvn_175",Xg="_sc-comment-renderer-avatar_lztvn_184",Yg="_sc-comment-info--right-rail_lztvn_191",Zg="_sc-comment-author--right-rail_lztvn_203",e_="_sc-comment-timestamp--right-rail_lztvn_209",t_="_sc-comments-thread-control-wrapper_lztvn_215",r_="_sc-comment-renderer-content-wrapper_lztvn_221",n_="_sc-comment-renderer-content-wrapper--last-approval-comment_lztvn_228",o_="_sc-comment-dig-avatar_lztvn_232",i_="_sc-annotation-label--right-rail_lztvn_237",a_="_sc-annotation-label-link_lztvn_242",s_="_sc-comment-deleted--right-rail_lztvn_255",c_="_sc-deleted-comment-icon_lztvn_262",l_="_sc-deleted-comment-avatar-wrapper_lztvn_266",u_=t.react.exports.memo((({user:{photoUrl:e,name:{display:r,initials:n}}})=>e?t.react.exports.createElement(i.Avatar,{src:e,alt:r}):t.react.exports.createElement(i.AvatarInitials,{backgroundColor:a.avatarColorForUserIdentifier(r)},n)));u_.displayName="BasicCommentAvatar";const d_=t.react.exports.memo((({user:{photoUrl:e,name:{display:n,initials:o}}})=>t.react.exports.createElement(r.Avatar,{src:e,alt:n,size:"small",backgroundColor:a.avatarColorForUserIdentifier(n),hasNoOutline:!0,className:o_},o)));d_.displayName="DIGCommentAvatar";const p_=t.react.exports.memo((()=>t.react.exports.createElement("div",{className:l_},t.react.exports.createElement(r.UIIcon,{src:s.DeleteLine,size:"small",className:c_}))));p_.displayName="DeletedDIGCommentAvatar";const f_=t.react.exports.forwardRef((({className:e,index:n,onClick:o,children:i,selected:a},s)=>{const c=r.classnames(Pg.scCommentEditorMentionsSuggestion,e);return t.react.exports.createElement("li",{role:"option","aria-selected":a?"true":void 0,id:`mentions-option-${n}`,ref:s},t.react.exports.createElement("button",{className:c,onClick:o,onMouseDown:e=>e.preventDefault()},t.react.exports.createElement("div",null,i)))}));f_.displayName="MentionsListItem";const m_=({placeholderMessage:e})=>{const n=r.useIntl();return t.react.exports.createElement("div",{className:Pg.scCommentEditorMentionsListContainer},t.react.exports.createElement("div",{className:Pg.scCommentEditorMentionsListHeader},e?n.formatMessage(e):n.formatMessage({id:"FBlHqR",defaultMessage:"@mention someone to share this file."})))};m_.displayName="NoResults";const h_=({active:e,onEmailClick:n})=>{const o=r.useIntl(),i=dg(e.content.substring(1));return t.react.exports.createElement("div",{className:Pg.scCommentEditorMentionsListContainer},t.react.exports.createElement("div",{className:Pg.scCommentEditorMentionsListHeader},o.formatMessage({id:"vdBwOw",defaultMessage:"No Users Found"})),i&&t.react.exports.createElement("ul",{className:Pg.scCommentEditorMentionsList},t.react.exports.createElement(f_,{className:Pg.scCommentEditorMentionsSuggestionSelected,index:-1,onClick:n},o.formatMessage({id:"l08JFQ",defaultMessage:"Invite {user_name}"},{user_name:i[0]}))))};h_.displayName="EmptyResults";const g_=({placeholderMessage:e},{container:n,scope:o})=>{const i=r.useIntl(),a=t.react.exports.useRef(),s=t.react.exports.useRef(null),c=t.react.exports.useRef({}),l=t.react.exports.useCallback((e=>{n.getTriggers(o).suggestion.updateSelectedIndex(e),n.getTriggers(o).macro.apply(null)}),[n,o]),u=t.react.exports.useCallback((()=>{n.getTriggers(o).macro.apply(null)}),[n,o]);t.react.exports.useEffect((()=>{const{selectedIndex:e}=n.getStatus().suggestion,t=c.current[e];if(a.current!==e&&t&&s.current){const r=t.getBoundingClientRect(),n=s.current.getBoundingClientRect();r.top<n.top?t.scrollIntoView({behavior:"smooth",block:"start"}):r.bottom>n.bottom&&t.scrollIntoView({behavior:"smooth",block:"end"}),a.current=e}}));const{macro:{active:d},mentionSuggestions:{users:p},suggestion:{selectedIndex:f}}=n.getStatus();return d?null===p?t.react.exports.createElement(m_,{placeholderMessage:e}):p.length?t.react.exports.createElement("div",{className:Pg.scCommentEditorMentionsListContainer,contentEditable:!1,ref:s},t.react.exports.createElement("div",{className:Pg.scCommentEditorMentionsListHeader},i.formatMessage({id:"e6Shp6",defaultMessage:"Searching contacts…"})),t.react.exports.createElement("ul",{className:Pg.scCommentEditorMentionsList,role:"listbox",id:"mentions-listbox"},p.map(((e,n)=>{const o=f===n,i=r.classnames({[Pg.scCommentEditorMentionsSuggestionSelected]:o});return t.react.exports.createElement(f_,{key:n,index:n,className:i,onClick:()=>l(n),ref:e=>c.current[n]=e,selected:o},t.react.exports.createElement(u_,{user:e}),t.react.exports.createElement("div",{className:Pg.scCommentEditorMentionsUser},t.react.exports.createElement("div",{className:Pg.scCommentEditorMentionsName,title:e.name.display},e.name.display),t.react.exports.createElement("div",{className:Pg.scCommentEditorMentionsEmail,title:e.email},e.email)))})))):t.react.exports.createElement(h_,{active:d,onEmailClick:u}):t.react.exports.createElement("span",null)};g_.displayName="MentionSuggestionsListComponent",g_.contextTypes={container:r.PropTypes.object,scope:r.PropTypes.object};class __ extends Fg{constructor(e){super({type:"macro: @",delimiter:"@",spanProps:{className:"active-mention"}}),this.mentionsOptions=e,this.onDelimiter=e=>{const{delimiter:t}=this.options,{text:r,startOffset:n,endOffset:o,input:i}=e.innerProps,a=n-t.length+i.length;if(r.substring(a,n)+i===t&&(0===a||" "===r.substr(a-1,1)))return{start:a,end:o,text:r.substring(a,n)+i}},this.onMacro=e=>{const{content:t,entityKey:r,blockKey:n,macroEndOffset:o,macroStartOffset:i}=e.innerProps,{type:a}=this.options,s=this.getQuery(t);return e.triggers.suggestion.updateTotalSuggestions(0),e.triggers.suggestion.updateSelectedIndex(-1),this.mentionsOptions.onMentionsQueryUpdated(s),{blockKey:n,entityKey:r,content:t,type:a,endOffset:o,startOffset:i,chrome:g_}},this.onAutoComplete=e=>{window.setTimeout((()=>{this.completeMentionImpl(e)}),0)},this.getSuggestedMentionUsers=e=>{const t=e.status.macro;if(!t.active)return;const r=e.status.mentionSuggestions,{content:n,type:o}=t.active;if(o===this.options.type){const e=this.getQuery(n);return r.userMap[e]}},this.getSelectedUser=e=>{const{status:t}=e,r=t.suggestion,{users:n}=t.mentionSuggestions;if(-1!==r.selectedIndex&&null!==n)return n[r.selectedIndex]}}updateUsers(e){return e.kernel.compose(this.getSuggestedMentionUsers)||null}triggerQueryUpdateOnSuggestions(e){const{userMap:t,users:r}=e.innerProps.prevStatus.mentionSuggestions,{userMap:n,users:o}=e.status.mentionSuggestions;t!==n&&e.triggers.mentionSuggestions.queryUpdate(null),r!==o&&o&&e.triggers.suggestion.updateTotalSuggestions(o.length)}triggerQueryUpdateOnMacro(e){e.triggers.mentionSuggestions.queryUpdate(null)}completeMentionImpl(e){const{status:t,triggers:r}=e,n=t.draft,o=t.macro,i=n.editorState.getCurrentContent();if(!o.active)return;const a=i.getBlockForKey(o.active.blockKey);function s(e,t){return e.entityKey===t.getEntity()}const c=e.kernel.compose(this.getSelectedUser);if(c){const e=c.name.public||c.email,t=c.email,i=function(e){return!!o.active&&s(o.active,e)},l=function(i,a){return o.active&&v_({editorState:n.editorState,blockKey:o.active.blockKey,identifier:t,text:e,start:i,end:a},r,c)};a.findEntityRanges(i,l)}else{const e=o.active.content.substring(this.options.delimiter.length);if(dg(e)){const t=function(e){return!!o.active&&s(o.active,e)},i=function(t,i){return o.active&&v_({editorState:n.editorState,blockKey:o.active.blockKey,identifier:e,text:e,start:t,end:i},r,c)};a.findEntityRanges(t,i)}}}getQuery(e){const{delimiter:t}=this.options;return 0===e.indexOf(t)?e.substring(t.length):e}}function v_(e,t,r){const{editorState:n,mentionKey:o,mentionData:i}=function(e){const{editorState:t,identifier:r,blockKey:n,start:o,end:i,text:a}=e,s={identifier:r,type:"email"},c=t.getCurrentContent().createEntity("mention","IMMUTABLE",s),l=c.getLastCreatedEntityKey(),u=lg(c,n,o,i,`@${a}`,l);return{editorState:cg(t,jh.Modifier.insertText(u,u.getSelectionAfter()," ")),mentionKey:l,mentionData:s}}(e);t.draft.change(n),t.mentionSuggestions.onApplyMentionToRange({mentionKey:o,mentionData:i,user:r})}c.__decorate([Jh(Yh.mentionSuggestions.on.queryUpdate.update.users)],__.prototype,"updateUsers",null),c.__decorate([Jh(Yh.mentionSuggestions)],__.prototype,"triggerQueryUpdateOnSuggestions",null),c.__decorate([Jh(Yh.macro.on.update)],__.prototype,"triggerQueryUpdateOnMacro",null);class y_ extends rg{handleArrowsAndEscape(e){const{triggers:t,status:r,innerProps:{evt:n}}=e;if(r.macro.active)switch(n.which){case 38:t.suggestion.up(1);break;case 40:t.suggestion.down(1);break;case 27:t.macro.update(null),t.macro.updateVisibility(!1)}}handleUp(e){const{totalSuggestions:t}=e.status.suggestion,{evt:r,value:n}=e.innerProps;return((Math.max(n,0)-r)%t+t)%t}handleDown(e){const{totalSuggestions:t}=e.status.suggestion,{evt:r,value:n}=e.innerProps;return(n+r)%t}updateIndex(e){const{evt:t}=e.innerProps;return t}updateTotalSuggestions(e){const{evt:t}=e.innerProps;if(t!==e.status.suggestion.totalSuggestions)return e.triggers.suggestion.updateSelectedIndex(-1),t}onMentionSuggestionsChange({status:e,triggers:t}){const{users:r}=e.mentionSuggestions;r&&t.suggestion.updateTotalSuggestions(r.length)}}function b_(e,t,r){const n=e.getCurrentContent().mergeEntityData(t,{pending:r}),o=jh.EditorState.push(e,n,"apply-entity"),i=n.getSelectionAfter(),a=i.merge({focusOffset:i.getFocusOffset()+1}),s=cg(o,jh.Modifier.removeRange(jh.Modifier.insertText(n,i," "),a,"backward"));return jh.EditorState.forceSelection(s,o.getSelection())}c.__decorate([Jh(Yh.draft.on.key)],y_.prototype,"handleArrowsAndEscape",null),c.__decorate([Jh(Yh.suggestion.on.up.update.selectedIndex)],y_.prototype,"handleUp",null),c.__decorate([Jh(Yh.suggestion.on.down.update.selectedIndex)],y_.prototype,"handleDown",null),c.__decorate([Jh(Yh.suggestion.on.updateSelectedIndex.update.selectedIndex)],y_.prototype,"updateIndex",null),c.__decorate([Jh(Yh.suggestion.on.updateTotalSuggestions.update.totalSuggestions)],y_.prototype,"updateTotalSuggestions",null),c.__decorate([Jh(Yh.mentionSuggestions)],y_.prototype,"onMentionSuggestionsChange",null);const x_={onShare:()=>{},onMention:()=>new Promise((e=>e({mentionedUserHasAccess:!0,shouldShowSharePopup:!1})))};class S_ extends rg{constructor(e){super(),this.options=e}addPendingFlagToMention(e){const{editorState:t}=e.status.draft,{mentionKey:r,mentionData:n,user:o}=e.innerProps.evt,i=this.options.onMention(n,r),a=b_(t,r,!0);e.triggers.draft.change(a),i.then((i=>{if(i.shouldShowSharePopup)e.triggers.mentionShareFlow.updatePopupProps({mentionKey:r,mentionData:n,user:o});else if(i.mentionedUserHasAccess){const n=b_(t,r,!1);e.triggers.draft.change(n)}}))}updatePopupProps(e){return e.triggers.draft.readOnly(!!e.innerProps.evt),e.innerProps.evt}onShare(e){const{mentionKey:t,mentionData:r,user:n}=e.innerProps.evt;this.options.onShare(r,t,(()=>{e.triggers.mentionShareFlow.onShareCompleted({mentionKey:t,mentionData:r,user:n})}))}onShareCompleted(e){const{mentionKey:t}=e.innerProps.evt,{editorState:r}=e.status.draft,n=function(e,t){const r=t.getCurrentContent();let n;try{n=r.getEntity(e)}catch(e){}return n&&"mention"===n.getType()?b_(t,e,!1):t}(t,r),o=jh.EditorState.forceSelection(n,n.getSelection());e.triggers.draft.change(o)}updateReadonly(e){return e.innerProps.evt}closePopupOnChange(e){e.innerProps.prevStatus.draft.editorState.getCurrentContent()!==e.status.draft.editorState.getCurrentContent()&&e.status.mentionShareFlow.popupProps&&e.triggers.mentionShareFlow.updatePopupProps(null)}}c.__decorate([Jh(Dg.mentionSuggestions.on.onApplyMentionToRange)],S_.prototype,"addPendingFlagToMention",null),c.__decorate([Jh(Dg.mentionShareFlow.on.updatePopupProps.update.popupProps)],S_.prototype,"updatePopupProps",null),c.__decorate([Jh(Dg.mentionShareFlow.on.onShare)],S_.prototype,"onShare",null),c.__decorate([Jh(Dg.mentionShareFlow.on.onShareCompleted)],S_.prototype,"onShareCompleted",null),c.__decorate([Jh(Dg.draft.on.readOnly.update.readOnly)],S_.prototype,"updateReadonly",null),c.__decorate([Jh(Dg.draft)],S_.prototype,"closePopupOnChange",null);const w_=()=>t.react.exports.createElement("span",{className:Ug}),E_=({sticker:e})=>{const n=r.useIntl().formatMessage({id:"nU3TuP",defaultMessage:"Sticker: {description}"},{description:e.description});return t.react.exports.createElement("img",{className:Pg.scCommentEditorSticker,src:e.url,title:n,alt:n})};E_.displayName="StickerComponent";const k_=({block:e,contentState:r})=>{const n=r.getEntity(e.getEntityAt(0)).getData();return"sticker"===n.type?t.react.exports.createElement(E_,{sticker:n}):null};k_.displayName="AtomicBlockComponent";const C_=t.react.exports.memo((({annotation:e})=>t.react.exports.createElement("div",{className:Pg.scCommentEditorPrefix},e,e&&t.react.exports.createElement(w_,null))));C_.displayName="EditorPrefix";const M_=()=>{},T_=e=>"atomic"===e.getType()?{component:k_,editable:!1}:void 0,A_=e=>"atomic"===e.getType()?Pg.scCommentEditorAtomicBlock:"",O_=(e,r)=>{var{annotation:n,editorPlaceholder:o,setEditorRef:i}=e,a=c.__rest(e,["annotation","editorPlaceholder","setEditorRef"]),s=r.container;const{editorKey:l,editorState:u,readOnly:d}=s.getStatus().draft,p={editorKey:l};return t.react.exports.createElement("div",null,t.react.exports.createElement(C_,{annotation:n}),o,t.react.exports.createElement(jh.Editor,Object.assign({editorState:u,readOnly:d,onChange:M_,blockRendererFn:T_,blockStyleFn:A_},p,a,{ref:e=>{null==i||i(e)}})))};var D_;O_.displayName="ReadonlyDraftComponent",O_.contextTypes={container:r.PropTypes.object},function(e){e[e.ENTER=13]="ENTER",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN"}(D_||(D_={}));const I_=[D_.ESC,D_.SPACE,D_.UP,D_.RIGHT,D_.DOWN],R_=({which:e})=>I_.indexOf(e)>-1,B_=Pg.scCommentEditorDraft,P_=({submitModifierKeyCodes:e=["metaKey","ctrlKey"],lineBreakModifierKeyCodes:n=[],customKeyBinding:o,handleFocus:i,handleBlur:a,shouldFocus:s,spellCheck:c,a11yEditorLabel:l,disabled:d,placeholder:p,setRef:f,className:m},{container:h,scope:g})=>{const _=t.react.exports.useRef(),v=t.react.exports.useCallback((e=>{h.getTriggers(g).draft.change(e)}),[h,g]),y=t.react.exports.useCallback((()=>{var e;null===(e=_.current)||void 0===e||e.blur()}),[]),b=t.react.exports.useCallback(((t,r)=>{const o=((e,t)=>{if(0===t.length)return!0;for(const r of t)if(e[r])return!0;return!1})(t,e),i=((e,t)=>{if(0===t.length)return!0;for(const r of t)if(e[r])return!0;return!1})(t,n);if(0===e.length&&n.length>0&&!i&&!h.getStatus().macro.active||e.length>0&&o){return!(""===r.getCurrentContent().getPlainText().trim())&&h.getTriggers(g).comment&&(y(),h.getStatus().draft.containerPostOnBlur||h.getTriggers(g).comment.post(r)),"handled"}const a=h.getTriggers(g).draft.returnKey(t).editorState;return!i||a!==r||h.getStatus().macro.active?(t.preventDefault(),"handled"):"not-handled"}),[h,g,n,e,y]),x=t.react.exports.useCallback((()=>{_.current&&window.setTimeout((()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.focus()}))}),[]),S=t.react.exports.useCallback((e=>{var t;if(!h.getStatus().macro.macroRef)return!1;const r=e.getBoundingClientRect(),n=null===(t=h.getStatus().macro.macroRef)||void 0===t?void 0:t.getBoundingClientRect();return!!n&&(n.bottom<r.bottom&&n.top>r.top)}),[h]),w=t.react.exports.useCallback((e=>{if(null===e)throw new Error("Unable to find scroll element");return e.classList.contains(B_)?e:w(e.parentElement)}),[]),E=t.react.exports.useCallback((e=>{if(!h.getStatus().macro.macroRef)return;const{updateVisibility:t}=h.getTriggers(g).macro,r=e.target;t(S(r))}),[h,g,S]),k=t.react.exports.useCallback((e=>{if(R_(e)){const{suggestion:t}=h.getStatus();if(!(({totalSuggestions:e})=>0===e)(t)&&(h.getTriggers(g).draft.key(e),t!==h.getStatus().suggestion))return e.preventDefault(),null}return o?o(e):jh.getDefaultKeyBinding(e)}),[h,g,o]),C=t.react.exports.useCallback(((e,t)=>h.getTriggers(g).draft.keyCommand(e).editorState===t?"not-handled":"handled"),[h,g]),M=t.react.exports.useCallback(((e,t)=>{if(". "===e){const e=(e=>{const t=e.getCurrentContent(),r=e.getSelection().getStartKey(),n=e.getSelection().getStartOffset(),o=e.getSelection().getEndOffset(),i=t.getBlockForKey(r),a=lg(t,r,n-1,o,". ",i.getEntityAt(n-1));return jh.EditorState.set(e,{currentContent:a})})(t);return v(e),"handled"}return h.getTriggers(g).draft.input(e).editorState===t?"not-handled":"handled"}),[h,g]),T=t.react.exports.useCallback(((e,t,r)=>{let n=h.getTriggers(g).draft.pasteText(e).editorState;return t&&n===r&&(n=h.getTriggers(g).draft.pasteHTML({text:e,html:t}).editorState),n===r?"not-handled":"handled"}),[h,g]),A=t.react.exports.useCallback((e=>{h.getTriggers(g).draft.compositionStart(e)}),[h,g]),O=t.react.exports.useCallback((e=>{h.getTriggers(g).draft.compositionEnd(e)}),[h,g]),D=t.react.exports.useCallback((e=>{if(R_(e)){const{suggestion:t}=h.getStatus();h.getTriggers(g).draft.key(e),h.getStatus().suggestion!==t&&e.preventDefault()}else e.which===D_.SPACE?h.getTriggers(g).draft.key(e):e.which===D_.ENTER&&h.getStatus().macro.active&&e.preventDefault()}),[h,g]),I=t.react.exports.useCallback((e=>{null==i||i(e),e.stopPropagation()}),[i]),R=t.react.exports.useCallback((e=>{if(i&&!i(e))return e.preventDefault(),void e.stopPropagation();h.getTriggers(g).macro.updateVisibility(S(w(e.target))),h.getTriggers(g).draft.focus(e)}),[h,g,i,S,w]),B=t.react.exports.useCallback((e=>{(null==i?void 0:i(e))&&R(e)}),[i,R]),P=t.react.exports.useCallback((e=>{h.getTriggers(g).macro.updateVisibility(!1),null==a||a(h.getStatus().draft.editorState,h.getTriggers(g).comment),h.getTriggers(g).draft.blur(e)}),[h,g,a]);t.react.exports.useEffect((()=>{s&&_.current&&x()}),[s]);const j=t.react.exports.useCallback((e=>{const t=e.getType();return t&&h.getStatus().draft.blockRenderers[t]?h.getStatus().draft.blockRenderers[t](e):void 0}),[h]),z=t.react.exports.useCallback((e=>{_.current=e,null==f||f(e)}),[f]),{macro:{active:N,isVisible:F},draft:{editorState:K,readOnly:L,isComposing:U},suggestion:{selectedIndex:q}}=h.getStatus(),H=!(!N||!N.chrome)&&F,W=-1!==q&&H?`mentions-option-${q}`:"",V=""===K.getCurrentContent().getPlainText()&&!U?t.react.exports.createElement(r.Text,{className:Pg.scCommentEditorPlaceholder,tabIndex:-1,"aria-hidden":!0,color:"disabled",size:"small"},t.react.exports.createElement(u.Truncate,{tooltipControlProps:{auto:!0,placement:"top"}},p||"")):void 0;return t.react.exports.createElement("div",{className:r.classnames(B_,m),onScroll:E,onKeyDown:D,onCompositionStart:A,onCompositionEnd:O,onMouseDown:I,onMouseUp:B},t.react.exports.createElement(O_,{setEditorRef:z,ariaLabel:l,readOnly:L||!!d,onFocus:R,onBlur:P,onChange:v,handleReturn:b,keyBindingFn:k,handleKeyCommand:C,handleBeforeInput:M,handlePastedText:T,blockRendererFn:j,ariaAutoComplete:"list",ariaExpanded:H,ariaActiveDescendantID:W,annotation:void 0,editorPlaceholder:V,spellCheck:c}))};P_.displayName="DraftComponent",P_.contextTypes={container:r.PropTypes.object,scope:r.PropTypes.object};const j_=(e,t)=>{if(!e)return{};const r=e.getBoundingClientRect();let n=e.offsetParent;for(;n&&!n.classList.contains(t);)n=n.offsetParent;if(!n)return{};const o=n.getBoundingClientRect();return{top:r.bottom-o.top}},z_=({placeholderMessage:e,scrollClassName:r},{container:n})=>{const{active:o,macroRef:i,isVisible:a}=n.getStatus().macro;if(!(o&&o.chrome&&i&&a))return t.react.exports.createElement("div",null);const s=o.chrome;return t.react.exports.createElement("div",{className:Pg.activeMacroChrome,style:j_(i,r)},t.react.exports.createElement(s,{placeholderMessage:e}))};z_.displayName="ActiveMacroChromeComponent",z_.contextTypes={container:r.PropTypes.object};class N_ extends rg{constructor(e){super(),this.options=e}callOnEditorStateChange(e){const t=e.innerProps.value;this.options.onEditorStateChange(t)}callOnPost(e){const{content:t}=e.innerProps.value;this.options.onPost(t)}callOnCancel(){this.options.onCancel()}callOnFocus(e){this.options.onFocus(e.innerProps.evt)}callOnBlur(e){this.options.postOnBlur&&e.triggers.comment.post(e.status.draft.editorState),this.options.onBlur(e.innerProps.evt)}}c.__decorate([Jh(Yh.draft.on.change.update.editorState)],N_.prototype,"callOnEditorStateChange",null),c.__decorate([Jh(Yh.comment.on.post)],N_.prototype,"callOnPost",null),c.__decorate([Jh(Yh.comment.on.cancel)],N_.prototype,"callOnCancel",null),c.__decorate([Jh(Yh.container.on.focus)],N_.prototype,"callOnFocus",null),c.__decorate([Jh(Yh.container.on.blur)],N_.prototype,"callOnBlur",null);const F_=e=>{const{blocks:t}=e,{metadata:r}=t.reduce(((t,r)=>{const{metadata:n,pos:o}=t;return{metadata:[...n,...r.entityRanges.filter((function(t){return"sticker"===e.entityMap[t.key].type})).map((function(t){const r=e.entityMap[t.key].data;return Object.assign(Object.assign({},r.metadata[0]),{type:"sticker"})}))],pos:o+r.text.length}}),{metadata:[],pos:0});return r},K_=e=>e.reduce(((e,t)=>"sticker"===t.type?{stickers:[...e.stickers,t],other:e.other}:{stickers:e.stickers,other:[...e.other,t]}),{stickers:[],other:[]}),L_=Xh({reducers:{draft:{values:{editorState:{populateWithComment:e=>{const{evt:t}=e.innerProps,{stickers:r}=K_(t.metadata);if(r.length){const e=r[0],t=jh.ContentState.createFromText("").createEntity("sticker","IMMUTABLE",e),n=t.getLastCreatedEntityKey(),o=jh.AtomicBlockUtils.insertAtomicBlock(jh.EditorState.createWithContent(t),n,"*").getCurrentContent().getBlockMap().skip(1).first(),i=jh.ContentState.createFromBlockArray([o]);return jh.EditorState.createWithContent(i)}}}}},comment:{values:{content:{post:e=>{const{evt:t,value:r}=e.innerProps,n=F_(jh.convertToRaw(t.getCurrentContent())),{other:o}=K_(r.metadata);return Object.assign(Object.assign({},r),{metadata:[...o,...n]})}}}}}});class U_ extends rg{updateEditorState(){return!0}handleKeyCommand(){return!1}updateFocus(e){return e.innerProps.evt}}c.__decorate([Jh(Yh.container.on.focus.update.isFocused)],U_.prototype,"updateEditorState",null),c.__decorate([Jh(Yh.container.on.blur.update.isFocused)],U_.prototype,"handleKeyCommand",null),c.__decorate([Jh(Yh.container.on.updateFocus.update.isFocused)],U_.prototype,"updateFocus",null);const q_=Xh({reducers:{draft:{values:{editorState:{pasteHTML:e=>{const t=e.innerProps.value,n=t.getCurrentContent(),o=t.getSelection(),i=function({html:e,contentState:t,editorKey:n,elementMappers:o=[]}){const i=document.createElement("body");i.innerHTML=e;let a=[];const s=i.textContent||"",c=Array(s.length);let l=[0,0],u="";const d=(e="unstyled")=>{const t=c.slice(l[0],l[1]);a=[...a,(new jh.ContentBlock).merge({type:e,key:jh.genKey(),text:u,characterList:r.immutable.exports.List(t)})],u="",l=[l[1],l[1]]},p=e=>i=>{switch(i.nodeType){case Node.TEXT_NODE:if(i.textContent){const t=jh.CharacterMetadata.create(e),r=i.textContent;u+=r;for(let e=0;e<r.length;e++,l[1]++)c[l[1]]=t}break;case Node.ELEMENT_NODE:const a=o.reduce(((e,t)=>t(e)),i);if(a.childNodes.length){let o=e?e.style.toArray():[],i=e?e.entity:null;const s=a.tagName.toLowerCase(),c="true"===a.getAttribute("data-block")||-1!==["p","li","blockquote","pre",...[1,2,3,4,5,6].map((e=>`h${e}`))].indexOf(s);o=[...o,...hg(a)],i=function(e,t,r){if(e.hasAttribute("data-entity-key")&&e.getAttribute("data-editor")===r){const r=e.getAttribute("data-entity-key");try{return t.getEntity(r),r}catch(e){}}return null}(a,t,n)||i;const l={style:r.immutable.exports.OrderedSet(o)};i&&(l.entity=i),Array.from(a.childNodes).forEach(p(l)),c&&d()}}};return Array.from(i.childNodes).forEach(p()),0===a.length&&d(),r.immutable.exports.OrderedMap(a.map((e=>[e.getKey(),e])))}({html:e.innerProps.evt.html,contentState:n,editorKey:e.status.draft.editorKey,elementMappers:[mg]});return cg(t,jh.Modifier.replaceWithFragment(n,o,i))}}}}}}),H_=e=>{!function(e,t=!0,r="_blank"){const n=window.open("",r);n&&(function(e,t){-1===["_self","_top","_parent"].indexOf(t)&&(e.opener=null)}(n,r),function(e,t){e.location&&e.location.replace?e.location.replace(t):e.location=t}(n,e),t&&n.focus())}(e,!0)};class W_ extends rg{addDecorators(e){return[...e.innerProps.value,{strategy:function(e,t,r){e.findEntityRanges((function(e){const t=e.getEntity();return null!==t&&"hyperlink"===r.getEntity(t).getType()}),t)},props:{readOnly:e.status.draft.readOnly,onOpenLink:H_},component:Bg}]}initHyperlinks(e){const{value:t,evt:r}=e.innerProps,{hyperlinks:n}=this.splitHyperlinks(r.metadata);return jh.EditorState.createWithContent(n.reduce(((e,t)=>{const r=e.createEntity("hyperlink","MUTABLE",{url:t.url}),n=r.getLastCreatedEntityKey(),o=ug(t.location,r);return jh.Modifier.applyEntity(e,o,n)}),t.getCurrentContent()))}postHyperlinks(e){const{evt:t,value:r}=e.innerProps,n=this.getHyperlinkMetadata(jh.convertToRaw(t.getCurrentContent())),{other:o}=this.splitHyperlinks(r.metadata);return Object.assign(Object.assign({},r),{metadata:[...o,...n]})}getHyperlinkMetadata(e){const{blocks:t}=e,{metadata:r}=t.reduce(((t,r)=>{const{metadata:n,pos:o}=t;return{metadata:[...n,...r.entityRanges.filter((function(t){return"hyperlink"===e.entityMap[t.key].type})).map((function(t){return{type:"hyperlink",url:e.entityMap[t.key].data.url,location:{start:o+t.offset,end:o+t.offset+t.length}}}))],pos:o+pg(r.text).length}}),{metadata:[],pos:0});return r}splitHyperlinks(e){return e.reduce(((e,t)=>"hyperlink"===t.type?{hyperlinks:[...e.hyperlinks,t],other:e.other}:{hyperlinks:e.hyperlinks,other:[...e.other,t]}),{hyperlinks:[],other:[]})}}c.__decorate([Jh(Yh.draft.on.init.update.decorators)],W_.prototype,"addDecorators",null),c.__decorate([Jh(Yh.draft.on.populateWithComment.update.editorState)],W_.prototype,"initHyperlinks",null),c.__decorate([Jh(Yh.comment.on.post.update.content)],W_.prototype,"postHyperlinks",null);const V_={draft:Fh,comment:Kh,macro:Lh,mentionShareFlow:Wh,mentionSuggestions:Uh,suggestion:qh,container:Nh},$_=()=>{};class G_ extends kg{get scopeNames(){return V_}getLayerProps(e){const{mentionShareFlowHandlers:t=x_,onMentionsQueryUpdated:r=$_,onPost:n=$_,onCancel:o=$_,onEditorStateChange:i=$_,onFocus:a=$_,onBlur:s=$_,postOnBlur:c,readOnly:l,mentionsDisabled:u}=e;return{mentionShareFlowHandlers:t,onMentionsQueryUpdated:r,onPost:n,onCancel:o,onEditorStateChange:i,onFocus:a,onBlur:s,postOnBlur:c,readOnly:l,mentionsDisabled:u}}mapPropsToLayers(e){const{mentionShareFlowHandlers:t,onMentionsQueryUpdated:r,onPost:n,onCancel:o,onEditorStateChange:i,onFocus:a,onBlur:s,postOnBlur:c,mentionsDisabled:l}=this.getLayerProps(e),u=[new U_,new ng,q_,new og,new W_,new _g,L_,new N_({onEditorStateChange:i,onPost:n,onCancel:o,onFocus:a,onBlur:s,postOnBlur:c}),new y_,new ig];if(!l){const e=[new zg,new __({onMentionsQueryUpdated:r}),new S_(t)];return u.concat(e)}return u}createDefaultStatus(){const e=tg(this.scopeNames);return Object.assign(Object.assign({},e),{draft:Object.assign(Object.assign({},e.draft),{containerPostOnBlur:!!this.props.postOnBlur})})}mapPropsToUpdates(e,t){let r={};const n=!!t.mentionShareFlow.popupProps||!!e.readOnly;return e.content!==t.comment.content&&(r=Object.assign(Object.assign({},r),{comment:Object.assign(Object.assign({},t.comment),{content:e.content})})),n!==t.draft.readOnly&&(r=Object.assign(Object.assign({},r),{draft:Object.assign(Object.assign({},t.draft),{editorState:t.draft.editorState,readOnly:n})})),e.mentionsMatches!==t.mentionSuggestions.userMap&&(r=Object.assign(Object.assign({},r),{mentionSuggestions:Object.assign(Object.assign({},t.mentionSuggestions),{userMap:e.mentionsMatches||{}})})),r}}const Q_=({signalComponent:e,forceCancelEnabled:r,annotationElement:n},{container:o,scope:i})=>{const a=t.react.exports.useMemo((()=>({cancel:()=>{const e=o.getTriggers(i);e.comment.cancel(null),e.container.updateFocus(!1)},insertMention:()=>{o.getTriggers(i).draft.insertMacro("")},post:()=>{const e=o.getTriggers(i);e.comment.post(o.getStatus().draft.editorState),e.container.updateFocus(!1)}})),[o,i]),{draft:{editorState:s,isFocused:c},container:{isFocused:l}}=o.getStatus(),u=""===s.getCurrentContent().getPlainText().trim(),d=!u,p=!u||!!r||l;return t.react.exports.createElement(e,{postEnabled:d,cancelEnabled:p,signals:a,isEmpty:u,isEditorFocused:c,isContainerFocused:l,annotationElement:n})};Q_.displayName="PostComponent",Q_.contextTypes={container:r.PropTypes.object,scope:r.PropTypes.object};r.injectInternalStyle("typescript/libraries/comments2/src/components/comment_stream/index.module.out.css",(e=>'._sc-comment-stream_12o5m_1{box-sizing:border-box;display:flex;flex-direction:column;height:100%;width:328px}._sc-comment-stream_12o5m_1._sc-comment-stream--right-rail_12o5m_9{width:100%}._sc-unread-pill-wrapper_12o5m_15>div{flex:0 1 auto}._sc-comment-stream-threads_12o5m_19{flex:1 1 auto;list-style-type:none;margin:0;overflow:auto;padding:0;z-index:0}._sc-comment-stream--right-rail_12o5m_9 ._sc-comment-stream-threads_12o5m_19{margin-top:8px}._sc-comment-stream-editor_12o5m_32{flex:0 0 auto;margin:4px 0 0}._sc-comment-stream-editor_12o5m_32 ._sc-comment-editor-focus-container_12o5m_38{background:var(--color__standard__background);border:1px solid var(--color__standard__border)}._sc-comment-stream-editor_12o5m_32 ._sc-comment-editor-focus-container-is-focused_12o5m_43{border-color:transparent;box-shadow:var(--boxshadow__focusring)}._sc-comment-editor-focus-container-is-focused_12o5m_43 svg>path{fill:var(--color_stone)}._sc-comment-stream-open_12o5m_53{width:15em}._sc-comment-stream-closed_12o5m_57{width:1em}._sc-annotation-toggle_12o5m_61{font-feature-settings:"tnum";box-sizing:border-box;display:inline-block}._sc-annotation-toggle-inner_12o5m_67{cursor:default;display:flex}._sc-unread-pill-wrapper_12o5m_15{display:flex;flex:1 1 auto;flex-direction:column;min-height:0;overflow:hidden}._sc-unread-pill-wrapper_12o5m_15 ._unread-pill_12o5m_81{display:block;height:0;margin:auto;z-index:1}._unread-pill_12o5m_81 ._unread-pill-text_12o5m_88{background:#d2e6fa;border:2px solid #f7f9fa;color:#0070e0;cursor:pointer;padding:5px 10px}._unread-pill_12o5m_81 ._unread-pill-text_12o5m_88:hover{background:#bfdbf7}._unread-pill_12o5m_81._up_12o5m_104 ._unread-pill-text_12o5m_88{margin-top:15px;position:relative}._comments-sort-menu_12o5m_109{background-color:var(--color__standard__background);margin-left:4px;margin-top:8px;position:-webkit-sticky;position:sticky;top:0;width:100%;z-index:2}._sc-unread-pill-wrapper_12o5m_15 ._unread-pill_12o5m_81._down_12o5m_119{position:relative;top:-42px}._unread-pill_12o5m_81 span._arrow-indicator_12o5m_124{margin-right:5px}._sc-suggested-comments_12o5m_128{margin:4px 10px}._sc-suggested-comments-button_12o5m_132{background:var(--color__attention__background--faint);border-radius:20px;cursor:pointer;margin:4px;padding:8px 10px}._sc-suggested-comments-button_12o5m_132:hover{background:var(--color__attention__background)}._sc-comment-stream_12o5m_1{position:relative}._sc-annotation-toggle_12o5m_61{font-weight:500}@keyframes _comment-button-fade-in_12o5m_1{0%{opacity:0}70%{opacity:0}to{opacity:1}}._sc-comment-stream-error-container_12o5m_166{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;min-height:100%;text-align:center;width:100%}._sc-comment-stream-error-title_12o5m_177{font-weight:var(--unified_font_weight_semibold)}._sc-comment-stream-error-subtext_12o5m_183,._sc-comment-stream-error-title_12o5m_177{font-size:var(--unified_font_size_normal);line-height:var(--web_comment_line_height)}._sc-comment-stream-error-subtext_12o5m_183{color:var(--unified_color_text_subtext);width:240px}._sc-comment-stream-error-button-container_12o5m_190{margin-top:20px}._sc-comment-stream-editor-container_12o5m_194{display:flex}._sc-comment-stream-editor-bundle_12o5m_198{flex:1}._sc-comment-stream-meatball-icon_12o5m_202{align-self:center;padding:var(--spacing__unit--2) var(--spacing__unit--1) 0 0}._sc-comment-empty-container_12o5m_207{margin-top:16px}._sc-comment-approvals-container_12o5m_211{margin-top:10px}'));const J_="_sc-comment-stream_12o5m_1",X_="_sc-comment-stream--right-rail_12o5m_9",Y_="_sc-unread-pill-wrapper_12o5m_15",Z_="_sc-comment-stream-threads_12o5m_19",ev="_sc-comment-stream-editor_12o5m_32",tv="_sc-comment-editor-focus-container_12o5m_38",rv="_sc-comment-editor-focus-container-is-focused_12o5m_43",nv="_unread-pill_12o5m_81",ov="_unread-pill-text_12o5m_88",iv="_up_12o5m_104",av="_comments-sort-menu_12o5m_109",sv="_down_12o5m_119",cv="_arrow-indicator_12o5m_124",lv="_sc-comment-stream-editor-container_12o5m_194",uv="_sc-comment-stream-editor-bundle_12o5m_198",dv="_sc-comment-empty-container_12o5m_207",pv="_sc-comment-approvals-container_12o5m_211",fv=(e,t)=>!!t&&e.current&&e.current.contains(t),mv=({disabled:e,children:n},{container:o,scope:i})=>{const a=t.react.exports.useRef(null),s=r.classnames(tv,{[rv]:o.getStatus().container.isFocused&&!e}),c=t.react.exports.useCallback((e=>{fv(a,e.relatedTarget)||o.getTriggers(i).container.focus(e)}),[o,i]),l=t.react.exports.useCallback((e=>{fv(a,e.relatedTarget)||o.getTriggers(i).container.blur(e)}),[o,i]),u=t.react.exports.useCallback((e=>{o.getStatus().container.isFocused&&(e.stopPropagation(),e.preventDefault())}),[o]);return t.react.exports.createElement("div",{className:s,ref:a,onFocus:c,onBlur:l,onMouseDown:u},n)};mv.displayName="FocusContainerComponent",mv.contextTypes={container:r.PropTypes.object,scope:r.PropTypes.object};const hv=({children:e},{container:r})=>""!==r.getStatus().draft.editorState.getCurrentContent().getPlainText().trim()&&e?t.react.exports.createElement("div",{className:Pg.scCommentEditorTagline},e):null;hv.displayName="CommentEditorTagline",hv.contextTypes={container:r.PropTypes.object};r.injectInternalStyle("typescript/libraries/comments2/src/components/sticker_component/index.module.out.css",(e=>"._sc-sticker-component_7nz5q_1{align-self:center;display:inline;margin-right:var(--spacing__unit--0_5);position:relative}._sc-sticker-container_7nz5q_8{background:var(--color__standard__background);border:0;box-shadow:var(--token_boxshadow_dropshadow);height:243px;margin-bottom:10px;position:absolute;right:0;top:28px;width:285px;z-index:666}._sc-sticker-nav_7nz5q_22{height:40px;overflow:hidden;position:relative;white-space:nowrap}._sc-sticker-nav-item_7nz5q_29{background:transparent;cursor:pointer;height:40px;opacity:.7;padding:2px 7px;text-align:center;width:48px}._sc-sticker-nav-item_7nz5q_29:hover{background:var(--color_sapphire_90)}._sc-sticker-nav-item-is-selected_7nz5q_43{background:var(--color_sapphire_100);opacity:1}._sc-sticker-inner_7nz5q_48{overflow:hidden;width:268px}._sc-sticker-nav-item-image-container_7nz5q_53{height:100%;position:relative;width:100%}._sc-sticker-nav-item-image-container_7nz5q_53>img{left:50%;position:absolute;top:50%;transform:translate3d(-50%,-50%,0)}._sc-sticker-arrow_7nz5q_66{background-color:var(--color_brand_panda_white);bottom:0;box-shadow:inset 1px 0 0 var(--color_border_light);height:40px;padding:2px 7px;position:absolute;text-align:center;top:0;width:40px;z-index:1}._sc-sticker-arrow-hide_7nz5q_79{display:none}._sc-sticker-arrow-left_7nz5q_83{transform:scaleX(-1)}._sc-sticker-arrow-right_7nz5q_91{right:0}._sc-sticker-divider_7nz5q_95{background:var(--color_ink_15);display:block;height:1px;position:absolute;width:inherit}._sc-sticker-pane-scroll_7nz5q_103{float:left;height:203px;overflow-y:scroll;padding:0 2px}._sc-sticker-option_7nz5q_110{background:transparent;cursor:pointer;margin:5px;padding:0}._sc-sticker-option_7nz5q_110,._sc-sticker-option-sticker_7nz5q_119{height:56px;width:56px}._sc-sticker-pack_7nz5q_124{display:none}._sc-sticker-pack-is-selected_7nz5q_128{display:block}._sc-sticker-option-sticker-gif_7nz5q_132{height:56px;width:56px}._sc-sticker-option-sticker-gif-invisible_7nz5q_137{display:none}body._tabbing_7nz5q_142 ._sc-sticker-arrow_7nz5q_66:focus ._sc-sticker-arrow-container_7nz5q_146,body._tabbing_7nz5q_142 ._sc-sticker-nav-item_7nz5q_29:focus ._sc-sticker-nav-item-image-container_7nz5q_53,body._tabbing_7nz5q_142 ._sc-sticker-option_7nz5q_110:focus{box-shadow:var(--focus_ring)}"));const gv="_sc-sticker-component_7nz5q_1",_v="_sc-sticker-container_7nz5q_8",vv="_sc-sticker-nav_7nz5q_22",yv="_sc-sticker-nav-item_7nz5q_29",bv="_sc-sticker-nav-item-is-selected_7nz5q_43",xv="_sc-sticker-inner_7nz5q_48",Sv="_sc-sticker-nav-item-image-container_7nz5q_53",wv="_sc-sticker-arrow_7nz5q_66",Ev="_sc-sticker-arrow-hide_7nz5q_79",kv="_sc-sticker-arrow-left_7nz5q_83",Cv="_sc-sticker-arrow-right_7nz5q_91",Mv="_sc-sticker-divider_7nz5q_95",Tv="_sc-sticker-pane-scroll_7nz5q_103",Av="_sc-sticker-option_7nz5q_110",Ov="_sc-sticker-option-sticker_7nz5q_119",Dv="_sc-sticker-pack_7nz5q_124",Iv="_sc-sticker-pack-is-selected_7nz5q_128",Rv="_sc-sticker-option-sticker-gif_7nz5q_132",Bv="_sc-sticker-option-sticker-gif-invisible_7nz5q_137",Pv="_sc-sticker-arrow-container_7nz5q_146";class jv extends t.react.exports.Component{render(){const{label:e,onClick:n,isActive:o}=this.props;return t.react.exports.createElement(r.IconButton,{className:Pg.scCommentEditorControlBtn,onClick:n,"aria-label":e,"aria-haspopup":"true","aria-expanded":o,variant:"transparent",size:"small"},t.react.exports.createElement(d.EmojiSmileLine,null))}}jv.displayName="StickerButton";const zv=({sticker:e,onClick:n})=>{const[o,i]=t.react.exports.useState(!1),a=r.useIntl().formatMessage({id:"rnb7YE",defaultMessage:"Insert {description}"},{description:e.description});return t.react.exports.createElement("button",{className:Av,"aria-label":a,onClick:()=>{const t=e.is_live_sticker?`${e.base_url}?type=gif`:`${e.base_url}?type=png`;n(e.id,t,e.name)}},e.is_live_sticker&&t.react.exports.createElement("img",{className:o?Rv:Bv,src:`${e.base_url}?type=gif`,alt:e.description,title:e.description,onLoad:()=>{i(!0)}}),!o&&t.react.exports.createElement("img",{className:Ov,alt:e.description,title:e.description,src:`${e.base_url}?type=png`}))};zv.displayName="StickerOption";class Nv extends t.react.exports.Component{get className(){return r.classnames(Dv,{[Iv]:this.props.isSelected})}render(){const{stickerPack:e}=this.props;return t.react.exports.createElement("div",{className:this.className},e.stickers.map((e=>t.react.exports.createElement(zv,{sticker:e,onClick:this.props.onStickerSelected,key:e.id}))))}}Nv.displayName="StickerPaneComponent";const Fv=({isSelected:e,stickerPack:n,onClick:o})=>{const i=t.react.exports.useRef(null),a=r.useIntl();return t.react.exports.useEffect((()=>{e&&i.current&&i.current.focus()}),[]),t.react.exports.createElement("button",{ref:i,className:r.classnames(yv,{[bv]:e}),"aria-label":a.formatMessage({id:"u842ND",defaultMessage:"Select {description}"},{description:n.description}),onClick:o,role:"tab","aria-selected":e},t.react.exports.createElement("div",{className:Sv},t.react.exports.createElement("img",{src:n.url,alt:n.description})))};Fv.displayName="StickerTabComponent";class Kv extends t.react.exports.Component{constructor(e){super(e),this.scrollPaneRef=t.react.exports.createRef(),this.onLeftArrowPress=()=>{this.setState({scrollOffset:Math.max(0,this.state.scrollOffset-180)})},this.onRightArrowPress=()=>{this.setState({scrollOffset:Math.min(this.maxScroll,this.state.scrollOffset+180)})},this.handleChangeSelection=e=>{e!==this.state.selected&&(this.setState({selected:e}),this.resetScrollPane())},this.state={maxScroll:1,scrollOffset:0,selected:0}}componentDidUpdate(){const e=this.maxScroll;e!==this.state.maxScroll&&this.setState({maxScroll:e})}get maxScroll(){const{stickerPacks:e}=this.props,{maxScroll:t,scrollOffset:r}=this.state,n=(r>0?40:0)+(r<t?40:0);return Math.max(48*e.length-268+n,0)}resetScrollPane(){this.scrollPaneRef.current&&(this.scrollPaneRef.current.scrollTop=0)}renderLeftChevronButton(){return t.react.exports.createElement("button",{"aria-hidden":"true",className:r.classnames(wv,kv,{[Ev]:0===this.state.scrollOffset}),tabIndex:-1,onClick:this.onLeftArrowPress},t.react.exports.createElement("div",{className:Pv},t.react.exports.createElement(p.IconArrow,{name:"right"})))}renderRightChevronButton(){const{scrollOffset:e,maxScroll:n}=this.state;return t.react.exports.createElement("button",{"aria-hidden":"true",className:r.classnames(wv,Cv,{[Ev]:e===n}),tabIndex:-1,onClick:this.onRightArrowPress},t.react.exports.createElement("div",{className:Pv},t.react.exports.createElement(p.IconArrow,{name:"right"})))}renderTabs(e){const{scrollOffset:r}=this.state,n=`translate(${-r}px)`;return t.react.exports.createElement("div",{className:vv,role:"tablist"},this.renderLeftChevronButton(),t.react.exports.createElement("div",{className:xv},t.react.exports.createElement("div",{className:"sc-sticker-inner-window",style:{transform:n}},e)),this.renderRightChevronButton())}render(){const{stickerPacks:e}=this.props,{selected:r}=this.state;if(e.length>0){const n=e.map(((e,n)=>t.react.exports.createElement(Fv,{key:e.id,stickerPack:e,isSelected:n===r,onClick:()=>this.handleChangeSelection(n)}))),o=e.map(((e,n)=>t.react.exports.createElement(Nv,{key:e.id,stickerPack:e,isSelected:n===r,onStickerSelected:this.props.onStickerSelected})));return t.react.exports.createElement("div",{className:_v,tabIndex:-1},this.renderTabs(n),t.react.exports.createElement("div",{className:Mv}),t.react.exports.createElement("div",{className:Tv,ref:this.scrollPaneRef},o))}return null}}Kv.displayName="Stickers";const Lv=({stickerPacks:e},{container:n,scope:o})=>{const i=t.react.exports.useRef(null),[a,s]=t.react.exports.useState(!1),c=r.useIntl(),l=t.react.exports.useCallback(((e,t,r)=>{s(!1);const i={metadata:[{type:"sticker",id:e,url:t,name:r}],text:r},a=jh.ContentState.createFromText("").createEntity("sticker","IMMUTABLE",i),c=a.getLastCreatedEntityKey(),l=jh.AtomicBlockUtils.insertAtomicBlock(jh.EditorState.createWithContent(a),c,"*"),u=n.getTriggers(o);u.comment.post(l),u.container.updateFocus(!1),document.activeElement&&document.activeElement.blur()}),[n]),u=t.react.exports.useCallback((()=>{s((e=>!e))}),[]),d=t.react.exports.useCallback((e=>{const t=i.current,r=e.target;a&&t&&!t.contains(r)&&s(!1)}),[a]);t.react.exports.useEffect((()=>(document.addEventListener("click",d),document.addEventListener("focusin",d),()=>{document.addEventListener("click",d),document.addEventListener("focusin",d)})),[d]);const p=""===n.getStatus().draft.editorState.getCurrentContent().getPlainText().trim();return e.length>0&&p?t.react.exports.createElement("div",{className:gv,ref:i},t.react.exports.createElement(jv,{label:c.formatMessage({id:"Bg2T2/",defaultMessage:"Sticker menu"}),isActive:a,onClick:u}),a&&t.react.exports.createElement(Kv,{stickerPacks:e,onStickerSelected:l})):null};Lv.displayName="StickerComponent",Lv.contextTypes={container:r.PropTypes.object,scope:r.PropTypes.object};const Uv=({annotation:e,tagline:n,forceCancelEnabled:o,postSignalComponent:i,author:a,renderBare:s,className:c,stickerPacks:l,rightAccessory:u,disabled:d,placeholder:p,content:f,onEditorStateChange:m,onPost:h,onCancel:g,onFocus:_,onBlur:v,onMentionsQueryUpdated:y,mentionsMatches:b,postOnBlur:x,mentionShareFlowHandlers:S,readOnly:w,mentionsDisabled:E,setEditorRef:k,shouldFocus:C,a11yEditorLabel:M})=>{const T=Pg.scCommentEditorInteractionContainer,A=t.react.exports.createElement(G_,{content:f,onEditorStateChange:m,onPost:h,onCancel:g,onFocus:_,onBlur:v,onMentionsQueryUpdated:y,mentionsMatches:b,postOnBlur:x,mentionShareFlowHandlers:S,readOnly:w,mentionsDisabled:E},t.react.exports.createElement(mv,{disabled:d},t.react.exports.createElement("div",{className:r.classnames(Pg.scCommentEditorInner,Pg.scCommentEditorInnerRightRail,{[Pg.scCommentEditorInnerDisabled]:!!d})},t.react.exports.createElement("div",{className:Pg.scCommentEditorAvatarWrapper},t.react.exports.createElement(d_,{user:a})),t.react.exports.createElement("div",{className:T},t.react.exports.createElement(P_,{setRef:k,shouldFocus:C,a11yEditorLabel:M,disabled:d,placeholder:p}),t.react.exports.createElement(z_,{scrollClassName:T})),u?t.react.exports.createElement("div",{className:Pg.scCommentEditorRightAccessory},u):null,l&&t.react.exports.createElement(Lv,{stickerPacks:l})),!d&&t.react.exports.createElement(Q_,{forceCancelEnabled:o,signalComponent:i,annotationElement:e})),t.react.exports.createElement(hv,null,n));if(s)return A;{const e=r.classnames(c,Pg.scCommentEditor);return t.react.exports.createElement("div",{className:e},A)}};Uv.displayName="CommentEditor";const qv=t.react.exports.memo((({label:e,disabled:n,onClick:o,size:i,className:a})=>t.react.exports.createElement(r.Button,{className:a,disabled:n,onClick:o,variant:"transparent",size:i},e)));qv.displayName="CancelButton";const Hv=t.react.exports.memo((({label:e,disabled:n,onClick:o,size:i,className:a})=>t.react.exports.createElement(r.Button,{className:a,disabled:n,onClick:o,variant:"primary",size:i},e)));Hv.displayName="PostButton";const Wv=t.react.exports.memo((e=>{const{children:n,cancelEnabled:o,cancelLabel:i,postEnabled:a,postLabel:s,signals:c}=e;return t.react.exports.createElement("div",{className:Pg.scCommentEditorControlsContainer},t.react.exports.createElement("div",{className:Pg.scCommentEditorControls},t.react.exports.createElement("div",{className:"sc-comment-editor-controls-left"},n),t.react.exports.createElement("div",{className:Pg.scCommentEditorControlsRight},t.react.exports.createElement(qv,{label:i,disabled:!o,onClick:c.cancel,size:"small",className:r.classnames(Pg.scCommentEditorControlsCancelRightRail)}),t.react.exports.createElement(Hv,{label:s,disabled:!a,onClick:c.post,size:"small",className:r.classnames(Pg.scCommentEditorControlsPostRightRail)}))))}));Wv.displayName="PostBar";const Vv=t.React$1.createContext({showApproval:!1});var $v;!function(e){e.newest="newest",e.oldest="oldest",e.unread="unread",e.timestamp="timestamp",e.page="page"}($v||($v={}));const Gv=[$v.newest,$v.oldest,$v.unread,$v.page,$v.timestamp],Qv=[$v.newest,$v.oldest,$v.unread],Jv=[...Qv,$v.timestamp],Xv=[...Qv,$v.page];r.injectInternalStyle("typescript/libraries/comments2/src/components/thread/index.module.out.css",(e=>'._sc-thread-controls_1lcj2_1{display:flex;justify-content:space-between;position:relative}._sc-thread-controls_1lcj2_1>:first-child{min-width:0}._sc-thread-controls_1lcj2_1>:nth-child(2){margin-left:8px}._sc-thread-controls-resolved-note_1lcj2_15{font-style:italic}._sc-thread-controls_1lcj2_1 .mc-tertiary-link-button{border-radius:0}._sc-thread-inactive_1lcj2_23 ._sc-thread-controls_1lcj2_1 ._sc-thread-controls-resolved-note_1lcj2_15{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}._sc-thread-comments_1lcj2_29{list-style-type:none;padding:0}._sc-thread-comments_1lcj2_29>*{position:relative}._sc-thread-comments_1lcj2_29>:before{content:"";height:100%;position:absolute;width:1px}._sc-thread-comments_1lcj2_29>:first-child:before{top:12px}._sc-thread-comments_1lcj2_29>:last-child:before{height:4px}._sc-thread--right-rail_1lcj2_54 ._sc-thread-comments_1lcj2_29>:first-child:before{top:30px}._sc-thread--right-rail_1lcj2_54 ._sc-thread-comments_1lcj2_29>:last-child:before{height:2px}._sc-thread--right-rail_1lcj2_54 ._sc-thread-comments_1lcj2_29>:only-child:before{height:0}._sc-thread-read_1lcj2_66._sc-thread-active_1lcj2_66{background:var(--color__standard__background)}._sc-thread-mobile_1lcj2_70 .mc-tertiary-link-button:focus{box-shadow:none}._sc-thread_1lcj2_1._sc-thread_1lcj2_1._sc-thread-editor-is-focused_1lcj2_74{border-color:var(--color__utility__focusring);box-shadow:0 0 0 3px var(--color__utility__focusring)}._sc-thread_1lcj2_1._sc-thread--right-rail_1lcj2_54._sc-thread-editor-is-focused_1lcj2_74{border-color:var(--color__utility__focusring);box-shadow:inset 0 0 0 3px var(--color__utility__focusring)}._sc-thread_1lcj2_1._sc-thread--right-rail_1lcj2_54{padding-top:0}._sc-thread-collapsed_1lcj2_89{cursor:pointer}._sc-thread-source_1lcj2_93{color:var(--unified_color_text_subtext);font-size:var(--unified_font_size_small);padding:0 16px 8px 58px}._sc-third-party-reply-cta_1lcj2_99{background-color:var(--color_ink_5);padding:10px 12px}._sc-third-party-reply-cta_1lcj2_99 p{margin:0}._sc-third-party-reply-cta_1lcj2_99 .mc-button-secondary{margin-top:8px}._sc-thread-editor-sticker-component-container_1lcj2_112{height:32px}._sc-thread-editor-sticker-button-container_1lcj2_116{float:right;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding-right:4px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}._sc-thread_1lcj2_1{border:1px solid transparent;color:var(--color_ink);font-size:var(--web_comment_font_size);margin:8px 12px 0;padding-top:8px}._sc-thread_1lcj2_1._sc-thread--right-rail_1lcj2_54{margin-left:0;margin-right:0}._sc-thread_1lcj2_1:first-child{margin-top:16px}._sc-thread_1lcj2_1:last-child{margin-bottom:40px}._sc-comment-stream-small-margin-bottom_1lcj2_149 ._sc-thread_1lcj2_1:last-child{margin-bottom:8px}._sc-thread-resolved_1lcj2_154{border-style:dashed}._sc-thread-inactive_1lcj2_23{cursor:pointer;opacity:1;padding-bottom:8px}._sc-thread-resolved_1lcj2_154._sc-thread-inactive_1lcj2_23{opacity:.5}._sc-thread-focused_1lcj2_170,._sc-thread-inactive_1lcj2_23:focus,._sc-thread-inactive_1lcj2_23:hover,._sc-thread-read_1lcj2_66._sc-thread-active_1lcj2_66{border-color:var(--color__standard__border);opacity:1}._sc-thread-inactive_1lcj2_23 ._sc-comment-read-only-editor-wrapper_1lcj2_176{-webkit-line-clamp:3;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}._sc-thread-controls_1lcj2_1{color:var(--color_stone);font-size:13px;line-height:var(--web_comment_line_height);margin:2px 12px 10px}._sc-thread-controls_1lcj2_1 ._sc-thread-toggle_1lcj2_192{color:var(--color_stone);padding:0}._sc-thread-controls_1lcj2_1 ._sc-thread-toggle_1lcj2_192 .mc-tertiary-icon-text{font-size:13px;line-height:var(--web_comment_line_height);padding:0}._sc-thread-comments_1lcj2_29>:before{background:var(--color_stone_forty);left:29px}._sc-thread--right-rail_1lcj2_54 ._sc-thread-comments_1lcj2_29>:before{left:20px}._sc-thread-unread_1lcj2_216 ._sc-thread-comments_1lcj2_29>:before{background:var(--color_blue_forty)}._sc-thread-active_1lcj2_66{cursor:inherit;margin-bottom:16px}._sc-thread-unread_1lcj2_216{background:var(--color_blue_sixteen)}._sc-thread-unread_1lcj2_216._sc-thread-active_1lcj2_66,._sc-thread-unread_1lcj2_216 ._sc-thread-editor_1lcj2_74,._sc-thread-unread_1lcj2_216._sc-thread-resolved_1lcj2_154,._sc-thread-unread_1lcj2_216:focus,._sc-thread-unread_1lcj2_216:hover{border-color:var(--color_blue_forty)}._sc-thread-comment-number_1lcj2_240{color:var(--color_blue);font-size:13px;padding:8px 16px 8px 58px}._sc-thread-editor_1lcj2_74{border-top:1px solid var(--color__standard__border)}._sc-thread--right-rail_1lcj2_54 ._sc-thread-comment-number_1lcj2_240{color:var(--color__standard__text);font-family:var(--type__body__xsmall--fontfamily);font-size:var(--type__body__xsmall--fontsize);line-height:var(--type__body__xsmall--lineheight);padding:4px 8px 4px 40px;text-decoration:underline}._sc-thread--right-rail_1lcj2_54{margin-bottom:0;margin-top:4px}._sc-thread--right-rail_1lcj2_54._sc-thread-inactive_1lcj2_23:first-child,._sc-thread--right-rail_1lcj2_54:first-child{margin-top:0}._sc-thread--right-rail_1lcj2_54 ._sc-thread-editor_1lcj2_74{margin-top:8px}._sc-thread--right-rail_1lcj2_54 ._sc-thread-controls-resolved-note_1lcj2_15{color:var(--color__faint__text);font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);font-style:normal;line-height:var(--type__body__small--lineheight)}._sc-thread--right-rail_1lcj2_54 ._sc-thread-controls_1lcj2_1{margin:8px 8px 0}._sc-thread--right-rail_1lcj2_54._sc-thread-unread_1lcj2_216{background:var(--color__attention__background--faint)}'));const Yv="_sc-thread-controls_1lcj2_1",Zv="_sc-thread-controls-resolved-note_1lcj2_15",ey="_sc-thread-inactive_1lcj2_23",ty="_sc-thread-comments_1lcj2_29",ry="_sc-thread--right-rail_1lcj2_54",ny="_sc-thread-read_1lcj2_66",oy="_sc-thread-active_1lcj2_66",iy="_sc-thread-mobile_1lcj2_70",ay="_sc-thread_1lcj2_1",sy="_sc-thread-editor-is-focused_1lcj2_74",cy="_sc-thread-source_1lcj2_93",ly="_sc-third-party-reply-cta_1lcj2_99",uy="_sc-thread-resolved_1lcj2_154",dy="_sc-thread-focused_1lcj2_170",py="_sc-comment-read-only-editor-wrapper_1lcj2_176",fy="_sc-thread-unread_1lcj2_216",my="_sc-thread-editor_1lcj2_74",hy="_sc-thread-comment-number_1lcj2_240",gy={draft:Fh,comment:Kh};class _y extends kg{get scopeNames(){return gy}mapPropsToLayers(){return[new og,new _g,new zg,L_,new W_,new ig]}createDefaultStatus(){return tg(this.scopeNames)}mapPropsToUpdates(e,t){let r={};return e.content!==t.comment.content&&(r=Object.assign(Object.assign({},r),{comment:Object.assign(Object.assign({},t.comment),{content:e.content})})),r}}class vy extends t.react.exports.Component{render(){const{author:e,children:r,annotation:n}=this.props,o=t.react.exports.createElement("div",{className:py},t.react.exports.createElement(O_,{readOnly:!0,annotation:n}));return t.react.exports.createElement(_y,Object.assign({},this.props),t.react.exports.createElement("div",{className:Jg},t.react.exports.createElement("div",{className:Xg},t.react.exports.createElement(d_,{user:e})),r&&"function"==typeof r?r(o):o))}}vy.displayName="CommentRendererV2";r.injectInternalStyle("typescript/component_libraries/flows/src/components/approval-comment/index.module.out.css",(e=>"._approval-title__approver_slivz_1{color:var(--color__core__accent)}._approval-title__response_slivz_5._approved_slivz_5{color:var(--color__success__text)}._approval-title__response_slivz_5._rejected_slivz_9{color:var(--color__warning__text)}._approval-title__response_slivz_5{align-items:center;display:flex;flex-direction:row}._approval-title__response-text_slivz_19{padding-left:8px}"));const yy="_approval-title__approver_slivz_1",by="_approval-title__response_slivz_5",xy="_approval-title__response-text_slivz_19",Sy=({content:e,metadata:n,intl:o})=>{const i=n.approval_type,{getRequestTitle:a,getRespondTitle:s}=wy(o);if("request"!==i&&"response"!==i)return null;if("request"===i){const o=n.approvers;return o?t.React$1.createElement(r.Text,{size:"small"},a(o,e,!!n.requires_all)):null}if("response"===i){if(!n.status)return null;const e="approved"===n.status;return t.React$1.createElement("span",{className:r.classnames(by,{approved:e,rejected:!e})},e?t.React$1.createElement(r.UIIcon,{size:"small",src:r.CheckmarkCircleLine}):t.React$1.createElement(r.UIIcon,{size:"small",src:r.WarningLine}),t.React$1.createElement("span",{className:xy},t.React$1.createElement(r.Text,{isBold:!0,size:"small",color:"inherit"},s(e))))}return null};Sy.displayName="ApprovalCommentTitle";const wy=e=>({getRequestTitle:(r,n,o)=>{const i=yy;return n?o?e.formatMessage({id:"T91vhB",defaultMessage:"<b>Get approval from</b>{approvers}, all approvers need to approve:"},{b:e=>t.React$1.createElement("b",null,e),approvers:r.map((e=>t.React$1.createElement("span",{className:i,key:e.email}," ","@",e.display_name?e.display_name:e.email)))}):e.formatMessage({id:"agSZ77",defaultMessage:"<b>Get approval from</b>{approvers}:, only one approval needed"},{b:e=>t.React$1.createElement("b",null,e),approvers:r.map((e=>t.React$1.createElement("span",{className:i,key:e.email}," ","@",e.display_name?e.display_name:e.email)))}):o?e.formatMessage({id:"hrsQj6",defaultMessage:"<b>Get approval from</b>{approvers}, all approvers need to approve"},{b:e=>t.React$1.createElement("b",null,e),approvers:r.map((e=>t.React$1.createElement("span",{className:i,key:e.email}," ","@",e.display_name?e.display_name:e.email)))}):e.formatMessage({id:"JGzPX9",defaultMessage:"<b>Get approval from</b>{approvers}, only one approval needed"},{b:e=>t.React$1.createElement("b",null,e),approvers:r.map((e=>t.React$1.createElement("span",{className:i,key:e.email}," ","@",e.display_name?e.display_name:e.email)))})},getRespondTitle:t=>t?e.formatMessage({id:"ysfwBR",defaultMessage:"Approved"}):e.formatMessage({id:"sJJ0Cg",defaultMessage:"Changes requested"})}),Ey=e=>{const n=r.useIntl();return t.react.exports.createElement(Wv,Object.assign({},e,{postLabel:n.formatMessage({id:"GM9O28",defaultMessage:"Save"}),cancelLabel:n.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})}))};Ey.displayName="InlineCommentEditorPostBarImpl";const ky=t.react.exports.memo(Ey);ky.displayName="InlineCommentEditorPostBar";const Cy=({actions:e,active:i,comment:{revisionInfo:a,threadId:s}})=>{const c=r.useIntl(),l=a.timestamp?c.formatMessage({id:"TrMn7R",defaultMessage:"On older version ({timestamp})"},{timestamp:c.formatTime(a.timestamp,{day:"numeric",month:"short"})}):c.formatMessage({id:"KwIXAO",defaultMessage:"On older version"});return i&&a.revision?t.react.exports.createElement(o.Tooltip,{positioning:"above",tooltipContent:c.formatMessage({id:"1d7dxH",defaultMessage:"View version history"})},t.react.exports.createElement(n.TertiaryLink,{className:Gg,onClick:()=>e.onClickOlderInfo(a,s)},l)):t.react.exports.createElement("div",{className:Gg},l)};Cy.displayName="OlderInfo";const My=e=>{const{comment:n,showRevisionInfo:o,commentControls:i}=e,{author:a,id:s,revisionInfo:c,threadId:l,timestamp:u}=n,d=r.useIntl();return t.react.exports.createElement("div",{className:Yg},o&&!c.isCurrent&&s===l?t.react.exports.createElement(Cy,Object.assign({},e)):null,t.react.exports.createElement("div",{className:Wg},t.react.exports.createElement("span",{className:Zg},a.name.display),u.getTime()?t.react.exports.createElement("span",{className:e_},r.timeSince(d,u,{displayLocation:"comments"})):null),t.react.exports.createElement("div",{className:t_},i))};My.displayName="RightRailCommentInfo";const Ty=r.defineMessage({id:"ZeF6kJ",defaultMessage:"Edit"}),Ay=r.defineMessage({id:"2WeS6D",defaultMessage:"Delete"}),Oy=e=>{const{comment:n,comment:{userPermissions:{canEdit:o,canDelete:i},content:{text:a,metadata:s}},actions:{onDeleted:c,onApproverRespond:l,onEditApproval:u,onDeleteApprovalComment:d,onResubmitApprovalFocus:p},isMobile:m,active:h,onStartEdit:g,isActionableApprovalComment:_,isApprovalOpen:v,showApproval:y}=e,b=r.useIntl(),x=Vg,S=$g,w=t.react.exports.useCallback((()=>{g(n)}),[n,g]),E=(e=w)=>t.react.exports.createElement(r.Text,{size:"small"},t.react.exports.createElement(r.Link,{href:e,variant:"monochromatic"},b.formatMessage(Ty))),k=(e=c)=>t.react.exports.createElement(r.Text,{size:"small"},t.react.exports.createElement(r.Link,{href:e,variant:"monochromatic"},b.formatMessage(Ay))),C=f.getApprovalMetadata(s),M=null==C?void 0:C.actor,T=Boolean(C&&("requester"===M||"approver"===M));if(!o&&!i&&!T||m||!h)return null;if(y&&C){if(!M)return null;if(!_)return null;if(v)return null;const e=t.react.exports.createElement(r.Button,{variant:"outline",onClick:l,size:"small"},b.formatMessage({id:"q997hq",defaultMessage:"Respond"})),s=t.react.exports.createElement(r.Button,{variant:"outline",onClick:p,size:"small"},b.formatMessage({id:"MoNd+x",defaultMessage:"Resubmit request"}));return t.react.exports.createElement("div",{className:r.classnames(x,"approval")},o&&u&&E((()=>u({commentId:n.id,content:a,approvalMetadata:C}))),o&&i&&t.react.exports.createElement("span",{className:S},"•"),i&&d&&k((()=>d(n.id,M))),l&&f.canRespondToApproval(n)&&e,p&&"response"===C.approval_type&&"requester"===M&&!o&&!i&&s)}return t.react.exports.createElement("div",{className:x},o&&E(),o&&i&&t.react.exports.createElement("span",{className:S},"•"),i&&k())};Oy.displayName="CommentActionMenu";const Dy=({className:e,children:n})=>{const o=r.useIntl();return t.react.exports.createElement("li",{className:e},t.react.exports.createElement(p_,null),t.react.exports.createElement("div",{className:Kg},t.react.exports.createElement("div",{className:Lg},n,n&&t.react.exports.createElement(w_,null),t.react.exports.createElement("span",{className:qg},o.formatMessage({id:"w9I0zq",defaultMessage:"This comment was deleted."})))))};Dy.displayName="DeleteMode";const Iy=({comment:e,mentionsMatches:r,actions:n,onEndEdit:o,className:i})=>{const a=t.react.exports.useCallback((e=>{n.onEdited(e),o()}),[n,o]);return t.react.exports.createElement("li",{className:i},t.react.exports.createElement(Uv,{author:e.author,content:e.content,postSignalComponent:ky,onCancel:o,onPost:a,mentionsMatches:r,onMentionsQueryUpdated:n.onMentionsQueryUpdated,renderBare:!0,shouldFocus:!0}))};Iy.displayName="EditMode";const Ry=e=>{const{children:n,comment:o,comment:{content:i,author:a,revisionInfo:s},className:c,isLatestReply:l}=e,u=r.useIntl(),{showApproval:d}=t.react.exports.useContext(Vv),p=f.getApprovalMetadata(o.content.metadata),m=0===o.content.text.length,h=vy;return t.react.exports.createElement("li",{className:c},t.react.exports.createElement(h,{content:i,author:a,annotation:n,revisionInfo:s},(n=>t.react.exports.createElement("div",{className:r.classnames(r_,{[n_]:l&&d&&!!p})},t.react.exports.createElement(My,Object.assign({},e)),d&&p&&t.react.exports.createElement(Sy,{intl:u,metadata:p,content:i.text}),d&&p&&m?null:n,t.react.exports.createElement(Oy,Object.assign({},e,{showApproval:d}))))))};Ry.displayName="DisplayMode";const By=t.react.exports.memo((e=>{const{comment:n,actions:o,mentionsMatches:i,isEditing:a=!1,onEndEdit:s,isEditingApproval:c,isActionableApprovalComment:l,className:u,children:d}=e,p=f.getApprovalMetadata(n.content.metadata),m={[Hg]:n.deleted};return p&&c&&l?null:n.deleted?t.react.exports.createElement(Dy,{className:r.classnames(u,s_,m)},d):a?t.react.exports.createElement(Iy,{comment:n,mentionsMatches:i,actions:o,onEndEdit:s,className:r.classnames(u,Pg.scCommentEditor,"sc-comment-inline-editor",m)}):t.react.exports.createElement(Ry,Object.assign({},e,{className:r.classnames(u,Qg,m)}),d)}));By.displayName="Comment";const Py=()=>{},jy=t.react.exports.memo((({label:e,onClick:n=Py})=>t.react.exports.createElement(r.Text,{className:i_,size:"small",color:"inherit"},t.react.exports.createElement(r.Link,{href:n,hasNoUnderline:!0,variant:"monochromatic",className:a_},e))));function zy(e,t){return Ny(e)&&Ny(t)||Fy(e)&&Fy(t)}function Ny(e){return void 0!==e&&"document"===e.type}function Fy(e){return void 0!==e&&("audio"===e.type||"video"===e.type)}function Ky(e){const{annotation:t}=e;return!!t&&Ny(t)&&t.regions.length>0}function Ly(e){const{annotation:t}=e;return!!t&&Fy(t)}jy.displayName="AnnotationLabel";function Uy(e){return(e<10?"0":"")+e}function qy(e,t,r,n){let o;return o=e>0?`${e}:${Uy(t)}:${Uy(r)}`:`${t}:${Uy(r)}`,void 0!==n&&(o+=`:${Uy(n)}`),o}function Hy(e,t,r,n){let o=0;if(o=t||e/100,n&&r&&Math.round(100*r)%2997==0)return function(e,t){const r=Math.round(100*t),n=Math.floor(e*r/100),o=2*r/2997,i=Math.floor(n/(36*r)),a=n%(36*r),s=Math.floor(a/(6*r)),c=a%(6*r);let l,u,d;if(0===c||1===c)l=0,u=0,d=c;else{const e=60*Math.ceil(t)-o;l=Math.floor((c-o)/e);const r=(c-o)%1798+o;u=Math.floor(r/Math.ceil(t)),d=r%Math.ceil(t)}return l=10*s+l,qy(i,l,u,d)}(o,r);if(n&&r&&r!==Math.round(r)){const e=Math.floor(o*r),t=Math.round(r);return qy(Math.floor(e/(3600*t)),Math.floor(e/(60*t))%60,Math.floor(e/t)%60,Math.floor(e%t))}{const e=Math.floor(o/3600),t=Math.floor(o/60)%60,i=Math.floor(o)%60;let a;if(n&&r){const e=o-Math.floor(o),t=1/r;a=Math.floor(e/t)}return qy(e,t,i,a)}}const Wy=e=>{let n;const{annotation:o,actions:i,comment:a,active:s}=e,c=r.useIntl(),l=t.react.exports.useCallback((e=>{i.onClickAnnotation({annotationInfo:{type:"numbered"},threadID:a.threadId,e:e,active:s})}),[i,a.threadId,s]),u=o&&"document"===o.type&&o.regions[0]&&o.regions[0].page;return u&&(n=t.react.exports.createElement(jy,{label:c.formatMessage({id:"rWnLvq",defaultMessage:"Page {page}"},{page:u}),onClick:l})),t.react.exports.createElement(By,Object.assign({},e),n)};Wy.displayName="NumberedComment";const Vy=({thirdPartySource:e,openWith:n})=>{const o=r.useIntl();return e?t.react.exports.createElement("div",{className:ly},t.react.exports.createElement("p",null,o.formatMessage({id:"Vqx50y",defaultMessage:"To reply and view more detail, open this file."})),n&&t.react.exports.createElement(r.Button$1,{variant:"secondary",onClick:n},o.formatMessage({id:"EzzmNI",defaultMessage:"Open file"}))):null};function $y(){return{text:"",metadata:[],timestamp:new Date}}function Gy(e){const n=r.useIntl();if(e.isEmpty)return null;const{disabled:o,postEnabled:i,postLabel:a,cancelLabel:s}=e,l=c.__rest(e,["disabled","postEnabled","postLabel","cancelLabel"]);return t.react.exports.createElement(Wv,Object.assign({},l,{postEnabled:i&&!o,postLabel:null!=a?a:n.formatMessage({id:"7Oex9C",defaultMessage:"Post"}),cancelLabel:null!=s?s:n.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})}))}Vy.displayName="ThirdPartyReplyCTA";const Qy=({disabled:e,onPost:n,onCancel:o,postLabel:i,cancelLabel:a,author:s,shouldFocus:c,mentionsMatches:l,onEditorStateChange:u,onMentionsQueryUpdated:d,onFocus:p=(()=>({})),onBlur:f=(()=>({})),stickerPacks:m,placeholder:h,mentionsDisabled:g})=>{const[_,v]=t.react.exports.useState((()=>$y())),y=t.react.exports.useCallback((()=>{v($y())}),[]),b=t.react.exports.useCallback(((t,r)=>{e||(y(),n(t,r))}),[y,n,e]),x=t.react.exports.useCallback((()=>{y(),o()}),[y,o]),S=t.react.exports.useCallback((r=>t.react.exports.createElement(Gy,Object.assign({},r,{disabled:e,postLabel:i,cancelLabel:a}))),[i,a,e]),w=r.useIntl();return t.react.exports.createElement("div",{className:my},t.react.exports.createElement(Uv,{a11yEditorLabel:w.formatMessage({id:"1s2pn+",defaultMessage:"Reply"}),author:s,shouldFocus:c,content:_,mentionsMatches:l,onEditorStateChange:u,onMentionsQueryUpdated:d,onCancel:x,onPost:b,placeholder:null!=h?h:w.formatMessage({id:"1s2pn+",defaultMessage:"Reply"}),postSignalComponent:S,onFocus:p,onBlur:f,stickerPacks:m,mentionsDisabled:g}))};Qy.displayName="ThreadEditor";const Jy=({thirdPartySource:e})=>{const n=function(e,t){switch(t){case"microsoft_word":return e.formatMessage({id:"tomAos",defaultMessage:"From Word"});case"microsoft_excel":return e.formatMessage({id:"ZDCfCa",defaultMessage:"From Excel"});case"microsoft_powerpoint":return e.formatMessage({id:"hDBFiJ",defaultMessage:"From PowerPoint"});default:return}}(r.useIntl(),e);return n?t.React$1.createElement("div",{className:cy},n):null};Jy.displayName="ThreadSourceMessage";const Xy=r.defineMessage({id:"z73pDg",defaultMessage:"Mark as unread"}),Yy=r.defineMessage({id:"T8mQUy",defaultMessage:"Mark as read"}),Zy=r.defineMessage({id:"YG9hOh",defaultMessage:"Resolve"}),eb=r.defineMessage({id:"OJgspa",defaultMessage:"Remove approval request"}),tb=t.React$1.memo((({actions:e,active:n,thread:o,isMobile:i,streamSettings:a,intl:c,showApproval:l,isApproval:u})=>!i&&n&&a.canModifyThreads&&!o.isThirdParty?l&&u?o.comments.length>1&&f.isApprovalRequester(o)?t.React$1.createElement(r.Tooltip,{placement:"top",title:c.formatMessage(eb)},t.React$1.createElement(r.IconButton,{variant:"transparent",size:"small",disabled:!!o.pending,onClick:e.onRemoveApprovalThread},t.React$1.createElement(r.UIIcon,{src:s.DeleteLine,size:"small"}))):null:t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(r.Tooltip,{title:c.formatMessage(o.read?Xy:Yy),placement:"top"},t.React$1.createElement(r.IconButton,{size:"small",variant:"transparent",onClick:o.read?e.onMarkAsUnread:e.onMarkAsRead,className:"sc-comments-thread-control-read-button",disabled:!!o.pending},t.React$1.createElement(r.UIIcon,{src:o.read?m.CommentUnreadLine:m.CommentReadLine,size:"small"}))),t.React$1.createElement(r.Tooltip,{title:c.formatMessage(Zy),placement:"top"},t.React$1.createElement(r.IconButton,{size:"small",variant:"transparent",onClick:e.onResolve,className:"sc-comments-thread-control-resolve-button",disabled:!!o.pending},t.React$1.createElement(r.UIIcon,{src:r.CheckmarkLine,size:"small"})))):null));tb.displayName="ThreadControlV2";const rb=()=>{},nb=e=>{const{count:n}=e,o=r.useIntl();o.formatMessage({id:"xj0qJi",defaultMessage:"{count, plural, one {# comment} other {# comments}}"},{count:n});const i=o.formatMessage({id:"NkhP8O",defaultMessage:"{count} comments"},{count:n});return t.react.exports.createElement("div",{className:hy},i)};nb.displayName="CollapsedCommentIndicator";const ob=({comment:e,active:r,commentFactory:n,isLatestReply:o,isActionableApprovalComment:i,annotation:a,commentControls:s,actions:c,editedComment:l,mentionsMatches:u,onStartEdit:d,onEndEdit:p,isMobile:f,showRevisionInfo:m,approvalFormStatus:h,thread:g})=>{var _;const v=!!l&&e.id===l.id,y=r&&!!(null==h?void 0:h.activeForm)&&h.threadId===g.id&&(null===(_=h.editArgs)||void 0===_?void 0:_.commentId)===e.id,b=!!(null==h?void 0:h.activeForm)&&h.threadId===g.id,x={actions:ub(e,c),active:r,annotation:a,comment:e,isEditing:v,onStartEdit:d,onEndEdit:p,mentionsMatches:u,isMobile:f,showRevisionInfo:m,commentControls:s,isLatestReply:o,isActionableApprovalComment:i,isEditingApproval:y,isApprovalOpen:b},S=n?n(x):t.react.exports.createElement(By,Object.assign({},x));return t.react.exports.createElement(t.react.exports.Fragment,{key:e.id},S)};ob.displayName="ThreadComment";const ib=({resolvedInfo:e})=>{const n=r.useIntl(),o="with_details"===e.type&&e;let i,a;return o?(i=n.formatMessage({id:"seHweQ",defaultMessage:"Marked as resolved by {name}"},{name:o.resolver.name.display}),a=r.timeSince(n,o.resolvedTimestamp,{displayLocation:"comments"})):(i=n.formatMessage({id:"0FvFw6",defaultMessage:"Marked as resolved"}),a=n.formatMessage({id:"0FvFw6",defaultMessage:"Marked as resolved"})),t.react.exports.createElement(r.Tooltip,{placement:"top",title:a},t.react.exports.createElement("div",{className:Zv},i))};ib.displayName="MarkAsResolved";const ab=({streamSettings:e,isMobile:n,actions:o,thread:i,active:a,isDisabled:s})=>{const c=r.useIntl();if(n)return null;const l=a&&e.canModifyThreads&&!i.isThirdParty,u=db(i);return u?t.react.exports.createElement("div",{className:Yv},t.react.exports.createElement(ib,{resolvedInfo:u}),l&&t.react.exports.createElement(r.Tooltip,{placement:"top",title:c.formatMessage({id:"8bWrbN",defaultMessage:"Restore"})},t.react.exports.createElement(r.IconButton,{variant:"transparent",size:"small",onClick:o.onUnresolve,disabled:s},t.react.exports.createElement(r.UIIcon,{src:h.RestoreLine,size:"small"})))):null};ab.displayName="ToplineControls";const sb=({thread:e,actions:n,streamSettings:o,active:i,isMobile:a,showApproval:s,isApproval:c})=>{const l=db(e),u=r.useIntl();return l?null:t.react.exports.createElement(tb,{thread:e,actions:n,streamSettings:o,active:i,isMobile:a,intl:u,showApproval:s,isApproval:c})};sb.displayName="CommentControlsV2";const cb=t.react.exports.forwardRef((({actions:e,commentFactory:n,mentionsMatches:o,stickerPacks:i,onCancel:a,openWith:s,thirdPartySource:c,thread:l,user:u,renderApprovalForm:d,editedComment:p,onStartEdit:m,onEndEdit:h,isMobile:g,showRevisionInfo:_,approvalFormStatus:v,streamSettings:y,active:b,className:x,showApproval:S,isApproval:w,isDisabled:E,onClick:k,includeEditor:C,shouldFocusThreadEditor:M,onEditorStateChange:T,onFocusEditor:A,onBlurEditor:O},D)=>{const I=r.useIntl(),{onMentionsQueryUpdated:R,onMouseEnter:B,onMouseLeave:P,onReply:j,onResubmitApprovalRequest:z}=e,N=t.react.exports.useMemo((()=>pb(l)),[l]),F=f.findActionableApprovalCommentId(l),K=f.getApprovers(l),L=t.react.exports.createElement(sb,{thread:l,actions:e,streamSettings:y,isMobile:g,active:b,showApproval:S,isApproval:w});return t.react.exports.createElement("li",{onMouseEnter:B,onMouseLeave:P,className:x,tabIndex:0,role:"button","aria-expanded":!0,"aria-label":l.read?I.formatMessage({id:"/pyeDm",defaultMessage:"Comment thread"}):I.formatMessage({id:"vFb6Ur",defaultMessage:"Unread comment thread"}),ref:D,onClick:k},t.react.exports.createElement(ab,{actions:e,streamSettings:y,thread:l,isMobile:g,active:b,isDisabled:E}),t.react.exports.createElement("ul",{className:ty},t.react.exports.createElement(ob,{comment:l.comments[0],active:!0,commentFactory:n,isLatestReply:0===N.length,isActionableApprovalComment:l.comments[0].id===F,annotation:l.annotation,commentControls:L,actions:e,editedComment:p,mentionsMatches:o,onStartEdit:m,onEndEdit:h,isMobile:g,showRevisionInfo:_,approvalFormStatus:v,thread:l}),N.map(((r,n)=>t.react.exports.createElement(ob,{key:n,comment:r,active:!0,isLatestReply:n===N.length-1,isActionableApprovalComment:r.id===F,actions:e,editedComment:p,mentionsMatches:o,onStartEdit:m,onEndEdit:h,isMobile:g,showRevisionInfo:_,approvalFormStatus:v,thread:l}))),S&&d&&d(["respond","response_edit","request_edit"])),C&&(S&&w?t.react.exports.createElement(Qy,{author:u,disabled:E,shouldFocus:M,mentionsMatches:{},onCancel:a,onEditorStateChange:T,onMentionsQueryUpdated:rb,onPost:e=>{const t={type:"approval",status:"pending",approval_type:"request",actor:"requester",approvers:K};z({text:e.text,metadata:[t]})},onFocus:A,onBlur:O,postLabel:I.formatMessage({id:"62bfQA",defaultMessage:"Resubmit request"}),placeholder:I.formatMessage({id:"CqEWQQ",defaultMessage:"Respond to {approver}"},{approver:K?K[0].display_name:""}),mentionsDisabled:!0}):t.react.exports.createElement(Qy,{author:u,disabled:E,shouldFocus:M,mentionsMatches:o,onCancel:a,onEditorStateChange:T,onMentionsQueryUpdated:R,onPost:j,onFocus:A,onBlur:O,stickerPacks:i})),t.react.exports.createElement(Vy,{thirdPartySource:l.isThirdParty?c:void 0,openWith:s}))}));cb.displayName="ActiveThread";const lb=t.react.exports.forwardRef((({actions:e,active:n,commentFactory:o,mentionsMatches:i,thread:a,isMobile:s,showRevisionInfo:c,thirdPartySource:l,editedComment:u,onStartEdit:d,onEndEdit:p,approvalFormStatus:m,streamSettings:h,className:g,onClick:_,isDisabled:v},y)=>{const b=r.useIntl(),{onMouseEnter:x,onMouseLeave:S,onFocus:w,onBlur:E}=e,k=t.react.exports.useMemo((()=>pb(a)),[a]),C=f.findActionableApprovalCommentId(a),M=t.react.exports.useCallback((e=>{13===e.keyCode&&_()}),[_]);return t.react.exports.createElement("li",{className:g,tabIndex:0,"aria-label":a.read?b.formatMessage({id:"/pyeDm",defaultMessage:"Comment thread"}):b.formatMessage({id:"vFb6Ur",defaultMessage:"Unread comment thread"}),role:"button","aria-expanded":!1,onClick:_,onKeyDown:M,onMouseEnter:x,onMouseLeave:S,onFocus:w,onBlur:E,ref:y},t.react.exports.createElement(ab,{actions:e,streamSettings:h,thread:a,isMobile:s,active:n,isDisabled:v}),t.react.exports.createElement("ul",{className:ty},t.react.exports.createElement(ob,{comment:a.comments[0],active:n,commentFactory:o,isLatestReply:0===k.length,isActionableApprovalComment:a.comments[0].id===C,annotation:a.annotation,actions:e,editedComment:u,mentionsMatches:i,onStartEdit:d,onEndEdit:p,isMobile:s,showRevisionInfo:c,approvalFormStatus:m,thread:a}),k.length>1&&t.react.exports.createElement(nb,{count:k.length-1}),k.length>0&&t.react.exports.createElement(By,{active:!1,comment:k[k.length-1],actions:{onClickAnnotation:rb,onDeleted:rb,onEdited:rb,onMentionsQueryUpdated:rb,onClickOlderInfo:rb,onApproverRespond:rb,onResubmitApprovalFocus:rb},mentionsMatches:i,onEndEdit:rb,onStartEdit:rb,isEditing:!1,isMobile:s,showRevisionInfo:c,isLatestReply:!0,isActionableApprovalComment:!0,isEditingApproval:!1})),t.react.exports.createElement(Jy,{thirdPartySource:a.isThirdParty?l:void 0}))}));function ub(e,t){return{onDeleted:()=>t.onCommentDeleted(e.id),onEdited:r=>t.onCommentEdited(e.id,r),onMentionsQueryUpdated:t.onMentionsQueryUpdated,onClickAnnotation:t.onClickAnnotation,onClickOlderInfo:t.onClickOlderInfo,onApproverRespond:t.onApproverRespond,onEditApproval:t.onEditApproval,onDeleteApprovalComment:t.onDeleteApprovalComment,onResubmitApprovalFocus:t.onResubmitApprovalFocus}}lb.displayName="InactiveThread";const db=({resolvedInfo:e,resolved:t})=>e||(t?fb:void 0),pb=e=>e.comments.slice(1).filter((e=>!e.deleted)),fb={type:"no_details"},mb=t.react.exports.memo((({actions:e,commentFactory:n,mentionsMatches:o,stickerPacks:i,onCancel:a,openWith:s,thirdPartySource:c,thread:l,user:u,renderApprovalForm:d,editedComment:p,onStartEdit:m,onEndEdit:h,isMobile:g,showRevisionInfo:_,approvalFormStatus:v,streamSettings:y,active:b,scrollToElem:x,onThreadInteractedWith:S,className:w="",focused:E,threadRef:k})=>{const{showApproval:C}=t.react.exports.useContext(Vv),M=t.react.exports.useRef(),T=t.react.exports.useCallback((e=>{M.current=e,null==k||k(e)}),[k]),A=f.isApprovalThread(l),[O,D]=t.react.exports.useState(!0),[I,R]=t.react.exports.useState(!1),[B,P]=t.react.exports.useState(!1),j=t.react.exports.useCallback((()=>R(!0)),[R]),z=t.react.exports.useCallback((()=>{A&&e.onResubmitApprovalBlur(),R(!1)}),[A,e]),N=t.react.exports.useCallback((e=>(null==M?void 0:M.current)&&x?x(M.current).then((()=>{M.current&&P(e)})):Promise.resolve()),[x]);t.react.exports.useEffect((()=>{if(b){const e=y.canComment;N(e)}else b||(R(!1),P(!1))}),[b]);const F=t.react.exports.useCallback((()=>{S(l)}),[l,S]),K=t.react.exports.useCallback((t=>{(function(e){return e.getSelection().getHasFocus()})(t)&&e.onEditorFocused(),e.onEditorStateChange(t),D(sg(t))}),[e]),L=b||!O,U=l.resolved||l.resolvedInfo,q=r.classnames(w,{[ay]:!0,[ry]:!0,[oy]:L,[ey]:!L,[ny]:l.read,[fy]:!l.read,[uy]:U,"sc-thread-unresolved":!U,[iy]:g,[dy]:E,[sy]:I}),H=y.canShowEditor&&!g&&!l.isThirdParty&&(!(C&&A)||"request_resubmit"===(null==v?void 0:v.activeForm)),W=!!l.pending;return l.comments.every((e=>!!e.deleted))?null:L?t.react.exports.createElement(cb,{actions:e,commentFactory:n,mentionsMatches:o,stickerPacks:i,onCancel:a,openWith:s,thirdPartySource:c,thread:l,user:u,renderApprovalForm:d,editedComment:p,onStartEdit:m,onEndEdit:h,isMobile:g,showRevisionInfo:_,approvalFormStatus:v,streamSettings:y,active:b,className:q,showApproval:void 0===C||C,isApproval:A,isDisabled:W,onClick:F,includeEditor:H,shouldFocusThreadEditor:B,onEditorStateChange:K,onFocusEditor:j,onBlurEditor:z,ref:T}):t.react.exports.createElement(lb,{actions:e,active:b,className:q,commentFactory:n,mentionsMatches:o,editedComment:p,thread:l,onStartEdit:m,onEndEdit:h,isMobile:g,showRevisionInfo:_,streamSettings:y,thirdPartySource:c,approvalFormStatus:v,isDisabled:W,onClick:F,includeEditor:H,ref:T})}));function hb(e){const{onClick:n,label:o,size:i,className:a}=e;return t.react.exports.createElement(r.Tooltip,{title:o,placement:"top"},t.react.exports.createElement(r.IconButton,{"aria-label":o,className:r.classnames(Pg.scCommentEditorControlBtn,a),onClick:n,variant:"transparent",size:i},t.react.exports.createElement(r.UIIcon,{src:m.MentionLine,size:i})))}function gb(e){return t.react.exports.createElement("div",{className:Pg.scCommentEditorInlineControls},e.children)}mb.displayName="Thread";const _b=e=>{const{signals:n,postEnabled:o,cancelEnabled:i,isEmpty:a,annotationElement:s,isContainerFocused:c}=e,l=r.useIntl(),u=t.react.exports.createElement("div",{className:Pg.scCommentEditorPostBarLeftWrapper},t.react.exports.createElement(hb,{label:l.formatMessage({id:"b57X9o",defaultMessage:"Tag someone"}),onClick:n.insertMention,size:"small",className:Pg.scCommentEditorMentionBtn}),s&&t.react.exports.createElement("div",{className:Pg.scCommentEditorPostBarAnnotation},s)),d=!a||c,p=d?u:void 0;return d||o||i?t.react.exports.createElement(Wv,Object.assign({},e,{postLabel:l.formatMessage({id:"7Oex9C",defaultMessage:"Post"}),cancelLabel:l.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})}),p):t.react.exports.createElement(gb,null,p)};_b.displayName="CommentStreamPostBarImpl";const vb=t.react.exports.memo(_b);var yb;function bb({countMsg:e,onClick:r,direction:n},{}){const o=n===yb.UP?"↑":"↓",i=`${nv} ${n===yb.UP?iv:sv}}`;return t.react.exports.createElement("div",{className:i,onClick:r},t.react.exports.createElement("div",{className:ov},t.react.exports.createElement("span",{className:cv},o),t.react.exports.createElement("span",{className:"unread-count"},e)))}vb.displayName="CommentStreamPostBar",function(e){e.DOWN="DOWN",e.UP="UP"}(yb||(yb={}));class xb extends t.react.exports.PureComponent{constructor(){super(...arguments),this.maybeRenderUnreadPill=(e,r,n)=>this.props.showUnreadPill&&e&&r?t.react.exports.createElement(bb,{countMsg:this.props.countMsgFn(e),onClick:()=>this.props.onItemActivated(r),direction:n}):null}render(){const{visibilityData:e,children:r}=this.props;return t.react.exports.createElement("div",{className:Y_},this.maybeRenderUnreadPill(e.countAbove,e.nearestAbove,yb.UP),r,this.maybeRenderUnreadPill(e.countBelow,e.nearestBelow,yb.DOWN))}}xb.displayName="UnreadPillWrapper";const Sb={};let wb=0;var Eb;function kb({timing:e,container:t,yPos:r,duration:n}){if(function(e,t){const r=e.dataset.scrollingId,n=r&&Sb[r];return n&&n.yPos===t}(t,r)){const e=t.dataset.scrollingId,r=e&&Sb[e];return r&&r.promise}let o;!function(e){const t=e.dataset.scrollingId;if(void 0!==t&&Sb[t]){const{rafId:e,rej:r}=Sb[t];cancelAnimationFrame(e),r()}}(t);const i=t.dataset.scrollingId=String(wb++),a=t.scrollTop,s=r-a;let c={};const l=new Promise(((e,t)=>{c={res:e,rej:t}}));return Sb[i]=Object.assign(Object.assign({},c),{rafId:requestAnimationFrame((function r(c){if(!t)return;o||(o=c);const l=c-o,u=function(e,t,r,n){switch(e){case Eb.Linear:return t*r/n;case Eb.QuadEaseIn:{const e=r/n;return t*e*e}case Eb.QuadEaseOut:{const e=r/n;return-t*e*(e-2)}case Eb.QuadEaseInOut:{const e=r/n;return e<.5?2*t*e*e:-t*e*(4-2*e)}}}(e,s,l,n);if(t.scrollTop=a+u,l<n)return Sb[i]=Object.assign(Object.assign({},Sb[i]),{rafId:requestAnimationFrame(r)});t.scrollTop=a+s,Sb[i].res(),delete Sb[i]})),yPos:r,promise:l}),l}!function(e){e[e.Linear=0]="Linear",e[e.QuadEaseIn=1]="QuadEaseIn",e[e.QuadEaseOut=2]="QuadEaseOut",e[e.QuadEaseInOut=3]="QuadEaseInOut"}(Eb||(Eb={}));class Cb extends t.react.exports.Component{constructor(){super(...arguments),this.listRef=null,this.setRef=e=>{this.listRef=e},this.scrollToElem=e=>{const r=t.reactDom.exports.findDOMNode(this);if(!r)return;const n=r.getBoundingClientRect().top,o=e.getBoundingClientRect().top-n-16,i=r.scrollTop+o;return kb({timing:Eb.QuadEaseOut,container:r,yPos:i,duration:600})}}componentDidMount(){this.props.onScroll&&this.listRef.addEventListener("scroll",this.props.onScroll),this.props.onWindowResize&&window.addEventListener("resize",this.props.onWindowResize)}componentWillUnmount(){this.props.onScroll&&this.listRef.removeEventListener("scroll",this.props.onScroll),this.props.onWindowResize&&window.removeEventListener("resize",this.props.onWindowResize)}render(){const e=this.props,{children:r,onWindowResize:n}=e,o=c.__rest(e,["children","onWindowResize"]);return t.react.exports.createElement("ul",Object.assign({},o,{ref:this.setRef}),t.react.exports.Children.map(r,(e=>t.react.exports.cloneElement(e,{scrollToElem:this.scrollToElem}))))}}Cb.displayName="ScrollList";class Mb extends t.react.exports.PureComponent{constructor(){super(...arguments),this.scrollListRef=null,this.lastVisibilityData={countAbove:0,countBelow:0,nearestAbove:null,nearestBelow:null},this.renewVisibilityData=()=>{const{onVisibilityDataChange:e,trackedItems:t}=this.props,r=function(e,t){const r={countAbove:0,countBelow:0,nearestAbove:null,nearestBelow:null};if(!e)return r;const{top:n,bottom:o}=e.getBoundingClientRect();for(let e=0;e<t.length;e++){const{item:i,ref:a}=t[e],s=a.getBoundingClientRect();if(s.bottom<n+10)r.countAbove++,r.nearestAbove=i;else if(s.top>o-10){r.countBelow=t.length-e,r.nearestBelow=i;break}}return r}(this.scrollListRef,t);Eg(r,this.lastVisibilityData)||e(r),this.lastVisibilityData=r},this.throttledRenewVisibilityData=g.throttle(this.renewVisibilityData,250)}componentDidMount(){this.renewVisibilityData()}componentDidUpdate(e){e.trackedItems!==this.props.trackedItems&&this.throttledRenewVisibilityData()}render(){const{className:e,children:r}=this.props;return t.react.exports.createElement(Cb,{ref:e=>{this.scrollListRef=e&&e.listRef},className:e,onScroll:this.throttledRenewVisibilityData,onWindowResize:this.throttledRenewVisibilityData},r)}}Mb.displayName="VisibilityAwareScrollList";r.injectInternalStyle("typescript/libraries/comments2/src/components/comment_stream/cloud_doc_message.module.out.css",(e=>"._sc-cloud-message_bk3tg_1{border-bottom:2px solid var(--color_border_light);font-size:var(--unified_font_size_normal);line-height:var(--unified_line_height_normal);margin:12px 16px 0;padding-bottom:12px}._sc-text-link_bk3tg_10{color:var(--unified_color_text_link);display:inline;font-size:inherit;padding:0}._sc-text-link_bk3tg_10 .mc-tertiary-icon-text{font-size:inherit;font-weight:inherit;line-height:inherit;padding:0}"));const Tb="_sc-cloud-message_bk3tg_1",Ab="_sc-text-link_bk3tg_10";const Ob=({thirdPartySource:e,openWith:r,intl:o})=>{return void 0===(i=e)||"google_doc"!==i&&"google_sheet"!==i&&"google_slides"!==i||!r?null:t.react.exports.createElement("div",{className:Tb},o.formatMessage({id:"wR6kVu",defaultMessage:"To add new comments, <url>open this file</url>"},{url:e=>t.react.exports.createElement(n.TertiaryLink,{className:Ab,onClick:r},e)}));var i};Ob.displayName="CloudDocMessage";const Db=({thirdPartySource:e,intl:r})=>e?t.react.exports.createElement(t.react.exports.Fragment,null,r.formatMessage({id:"62pp19",defaultMessage:"Comment will only post to Dropbox."})):null;Db.displayName="FirstPartyCommentAdvisory";const Ib={newest:r.defineMessage({id:"uISXje",defaultMessage:"Newest"}),oldest:r.defineMessage({id:"kLxqWH",defaultMessage:"Oldest"}),unread:r.defineMessage({id:"HUZzUG",defaultMessage:"Unread"}),timestamp:r.defineMessage({id:"EUJjNP",defaultMessage:"Timestamp"}),page:r.defineMessage({id:"QXX8eA",defaultMessage:"Page"})},Rb=({sortType:e,label:n,isChecked:o})=>t.React$1.createElement(r.Menu.SelectItem,{key:e,value:e,role:"menuitemcheckbox",selected:o,"aria-checked":o,"aria-label":n},n);Rb.displayName="SortMenuItem";const Bb=({currentSort:e,setSort:n,availableSortOpts:o})=>{const i=t.React$1.useRef(Qv),a=r.useIntl(),s=t.React$1.useCallback((e=>n(e)),[n]),c=t.React$1.useCallback((({isOpen:e})=>{e&&(i.current=o)}),[o]);return t.React$1.createElement("div",{className:av},t.React$1.createElement(r.Menu.Wrapper,{isPortaled:!1,onSelection:s,onToggle:c},(({getContentProps:n,getTriggerProps:o})=>t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(r.FilterChip,Object.assign({withDropdownIcon:!0,size:"small"},o()),a.formatMessage({id:"eca0uz",defaultMessage:"Sort by"})),t.React$1.createElement(r.Menu.Content,Object.assign({},n(),{style:{width:296}}),t.React$1.createElement(r.Menu.Segment,null,i.current.map((r=>t.React$1.createElement(Rb,{key:r,sortType:r,label:a.formatMessage(Ib[r]),isChecked:e===r})))))))))};Bb.displayName="SortChip";const Pb="PRIMARY",jb=()=>{},zb=Z_,Nb="comments-sort-pref",Fb=r.defineMessage({id:"XI84a1",defaultMessage:"Comments on this file will show up here."});class Kb extends t.react.exports.PureComponent{constructor(e){super(e),this.threadIdToRef={},this.editorHasChanges={},this.onThreadInteractedWith=e=>{const{activeThreadID:t,actionsAdapter:{onThreadActivated:r}}=this.props;t!==e.id&&r(e)},this.onVisibilityDataChange=e=>{this.setState({visibilityData:e})},this.updateTrackedItems=()=>{var e,t;this.setState({trackedItems:(e=this.props.threads,t=this.threadIdToRef,e.map((e=>({item:e,ref:t[e.id]}))).filter((({item:e,ref:t})=>!e.read&&t)))})},this.onStartEdit=e=>{this.setState({editedComment:e})},this.onEndEdit=()=>{this.setState({editedComment:void 0})},this.setEditorRef=e=>{this.editorRef=e},this.setThreadRef=(e,t)=>{this.threadIdToRef[e]=t},this.setSortBy=e=>{this.setState({sortBy:e}),this.props.actionsAdapter.onSortComments&&this.props.actionsAdapter.onSortComments(e)},this.handleClick=e=>{e.target.classList.contains(zb)&&(this.props.actionsAdapter.onAllThreadsDeactivated(),this.editorHasChanges.PRIMARY||this.props.actionsAdapter.onCommentDraftCancel())},this.onThreadReplyCancel=()=>{this.props.actionsAdapter.onAllThreadsDeactivated()},this.onPrimaryEditorCancel=()=>{document.activeElement&&this.blurElement(document.activeElement),this.props.actionsAdapter.onCommentDraftCancel(),this.setState({content:$y(),editedComment:void 0})},this.onPrimaryEditorFocus=()=>{this.props.actionsAdapter.onAllThreadsDeactivated(),this.props.actionsAdapter.onEditorFocused()},this.onEditorStateChange=e=>t=>{this.editorHasChanges[e]=!sg(t)},this.onPrimaryEditorStateChange=e=>{this.onEditorStateChange(Pb)(e),this.props.actionsAdapter.onEditorStateChange(e)},this.hasUnsavedChanges=()=>{const{threads:e}=this.props;return this.editorHasChanges.PRIMARY||e.some((e=>this.editorHasChanges[e.id]||!!e.pending))||void 0!==this.state.editedComment},this.promptBeforeCloseHandler=e=>{if(this.hasUnsavedChanges())return e.returnValue="",e.preventDefault(),""},this.createThreadActions=e=>{const{onCommentDeleted:t,onCommentEdited:r,onClickAnnotation:n,onEditorFocused:o,onMentionsQueryUpdated:i,onThreadMarkedAsRead:a,onThreadMarkedAsUnread:s,onThreadRepliedTo:c,onThreadResolved:l,onThreadUnresolved:u,onThreadMouseEnter:d=jb,onThreadMouseLeave:p=jb,onThreadFocus:f=jb,onThreadBlur:m=jb,onClickOlderInfo:h=jb,onApproverRespond:g,onEditApproval:_,onDeleteApprovalComment:v,onResubmitApprovalFocus:y,onResubmitApprovalBlur:b,onResubmitApprovalRequest:x,onRemoveApprovalThread:S}=this.props.actionsAdapter;return{onClickAnnotation:n,onReply:t=>c(e,t),onMarkAsRead:()=>a(e),onMarkAsUnread:()=>s(e),onResolve:()=>l(e),onUnresolve:()=>u(e),onMouseEnter:()=>d(e),onMouseLeave:()=>p(e),onFocus:()=>f(e),onBlur:()=>m(e),onEditorFocused:()=>o(e),onCommentDeleted:r=>t(r,e),onCommentEdited:(t,n)=>r(t,n,e),onMentionsQueryUpdated:i,onClickOlderInfo:h,onEditorStateChange:this.onEditorStateChange(e),onApproverRespond:()=>g(e),onEditApproval:t=>_(e,t),onDeleteApprovalComment:(t,r)=>v(t,e,r),onResubmitApprovalFocus:()=>y(e),onResubmitApprovalBlur:b,onResubmitApprovalRequest:t=>x(e,t),onRemoveApprovalThread:()=>S(e)}},this.state={content:$y(),editedComment:void 0,visibilityData:{countAbove:0,countBelow:0,nearestAbove:null,nearestBelow:null},trackedItems:[],context:{showApproval:e.showApproval},sortBy:this.getSortPref()}}getSortPref(){const e=window.localStorage.getItem(Nb);return e&&Gv.includes(e)?e:$v.newest}getChildContext(){return{showApproval:this.props.showApproval}}componentDidMount(){window.addEventListener("beforeunload",this.promptBeforeCloseHandler),this.updateTrackedItems()}componentDidUpdate({threads:e}){this.props.threads!==e&&this.updateTrackedItems()}getAvailableSortOpts(){const e=this.commonAnnotation();return Ny(e)?Xv:Fy(e)?Jv:Qv}sortThreadsByType(e){switch(this.state.sortBy){case $v.newest:return e.sort(((e,t)=>+t.timestamp-+e.timestamp));case $v.oldest:return e.sort(((e,t)=>+e.timestamp-+t.timestamp));case $v.page:const[t,r]=l.partition(e,Ky);return t.sort(((e,t)=>e.annotation.regions[0].page-t.annotation.regions[0].page)).concat(r.sort(((e,t)=>+t.timestamp-+e.timestamp)));case $v.timestamp:const[n,o]=l.partition(e,Ly);return n.sort(((e,t)=>e.annotation.time-t.annotation.time)).concat(o.sort(((e,t)=>+t.timestamp-+e.timestamp)));case $v.unread:const[i,a]=l.partition(e,"read");return a.sort(((e,t)=>+t.timestamp-+e.timestamp)).concat(i.sort(((e,t)=>+t.timestamp-+e.timestamp)))}}get sortedThreads(){let e=[];return this.getAvailableSortOpts().includes(this.state.sortBy)?e=this.sortThreadsByType(this.props.threads):Ny(this.commonAnnotation())?this.setState({sortBy:$v.page},(()=>{e=this.sortThreadsByType(this.props.threads)})):Fy(this.commonAnnotation())?this.setState({sortBy:$v.timestamp},(()=>{e=this.sortThreadsByType(this.props.threads)})):this.setState({sortBy:$v.newest},(()=>{e=this.sortThreadsByType(this.props.threads)})),this.props.showResolvedComments?e:e.filter((e=>!(e.resolved||e.resolvedInfo)))}get sortedVisibleThreads(){return this.sortedThreads.filter((e=>e.comments.some((e=>!e.deleted))))}commonAnnotation(){let e;for(const t of this.props.threads){if(t.annotation&&e&&!zy(t.annotation,e))return;e=t.annotation||e}return e}componentWillUnmount(){window.removeEventListener("beforeunload",this.promptBeforeCloseHandler)}focusPrimaryEditor(){var e;null===(e=this.editorRef)||void 0===e||e.focus()}blurElement(e){let t;"function"==typeof Event?t=new FocusEvent("blur"):(t=document.createEvent("Event"),t.initEvent("blur",!0,!0)),e.dispatchEvent(t)}get includeEditor(){const{isMobile:e,settings:t}=this.props;return t.canShowEditor&&!e}get includeEditorMeatball(){const{settings:e}=this.props;return this.includeEditor&&e.canShowEditorMeatball}render(){const{actionsAdapter:{onMentionsQueryUpdated:e,onThreadCreated:n},className:o="",commentFactory:i,editorFactory:a,user:s,mentionsMatches:c,activeThreadID:l,hoverThreadID:u,focusedThreadID:d,isGoogleDSS:p,isMobile:m,intl:h,placeholderOverride:g,settings:v,showRevisionInfo:y,stickerPacks:b,thirdPartySource:x,initialEditorFocus:S,hideOpenCloudDocMessage:w,meatballMenu:E}=this.props,k=r.classnames(o,{[J_]:!0,[X_]:!0}),C=r.classnames({[lv]:this.includeEditorMeatball}),M=r.classnames({[uv]:this.includeEditorMeatball});let T=null;const A=g||h.formatMessage({id:"DkHo17",defaultMessage:"Enter your thoughts here"}),[O,D]=f.getApprovalRequestCounts(this.props.threads);if(this.includeEditor){const r={a11yEditorLabel:A,author:s,className:ev,content:this.state.content,placeholder:A,postSignalComponent:vb,onCancel:this.onPrimaryEditorCancel,setEditorRef:this.setEditorRef,onPost:n,mentionsMatches:c,onMentionsQueryUpdated:e,onFocus:this.onPrimaryEditorFocus,onEditorStateChange:this.onPrimaryEditorStateChange,shouldFocus:S,stickerPacks:b,tagline:t.react.exports.createElement(Db,{thirdPartySource:x,intl:h})};T=a?a(r):t.react.exports.createElement(Uv,Object.assign({},r))}else if(!m){const e=p?"google_doc":x;T=w?null:t.react.exports.createElement(Ob,{thirdPartySource:e,openWith:this.props.openWith,intl:h})}return t.react.exports.createElement(_.Provider,{value:h},t.react.exports.createElement(Vv.Provider,{value:this.state.context},t.react.exports.createElement("div",{className:k,onClick:this.handleClick},t.react.exports.createElement("div",{className:C},t.react.exports.createElement("div",{className:M},T),this.includeEditorMeatball&&E),0!==D&&0!==O?t.react.exports.createElement("div",{className:pv},t.react.exports.createElement(r.Text,{size:"small",color:"faint"},f.getApprovalRequestsSubtext(O,h))):null,0===this.sortedVisibleThreads.length?t.react.exports.createElement("div",{className:dv},t.react.exports.createElement(r.Text,{size:"small",color:"faint"},h.formatMessage(Fb))):t.react.exports.createElement(t.react.exports.Fragment,null,t.react.exports.createElement(Bb,{currentSort:this.state.sortBy,setSort:this.setSortBy,availableSortOpts:this.getAvailableSortOpts()}),t.react.exports.createElement(xb,{showUnreadPill:this.props.showUnreadPill,visibilityData:this.state.visibilityData,countMsgFn:e=>h.formatMessage({id:"fkNHq+",defaultMessage:"{count} unread"},{count:e}),onItemActivated:this.onThreadInteractedWith},t.react.exports.createElement(Mb,{className:zb,trackedItems:this.state.trackedItems,onVisibilityDataChange:this.onVisibilityDataChange},this.sortedVisibleThreads.map((e=>t.react.exports.createElement(mb,{threadRef:t=>this.setThreadRef(e.id,t),key:e.id,actions:this.createThreadActions(e.id),active:e.id===l,focused:e.id===u||e.id===d,commentFactory:i,editedComment:this.state.editedComment,onThreadInteractedWith:this.onThreadInteractedWith,onCancel:this.onThreadReplyCancel,onStartEdit:this.onStartEdit,onEndEdit:this.onEndEdit,isMobile:m,thread:e,user:s,mentionsMatches:c,showRevisionInfo:y,streamSettings:v,stickerPacks:b,thirdPartySource:this.props.thirdPartySource,openWith:this.props.openWith,renderApprovalForm:this.props.renderApprovalForm,approvalFormStatus:this.props.approvalFormStatus})))))))))}}Kb.childContextTypes={showApproval:r.PropTypes.bool},Kb.displayName="CommentStream";const Lb={canComment:!0,canModifyThreads:!0,canShowEditor:!0,canShowEditorMeatball:!1},Ub={canComment:!1,canModifyThreads:!1,canShowEditor:!1,canShowEditorMeatball:!1};r.injectInternalStyle("typescript/libraries/comments2/src/components/comment_stream/index_redesign.module.out.css",(e=>'._sc-comment-stream_zk6wq_1{box-sizing:border-box;display:flex;flex-direction:column;height:100%;width:328px}._sc-comment-stream_zk6wq_1._sc-comment-stream--right-rail_zk6wq_9{width:100%}._sc-unread-pill-wrapper_zk6wq_15>div{flex:0 1 auto}._sc-comment-stream-threads_zk6wq_19{flex:1 1 auto;list-style-type:none;margin:0;overflow:auto;padding:0;z-index:0}._sc-comment-stream--right-rail_zk6wq_9 ._sc-comment-stream-threads_zk6wq_19{margin-top:8px}._sc-comment-stream-open_zk6wq_32{width:15em}._sc-comment-stream-closed_zk6wq_36{width:1em}._sc-annotation-toggle_zk6wq_40{font-feature-settings:"tnum";box-sizing:border-box;display:inline-block}._sc-annotation-toggle-inner_zk6wq_46{cursor:default;display:flex}._sc-unread-pill-wrapper_zk6wq_15{display:flex;flex:1 1 auto;flex-direction:column;min-height:0;overflow:hidden}._sc-unread-pill-wrapper_zk6wq_15 ._unread-pill_zk6wq_60{display:block;height:0;margin:auto;z-index:1}._unread-pill_zk6wq_60 ._unread-pill-text_zk6wq_67{background:#d2e6fa;border:2px solid #f7f9fa;color:#0070e0;cursor:pointer;padding:5px 10px}._unread-pill_zk6wq_60 ._unread-pill-text_zk6wq_67:hover{background:#bfdbf7}._unread-pill_zk6wq_60._up_zk6wq_83 ._unread-pill-text_zk6wq_67{margin-top:15px;position:relative}._comments-sort-menu_zk6wq_88{background-color:var(--color__standard__background);margin:var(--spacing__unit--2) var(--spacing__unit--1);position:-webkit-sticky;position:sticky;top:0;width:100%;z-index:2}._sc-unread-pill-wrapper_zk6wq_15 ._unread-pill_zk6wq_60._down_zk6wq_97{position:relative;top:-42px}._unread-pill_zk6wq_60 span._arrow-indicator_zk6wq_102{margin-right:5px}._sc-suggested-comments_zk6wq_106{margin:4px 10px}._sc-suggested-comments-button_zk6wq_110{background:var(--color__attention__background--faint);border-radius:20px;cursor:pointer;margin:4px;padding:8px 10px}._sc-suggested-comments-button_zk6wq_110:hover{background:var(--color__attention__background)}._sc-comment-stream_zk6wq_1{position:relative}._sc-annotation-toggle_zk6wq_40{font-weight:500}@keyframes _comment-button-fade-in_zk6wq_1{0%{opacity:0}70%{opacity:0}to{opacity:1}}._sc-comment-stream-error-container_zk6wq_144{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;min-height:100%;text-align:center;width:100%}._sc-comment-stream-error-title_zk6wq_155{font-weight:var(--unified_font_weight_semibold)}._sc-comment-stream-error-subtext_zk6wq_161,._sc-comment-stream-error-title_zk6wq_155{font-size:var(--unified_font_size_normal);line-height:var(--web_comment_line_height)}._sc-comment-stream-error-subtext_zk6wq_161{color:var(--unified_color_text_subtext);width:240px}._sc-comment-stream-error-button-container_zk6wq_168{margin-top:20px}._sc-comment-stream-editor-container_zk6wq_172{background-color:var(--dig-color__background__subtle);border-top:1px solid var(--color__standard__border);padding:var(--spacing__unit--1)}._sc-comment-stream-editor-container_zk6wq_172._with-meatball-menu_zk6wq_178{display:flex}._sc-comment-stream-editor-bundle_zk6wq_182{flex:1}._sc-comment-stream-meatball-icon_zk6wq_186{align-self:center;padding:var(--spacing__unit--2) var(--spacing__unit--1) 0 0}._sc-comment-empty-container_zk6wq_191{padding:var(--spacing__unit--2) var(--spacing__unit--1) var(--spacing__unit--2) var(--spacing__unit--1)}._sc-comment-approvals-container_zk6wq_196{margin-top:10px}._sc-comment-stream-wrapper_zk6wq_200{display:flex;flex-direction:column;height:100%;overflow:auto;padding:0 var(--spacing__unit--1)}'));const qb="_sc-comment-stream_zk6wq_1",Hb="_sc-comment-stream--right-rail_zk6wq_9",Wb="_sc-comment-stream-threads_zk6wq_19",Vb="_comments-sort-menu_zk6wq_88",$b="_sc-comment-stream-editor-container_zk6wq_172",Gb="_with-meatball-menu_zk6wq_178",Qb="_sc-comment-stream-editor-bundle_zk6wq_182",Jb="_sc-comment-empty-container_zk6wq_191",Xb="_sc-comment-approvals-container_zk6wq_196",Yb="_sc-comment-stream-wrapper_zk6wq_200";function Zb(e){return t.react.exports.createElement("div",{className:Pg.scCommentEditorInlineControls},e.children)}const ex=e=>{const{postEnabled:n,cancelEnabled:o,isEmpty:i,annotationElement:a,isContainerFocused:s}=e,c=r.useIntl(),l=t.react.exports.createElement("div",{className:Pg.scCommentEditorPostBarLeftWrapper},a&&t.react.exports.createElement("div",{className:Pg.scCommentEditorPostBarAnnotation},a)),u=!i||s,d=u?l:void 0;return u||n||o?t.react.exports.createElement(Wv,Object.assign({},e,{postLabel:c.formatMessage({id:"7Oex9C",defaultMessage:"Post"}),cancelLabel:c.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})}),d):t.react.exports.createElement(Zb,null,d)};ex.displayName="CommentStreamPostBarImpl";const tx=t.react.exports.memo(ex);tx.displayName="CommentStreamPostBar";const rx=(e,t)=>!!t&&e.current&&e.current.contains(t),nx=({children:e},{container:r,scope:n})=>{const o=t.react.exports.useRef(null),i=t.react.exports.useCallback((e=>{rx(o,e.relatedTarget)||r.getTriggers(n).container.focus(e)}),[r,n]),a=t.react.exports.useCallback((e=>{rx(o,e.relatedTarget)||r.getTriggers(n).container.blur(e)}),[r,n]),s=t.react.exports.useCallback((e=>{r.getStatus().container.isFocused&&(e.stopPropagation(),e.preventDefault())}),[r]);return t.react.exports.createElement("div",{ref:o,onFocus:i,onBlur:a,onMouseDown:s},e)};nx.displayName="FocusContainerComponent",nx.contextTypes={container:r.PropTypes.object,scope:r.PropTypes.object};const ox=({annotation:e,tagline:n,forceCancelEnabled:o,postSignalComponent:i,author:a,renderBare:s,className:c,stickerPacks:l,rightAccessory:u,disabled:d,placeholder:p,content:f,onEditorStateChange:m,onPost:h,onCancel:g,onFocus:_,onBlur:v,onMentionsQueryUpdated:y,mentionsMatches:b,postOnBlur:x,mentionShareFlowHandlers:S,readOnly:w,mentionsDisabled:E,setEditorRef:k,shouldFocus:C,a11yEditorLabel:M,editorRef:T})=>{const A=Pg.scCommentEditorInteractionContainer,O=t.react.exports.createElement(G_,{content:f,onEditorStateChange:m,onPost:h,onCancel:g,onFocus:_,onBlur:v,onMentionsQueryUpdated:y,mentionsMatches:b,postOnBlur:x,mentionShareFlowHandlers:S,readOnly:w,mentionsDisabled:E},t.react.exports.createElement(nx,{disabled:d},t.react.exports.createElement("div",{className:r.classnames(Pg.scCommentEditorInner,Pg.scCommentEditorInnerRightRail,{[Pg.scCommentEditorInnerDisabled]:!!d})},t.react.exports.createElement("div",{className:Pg.scCommentEditorAvatarWrapper},t.react.exports.createElement(d_,{user:a})),t.react.exports.createElement("div",{className:A},t.react.exports.createElement(P_,{setRef:k,shouldFocus:C,a11yEditorLabel:M,disabled:d,placeholder:p}),t.react.exports.createElement(z_,{scrollClassName:A})),t.react.exports.createElement(ax,{stickerPacks:l,rightAccessory:u,editorRef:T,disabled:d})),t.react.exports.createElement(Q_,{forceCancelEnabled:o,signalComponent:i,annotationElement:e})),t.react.exports.createElement(hv,null,n));if(s)return O;{const e=r.classnames(c,Pg.scCommentEditor);return t.react.exports.createElement("div",{className:e},O)}};function ix(e){const{onClick:n,label:o,size:i,className:a}=e;return t.react.exports.createElement(r.Tooltip,{title:o,placement:"top"},t.react.exports.createElement(r.IconButton,{"aria-label":o,className:r.classnames(Pg.scCommentEditorControlBtn,a),onClick:n,variant:"transparent",size:i,onMouseDown:e=>e.preventDefault()},t.react.exports.createElement(r.UIIcon,{src:m.MentionLine})))}ox.displayName="CommentEditor";const ax=({stickerPacks:e,rightAccessory:n,editorRef:o,disabled:i},{container:a,scope:s})=>{const c=r.useIntl(),{draft:{editorState:l},container:{isFocused:u}}=a.getStatus(),d=""===l.getCurrentContent().getPlainText().trim()&&!u;return t.react.exports.createElement(t.react.exports.Fragment,null,d&&!!n&&t.react.exports.createElement("div",{className:Pg.scCommentEditorRightAccessory},n),!i&&t.react.exports.createElement("div",{className:Pg.scCommentEditorRightAccessory},t.react.exports.createElement(ix,{label:c.formatMessage({id:"b57X9o",defaultMessage:"Tag someone"}),onClick:()=>{null==o||o.focus(),a.getTriggers(s).draft.insertMacro("")},size:"small"})),!i&&e&&t.react.exports.createElement(Lv,{stickerPacks:e}))};ax.displayName="EditorRightAccessories",ax.contextTypes={container:r.PropTypes.object,scope:r.PropTypes.object};const sx={newest:r.defineMessage({id:"uISXje",defaultMessage:"Newest"}),oldest:r.defineMessage({id:"kLxqWH",defaultMessage:"Oldest"}),unread:r.defineMessage({id:"HUZzUG",defaultMessage:"Unread"}),timestamp:r.defineMessage({id:"EUJjNP",defaultMessage:"Timestamp"}),page:r.defineMessage({id:"QXX8eA",defaultMessage:"Page"})},cx=({sortType:e,label:n,isChecked:o})=>t.React$1.createElement(r.Menu.SelectItem,{key:e,value:e,role:"menuitemcheckbox",selected:o,"aria-checked":o,"aria-label":n},n);cx.displayName="SortMenuItem";const lx=({currentSort:e,setSort:n,availableSortOpts:o})=>{const i=t.React$1.useRef(Qv),a=r.useIntl(),s=t.React$1.useCallback((e=>n(e)),[n]),c=t.React$1.useCallback((({isOpen:e})=>{e&&(i.current=o)}),[o]);return t.React$1.createElement("div",{className:Vb},t.React$1.createElement(r.Menu.Wrapper,{isPortaled:!1,onSelection:s,onToggle:c},(({getContentProps:n,getTriggerProps:o})=>t.React$1.createElement(t.React$1.Fragment,null,t.React$1.createElement(r.FilterChip,Object.assign({withDropdownIcon:!0},o()),a.formatMessage({id:"eca0uz",defaultMessage:"Sort by"})),t.React$1.createElement(r.Menu.Content,Object.assign({},n(),{style:{width:296}}),t.React$1.createElement(r.Menu.Segment,null,i.current.map((r=>t.React$1.createElement(cx,{key:r,sortType:r,label:a.formatMessage(sx[r]),isChecked:e===r})))))))))};lx.displayName="SortChip";const ux="PRIMARY",dx=()=>{},px=Wb,fx=r.defineMessage({id:"XI84a1",defaultMessage:"Comments on this file will show up here."});class mx extends t.react.exports.PureComponent{constructor(e){super(e),this.threadIdToRef={},this.editorHasChanges={},this.onThreadInteractedWith=e=>{const{activeThreadID:t,actionsAdapter:{onThreadActivated:r}}=this.props;t!==e.id&&r(e)},this.onVisibilityDataChange=e=>{this.setState({visibilityData:e})},this.updateTrackedItems=()=>{var e,t;this.setState({trackedItems:(e=this.props.threads,t=this.threadIdToRef,e.map((e=>({item:e,ref:t[e.id]}))).filter((({item:e,ref:t})=>!e.read&&t)))})},this.onStartEdit=e=>{this.setState({editedComment:e})},this.onEndEdit=()=>{this.setState({editedComment:void 0})},this.setEditorRef=e=>{this.editorRef=e},this.setThreadRef=(e,t)=>{this.threadIdToRef[e]=t},this.setSortBy=e=>{this.setState({sortBy:e}),this.props.actionsAdapter.onSortComments&&this.props.actionsAdapter.onSortComments(e)},this.handleClick=e=>{e.target.classList.contains(px)&&(this.props.actionsAdapter.onAllThreadsDeactivated(),this.editorHasChanges.PRIMARY||this.props.actionsAdapter.onCommentDraftCancel())},this.onThreadReplyCancel=()=>{this.props.actionsAdapter.onAllThreadsDeactivated()},this.onPrimaryEditorCancel=()=>{document.activeElement&&this.blurElement(document.activeElement),this.props.actionsAdapter.onCommentDraftCancel(),this.setState({content:$y(),editedComment:void 0})},this.onPrimaryEditorFocus=()=>{this.props.actionsAdapter.onAllThreadsDeactivated(),this.props.actionsAdapter.onEditorFocused()},this.onEditorStateChange=e=>t=>{this.editorHasChanges[e]=!sg(t)},this.onPrimaryEditorStateChange=e=>{this.onEditorStateChange(ux)(e),this.props.actionsAdapter.onEditorStateChange(e)},this.hasUnsavedChanges=()=>{const{threads:e}=this.props;return this.editorHasChanges.PRIMARY||e.some((e=>this.editorHasChanges[e.id]||!!e.pending))||void 0!==this.state.editedComment},this.promptBeforeCloseHandler=e=>{if(this.hasUnsavedChanges())return e.returnValue="",e.preventDefault(),""},this.createThreadActions=e=>{const{onCommentDeleted:t,onCommentEdited:r,onClickAnnotation:n,onEditorFocused:o,onMentionsQueryUpdated:i,onThreadMarkedAsRead:a,onThreadMarkedAsUnread:s,onThreadRepliedTo:c,onThreadResolved:l,onThreadUnresolved:u,onThreadMouseEnter:d=dx,onThreadMouseLeave:p=dx,onThreadFocus:f=dx,onThreadBlur:m=dx,onClickOlderInfo:h=dx,onApproverRespond:g,onEditApproval:_,onDeleteApprovalComment:v,onResubmitApprovalFocus:y,onResubmitApprovalBlur:b,onResubmitApprovalRequest:x,onRemoveApprovalThread:S}=this.props.actionsAdapter;return{onClickAnnotation:n,onReply:t=>c(e,t),onMarkAsRead:()=>a(e),onMarkAsUnread:()=>s(e),onResolve:()=>l(e),onUnresolve:()=>u(e),onMouseEnter:()=>d(e),onMouseLeave:()=>p(e),onFocus:()=>f(e),onBlur:()=>m(e),onEditorFocused:()=>o(e),onCommentDeleted:r=>t(r,e),onCommentEdited:(t,n)=>r(t,n,e),onMentionsQueryUpdated:i,onClickOlderInfo:h,onEditorStateChange:this.onEditorStateChange(e),onApproverRespond:()=>g(e),onEditApproval:t=>_(e,t),onDeleteApprovalComment:(t,r)=>v(t,e,r),onResubmitApprovalFocus:()=>y(e),onResubmitApprovalBlur:b,onResubmitApprovalRequest:t=>x(e,t),onRemoveApprovalThread:()=>S(e)}},this.state={content:$y(),editedComment:void 0,visibilityData:{countAbove:0,countBelow:0,nearestAbove:null,nearestBelow:null},trackedItems:[],context:{showApproval:e.showApproval},sortBy:this.getSortPref()}}getSortPref(){const e=window.localStorage.getItem("comments-sort-pref");return e&&Gv.includes(e)?e:$v.newest}getChildContext(){return{showApproval:this.props.showApproval}}componentDidMount(){window.addEventListener("beforeunload",this.promptBeforeCloseHandler),this.updateTrackedItems()}componentDidUpdate({threads:e}){this.props.threads!==e&&this.updateTrackedItems()}getAvailableSortOpts(){const e=this.commonAnnotation();return Ny(e)?Xv:Fy(e)?Jv:Qv}sortThreadsByType(e){switch(this.state.sortBy){case $v.newest:return e.sort(((e,t)=>+e.timestamp-+t.timestamp));case $v.oldest:return e.sort(((e,t)=>+t.timestamp-+e.timestamp));case $v.page:const[t,r]=l.partition(e,Ky);return t.sort(((e,t)=>e.annotation.regions[0].page-t.annotation.regions[0].page)).concat(r.sort(((e,t)=>+e.timestamp-+t.timestamp)));case $v.timestamp:const[n,o]=l.partition(e,Ly);return n.sort(((e,t)=>e.annotation.time-t.annotation.time)).concat(o.sort(((e,t)=>+e.timestamp-+t.timestamp)));case $v.unread:const[i,a]=l.partition(e,"read");return a.sort(((e,t)=>+e.timestamp-+t.timestamp)).concat(i.sort(((e,t)=>+e.timestamp-+t.timestamp)))}}get sortedThreads(){let e=[];return this.getAvailableSortOpts().includes(this.state.sortBy)?e=this.sortThreadsByType(this.props.threads):Ny(this.commonAnnotation())?this.setState({sortBy:$v.page},(()=>{e=this.sortThreadsByType(this.props.threads)})):Fy(this.commonAnnotation())?this.setState({sortBy:$v.timestamp},(()=>{e=this.sortThreadsByType(this.props.threads)})):this.setState({sortBy:$v.newest},(()=>{e=this.sortThreadsByType(this.props.threads)})),this.props.showResolvedComments?e:e.filter((e=>!(e.resolved||e.resolvedInfo)))}get sortedVisibleThreads(){return this.sortedThreads.filter((e=>e.comments.some((e=>!e.deleted))))}commonAnnotation(){let e;for(const t of this.props.threads){if(t.annotation&&e&&!zy(t.annotation,e))return;e=t.annotation||e}return e}componentWillUnmount(){window.removeEventListener("beforeunload",this.promptBeforeCloseHandler)}focusPrimaryEditor(){var e;null===(e=this.editorRef)||void 0===e||e.focus()}blurElement(e){let t;"function"==typeof Event?t=new FocusEvent("blur"):(t=document.createEvent("Event"),t.initEvent("blur",!0,!0)),e.dispatchEvent(t)}get includeEditor(){const{isMobile:e,settings:t}=this.props;return t.canShowEditor&&!e}get includeEditorMeatball(){const{settings:e}=this.props;return this.includeEditor&&e.canShowEditorMeatball}render(){const{actionsAdapter:{onMentionsQueryUpdated:e,onThreadCreated:n},className:o="",commentFactory:i,editorFactory:a,user:s,mentionsMatches:c,activeThreadID:l,hoverThreadID:u,focusedThreadID:d,isGoogleDSS:p,isMobile:m,intl:h,placeholderOverride:g,settings:v,showRevisionInfo:y,stickerPacks:b,thirdPartySource:x,initialEditorFocus:S,hideOpenCloudDocMessage:w,meatballMenu:E}=this.props,k=r.classnames(o,{[qb]:!0,[Hb]:!0}),C=r.classnames($b,{[Gb]:this.includeEditorMeatball}),M=r.classnames({[Qb]:this.includeEditorMeatball});let T=null;const A=g||h.formatMessage({id:"DkHo17",defaultMessage:"Enter your thoughts here"}),[O,D]=f.getApprovalRequestCounts(this.props.threads);if(this.includeEditor){const r={a11yEditorLabel:A,author:s,content:this.state.content,placeholder:A,postSignalComponent:tx,onCancel:this.onPrimaryEditorCancel,setEditorRef:this.setEditorRef,onPost:n,mentionsMatches:c,onMentionsQueryUpdated:e,onFocus:this.onPrimaryEditorFocus,onEditorStateChange:this.onPrimaryEditorStateChange,shouldFocus:S,stickerPacks:b,tagline:t.react.exports.createElement(Db,{thirdPartySource:x,intl:h}),editorRef:this.editorRef};T=a?a(r):t.react.exports.createElement(ox,Object.assign({},r))}else if(!m){const e=p?"google_doc":x;T=w?null:t.react.exports.createElement(Ob,{thirdPartySource:e,openWith:this.props.openWith,intl:h})}return t.react.exports.createElement(_.Provider,{value:h},t.react.exports.createElement(Vv.Provider,{value:this.state.context},t.react.exports.createElement("div",{className:k,onClick:this.handleClick},t.react.exports.createElement("div",{className:Yb},0!==D&&0!==O?t.react.exports.createElement("div",{className:Xb},t.react.exports.createElement(r.Text,{size:"small",color:"faint"},f.getApprovalRequestsSubtext(O,h))):null,0===this.sortedVisibleThreads.length?t.react.exports.createElement("div",{className:Jb},t.react.exports.createElement(r.Text,{size:"small",color:"faint"},h.formatMessage(fx))):t.react.exports.createElement(t.react.exports.Fragment,null,t.react.exports.createElement(lx,{currentSort:this.state.sortBy,setSort:this.setSortBy,availableSortOpts:this.getAvailableSortOpts()}),t.react.exports.createElement(xb,{showUnreadPill:this.props.showUnreadPill,visibilityData:this.state.visibilityData,countMsgFn:e=>h.formatMessage({id:"fkNHq+",defaultMessage:"{count} unread"},{count:e}),onItemActivated:this.onThreadInteractedWith},t.react.exports.createElement(Mb,{className:px,trackedItems:this.state.trackedItems,onVisibilityDataChange:this.onVisibilityDataChange},this.sortedVisibleThreads.map((e=>t.react.exports.createElement(mb,{threadRef:t=>this.setThreadRef(e.id,t),key:e.id,actions:this.createThreadActions(e.id),active:e.id===l,focused:e.id===u||e.id===d,commentFactory:i,editedComment:this.state.editedComment,onThreadInteractedWith:this.onThreadInteractedWith,onCancel:this.onThreadReplyCancel,onStartEdit:this.onStartEdit,onEndEdit:this.onEndEdit,isMobile:m,thread:e,user:s,mentionsMatches:c,showRevisionInfo:y,streamSettings:v,stickerPacks:b,thirdPartySource:this.props.thirdPartySource,openWith:this.props.openWith,renderApprovalForm:this.props.renderApprovalForm,approvalFormStatus:this.props.approvalFormStatus}))))))),t.react.exports.createElement("div",{className:C},t.react.exports.createElement("div",{className:M},T),this.includeEditorMeatball&&E))))}}mx.childContextTypes={showApproval:r.PropTypes.bool},mx.displayName="CommentStream";const hx=r.defineMessage({id:"Nsn7u9",defaultMessage:"Add your thoughts"}),gx=r.defineMessage({id:"eqe9mn",defaultMessage:"Comments have been disabled for this file."}),_x=r.defineMessage({id:"2mbxT1",defaultMessage:"Comments and approval requests have been disabled for this file."});class vx extends t.react.exports.PureComponent{constructor(e){super(e),this.hasShownAuthModalOnFocus=!1,this.getCommentsActionsAdapter=(e,t,r,n,o,i,a)=>function({dispatch:e,user:t,getFileId:r,getUrl:n,getCommentsBladeId:o,onEditorFocused:i,showAuthModal:a,approvalIOClient:s,onClickAnnotation:c}){const u=(o,i)=>{if(t){const a=n()||r();e(f.addAndCommitComment(t,a,o,i)),e(v.setApprovalForm({[a]:{}}))}else{if(!a)throw new Error("showAuthModal or stream is not defined");a()}};return{onThreadCreated(i,s){if(t)e(f.addCommentAction({arg:{stream:f.createStreamFromFileOrSharedLink(r(),n()),comment:f.iCommentContentToUserSubmittedComment({content:i,annotation:s}),source:{".tag":"editor"}}},{tempThreadId:f.v4(),content:i,annotation:s,author:t,fileViewerId:o()}));else{if(!a)throw new Error("showAuthModal or stream is not defined");a()}},onThreadActivated(t){e(f.activateThread({fileId:r(),sharedLinkURL:n(),fileViewerId:o(),threadId:t.id,isThirdParty:t.isThirdParty}))},onAllThreadsDeactivated(){e(f.deactivateAllThreads({fileViewerId:o()})),e(f.focusThread(o(),null))},onThreadMouseEnter(t){e(f.hoverThread(o(),t))},onThreadMouseLeave(){e(f.hoverThread(o(),null))},onThreadFocus(t){e(f.focusThread(o(),t))},onThreadBlur(){e(f.focusThread(o(),null))},onThreadRepliedTo(i,s){if(t)e(f.addCommentAction({arg:{stream:f.createStreamFromFileOrSharedLink(r(),n()),thread_id:i,comment:f.iCommentContentToUserSubmittedComment({content:s})}},{content:s,author:t,fileViewerId:o()}));else{if(!a)throw new Error("showAuthModal or stream is not defined");a()}},onThreadMarkedAsRead(t){e(f.markThreadReadAction({arg:{id:t,stream:f.createStreamFromFileOrSharedLink(r(),n())}}))},onThreadMarkedAsUnread(t){e(f.markThreadUnreadAction({arg:{id:t,stream:f.createStreamFromFileOrSharedLink(r(),n())}}))},onThreadResolved(o){if(t)e(f.resolveThreadAction({arg:{id:o,stream:f.createStreamFromFileOrSharedLink(r(),n())}}));else{if(!a)throw new Error("showAuthModal or stream is not defined");a()}},onThreadUnresolved(o){if(t)e(f.unresolveThreadAction({arg:{id:o,stream:f.createStreamFromFileOrSharedLink(r(),n())}}));else{if(!a)throw new Error("showAuthModal or stream is not defined");a()}},onCommentEdited(t,o,i){e(f.editCommentAction({arg:{id:t,stream:f.createStreamFromFileOrSharedLink(r(),n()),comment:f.iCommentContentToUserSubmittedComment({content:o})}},{threadId:i,content:o}))},onEnableComments(){e(f.enableCommentingAction({arg:{stream:f.createStreamFromFileOrSharedLink(r(),n())}}))},onDisableComments(){e(f.disableCommentingAction({arg:{stream:f.createStreamFromFileOrSharedLink(r(),n())}}))},onCommentDeleted(t,o){e(f.deleteCommentAction({arg:{id:t,stream:f.createStreamFromFileOrSharedLink(r(),n())}},{threadId:o}))},onSortComments(t){window.localStorage.setItem(Nb,t),e(f.sortComments(t))},onMentionsQueryUpdated(t){e(f.searchContacts(t))},onCommentDraftCancel(){e(f.cancelAnnotating(o()))},onEditorFocused(){e(f.editorDidFocus(o())),e(f.warmContacts({})),null==i||i()},onClickAnnotation(e){null==c||c(e)},onSubscribe(){e(f.subscribeAction({arg:{stream:f.createStreamFromFileOrSharedLink(r(),n())}}))},onUnsubscribe(){e(f.unsubscribeAction({arg:{stream:f.createStreamFromFileOrSharedLink(r(),n())}}))},onClickOlderInfo:l.noop,onEditorStateChange:l.noop,onApproverRespond(t){const o=n()||r();null==s||s.logger.logRespondClick(r(),t),e(v.setApprovalForm({[o]:{activeForm:"respond",threadId:t}}))},onEditApproval(t,o){const i=n()||r();"approver"==o.approvalMetadata.actor?(null==s||s.logger.logEditApprovalResponseClick(r(),t),e(v.setApprovalForm({[i]:{activeForm:"response_edit",threadId:t,editArgs:o}}))):"requester"==o.approvalMetadata.actor&&(null==s||s.logger.logEditApprovalRequestClick(r(),t),e(v.setApprovalForm({[i]:{activeForm:"request_edit",threadId:t,editArgs:o}})))},onDeleteApprovalComment(o,i,c){if(s)if(t){const a=n()||r(),l=()=>{e(f.deleteAndCommitComment(t,a,i,o))};s.showApprovalDeleteCommentModal(r(),o,c,l)}else{if(!a)throw new Error("showAuthModal or stream is not defined");a()}},onAddApprovalSuccess(e,t){u(e,t)},onEditApprovalSuccess(o,i,s){if(t){const a=n()||r();e(f.editAndCommitComment(t,a,i,o,s)),e(v.setApprovalForm({[a]:{}}))}else{if(!a)throw new Error("showAuthModal or stream is not defined");a()}},onResubmitApprovalFocus(t){const o=n()||r();null==s||s.logger.logResubmitRequestClick(r(),t),e(v.setApprovalForm({[o]:{activeForm:"request_resubmit",threadId:t}}))},onResubmitApprovalBlur(){const t=n()||r();e(v.setApprovalForm({[t]:{}}))},onResubmitApprovalRequest(e,t){if(!s)return;const n=r();s.resubmitApprovalRequest(n,e,t.text).then((()=>{s.logger.logResubmitRequestSuccess(n,e,t.text.length),u(t,e)}))},onRemoveApprovalThread(o){if(s)if(t){const i=n()||r(),a=()=>{e(f.deleteAndCommitThread(t,i,o))};s.showApprovalDeleteThreadModal(r(),o,a)}else{if(!a)throw new Error("showAuthModal or stream is not defined");a()}},onCommentActivated(t,i){const a=f.findCommentThread(i,t);a&&e(f.activateThread({fileId:r(),sharedLinkURL:n(),fileViewerId:o(),threadId:a.thread.id,isThirdParty:a.thread.isThirdParty}))}}}({dispatch:t,user:e,getFileId:()=>n,getUrl:()=>this.props.url,getCommentsBladeId:()=>r,onEditorFocused:()=>{!o||e||this.hasShownAuthModalOnFocus||(this.hasShownAuthModalOnFocus=!0,o())},seek:e=>{var t;"av"===(null===(t=this.props.navigation)||void 0===t?void 0:t.type)&&this.props.navigation.seek(e)},pause:()=>{var e;"av"===(null===(e=this.props.navigation)||void 0===e?void 0:e.type)&&this.props.navigation.pause()},approvalIOClient:i,onClickAnnotation:a,showAuthModal:o}),this.threadComparator=e=>(t,r)=>{const n=Ly(t)?t.annotation.time:0,o=Ly(r)?r.annotation.time:0;return n!==o?n-o:e?+r.timestamp-+t.timestamp:+t.timestamp-+r.timestamp},this.sortThreads=r.defaultMemoize(((e,t=!1)=>e?Object.values(e).sort(this.threadComparator(t)):[])),this.mentionsMatches=r.defaultMemoize(((e,t)=>({[e]:t}))),this.getMeatballMenu=()=>{const{fileId:e,url:r,config:n}=this.props;return t.react.exports.createElement(f.CommentsMeatball,{fileId:e,sharedLinkURL:r,className:f.classes.commentStreamMeatballIcon,approvalIOClient:n.approvalIOClient})},this.state={commentsActionAdapter:this.getCommentsActionsAdapter(this.props.user,this.props.dispatch,this.props.commentsBladeId,this.props.fileId,this.props.showAuthModal,this.props.approvalIOClient,this.props.onClickAnnotation)}}componentDidUpdate(){if(b.isRequestApproval()){const{url:e,fileId:t}=this.props,r=e||t;this.props.dispatch(v.setApprovalForm({[r]:{activeForm:"request",threadId:void 0}}))}if(this.state.commentsActionAdapter){const e=b.getApprovalCommentId();e&&this.state.commentsActionAdapter.onCommentActivated(e,Object.values(this.props.threads))}}componentDidMount(){this.props.boltInfo&&this.props.dispatch(f.boltSubscribe([this.props.boltInfo]))}componentWillUnmount(){this.props.boltInfo&&this.props.dispatch(f.boltUnsubscribe([this.props.boltInfo]))}UNSAFE_componentWillReceiveProps(e){e.dispatch===this.props.dispatch&&e.commentsBladeId===this.props.commentsBladeId&&e.fileId===this.props.fileId&&e.user===this.props.user&&e.showAuthModal===this.props.showAuthModal&&e.onClickAnnotation===this.props.onClickAnnotation||this.setState({commentsActionAdapter:this.getCommentsActionsAdapter(e.user,e.dispatch,e.commentsBladeId,e.fileId,e.showAuthModal,e.approvalIOClient,e.onClickAnnotation)}),e.boltInfo!==this.props.boltInfo&&(this.props.boltInfo&&e.dispatch(f.boltUnsubscribe([this.props.boltInfo])),e.boltInfo&&e.dispatch(f.boltSubscribe([e.boltInfo])))}render(){var e;const{activeThreadID:n,fileId:o,focusedThreadID:i,hoverThreadID:a,mentionsCurrentQuery:s,mentionsSearchResult:c,status:l,thirdPartySource:u,threads:d,intl:p,className:m,editorFactory:h,commentFactory:g,config:_,showResolvedComments:y,approvalFormStatus:b,approvalIOClient:S,commentsEnabled:w,url:E,stickerPacks:k,user:C}=this.props,{commentsActionAdapter:M}=this.state;if(void 0===l)return t.react.exports.createElement("div",{className:f.classes.commentsBladeLoadingSpinnerContainer},t.react.exports.createElement(r.Spinner,{className:"comments-blade-loading-spinner",size:"standard","aria-valuetext":p.formatMessage({id:"csFB2E",defaultMessage:"Loading"})}));const T=this.sortThreads(d),A=this.mentionsMatches(s,c),O=null!=C?C:{id:"dbid:guest_id",name:{display:"?",initials:"?",public:"?"}},D=p.formatMessage(hx),I=l===f.Status.FullyEnabled?Lb:Ub,R=null===(e=null==S?void 0:S.getUserExperiments())||void 0===e?void 0:e.flows_approval_flow_variant,B=(e,r)=>{if(!S||!b||!b.activeForm)return null;const i=E||o;if(e.indexOf(b.activeForm)<=-1)return null;const a={intl:this.props.intl,ioClient:S,onCancel:()=>{this.props.dispatch(v.setApprovalForm({[i]:{}}))},fileId:o,user:{initials:O.name.initials,photoUrl:O.photoUrl},inlineWithComments:r};return"request"===b.activeForm?t.react.exports.createElement(v.ApprovalRequestForm,Object.assign({},a,{approvalVariant:R,onRequestSuccess:M.onAddApprovalSuccess})):"request_edit"===b.activeForm&&b.threadId&&b.editArgs?b.threadId!==n?null:t.react.exports.createElement(v.ApprovalRequestForm,Object.assign({},a,{approvalVariant:R,onEditSuccess:M.onEditApprovalSuccess,editArgs:b.editArgs,threadId:b.threadId})):"respond"===b.activeForm&&b.threadId?b.threadId!==n?null:t.react.exports.createElement(v.ApprovalRespondForm,Object.assign({},a,{threadId:b.threadId,onRespondSuccess:M.onAddApprovalSuccess})):"response_edit"===b.activeForm&&b.threadId&&b.editArgs?b.threadId!==n?null:t.react.exports.createElement(v.ApprovalRespondForm,Object.assign({},a,{threadId:b.threadId,editArgs:b.editArgs,onEditSuccess:M.onEditApprovalSuccess})):null};if(!w)return t.react.exports.createElement("div",{className:"comments-blade-disabled-wrapper"},t.react.exports.createElement(r.Text,{size:"small",color:"faint"},x.isApprovalEnabled(R)?p.formatMessage(_x):p.formatMessage(gx)));const P=_.isRedesign?mx:Kb;return t.react.exports.createElement("div",{className:m},x.isApprovalEnabled(R)&&B(["request"],!1),t.react.exports.createElement(P,{actionsAdapter:M,enabled:!0,id:o,mentionsMatches:A,isMobile:!1,intl:p,settings:Object.assign(Object.assign({},I),{canShowEditorMeatball:!1}),showRevisionInfo:!1,threads:T,activeThreadID:n,user:O,hoverThreadID:a,focusedThreadID:i,editorFactory:h,commentFactory:g,thirdPartySource:u,showUnreadPill:!0,placeholderOverride:D,showResolvedComments:y,meatballMenu:this.getMeatballMenu(),renderApprovalForm:e=>B(e,!0),approvalFormStatus:b,showApproval:_.showApproval,approvalVariant:R,stickerPacks:k}))}}vx.displayName="UnconnectedCommentsPane";const yx=r.connect((function(e,t){var r,n,o,i;const{fileId:a,commentsBladeId:s,url:c}=t,l=a in e.boltInfo.fileIdentifierToBoltMap?a:null!=c?c:a;return{activeThreadID:e.activeThreadID[s],boltInfo:e.boltInfo.fileIdentifierToBoltMap[l],draftNumberedAnnotation:e.draftAnnotation[s],editorFocusRequested:Boolean(e.editorFocusRequest[s]),focusedThreadID:e.focusedThreadID[s],hoverThreadID:e.hoverThreadID[s],supportedEnhancements:e.supportedEnhancements[l],threads:e.threads[l],thirdPartySource:e.thirdPartySource[s],mentionsCurrentQuery:e.mentionsSearchResult.currentQuery,mentionsSearchResult:e.mentionsSearchResult.result,status:e.status[l],framePreciseCommentsEnabled:null!==(n=null===(r=e.mediaAddonFeatures)||void 0===r?void 0:r.frame_precise_comments)&&void 0!==n&&n,showResolvedComments:e.showResolvedComments,approvalFormStatus:e.approvalFormStatus[l],canEnableCommenting:null===(o=e.permissions[l])||void 0===o?void 0:o.can_enable_commenting,commentsEnabled:f.areCommentsEnabled(e,l),stickerPacks:null!==(i=e.stickerPacks)&&void 0!==i?i:void 0}}))(vx);e.AccessibilityNames=Ag,e.ActiveMacroChromeComponent=z_,e.BaseLayer=rg,e.Comment=By,e.CommentEditor=Uv,e.CommentEditor$1=ox,e.CommentsBladePane=yx,e.DefaultMentionShareFlowHandlers=x_,e.Draft=jh,e.DraftComponent=P_,e.DraftNames=Fh,e.EditorContainer=kg,e.FixedToolbarNames=Cg,e.FolderOverviewNames=Og,e.GlobalStyleNames=Tg,e.HyperlinkNames=Hh,e.InteractionLayer=ng,e.LinkSpanComponent=Bg,e.MacroNames=Lh,e.MentionShareFlowLayer=S_,e.MentionShareFlowNames=Wh,e.MentionSuggestionNames=Uh,e.MentionsEntityLayer=zg,e.MentionsMacroLayer=__,e.NumberedComment=Wy,e.StyleLayer=_g,e.SuggestionLayer=y_,e.SuggestionSelectionNames=qh,e.TaskNames=Mg,e.TextLayer=og,e.TimeCodedComment=function(e){let r;const{active:n,annotation:o,framePreciseCommentsEnabled:i,frameRate:a}=e;if(o&&Fy(o)){const{time:s}=o;if(0!==s){let c;(function(e){return void 0!==e&&"video"===e.type})(o)&&(c=o.timeSec),r=t.react.exports.createElement(jy,{label:Hy(s,c,a,i),onClick:t=>e.actions.onClickAnnotation({annotationInfo:{type:"time",time:s},threadID:e.comment.threadId,e:t,active:n})})}}return t.react.exports.createElement(By,Object.assign({},e),r)},e.UpdateLayer=ig,e.calculateTimeCode=Hy,e.classes=zh,e.classes$1=Pg,e.createDefaultStatus=function(e){return eg(Object.assign(Object.assign({},Zh()),{hyperlink:{},globalStyle:{classNames:{}},folderOverview:{},task:{},mentionShareFlow:{},accessibility:{captureTab:!1},fixedToolbar:{activeFormatting:{}}}),e)},e.getOffsetParent=function(e,t){for(;e&&!e.classList.contains(t);)e=e.offsetParent;return e},e.getSelectedBlocksList=gg,e.getSelectionBlockTypes=function(e){const t=gg(e);let r=null;return t.forEach((e=>{if(e){const t=e.getType();if(null===r)r=t;else if(r!==t)return r=null,!1}return!0})),r||"unstyled"},e.getSelectionInlineStyle=function(e){const t={BOLD:!1,ITALIC:!1,UNDERLINE:!1,STRIKETHROUGH:!1},r=e.getSelection(),n=e.getCurrentContent(),o=r.getStartOffset(),i=n.getBlockForKey(r.getStartKey());return(r.isCollapsed()?e.getCurrentInlineStyle().toList().toJS():i.getInlineStyleAt(o).toArray()).forEach((e=>{e in t&&(t[e]=!0)})),t},e.intoFolderOverview=Dg,e.isValidURL=Rg,e.mergeBlockDataByKey=(e,t,r,n=!1)=>{const o=e.getCurrentContent(),i=o.getBlockForKey(t).mergeIn(["data"],r),a=o.getBlockMap().merge({[t]:i}),s=e.getSelection(),c=jh.EditorState.push(e,o.merge({blockMap:a}),"change-block-data");return n?c:jh.EditorState.acceptSelection(c,s)},e.plug=Jh}));
//# sourceMappingURL=c_comments_component_pane.js-vflWE7hlf.map
