define(["require","exports","tslib","metaserver/static/js/core/notify","metaserver/static/js/core/html","js/browser/cookies","metaserver/static/js/css/css","metaserver/static/js/security/csrf_hmac","metaserver/static/js/clean/csrf"],(function(e,t,s,o,i,r,n,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeToastCookie=t.showToastFromCookie=void 0;function u(e,t){return s.__awaiter(this,void 0,void 0,(function*(){const s=yield(0,a.readHmacCookieToken)(e,t);if(null==s)return null;if(s.startsWith("er:"))return[!0,s.substring(3)];if(s.startsWith("ok:"))return[!1,s.substring(3)];throw new Error("unrecognized format of message in toast cookie")}))}t.showToastFromCookie=function(){var t;return s.__awaiter(this,void 0,void 0,(function*(){const a=r.Cookies.read("toast");if(a){const d=yield u(a,null!==(t=(0,c.readCsrfToken)())&&void 0!==t?t:void 0);if(null!=d){const t=(0,n.require_css)("/static/metaserver/static/css/notify-vfl4oJv2S.css"),[a,c]=d,{default:u}=yield new Promise((t,s)=>{e(["dompurify"],t,s)}).then(s.__importStar),l=u.sanitize(c),f=document.getElementById("flash");null!=f&&(f.innerHTML=l,f.style.display="block"),setTimeout(()=>r.Cookies.delete("toast"),2e3),yield t,a?o.Notify.error(new i.HTML(l),10):o.Notify.success(new i.HTML(l),10)}}}))},t.decodeToastCookie=u}));
//# sourceMappingURL=toast_on_init.min.js-vflegWGT0.map