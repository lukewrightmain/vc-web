define(["require","exports","./c_tslib","./c_core_exception_info","./c_core_xhr","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","./c_lodash-es_lodash","./c_csrf","./c_browser_cookies"],(function(e,t,r,o,c,s,i,n,a,d){"use strict";var _;!function(e){e.Reported="reported",e.ForceReported="force",e.Duplicate="duplicate",e.Ignored="ignored"}(_||(_={}));function f(t,o){return r.__awaiter(this,void 0,void 0,(function*(){try{const{getMetricsReporter:r}=yield new Promise((function(t,r){e(["./c_src_sink_index"],t,r)})).then((function(e){return e.index_esnext})),c={rollup_format:"amd"},s=r().child(c).createCounter({ns:"js_exception",name:"count"},{which:t,severity:o||"undefined"});s.increment(),s.record()}catch(e){}}))}let u,p=0;t._clearReportedException=function(){u=void 0},t.sendExceptionReport=function(e){if(e.reported)return void f(_.Duplicate,e.severity);if(u&&!e.force&&!window._REPORT_ALL_JS_EXCEPTIONS_ENABLED)return void f(_.Ignored,e.severity);if(e.severity||(e.severity=o.SEVERITY.NONCRITICAL,e.tags=e.tags||[],e.tags.push("undefined_severity")),!e.stack_frames){const[t,r]=o.collectExceptionStack(e);e.stack_frames=t.reverse(),e.context_tb=r.reverse()}var t;e.tags=o.collectExceptionTags(e),e.excExtra=o.collectExceptionExtra(e),t=e.excExtra,p+=1,t.exception_number=p,window.DB_FRAME_BUST&&(e.severity=o.SEVERITY.USER_ERROR);const r={e:e.message,loc:window.location.href,ref:document.referrer,stack:JSON.stringify(e.stack_frames),context_tb:JSON.stringify(e.context_tb),tags:JSON.stringify(e.tags),exc_extra:JSON.stringify(e.excExtra||{}),sev:e.severity||""};c.sendXhr("/jse",r),u&&e.force?f(_.ForceReported,e.severity):f(_.Reported,e.severity),u=e.message,e.reported=!0},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=e_core_exception_reporter.js-vflnORaQT.map
