define(["exports","./e_edison","./e_ui_page_files_router","./c_lodash-es_lodash"],(function(e,t,o,s){"use strict";let i;const n={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3,BOTTOM_RIGHT:4},r="tooltip-holder",p="data-event-id",l=function(){let e=document.getElementById(r);return e||(e=document.createElement("div"),e.id=r,e.style.zIndex="10000",document.body.insertBefore(e,document.body.firstChild)),e},h=()=>{const e=l();t.reactDom.exports.unmountComponentAtNode(e),e.parentNode.removeChild(e)},_=function(e){const{top:t,left:o}=e.getBoundingClientRect(),s=t+document.body.scrollTop,i=o+document.body.scrollLeft,{width:n,height:r}=function(e){if(0!==e.offsetWidth&&0!==e.offsetHeight)return{height:e.offsetHeight,width:e.offsetWidth};const{display:t,position:o,visibility:s}=e.style;e.style.display="block",e.style.position="absolute",e.style.visibility="hidden";const{offsetWidth:i,offsetHeight:n}=e;return e.style.display=t,e.style.position=o,e.style.visibility=s,{height:n,width:i}}(e);return{left_x:i,right_x:i+n,top_y:s,bottom_y:s+r,width:n,height:r}};class d extends t.React$1.Component{constructor(){super(...arguments),this._centerAndShow=()=>{const e=t.reactDom.exports.findDOMNode(this.refs.tooltip),o=this.props.targetElementDimensions,s=_(e),i=document.body.scrollTop,r=document.body.scrollLeft;if([n.TOP,n.BOTTOM].includes(this.props.position)){const t=window.innerWidth;let i=o.left_x+o.width/2-s.width/2-r;i<0?i=0:i+s.width>t&&(i=t-s.width-7),e.style.left=`${i}px`}else if([n.LEFT,n.RIGHT].includes(this.props.position)){const t=window.innerHeight;let n=o.top_y+o.height/2-s.height/2-i;n<0?n=0:n+s.height>t&&(n=t-s.height-7),e.style.top=`${n}px`}e.style.display="block"}}render(){const e=this.props.targetElementDimensions,o=window.innerHeight,s=window.innerWidth,i=document.body.scrollTop,r=document.body.scrollLeft,p=(()=>{switch(this.props.position){case n.TOP:return{bottom:o-e.top_y+7+i};case n.BOTTOM:return{top:e.bottom_y+7-i};case n.LEFT:return{right:s-e.left_x+7+r};case n.RIGHT:return{left:e.right_x+7-r};case n.BOTTOM_RIGHT:return{left:e.right_x-7-r,top:e.bottom_y+7-i}}})();return t.React$1.createElement("div",{className:`tooltip-bubble ${this.props.className||""}`,ref:"tooltip",style:p,onMouseMove:this.props.mouse_move_cb?this.props.mouse_move_cb:void 0,onMouseLeave:this.props.mouse_out_cb?this.props.mouse_out_cb:void 0,onMouseEnter:this.props.mouse_enter_cb?this.props.mouse_enter_cb:void 0},t.React$1.createElement("div",{className:"tooltip-inner"},this.props.contents))}componentDidMount(){return this._centerAndShow()}componentDidUpdate(){return this._centerAndShow()}}d.displayName="TooltipBubble",d.propTypes={position:o.PropTypes.oneOf((()=>{const e=[];for(i in n)e.push(n[i]);return e})()),contents:o.PropTypes.oneOfType([o.PropTypes.element,o.PropTypes.string]),className:o.PropTypes.string,mouse_move_cb:o.PropTypes.func,mouse_out_cb:o.PropTypes.func,mouse_enter_cb:o.PropTypes.func,targetElementDimensions:o.PropTypes.shape({left_x:o.PropTypes.number,right_x:o.PropTypes.number,top_y:o.PropTypes.number,bottom_y:o.PropTypes.number,width:o.PropTypes.number,height:o.PropTypes.number})};class c extends t.React$1.Component{constructor(){super(...arguments),this._scrollEventHandler=e=>this._hide(e),this._escapeEventHandler=e=>{"Escape"===e.key&&this._hide(e)},this.state={visible:!1,event_id:s.uniqueId()},this._on_mouse_enter=()=>{this.props.show_delay>0?this._scheduleShow():this._show()},this._on_mouse_leave=()=>{this.props.hide_delay>0?this._scheduleHide(this.props.hide_delay):this._hide()},this._render_tooltip=()=>{h();const e=l(),o=document.getElementById(r);if(!o)return;o.style.position="fixed",o.style.left="0",o.style.right="0",this.props.hide_delay>0&&o.setAttribute(p,this.state.event_id),this.props.position===n.TOP?(o.style.top="auto",o.style.bottom="0"):(o.style.top="0",o.style.bottom="auto");const s=t.React$1.createElement(d,{position:this.props.position,contents:this.props.tooltip_contents,className:this.props.tooltip_classname,mouse_move_cb:this.props.interaction_enabled?this._clear_timeout:void 0,mouse_out_cb:this.props.interaction_enabled?this._on_mouse_leave:void 0,mouse_enter_cb:this.props.interaction_enabled?this._on_mouse_enter:void 0,targetElementDimensions:_(t.reactDom.exports.findDOMNode(this.refs.tooltipTarget))});return t.reactDom.exports.render(s,e)},this._show=()=>{if(!this.state.visible||this._last_timeout)return this._render_tooltip(),this.setState({visible:!0}),this.props.on_show&&this.props.on_show(),this._clear_timeout()},this._hide=()=>{if(!this.state.visible)return;const e=l();if(this._last_timeout){e.getAttribute(p)===this.state.event_id&&(h(),this._clear_timeout())}else h();return this.setState({visible:!1})},this._scheduleHide=e=>{if(this.state.visible)return this._last_timeout=setTimeout(this._hide,e)},this._clear_timeout=()=>{if(this._last_timeout)return clearTimeout(this._last_timeout),this._last_timeout=null},this._scheduleShow=()=>(this._clear_timeout(),this._last_timeout=setTimeout(this._show,this.props.show_delay))}render(){return t.React$1.createElement("div",{className:"tooltip-target",onMouseEnter:this._on_mouse_enter,onFocus:this._show,onMouseLeave:this._on_mouse_leave,onBlur:this._on_mouse_leave,id:this.state.tooltip_id,ref:"tooltipTarget",tabIndex:this.props.is_focusable?0:void 0},this.props.children)}componentDidMount(){document.addEventListener("keydown",this._escapeEventHandler),document.addEventListener("scroll",this._scrollEventHandler)}componentDidUpdate(){if(this.state.visible)return this._render_tooltip()}componentWillUnmount(){document.removeEventListener("keydown",this._escapeEventHandler),document.removeEventListener("scroll",this._scrollEventHandler),h()}}c.displayName="Tooltip",c.propTypes={position:o.PropTypes.oneOf((()=>{const e=[];for(i in n)e.push(n[i]);return e})()),tooltip_contents:o.PropTypes.oneOfType([o.PropTypes.oneOfType([o.PropTypes.element,o.PropTypes.string]),o.PropTypes.arrayOf(o.PropTypes.oneOfType([o.PropTypes.element,o.PropTypes.string]))]),tooltip_classname:o.PropTypes.string,hide_delay:o.PropTypes.number,show_delay:o.PropTypes.number,interaction_enabled:o.PropTypes.bool,is_focusable:o.PropTypes.bool,on_show:o.PropTypes.func},c.defaultProps={interaction_enabled:!1,hide_delay:0,show_delay:0};var u=Object.freeze({__proto__:null,Tooltip:c,TooltipPosition:n});e.Tooltip=c,e.TooltipPosition=n,e.tooltip=u}));
//# sourceMappingURL=c_ui_tooltip.js-vflkRCCNI.map
