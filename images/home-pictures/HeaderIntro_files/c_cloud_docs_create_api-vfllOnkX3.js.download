define(["require","exports","./c_tslib","./c_src_sink_index","./c_apex-metrics_src_types","./e_ui_page_files_router","./e_edison","./c_core_i18n","./c_hive_schemas_web-modal-activity","./c_folder_dialog_async","./c_browser_cookies","./c_gdd_migration_ui_utils"],(function(e,t,a,o,i,r,s,n,l,c,d,u){"use strict";class p extends s.react.exports.Component{constructor(){super(...arguments),this.handleKeyPress=e=>{e.key===r.Key_enum.Key.Enter&&p.canSubmit({name:this.props.name,url:this.props.url})&&this.props.onSubmit()},this.handleNameChange=e=>{const t=e.target.value;this.props.onChange({name:t,url:this.props.url})},this.handleUrlChange=e=>{const t=e.target.value;this.props.onChange({name:this.props.name,url:t})},this.setNameFieldRef=e=>{this.nameRef=e}}render(){const e=""===this.props.url||p.isUrlValid(this.props.url);let t="";return e||(t=this.props.urlValidationMessage),s.react.exports.createElement("div",{className:"create-pointer--fields"},s.react.exports.createElement("div",{className:"create-pointer--fieldset"},s.react.exports.createElement("label",{htmlFor:"create-pointer--link_input"},this.props.urlLabel),s.react.exports.createElement("div",{className:"create-pointer--fieldset-with-icon"},this.props.urlIcon,s.react.exports.createElement(r.TextInput,{id:"create-pointer--link_input",className:"create-pointer--link_input",isInvalid:!e,onChange:this.handleUrlChange,onKeyPress:this.handleKeyPress,value:this.props.url,placeholder:this.props.urlPlaceholder,autoFocus:!0}))),s.react.exports.createElement("div",{className:"create-pointer--url-validation-warning"},t),s.react.exports.createElement("div",{className:"create-pointer--fieldset"},s.react.exports.createElement("label",{htmlFor:"create-pointer--name_input"},this.props.nameLabel),s.react.exports.createElement(r.TextInput,{id:"create-pointer--name_input",onChange:this.handleNameChange,onKeyPress:this.handleKeyPress,ref:this.setNameFieldRef,placeholder:this.props.namePlaceholder})))}componentDidMount(){return a.__awaiter(this,void 0,void 0,(function*(){if(this.props.urlPrepopulateFunction){const e=yield this.props.urlPrepopulateFunction();e&&(this.props.onChange({name:this.props.name,url:e}),this.nameRef.focus())}}))}}p.isUrlValid=e=>/^((http|https):\/\/)?([^.:/\\?#@!]+?\.)+[^.:/\\?#@!]+/i.test(e.trim()),p.canSubmit=e=>""!==e.name&&""!==e.url&&p.isUrlValid(e.url),p.displayName="CreatePointerFields";const m=n.intl.formatMessage({id:"8yzGEK",defaultMessage:"Create a new shortcut"}),g=n.intl.formatMessage({id:"S8dvWz",defaultMessage:"Create"}),h=n.intl.formatMessage({id:"I5Fo4y",defaultMessage:"Creating..."}),f=n.intl.formatMessage({id:"vPeF94",defaultMessage:"Name"}),k=n.intl.formatMessage({id:"nYdrYR",defaultMessage:"URL"}),E=n.intl.formatMessage({id:"U1i5X8",defaultMessage:"Invalid URL"});class A extends s.React$1.Component{constructor(e){super(e),this.onChange=e=>{this.setState({pointerData:e})},this.handleCreateOnClick=()=>{this.setState({creationInProgress:!0}),this.props.createOnSubmit({pointerData:{name:this.state.pointerData.name.trim(),url:this.state.pointerData.url.trim()},onError:this.handleSubmitError})},this.handleSubmitError=()=>{this.setState({creationInProgress:!1})},this.closeModal=()=>{r.Modal$1.close()},this.state={pointerData:{name:"",url:""},creationInProgress:!1}}render(){const e=p.canSubmit(this.state.pointerData)&&!this.state.creationInProgress;return s.React$1.createElement(r.Modal,{title:m,"aria-label":"Shortcut Creation Modal",open:!0},s.React$1.createElement(r.Modal.Header,{hasBottomSpacing:"title-standard"},s.React$1.createElement(r.Modal.Title,null,m)),s.React$1.createElement(r.Modal.Body,{hasVerticalSpacing:!1},s.React$1.createElement(p,{name:this.state.pointerData.name,url:this.state.pointerData.url,onChange:this.onChange,onSubmit:this.handleCreateOnClick,nameLabel:f,urlLabel:k,urlValidationMessage:E,urlPrepopulateFunction:()=>Promise.resolve(this.props.defaultUrl)})),s.React$1.createElement(r.Modal.Footer,null,s.React$1.createElement(r.Button,{variant:"opacity",onClick:this.closeModal},n.intl.formatMessage({id:"gZIlfg",defaultMessage:"Cancel"})),s.React$1.createElement(r.Button,{variant:"primary",disabled:!e,onClick:this.handleCreateOnClick},this.state.creationInProgress?h:g)))}static showInstance(e){return r.Modal$1.showInstance(s.React$1.createElement(y,Object.assign({},e)))}}A.displayName="CreatePointerModal";const y=r.requireCssWithComponent(A,["/static/metaserver/static/css/spectrum/index.web-vflJy4G-t.css","/static/metaserver/static/css/cloud_docs/create_pointer_modal-vflATc8Dt.css"]);r.injectInternalStyle("metaserver/static/js/cloud_docs/gdd_migration/ui/shared_components/text_input_group.module.out.css",(e=>"._textInputGroup_1fpax_1{display:flex;flex-direction:column;gap:var(--spacing__unit--1);padding-bottom:var(--spacing__unit--2)}"));const C="_textInputGroup_1fpax_1",x=({ariaLabel:e,id:t,isLabelBold:a,label:o,placeholder:i,labelSize:l,value:c,onChange:d})=>s.React$1.createElement("div",{className:C},o&&s.React$1.createElement(r.Text,{size:l,tagName:"label",htmlFor:t,isBold:a},o),s.React$1.createElement("div",null,s.React$1.createElement(r.TextInput,{id:t,onChange:d,placeholder:i,"aria-label":null!=e?e:n.intl.formatMessage({id:"Z/QhF6",defaultMessage:"Text input"}),value:c})));x.displayName="TextInputGroup";const I=e=>{switch(e){case r.GoogleFileTypes.GOOGLE_DSS_DOC:case"doc":return"doc";case r.GoogleFileTypes.GOOGLE_DSS_SHEET:case"sheet":return"sheet";case r.GoogleFileTypes.GOOGLE_DSS_SLIDES:case"slides":return"slides"}},M=(e,t,a)=>{r.logEvent({class:"cloud_docs",action:"open",object:"create_google_shortcut_folder_picker",properties:{accountRole:e,googleFileType:I(t),eventState:a}})},_=(e,t,a,o)=>{r.logEvent({class:"cloud_docs",action:"create",object:"google_shortcut",properties:{accountRole:e,googleFileType:I(t),useDefaultFolder:a,eventState:o}})},b=({fileType:e,shortcutDirName:t,onCreate:o})=>{const i=r.mustGetActiveUser(),[l,c]=s.react.exports.useState(""),[{folderName:d,folderId:p},m]=s.react.exports.useState({folderName:u.Strings.MIGRATION_FOLDER});s.react.exports.useEffect((()=>{const e=u.getDefaultGdssShortcutsTargetFolder(i.id);e&&m(e)}),[i.id]),s.react.exports.useEffect((()=>{u.setDefaultGdssShortcutsTargetFolder(i.id,{folderName:d,folderId:p})}),[i.id,d,p]),s.react.exports.useEffect((()=>{var t,a;t=i.role,a=e,r.logEvent({class:"cloud_docs",action:"shown",object:"create_google_shortcut_modal",properties:{accountRole:t,googleFileType:I(a)}})}),[i.role,e]);const g=()=>{var t,a;r.Modal$1.close(),t=i.role,a=e,r.logEvent({class:"cloud_docs",action:"dismiss",object:"create_google_shortcut_modal",properties:{accountRole:t,googleFileType:I(a)}})};return s.React$1.createElement(u.ModalTemplate,Object.assign({open:!0},(({folderName:e,fileType:t,shortcutName:a,shortcutDirName:o,onChangeShortcutName:i,onCreate:l,onCancel:c,onChangeDriveFolder:d})=>({title:n.intl.formatMessage({id:"kNpdKx",defaultMessage:"Create {fileType}"},{fileType:r.GoogleFileLabels[t]}),bodyText:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(x,{ariaLabel:n.intl.formatMessage({id:"thfeo6",defaultMessage:"{fileType} shortcut name text input"},{fileType:r.GoogleFileLabels[t]}),id:"shortcut-name",isLabelBold:!0,label:n.intl.formatMessage({id:"BkV7IR",defaultMessage:"{fileType} name"},{fileType:r.GoogleFileLabels[t]}),placeholder:n.intl.formatMessage({id:"ND/NHl",defaultMessage:"Enter filename"}),value:a,onChange:e=>i(e.currentTarget.value)}),s.React$1.createElement(r.Text,{size:"small"},n.intl.formatMessage({id:"p/1+Av",defaultMessage:"This file will be saved in the folder <button>{folderName}</button> in Google Drive. A shortcut will be added to <b>{shortcutDirName}</b>."},{shortcutDirName:o,folderName:e,button:e=>s.React$1.createElement(r.Button,{onClick:d,variant:"transparent",withIconLeft:s.React$1.createElement(r.UIIcon,{src:r.FolderLine,role:"presentation"}),size:"small"},e),b:e=>s.React$1.createElement("strong",null,e)}))),tertiaryActions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(r.Button,{variant:"opacity",onClick:c},u.Strings.CANCEL),s.React$1.createElement(r.Button,{variant:"primary",onClick:l},u.Strings.CREATE)),width:"small",withCloseButton:u.Strings.CLOSE}))({folderName:d,fileType:e,shortcutName:l,shortcutDirName:t||u.Strings.MIGRATION_FOLDER,onChangeShortcutName:c,onCancel:g,onChangeDriveFolder:()=>a.__awaiter(void 0,void 0,void 0,(function*(){M(i.role,e,"start");try{const t=yield u.chooseGdriveFolder(i.id);t?(m(t),M(i.role,e,"success")):M(i.role,e,"canceled")}catch(t){M(i.role,e,"failed")}})),onCreate:()=>{o(l||u.Strings.DEFAULT_SHORTCUT_NAME,p),r.Modal$1.close()}}),{onRequestClose:g}))};b.displayName="CreateGoogleShortcutStatefulModal";const S={v:"4.8.0",meta:{g:"LottieFiles AE 3.1.1",a:"",k:"",d:"",tc:""},fr:60,ip:0,op:180,w:386,h:132,nm:"fss-shortcuts",ddd:0,assets:[{id:"image_0",w:386,h:133,u:"",p:"data:image/png;base64,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",e:1},{id:"comp_0",layers:[{ddd:0,ind:1,ty:4,nm:"Link Icon Blue",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:50,s:[99]},{t:61,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[28.784,28.924,0],ix:2},a:{a:0,k:[9.784,12.924,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.914,0],[.292,.044],[.89,.892],[0,0],[0,1.585],[-1.119,1.122],[0,0],[-1.585,0],[-1.122,-1.119],[0,0],[-.043,-1.517],[.581,-.972],[0,0],[0,0],[.108,.108],[0,0],[0,0],[.042,.659],[.608,.613],[0,0],[1.346,-1.343],[0,0],[0,-.95],[-.671,-.674],[0,0],[-.844,-.063],[-.602,.328],[0,0],[0,0],[-.063,-.088],[0,-.308],[.137,-.207],[0,0],[0,0]],o:[[-.292,0],[-1.248,-.186],[0,0],[-1.119,-1.122],[0,-1.586],[0,0],[1.122,-1.12],[1.585,0],[0,0],[1.073,1.077],[.032,1.131],[0,0],[0,0],[-.101,-.113],[0,0],[0,0],[.311,-.582],[-.053,-.862],[0,0],[-1.345,-1.343],[0,0],[-.672,.673],[0,.951],[0,0],[.6,.597],[.686,.053],[0,0],[0,0],[.074,.074],[.207,.23],[0,.247],[0,0],[0,0],[-.831,.416]],v:[[-.796,3.971],[-1.672,3.906],[-4.988,2.234],[-5.397,1.825],[-7.132,-2.373],[-5.397,-6.571],[-1.031,-10.937],[3.167,-12.674],[7.365,-10.938],[7.772,-10.53],[9.501,-6.508],[8.662,-3.293],[8.111,-2.37],[7.392,-3.17],[7.079,-3.503],[6.429,-4.152],[6.707,-4.671],[7.12,-6.567],[6.095,-8.854],[5.685,-9.262],[.648,-9.263],[-3.718,-4.89],[-4.76,-2.372],[-3.719,.147],[-3.31,.555],[-1.07,1.579],[.897,1.159],[1.42,.876],[1.838,1.299],[2.043,1.542],[2.363,2.377],[2.154,3.071],[2.038,3.247],[1.849,3.342]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[1.585,0],[1.122,1.12],[0,0],[.043,1.518],[-.581,.972],[0,0],[0,0],[-.106,-.107],[0,0],[0,0],[-.04,-.659],[-.608,-.613],[0,0],[-.95,0],[-.664,.661],[0,0],[0,.951],[.671,.674],[0,0],[.845,.064],[.597,-.321],[0,0],[0,0],[0,.317],[-.192,.217],[0,0],[0,0],[-1.212,-.183],[-.889,-.887],[0,0],[0,-1.584],[1.119,-1.123],[0,0]],o:[[-1.584,0],[0,0],[-1.074,-1.079],[-.032,-1.132],[0,0],[0,0],[.1,.114],[0,0],[0,0],[-.311,.583],[.054,.861],[0,0],[.674,.672],[.937,0],[0,0],[.672,-.674],[0,-.95],[0,0],[-.599,-.602],[-.676,-.052],[0,0],[0,0],[-.224,-.224],[0,-.291],[0,0],[0,0],[1.097,-.544],[1.243,.188],[0,0],[1.123,1.126],[0,1.584],[0,0],[-1.123,1.121]],v:[[-3.166,12.674],[-7.363,10.938],[-7.771,10.531],[-9.502,6.505],[-8.662,3.289],[-8.107,2.361],[-7.389,3.17],[-7.079,3.502],[-6.429,4.152],[-6.706,4.669],[-7.12,6.568],[-6.093,8.855],[-5.685,9.262],[-3.166,10.304],[-.647,9.263],[3.718,4.894],[4.76,2.374],[3.719,-.144],[3.31,-.551],[1.071,-1.583],[-.876,-1.17],[-1.395,-.89],[-2.04,-1.536],[-2.388,-2.375],[-2.09,-3.162],[-1.987,-3.279],[-1.848,-3.347],[1.682,-3.899],[4.988,-2.231],[5.394,-1.828],[7.134,2.373],[5.398,6.571],[1.033,10.937]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[0,.380392186782,.996078491211,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[9.784,12.924],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:6,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:180,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Link Icon White",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:50,s:[0]},{t:57,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[28.784,28.924,0],ix:2},a:{a:0,k:[9.784,12.924,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.914,0],[.292,.044],[.89,.892],[0,0],[0,1.585],[-1.119,1.122],[0,0],[-1.585,0],[-1.122,-1.119],[0,0],[-.043,-1.517],[.581,-.972],[0,0],[0,0],[.108,.108],[0,0],[0,0],[.042,.659],[.608,.613],[0,0],[1.346,-1.343],[0,0],[0,-.95],[-.671,-.674],[0,0],[-.844,-.063],[-.602,.328],[0,0],[0,0],[-.063,-.088],[0,-.308],[.137,-.207],[0,0],[0,0]],o:[[-.292,0],[-1.248,-.186],[0,0],[-1.119,-1.122],[0,-1.586],[0,0],[1.122,-1.12],[1.585,0],[0,0],[1.073,1.077],[.032,1.131],[0,0],[0,0],[-.101,-.113],[0,0],[0,0],[.311,-.582],[-.053,-.862],[0,0],[-1.345,-1.343],[0,0],[-.672,.673],[0,.951],[0,0],[.6,.597],[.686,.053],[0,0],[0,0],[.074,.074],[.207,.23],[0,.247],[0,0],[0,0],[-.831,.416]],v:[[-.796,3.971],[-1.672,3.906],[-4.988,2.234],[-5.397,1.825],[-7.132,-2.373],[-5.397,-6.571],[-1.031,-10.937],[3.167,-12.674],[7.365,-10.938],[7.772,-10.53],[9.501,-6.508],[8.662,-3.293],[8.111,-2.37],[7.392,-3.17],[7.079,-3.503],[6.429,-4.152],[6.707,-4.671],[7.12,-6.567],[6.095,-8.854],[5.685,-9.262],[.648,-9.263],[-3.718,-4.89],[-4.76,-2.372],[-3.719,.147],[-3.31,.555],[-1.07,1.579],[.897,1.159],[1.42,.876],[1.838,1.299],[2.043,1.542],[2.363,2.377],[2.154,3.071],[2.038,3.247],[1.849,3.342]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[1.585,0],[1.122,1.12],[0,0],[.043,1.518],[-.581,.972],[0,0],[0,0],[-.106,-.107],[0,0],[0,0],[-.04,-.659],[-.608,-.613],[0,0],[-.95,0],[-.664,.661],[0,0],[0,.951],[.671,.674],[0,0],[.845,.064],[.597,-.321],[0,0],[0,0],[0,.317],[-.192,.217],[0,0],[0,0],[-1.212,-.183],[-.889,-.887],[0,0],[0,-1.584],[1.119,-1.123],[0,0]],o:[[-1.584,0],[0,0],[-1.074,-1.079],[-.032,-1.132],[0,0],[0,0],[.1,.114],[0,0],[0,0],[-.311,.583],[.054,.861],[0,0],[.674,.672],[.937,0],[0,0],[.672,-.674],[0,-.95],[0,0],[-.599,-.602],[-.676,-.052],[0,0],[0,0],[-.224,-.224],[0,-.291],[0,0],[0,0],[1.097,-.544],[1.243,.188],[0,0],[1.123,1.126],[0,1.584],[0,0],[-1.123,1.121]],v:[[-3.166,12.674],[-7.363,10.938],[-7.771,10.531],[-9.502,6.505],[-8.662,3.289],[-8.107,2.361],[-7.389,3.17],[-7.079,3.502],[-6.429,4.152],[-6.706,4.669],[-7.12,6.568],[-6.093,8.855],[-5.685,9.262],[-3.166,10.304],[-.647,9.263],[3.718,4.894],[4.76,2.374],[3.719,-.144],[3.31,-.551],[1.071,-1.583],[-.876,-1.17],[-1.395,-.89],[-2.04,-1.536],[-2.388,-2.375],[-2.09,-3.162],[-1.987,-3.279],[-1.848,-3.347],[1.682,-3.899],[4.988,-2.231],[5.394,-1.828],[7.134,2.373],[5.398,6.571],[1.033,10.937]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.96862745098,.960784313725,.949019607843,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[9.784,12.924],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:6,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:180,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Blue Fill",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[27.197,28.802,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.552,.552,.667],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,0,0]},t:0,s:[0,0,100]},{i:{x:[0,0,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:60,s:[0,0,100]},{t:135,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[54.113,54.113],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[0,.380392156863,.996078431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:0,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[0,.380392156863,.996078431373,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[1.803,.198],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:180,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Blue Ring",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[27.197,28.802,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[54.113,54.113],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[0,.380392156863,.996078431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[1.803,.198],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.257],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{t:60,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:180,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"Ring Fill",sr:1,ks:{o:{a:0,k:14,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[27.197,28.802,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[54.113,54.113],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.650980392157,.56862745098,.443137254902,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[1.803,.198],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:180,st:0,bm:0}]}],layers:[{ddd:0,ind:1,ty:0,nm:"Loader",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[193,66,0],ix:2},a:{a:0,k:[29,29,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,w:58,h:58,ip:0,op:180,st:0,bm:0},{ddd:0,ind:2,ty:2,nm:"Layer 1",refId:"image_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[192.63,65.815,0],ix:2},a:{a:0,k:[192.88,66.065,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:180,st:0,bm:0}],markers:[]},F=s.React$1.lazy((()=>new Promise((function(t,a){e(["./c_lottie-react_build_index"],t,a)}))));var R;!function(e){e.NEW_GDSS_WEB_FILE_INTRO="NEW_GDSS_WEB_FILE_INTRO",e.LINK_ACCOUNT="LINK_ACCOUNT"}(R||(R={}));const w=({user:e,onComplete:t})=>{const[o,i]=s.react.exports.useState(R.NEW_GDSS_WEB_FILE_INTRO),l=s.react.exports.useCallback((()=>a.__awaiter(void 0,void 0,void 0,(function*(){try{if((yield u.ensureUserHasGddMigrationCompatibleLink(e,!0))===u.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK)return t()}catch(e){const t=u.parseLinkAccountError(e);t&&r.Snackbar.fail(t,"new-google-shortcut-controller-snackbar")}}))),[e,t]),c=()=>{r.open_tab(u.HELP_CENTER_ARTICLE_URL)},d=s.react.exports.useMemo((()=>{switch(o){case R.NEW_GDSS_WEB_FILE_INTRO:return(({onLinkAccount:e,onDismiss:t,onLearnMore:a})=>({title:n.intl.formatMessage({id:"8xf9hC",defaultMessage:"Google Files are moving to Google Drive"}),bodyText:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement("p",null,n.intl.formatMessage({id:"wtjl7Q",defaultMessage:"To improve performance and access to Google file features, your Google files will be moved from Dropbox to Google Drive."})),s.React$1.createElement("p",null,n.intl.formatMessage({id:"HiWua9",defaultMessage:"Shortcuts to all your files will be created in Dropbox. To keep working in Google Workspace, link your Google account to Dropbox"})),s.React$1.createElement("p",null,s.React$1.createElement("i",null,n.intl.formatMessage({id:"JlYJUS",defaultMessage:"You may need to disable pop-up blockers in order to link your Google account."})))),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(r.Button,{variant:"opacity",onClick:t},u.Strings.DISMISS),s.React$1.createElement(r.Button,{variant:"primary",onClick:e},u.Strings.LINK_ACCOUNT)),tertiaryActions:s.React$1.createElement(r.Button,{variant:"transparent",onClick:a},u.Strings.LEARN_MORE),rightFrameComponent:s.React$1.createElement(s.React$1.Suspense,{fallback:s.React$1.createElement("div",null,u.Strings.LOADING_ANIMATION)},s.React$1.createElement(F,{animationData:S,loop:!1,style:{width:"75%"}})),width:749}))({onLinkAccount:l,onDismiss:()=>i(R.LINK_ACCOUNT),onLearnMore:c});case R.LINK_ACCOUNT:return(({onCancel:e,onLinkAccount:t})=>({title:n.intl.formatMessage({id:"T8Uu3I",defaultMessage:"Link account?"}),bodyText:s.React$1.createElement("p",null,n.intl.formatMessage({id:"v/1xE8",defaultMessage:"You will not be able to create Google Docs, Sheets or Slides in Dropbox going forward without linking your Google account. "})),tertiaryActions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(r.Button,{variant:"opacity",onClick:t},u.Strings.LINK_ACCOUNT),s.React$1.createElement(r.Button,{variant:"primary",onClick:e},u.Strings.CANCEL)),width:"standard",withCloseButton:u.Strings.CLOSE}))({onCancel:r.Modal$1.close,onLinkAccount:l})}}),[o,i,l]);return s.React$1.createElement(u.ModalTemplate,Object.assign({open:!0},d,{onRequestClose:r.Modal$1.close}))};w.displayName="NewGoogleShortcutController";const D=n.intl.formatMessage({id:"UpDkTB",defaultMessage:"Create file in..."}),T=n.intl.formatMessage({id:"7E4VWP",defaultMessage:"Create shortcut in..."}),B=n.intl.formatMessage({id:"bhV8Xa",defaultMessage:"Create"}),L=n.intl.formatMessage({id:"GDikFY",defaultMessage:"Choose folder"}),P="create-cloud-doc",N=e=>(e.replace(/\/$/,"").match(/\//g)||[]).length,v=(e,t)=>{r.logUserAction({actionEvent:r.UserActionEventType.PRE_CREATE,userId:t.userId,actionSource:t.action_source,data:{webOpenId:e}})},O=({ts:e,documentType:t,selection_mode:s,emptyFolder:n,error:l})=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=o.getMetricsReporter$1(),c={};c.document_type=t||"unknown",c.selection_mode=s||"undefined",c.empty_folder=String(n),c.error=l?"true":"false";a.createStats({ns:r.CLOUD_DOCS_AMP_NAMESPACE,name:"web/createFile"},c).recordDuration(Date.now()-e,i.TimeUnit.MILLISECONDS)})),G=({ts:e,openId:t,selection_mode:a,empty_folder:o})=>i=>{O({ts:Date.now(),documentType:i.documentType,selection_mode:a,emptyFolder:o}),r.logFileCreateSuccess({uid:i.userId,document_type:i.documentType,time_elapsed:Date.now()-e,open_id:t,selection_mode:a,empty_folder:o}),r.logUserAction({actionEvent:r.UserActionEventType.CREATE,userId:i.userId,docPathOrId:i.fq_path,actionSource:i.action_source,data:{webOpenId:t}})},V=({user:t,path:o,documentType:i,source:s,selection_mode:l,empty_folder:c,defaultUrl:d,useApiV2ForPifsCreation:u,createShortcutForGdssFile:p})=>a.__awaiter(void 0,void 0,void 0,(function*(){return Promise.all([new Promise((function(t,a){e(["./c_account_email"],t,a)})),new Promise((function(t,a){e(["./c_account_email_verify_reasons"],t,a)}))]).then((([{EmailVerification:e},{EmailVerificationReasons:a}])=>{if(!e.get_for_user(t).verified_or_show(a.CLOUD_DOCS))return;const m=r.generateUUID("web-create");if(r.isMicrosoftFileType(i)){v(m,{userId:t.id,action_source:r.getActionSourceFromNewFileMenuType(s)});const e=G({ts:Date.now(),openId:m,selection_mode:l,empty_folder:c});U({userId:t.id,path:o,documentType:i,logSuccessCallback:e,source:s})}else if(r.isPointerFileType(i))A.showInstance({createOnSubmit:e=>{v(m,{userId:t.id,action_source:r.getActionSourceFromNewFileMenuType(s)});const a=G({ts:Date.now(),openId:m,selection_mode:l,empty_folder:c});H({userId:t.id,pathName:o,name:e.pointerData.name,url:e.pointerData.url,onError:e.onError,logSuccessCallback:a,source:s})},defaultUrl:d});else{v(m,{userId:t.id,action_source:r.getActionSourceFromNewFileMenuType(s)});const e=G({ts:Date.now(),openId:m,selection_mode:l,empty_folder:c});Q({user:t,pathName:o,title:n.intl.formatMessage({id:"j+AeKy",defaultMessage:"Untitled"}),documentType:i,logSuccessCallback:e,source:s,openId:m,selection_mode:l,empty_folder:c,useApiV2ForPifsCreation:u,createShortcutForGdssFile:p})}}))})),U=({userId:e,path:t,documentType:a,logSuccessCallback:o,source:i})=>{const s={fq_path:t,extension:a,action_source:K(i),_subject_uid:String(e),t:d.Cookies.read("__Host-js_csrf")},n=j(s);document.body.appendChild(n),n.submit(),o({userId:e,documentType:a,action_source:r.getActionSourceFromNewFileMenuType(i)})},j=e=>{const t=document.createElement("form");t.action="/ow/msft/create_new_file",t.method="POST",t.target="_blank";for(const a of Object.keys(e)){const o=document.createElement("input");o.type="hidden",o.name=a,o.value=e[a],t.appendChild(o)}return t},Q=({user:e,pathName:t,title:a,documentType:o,logSuccessCallback:i,source:l,openId:c,selection_mode:d,empty_folder:p,useApiV2ForPifsCreation:m,createShortcutForGdssFile:g})=>{const h=n.intl.formatMessage({id:"XcMi4Q",defaultMessage:"Creating new fileâ€¦"}),f=n.intl.formatMessage({id:"5VrbkU",defaultMessage:"File created!"});if(m&&(o===r.PaperNewFileTypes.PAPER||o===r.PaperNewFileTypes.PAPER_TEMPLATE)){r.Snackbar.sync(h,!0,P);const s=new r.UserApiV2Client,c={".tag":o===r.PaperNewFileTypes.PAPER_TEMPLATE?"paper_template":"paper"};return void s.ns("cloud_docs").rpc("create",{to_path:r.normalize(t)||"/",title:a,cloud_doc_type:c},{subjectUserId:e.id}).then((t=>{r.Snackbar.complete(f,P),i({userId:e.id,documentType:o,fq_path:t.result_path,action_source:r.getActionSourceFromNewFileMenuType(l)}),r.open_tab(t.url)})).catch((()=>{O({ts:Date.now(),documentType:o,selection_mode:d,emptyFolder:p,error:!0}),r.Snackbar.fail(n.intl.formatMessage({id:"fi9Okp",defaultMessage:"Oops, something went wrong. Please try again later."}),P)}))}if(g&&r.isGoogleFileType(o)){const a=o,n=(o,s)=>{W({user:e,path:r.joinPathWithFileName({fqPath:r.normalize(t)||"/",fileName:o+(o.endsWith(".web")?"":".web")}),folderId:s,documentType:a,source:l,logSuccessCallback:i})},c=()=>{return e={shortcutDirName:r.child_dir(t),fileType:a,onCreate:n},void r.Modal$1.showInstance(s.React$1.createElement(b,Object.assign({},e)));var e};return void u.fetchUserHasGddMigrationCompatibleLink(e).then((t=>{return t===u.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK?c():(a={user:e,onComplete:c},void r.Modal$1.showInstance(s.React$1.createElement(w,Object.assign({},a))));var a}))}const k=e=>(e.preventDefault(),e.returnValue="","");window.addEventListener("beforeunload",k);let E=r.createPlaceholderTabForNewCloudDoc();const A=s=>{r.Snackbar.sync(h,!0,P),r.createCloudDoc({pathName:t,title:a,documentType:o,userId:e.id,onSuccess:({changesets:t,createdFile:a,failureDetails:s})=>{if(s){const e=()=>{i=G({ts:Date.now(),openId:c,selection_mode:d,empty_folder:p}),E=r.createPlaceholderTabForNewCloudDoc(),A(!1)};E.close(),r.Snackbar.close(P),window.removeEventListener("beforeunload",k),r.showFileSystemWarningsModal({fsws:s,confirmText:n.intl.formatMessage({id:"bhV8Xa",defaultMessage:"Create"}),onFinalAccept:e})}else if(r.Snackbar.complete(f,P),window.removeEventListener("beforeunload",k),null!==a&&(i({userId:e.id,documentType:o,fq_path:a.fq_path,action_source:r.getActionSourceFromNewFileMenuType(l)}),E)){let e=a.open_to_url;try{const t=new URL(e);t.searchParams.set("web_open_id",c),e=t.toString()}catch(e){}E.location.replace(e)}},onError:e=>{O({ts:Date.now(),documentType:o,selection_mode:d,emptyFolder:p,error:!0}),r.Snackbar.fail(e,P),window.removeEventListener("beforeunload",k)},checkFSWs:s})};A(!0)},W=({user:e,path:t,documentType:o,folderId:i,source:s,logSuccessCallback:l})=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=n.intl.formatMessage({id:"vp4BPc",defaultMessage:"Creating new web shortcut..."}),c=n.intl.formatMessage({id:"QwCwX6",defaultMessage:"Web shortcut created!"});r.Snackbar.sync(a,!0,P);const d=!i;_(e.role,o,d,"start");try{if((yield u.ensureUserHasGddMigrationCompatibleLink(e))!==u.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK)return r.Snackbar.fail(n.intl.formatMessage({id:"4Mo3Jb",defaultMessage:"Google authentication failed"}),P),void _(e.role,o,d,"canceled");const a=new r.UserApiV2Client,{shortcut:p}=yield a.ns("cloud_docs").rpc("create_web_shortcut_to_external_file",{dest_service:{".tag":"gdrive"},dest_doc_type:{".tag":o},shortcut_file_path:t,dest_folder_id:i},{subjectUserId:e.id});l({userId:e.id,documentType:o,fq_path:t,action_source:r.getActionSourceFromNewFileMenuType(s)}),r.Snackbar.complete(c,P),_(e.role,o,d,"success"),r.safe_open_tab_and_redirect(p.url)}catch(t){r.Snackbar.fail(u.getErrorMessageForApiError(t.error),P),_(e.role,o,d,"failed")}})),H=({userId:e,pathName:t,name:a,url:o,onError:i,logSuccessCallback:s,source:l})=>{const c=new r.UserApiV2Client,d=n.intl.formatMessage({id:"l6L9q8",defaultMessage:"Creating new shortcut"}),u=n.intl.formatMessage({id:"EqUCHi",defaultMessage:"Created shortcut"});return r.Snackbar.sync(d,!0,"create-cloud-shortcut"),c.ns("cloud_docs").rpc("create",{to_path:r.normalize(t)||"/",title:a,cloud_doc_type:r.SimplePointer,pointer_url:o},{subjectUserId:e}).then((t=>{s({userId:e,documentType:r.PointerFileTypes.SIMPLE_POINTER,fq_path:t.result_path,action_source:r.getActionSourceFromNewFileMenuType(l)}),r.Modal$1.close(),r.Snackbar.complete(`${u} "${r.filename(t.result_path)}"`,"create-cloud-shortcut")})).catch((e=>{i(),r.Snackbar.fail(n.intl.formatMessage({id:"fi9Okp",defaultMessage:"Oops, something went wrong. Please try again later."}),"create-cloud-shortcut")}))},K=e=>{switch(e){case r.NewFileMenuFromType.BROWSE:return r.ActionSourceValue$1.WEB_BROWSE;case r.NewFileMenuFromType.HOME:return r.ActionSourceValue$1.WEB_HOME;default:return r.ActionSourceValue$1.WEB}};t.LinkDropboxToGoogleAnimationData=S,t.createNewFile=V,t.getDepthFromPath=N,t.showAsyncFolderDialog=({user:e,source:t,documentType:a,selection_mode:o,empty_folder:i,handleClickNewFolder:s,initialPath:n,createShortcutForGdssFile:d})=>{const u=r.isPointerFileType(a),p=u?T:D,m=u?L:B;c.showFolderDialog({modalName:l.ModalName.CLOUD_DOCS_CREATE,user:e,title:p,primaryActionLabel:m,handleClickNewFolder:s,initialPath:n,useApiV2:!0,onSuccess:(s,n)=>{const l=s||"/";r.logFileCreateClick({uid:e.id,source:t,action:r.WebUserActionLogEvent.FILE_CREATE_HOME_FOLDER_SELECTED,depth_folder_selected:N(l),selection_mode:o,empty_folder:i}),V({user:e,path:l,documentType:a,source:t,selection_mode:o,empty_folder:i,createShortcutForGdssFile:d})}})}}));
//# sourceMappingURL=c_cloud_docs_create_api.js-vflvTaCFh.map
