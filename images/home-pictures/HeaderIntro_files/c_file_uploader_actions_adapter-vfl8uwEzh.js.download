define(["exports","./c_src_sink_index","./e_ui_page_files_router","./c_data_store","./c_data_slice","./c_file_uploader_utils","./c_upload_kit_lib_types","./c_tslib","./c_apex-metrics_src_types","./e_core_exception","./c_core_exception_info","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","./c_lodash-es_lodash","./c_core_browser_detection","./e_edison","./c_core_uri","metaserver/static/js/modules/constants/files_spa","./c_core_notify","./c_core_i18n","metaserver/static/js/modules/core/langpack","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/viewer","metaserver/static/js/modules/constants/auth","./c_api_v2_noauth_client","./c_browser_cookies","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/ajax_strings","./c_csrf","./c_core_xhr","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/webtiming","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/trademark","metaserver/static/js/modules/constants/campaigns_orchestration","metaserver/static/js/modules/constants/maestro_nav_strings","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/undo_strings","metaserver/static/js/modules/constants/contacts","metaserver/static/js/modules/constants/login_and_register","./c_pap-events_enums_file_type-utils","metaserver/static/js/modules/constants/global_file_upload","./c_base64","./c_src_file_extension_extension_constants"],(function(e,r,t,s,o,a,n,_,c,i,l,p,d,u,E,m,R,T,I,O,y,U,v,f,M,S,A,g,N,h,j,L,w,C,D,b,F,V,x,k,P,G,z,H,Q){"use strict";const Y=new r.EventEmitter,W={emit(e,r){Y.emit(e,r)},on:(e,r)=>Y.on(e,r),removeListener:(e,r)=>Y.removeListener(e,r),removeAllListeners(){Y.removeAllListeners()},eventNames:()=>Y.eventNames()};function Z(e,r){switch(e[".tag"]){case"not_found":return a.UploadErrorType.COMMIT_UPLOAD_SESSION_NOT_FOUND;case"closed":case"not_closed":return a.UploadErrorType.COMMIT_READINESS_ERROR;case"too_large":return a.UploadErrorType.FILE_SIZE_ERROR;case"concurrent_session_invalid_offset":case"concurrent_session_invalid_data_size":case"incorrect_offset":case"payload_too_large":return a.UploadErrorType.COMMIT_INVALID_ARGS;case"content_hash_mismatch":return a.UploadErrorType.HASHES_NOT_EQUAL_ERROR;default:return r}}e.ActionsAdapter=W,e.convertApiV2CommitError=function(e){const r=a.UploadErrorType.COMMIT_UPLOAD_SESSION_GENERIC_ERROR,t=e.failure;switch(t[".tag"]){case"lookup_failed":return Z(t.lookup_failed,r);case"path":switch(t.path[".tag"]){case"malformed_path":case"disallowed_name":return a.UploadErrorType.COMMIT_INVALID_ARGS;case"conflict":return a.UploadErrorType.COMMIT_CONFLICT_ERROR;case"no_write_permission":case"team_folder":case"operation_suppressed":return a.UploadErrorType.COMMIT_PERMISSIONS_ERROR;case"insufficient_space":return a.UploadErrorType.OVER_QUOTA_ERROR;case"too_many_write_operations":return a.UploadErrorType.COMMIT_TOO_MANY_WRITES_ERROR;case"file_system_warnings":case"confirm_blocking_fsw_warnings":return a.UploadErrorType.SERVER_RESPONSE_ERROR;default:return r}case"properties_error":switch(t.properties_error[".tag"]){case"template_not_found":case"unsupported_folder":case"property_field_too_large":case"does_not_fit_template":case"duplicate_property_groups":return a.UploadErrorType.COMMIT_INVALID_ARGS;case"restricted_content":return a.UploadErrorType.COMMIT_PERMISSIONS_ERROR;case"path":return a.UploadErrorType.INVALID_FILE_NAME;default:return r}case"too_many_write_operations":return a.UploadErrorType.COMMIT_TOO_MANY_WRITES_ERROR;case"concurrent_session_data_not_allowed":return a.UploadErrorType.COMMIT_INVALID_ARGS;case"concurrent_session_not_closed":case"concurrent_session_missing_data":return a.UploadErrorType.COMMIT_READINESS_ERROR;case"payload_too_large":return a.UploadErrorType.COMMIT_INVALID_ARGS;case"content_hash_mismatch":return a.UploadErrorType.HASHES_NOT_EQUAL_ERROR;default:return r}},e.convertApiV2LookupAndAppendErrors=Z,e.convertUploadItem=function({bytes:e,destPath:r,id:n,parentPath:_,bytesUploaded:c},i={}){var l;const p=s.getStoreForUpload().getState(),d=o.getUser(p).id,u=t.parent_dir(r),E=t.normalize(_)+t.normalize(u),{batchId:m}=null!==(l=o.getUploadById(p,n))&&void 0!==l?l:{};return new a.FileUpload(Object.assign({uploadId:n,batchId:m,dest:E,name:t.filename(r),size:e,uploadKitDest:r,userId:d,percentUploaded:e>0?Math.ceil(c/e*100):100},i))},e.convertValidationError=function(e){switch(e){case n.UploadErrorType.InvalidChar:return a.UploadErrorType.INVALID_FILE_NAME;case n.UploadErrorType.EmptyFile:return a.UploadErrorType.EMPTY_OR_FOLDER;case n.UploadErrorType.IgnoredFile:return a.UploadErrorType.IGNORED;case n.UploadErrorType.OverMaxFileSize:return a.UploadErrorType.FILE_SIZE_ERROR;case n.UploadErrorType.PointerFile:case n.UploadErrorType.TemporaryFile:return a.UploadErrorType.INVALID_EXTENSION;case n.UploadErrorType.CloudDoc:case n.UploadErrorType.Unknown:default:return a.UploadErrorType.GENERIC}}}));
//# sourceMappingURL=c_file_uploader_actions_adapter.js-vflGjRb0l.map
