define(["require","exports","./c_tslib","./e_edison","./e_ui_page_files_router","./c_bug_reporting_routing","./c_core_notify","./c_history","./c_pagelet_logger","./c_pagination_manager","./c_browse_actions","./c_browse_file_actions_action_handlers","./c_core_uri","./c_src_sink_index","./c_apex-metrics_src_types","metaserver/static/js/modules/constants/web_experience_constants","./c_file_uploader_upload_kit_provider","./c_file_uploader_utils","./c_src_utils_logging","./c_resize-observer-polyfill_dist_ResizeObserver","./c_ui-icon_line_repeat","./c_ui-icon_line_upload-folder","./c_src_simple-action-bar_inline_action_bar","./c_src_simple-action-bar_action_bar_types","./c_src_highlighted-truncated-string_em-string","./c_action_bar_file_actions","./c_ui-icon_line_add","./c_ui-icon_line_move","./c_components_add-content-menu_index","./c_core_i18n","./c_action_bar_action_bar_strings","./c_ui-icon_line_send","./c_cloud_docs_create_api","./c_pap-events_manual_upload_select_upload","./c_ui-icon_line_upload","./c_file_uploader_types","./e_core_exception","./c_browse_tts","./c_core_exception_info","./c_flows_utils_async_modal_launchers","./c_capture_async_recorder","./c_flows_utils_exposure_logger","./c_capture_redux_selectors","./c_cloud_docs_gdd_migration_gdd_ui_blocking","./c_ui-icon_line_hide","./c_data_action_creators_index","./c_ui-icon_line_restore","./c_ui-icon_line_show","./c_ui-icon_line_zip","./c_ui-icon_line_automation","./c_ui-icon_line_cursor","./c_ui-icon_line_to-do","./c_file_actions_portable_move","./c_naming_conventions_utils","./c_flows_redux_selectors","./c_modal_filters_view_tidy_filters","./c_components_loading_indicator","./c_sharing_actions_share_modal","./c_hooks_resize_observer","./c_truncate_index","./c_ui-icon_line_link","./c_ui-icon_line_team","./c_integrations_profile_card_popover","./c_sharing_member_avatars","./c_sharing_share_modal_util","./c_collections_utils_file","./c_onboarding_checklist_async_share_button_tooltip","./c_ui-icon_line_lock","./c_tabs_index","./c_jquery","./c_controls_index","./c_lodash-es_lodash","metaserver/static/js/modules/constants/viewer","./c_Key","./c_ui_input_dig","./c_growth_ui_send_app_link_form","./c_auth_authenticator","./c_ui_modal_dig","./c_account_email","./c_account_email_verify_reasons","./c_error_boundary","./c_file_info_utils","./c_browse_selection_indicator","./c_capture_api","./c_pap-events_enums_file_type-utils","./c_browse_element_width","./c_core_browser_detection","./c_data_slice","./c_content_suggestions_models_suggested_item","./c_content_suggestions_api","./c_api_v2_team_client","./c_react_query_api_helpers_helpers","./c_api_v2_redux_files","./c_ui-icon_line_folder-history","./c_ui-icon_line_rewind","./c_right_rail_file_activity_file_activity_blade","./c_sharing_ui_util","./c_trash_constants","./c_proto_edison_redirect_messages_pb","./c_hooks_use_stabilized_callback","./c_maestro_layout_search","./c_edison_ui_spa_chrome","./c_activation_data_store","./c_sharing_async_share_modal_util","./c_onboarding_checklist_constants","./c_security_csrf_hmac","./c_api_v2_noauth_client","./c_folder_dialog_folder_picker_dig","./c_ui-icon_line_settings","./c_sync_everything_strings","./c_sync_everything_utils_deep_link_utils","./c_sync_everything_hive_logger","./c_ui-icon_external-logo_windows","./c_ui-icon_line_computer","./c_gdd_migration_ui_utils","./c_ui-icon_line_convert-file","./c_file_viewer_async_controller","./c_vault_constants","./c_campaigns_campaign_enums","./c_starred_actions","./c_starred_constants","./c_starred_star","./c_data_store","./c_sharing_ui_notifications_util"],(function(e,t,o,s,a,i,n,r,l,c,d,u,p,g,m,h,_,f,E,v,A,R,S,y,w,T,b,M,I,F,O,C,N,D,P,L,x,k,B,U,$,V,G,W,H,j,Y,q,z,K,Q,X,J,Z,ee,te,oe,se,ae,ie,ne,re,le,ce,de,ue,pe,ge,me,he,_e,fe,Ee,ve,Ae,Re,Se,ye,we,Te,be,Me,Ie,Fe,Oe,Ce,Ne,De,Pe,Le,xe,ke,Be,Ue,$e,Ve,Ge,We,He,je,Ye,qe,ze,Ke,Qe,Xe,Je,Ze,et,tt,ot,st,at,it,nt,rt,lt,ct,dt,ut,pt,gt,mt,ht){"use strict";function _t(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(o){if("default"!==o){var s=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,s.get?s:{enumerable:!0,get:function(){return e[o]}})}})),t.default=e,Object.freeze(t)}var ft=_t(Ee);const Et=e=>t=>o.__awaiter(void 0,void 0,void 0,(function*(){const o=yield new a.StormcrowGatingClient(new a.UserApiV2Client,new Je.NoAuthApiV2Client).getVariant({features:["backup_web_third_party_backup","backup_web_sku_modal"]},e.id),s={};o&&o.variantInfos.forEach((e=>{e.feature&&(s[e.feature]=e.variant)})),t({type:a.Actions.SET_STORMCROWS,payload:{stormcrows:s}})})),vt=t=>(s,i)=>o.__awaiter(void 0,void 0,void 0,(function*(){if(null!==a.backups(i()))return;const o=a.stormcrows(i()),{fetchBackups:n}=yield new Promise((function(t,o){e(["./c_action_bar_file_actions"],t,o)})).then((function(e){return e.api_esnext})),r=yield n(t,{includeThirdPartyBackups:!!o&&"ON"===o.backup_web_third_party_backup});s({type:a.Actions.SET_BACKUPS,payload:{backups:r}})})),At=t=>(s,i)=>o.__awaiter(void 0,void 0,void 0,(function*(){if(null!==a.userSKU(i()))return;const{fetchUserSKU:o}=yield new Promise((function(t,o){e(["./c_action_bar_file_actions"],t,o)})).then((function(e){return e.api_esnext})),n=yield o(t);s({type:a.Actions.SET_USER_SKU,payload:{userSKU:n}})})),Rt=t=>(s,i)=>o.__awaiter(void 0,void 0,void 0,(function*(){if(null!==a.userQuota(i()))return;const{fetchUserQuota:o}=yield new Promise((function(t,o){e(["./c_action_bar_file_actions"],t,o)})).then((function(e){return e.api_esnext})),n=yield o(t);s({type:a.Actions.SET_USER_QUOTA,payload:{userQuota:n}})}));class St{init(e){try{const t=JSON.parse(e),o=new Tt;o.init(t),this.browseContextResponse=o}catch(t){wt(e)}}isError(){return!this.browseContextResponse}fromServerBrowseContext(){return this.browseContextResponse.fromServerBrowseContext()}fromServerNsidToMountPoint(){return this.browseContextResponse.fromServerNsidToMountPoint()}fromTeamFolders(){return this.browseContextResponse.fromTeamFolders()}fromCurrentFolderFile(){return this.browseContextResponse.fromCurrentFolderFile()}fromPreviewFileInfo(){return this.browseContextResponse.fromPreviewFileInfo()}fromCurrentFolderOverview(){return this.browseContextResponse.fromCurrentFolderOverview()}}class yt{init(e){try{const t=JSON.parse(e);let o=new bt;o.init(t),this.browseGetNextResponse=o}catch(t){wt(e)}}isError(){return!this.browseGetNextResponse}fromPrefetchFiles(){return this.browseGetNextResponse.fromPrefetchFiles()}fromPaginatedTotalNumFiles(){return this.browseGetNextResponse.fromPaginatedTotalNumFiles()}fromLoadingState(){return this.browseGetNextResponse.fromLoadingState()}fromNextRequestVoucher(){return this.browseGetNextResponse.fromNextRequestVoucher()}fromNextRequestVoucherParsed(){return this.browseGetNextResponse.fromNextRequestVoucherParsed()}}function wt(e){const t="err:";if(0===e.indexOf(t)){const o=e.substr(t.length);n.Notify.error(o)}}class Tt{init(e){this.browseContextResponse=e}fromServerBrowseContext(){const e=this.browseContextResponse.context;return a.BrowseContext.fromApiV2Object(e)}fromServerNsidToMountPoint(){let e={};const t=this.browseContextResponse.context;if(t.ns_id_infos){e=t.ns_id_infos.filter((e=>!!e&&!!e.mount_point&&!!e.ns_id)).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.ns_id.toString()]:t.mount_point})),{})}return e}fromTeamFolders(){let e=[];const t=this.browseContextResponse.context;return t.team_folders_js_info&&(e=t.team_folders_js_info.map(a.File.fromApiV2Object)),e}fromCurrentFolderFile(){var e;const t=null!==(e=this.browseContextResponse.folder_info)&&void 0!==e?e:void 0;if(t&&t.file_info)return a.File.fromApiV2Object(t.file_info)}fromPreviewFileInfo(){const e=this.browseContextResponse.context;return(null==e?void 0:e.preview_file_info)?a.File.fromApiV2Object(null==e?void 0:e.preview_file_info):null}fromCurrentFolderOverview(){var e;return null!==(e=this.browseContextResponse.folder_overview)&&void 0!==e?e:void 0}}class bt{init(e){this.browseGetNextResponse=e}fromPrefetchFiles(){let e;return e=this.browseGetNextResponse.paginated_file_info.map((e=>e.file_info)).filter((e=>!!e)),e.map(a.File.fromApiV2Object)}fromPaginatedTotalNumFiles(){var e;return null!==(e=this.browseGetNextResponse.total_count)&&void 0!==e?e:0}fromLoadingState(){return this.browseGetNextResponse.has_more?a.LoadingState.LOADING_REMAINING_PAGES:a.LoadingState.LOADED}fromNextRequestVoucher(){var e;return null!==(e=this.browseGetNextResponse.next_request_voucher)&&void 0!==e?e:""}fromNextRequestVoucherParsed(){const e=this.fromNextRequestVoucher();if(""===e)return;let t;try{const o=JSON.parse(e);t=JSON.parse(o.prog)}catch(e){if(e instanceof SyntaxError)return;throw e}return void 0!==t.sort_type&&void 0!==t.sort_is_ascending?t:void 0}}const Mt="web_browse",It=g.getMetricsReporter$1(),Ft=(e,t)=>It.createCounter({ns:Mt,name:e},t),Ot=(e,t)=>It.createStats({ns:Mt,name:e},t),Ct=Ft("browse_web/bolt_client/number_refreshes_triggered"),Nt=Ft("browse_web/bolt_client/number_refreshes_completed"),Dt={newRefreshTriggered:()=>{Ct.increment(),Ct.record()},newRefreshCompleted:()=>{Nt.increment(),Nt.record()},namespaceCountChange:e=>{0!==e&&Ot("bolt_client/namespace_count_change").record(e)},namespaceCount:e=>{Ot("bolt_client/namespace_count").record(e)}},Pt=Ot("browse_web/list_dir/latency_total_ms",{method:"queued"}),Lt=Ot("browse_web/list_dir/number_requests_queued"),xt=Ot("browse_web/list_dir/latency_total_ms",{method:"simulated"}),kt={recordQueuedLatency:e=>{Pt.recordDuration(Date.now()-e,m.TimeUnit.MILLISECONDS)},recordNumberRequestsQueued:e=>{Lt.record(e)},recordSimulatedLatency:e=>{xt.recordDuration(Date.now()-e,m.TimeUnit.MILLISECONDS)}};const Bt=Ft("prefetch_loader/incorrect_sort"),Ut=Ot("prefetch_loader/incorrect_sort_pages"),$t=e=>{Bt.increment(),Bt.record();const t=Math.ceil((e-30)/700);Ut.record(t+1)},Vt=function(e){const t=e?"success":"error",o=Ft("browse/success",{cypress:h.BROWSE_ON_CYPRESS,result:t});o.increment(),o.record()},Gt=function(){return a.MetricsLogger.getSingleton().metricsCollector.onTTVC((e=>{var t,o;const s=e.start>0?"ajax":null!==(t=a.NavigationType.getFromNavigation(window.performance.navigation))&&void 0!==t?t:"";if(function(e,t,o){Ot("browse/ttvc",{cypress:t,navigation_type:o}).recordDuration(e,m.TimeUnit.MILLISECONDS)}(e.duration,h.BROWSE_ON_CYPRESS,s),"ajax"===s){const e=a.get_timer("browse_ajax"),t=(null!==(o=e.timeToInteractive())&&void 0!==o?o:0)-e.startTime();t>0&&function(e,t){Ot("browse/tti",{cypress:t}).recordDuration(e,m.TimeUnit.MILLISECONDS)}(t,h.BROWSE_ON_CYPRESS)}}))},Wt=(e,t,o)=>a.loadPath2Continue(e,o).then((e=>{const o=new Array;for(const s of e.paginated_file_info){p.assert(void 0!==s.file_info,"file_info is undefined");const e=s.file_info;e.fq_path=t+e.fq_path,o.push(a.File.fromApiV2Object(e))}return{next_request_voucher:e.next_request_voucher||null,has_more_items:e.has_more||!1,items:o}}));class Ht{constructor({user:e,path:t,fqPathsToSelect:o},{onPrefetchComplete:s,onPrefetchIncorrectSort:i,onPrefetchError:n,onLoadComplete:r},{onInitializeEverything:l,onAddFilesAndSetLoadingState:d},u=window){this.isPrefetching=()=>!!this.browsePreloadHandler&&!!this.firstPagePreloadHandler,this.handlePrefetch=()=>{p.assert(this.isPrefetching(),"trying to handle prefetching and think we aren't prefetching at the same time.  something is wrong"),this.browsePreloadHandler(this.handlePrefetchDataSuccess,this.onPrefetchError)},this.handlePrefetchDataSuccess=e=>{const t=new St;if(t.init(e),t.isError())return void this.onPrefetchError();const o=t.fromServerBrowseContext(),s=t.fromServerNsidToMountPoint(),a=t.fromTeamFolders(),i=t.fromCurrentFolderFile();this.firstPagePreloadHandler((e=>{this.handleFirstPagePrefetchDataSuccess(e,t,s,a,i,o)}),this.onPrefetchError)},this.handleFirstPagePrefetchDataSuccess=(e,t,o,s,i,n)=>{const r=new yt;if(r.init(e),r.isError())return void this.onPrefetchError();const l=r.fromPrefetchFiles(),c=r.fromPaginatedTotalNumFiles(),d=r.fromLoadingState(),u=r.fromNextRequestVoucher(),p=d===a.LoadingState.LOADING_REMAINING_PAGES,g=r.fromNextRequestVoucherParsed();if(p&&c>730&&(""!==u&&void 0!==g)){const e=a.getStoreForBrowse(),t=a.sortOrder(e.getState()),o=t.sortDirection===a.SortDirection.ASCENDING,s=t.sortField===a.SortLabelToSortField(null==g?void 0:g.sort_type),i=(null==g?void 0:g.sort_is_ascending)===o;if(!s||!i)return $t(c),void this.onPrefetchIncorrectSort()}this.onInitializeEverything({path:this.path,files:p?[]:l,paginatedTotalNumFiles:c,context:n,mountPoints:o,fqPathsToSelect:this.fqPathsToSelect,loadingState:d,teamFolders:s,currentFolderInfo:i}),p?this.initializePaginationManager(c,l,!0,u):this.onLoadComplete(),this.onPrefetchComplete(t,r)},this.initializePaginationManager=(e,t=[],o=!0,s="")=>{const i=c.PaginationManager.create({firstPage:{items:t,has_more_items:o,next_request_voucher:s},keyName:"sjid",userID:this.user.id,newDataAvailableCallback:(t,o)=>{const s=t.areAllItemsReady(),i=s?a.LoadingState.LOADED:a.LoadingState.LOADING_REMAINING_PAGES;this.onAddFilesAndSetLoadingState({path:this.path,files:o,paginatedTotalNumFiles:e,loadingState:i}),s&&(t.stopAutoFetching(),this.onLoadComplete())},fetchNextFn:Wt});a.waitForTTI().then((()=>i.startAutoFetching()))},this.user=e,this.path=t,this.fqPathsToSelect=o,this.onPrefetchComplete=s,this.onPrefetchIncorrectSort=i,this.onPrefetchError=n,this.onLoadComplete=r,this.onInitializeEverything=l,this.onAddFilesAndSetLoadingState=d,this.browsePreloadHandler=u.__REGISTER_BROWSE_PRELOAD_HANDLER,this.firstPagePreloadHandler=u.__REGISTER_BROWSE_FIRST_PAGE_PRELOAD_HANDLER}}const jt=a.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{BrowseUploadController:t}=yield new Promise((function(t,o){e(["./c_browse_browse_upload_controller"],t,o)}));return t}))});class Yt extends s.React$1.Component{constructor(){super(...arguments),this.onChoose=e=>o.__awaiter(this,void 0,void 0,(function*(){return e.map((e=>[e,{parentPath:this.props.context.currentFQPath}]))})),this.onChooseDropboxFile=e=>o.__awaiter(this,void 0,void 0,(function*(){return e.map((e=>[e,{parentPath:this.props.context.currentFQPath}]))})),this.nsIdForRouting=e=>{const t=""===this.props.context.currentFQPath,o=f.getDestinationDir(e.parentPath||"",e.destPath);return t?this.props.user.root_ns_id:(p.assert(null!=this.props.mountPoints,"mountPoints is null"),p.assert(null!=this.props.context.rootNSID,"rootNSID is null"),f.getNsId(this.props.mountPoints,this.props.context.rootNSID,o))}}render(){return s.React$1.createElement(_.UploadKitProvider,{user:this.props.user,nsIdForRouting:this.nsIdForRouting,onChoose:this.onChoose,onChooseDropboxFile:this.onChooseDropboxFile,actionScreen:"browse_screen"},s.React$1.createElement(jt,null),this.props.children)}}Yt.displayName="UnconnectedBrowseUploadProvider";const qt=a.connect((e=>({context:a.context(e),mountPoints:a.mountPoints(e)})))(Yt),zt=a.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield a.waitForTTI();const{RewindPanel:t}=yield new Promise((function(t,o){e(["./c_delorean"],t,o)}));return t}))}),Kt=a.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield a.waitForTTI();const{FolderHistoryPanel:t}=yield new Promise((function(t,o){e(["./c_delorean_folder_history_panel"],t,o)}));return t}))}),Qt=a.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield a.waitForTTI();const{HomeInlineContentPrompt:t}=yield new Promise((function(t,o){e(["./c_upsell_home_inline_location"],t,o)}));return a.requireCssWithComponent(t,["/static/metaserver/static/css/upsell/home_inline_content-vflkf4E8W.css"])}))}),Xt=a.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{BrowseInlineActionBar:t}=yield new Promise((function(t,o){e(["./c_browse_browse_inline_action_bar"],t,o)}));return t}))});a.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield a.waitForTTI();const{SidebarViewSharingSection:e}=yield Promise.resolve().then((function(){return Os}));return e}))});const Jt=a.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield a.waitForTTI();const{BrowseSharingView:e}=yield Promise.resolve().then((function(){return Ns}));return e}))});function Zt(){const{addDropbox:e,addFile:t,addFolder:o}=I.getStrings(F.intl);return{type:y.ActionBarMenuType.DROPDOWN,menuSections:[{menuItems:[{value:{type:y.ActionBarActionTypes.ADD_CONTENT,menuItem:I.UploadOption.FILE},description:t,icon:s.React$1.createElement(a.UIIcon,{src:R.UploadFileLine})},{value:{type:y.ActionBarActionTypes.ADD_CONTENT,menuItem:I.UploadOption.FOLDER},description:o,icon:s.React$1.createElement(a.UIIcon,{src:R.UploadFolderLine})},{value:{type:y.ActionBarActionTypes.ADD_CONTENT,menuItem:I.UploadOption.DROPBOX},description:e,icon:s.React$1.createElement(a.UIIcon,{src:M.MoveLine})}]}]}}const eo=(e,t)=>a.context(e).isInsideVaultFolder,to={actionType:y.ActionBarActionTypes.ADD_TO_TRANSFER,isEnabled:!0,text:O.ADD_TO_TRANSFER_ACTION_STRING,icon:C.SendLine},oo={actionType:y.ActionBarActionTypes.ADD_TO_TRANSFER,isEnabled:!0,text:O.ADD_BACKUP_TO_TRANSFER_ACTION_STRING,icon:C.SendLine},so=(e,t)=>{const{isTransferEnabled:o}=a.experiments(e);return!t.isSearchMode&&(o&&!T.isNothingSelected(e,t)&&T.isLiveFilesOnly(e,t)&&!T.isPnmSuppressShareSelected(e,t)&&!T.isPnmLinkNodeSelected(e,t)&&!T.isCloudDocSelected(e,t)&&!T.selectedFiles(e,t).some(a.File.isNoAccessSharedFolder))},ao=()=>a.createSelector(so,T.isInsideBackupFolder,((e,t)=>{if(e)return t?oo:to})),io=()=>(e,t)=>{if(((e,t)=>!!T.isInsideBackupFolder(e,t)&&so(e,t))(e,t))return T.isInsideBackupFolder(e,t)?oo:to},no=(e,t)=>T.isSelectionFetchFolderSizeStatusOnly(e,t)&&T.isSelectionFoldersOnly(e,t)&&T.isLiveFilesOnly(e,t)&&!T.isRestrictedPathSelected(e,t)&&!a.isQueryingFolderSizes(e)&&a.selectViewType(e,{instanceId:a.BROWSE_FILES_VIEW_ID})!==a.ViewType.Grid&&a.canDisplayFolderSizes(e)&&!ro(e,t),ro=(e,t)=>{const o=T.currentBackupInfo(e,t);return!(!a.isBackupBrowse()||o)||"third_party"===(null==o?void 0:o.type)},lo=(e,t,o)=>{const s=null==o?void 0:o.menuValue,i=null==s?void 0:s.menuItem,n=i===D.UploadAction.UPLOAD_FOLDER?"upload_folder":"upload_file";k.logBrowseTTS(n);const r=a.path(e),l=t.actionSource===a.ActionSourceValue.OVERFLOW_MENU?a.ActionSourceValue.OVERFLOW_MENU:a.NewFileMenuFromType.BROWSE;switch(i){case D.UploadAction.UPLOAD_FILES:case D.UploadAction.UPLOAD_FOLDER:{const e=i===D.UploadAction.UPLOAD_FOLDER;L.FileUploaderController.setPath(r),L.FileUploaderController.handleUploadButtonClick({folderUpload:e,source:l,actionElement:L.UploadElement.ACTION_BAR,actionScreen:"browse_screen"});break}default:i&&x.reportStack(`Bad uploadAction=[${i}]`,{severity:B.SEVERITY.CRITICAL});const e=!1;L.FileUploaderController.setPath(r),L.FileUploaderController.handleUploadButtonClick({folderUpload:e,source:l,actionElement:L.UploadElement.ACTION_BAR,actionScreen:"browse_screen"})}},co=(e,t)=>!T.context(e,t).isInsideVaultFolder,uo=(e,t)=>a.shouldShowDeletedFiles(e)&&T.isNothingSelected(e,t),po=(e,t)=>!T.isFileSharedWithMeSelected(e,t)&&T.isLiveFilesOnly(e,t)&&a.normalize(T.context(e,t).currentFQPath).split("/").length>1&&void 0!==j.folderOverviewPinnedItems(e)&&!T.isPnmLinkNodeSelected(e,t)&&!T.context(e,t).isInsideVaultFolder,go=(e,t)=>{const o=j.folderOverviewPinnedItems(e),s=T.selectedFiles(e,t),i=void 0!==o?s.toArray().filter((e=>o.some((t=>t.fq_path===e.fq_path||t.file_id===e.file_id)))).length:0;return!T.isFileSharedWithMeSelected(e,t)&&T.isLiveFilesOnly(e,t)&&a.normalize(T.context(e,t).currentFQPath).split("/").length<=1&&void 0!==o&&i<s.count()&&!T.isPnmLinkNodeSelected(e,t)},mo=(e,t)=>!(!T.isSingleSelectionFolder(e,t)||!T.isDeletedFilesOnly(e,t)||T.hasUnmountedOrMultipleNamespaces(e,t))&&!T.showRestoreAction(e,t),ho=(e,t)=>{const o=T.currentBackupInfo(e,t);return!a.shouldShowDeletedFiles(e)&&T.isNothingSelected(e,t)&&"third_party"!==(null==o?void 0:o.type)},_o=(e,t)=>{const o=j.folderOverviewPinnedItems(e),s=T.selectedFiles(e,t),a=void 0!==o?s.toArray().filter((e=>o.some((t=>t.fq_path===e.fq_path||t.file_id===e.file_id)))).length:0;return T.isLiveFilesOnly(e,t)&&!T.isFileSharedWithMeSelected(e,t)&&o&&a===s.count()},fo=F.intl.formatMessage({id:"RAWfy4",defaultMessage:"Couldn’t create a project from this folder."}),Eo=F.intl.formatMessage({id:"bf2w9a",defaultMessage:"Couldn’t add people to this project automatically."}),vo=F.intl.formatMessage({id:"RAWfy4",defaultMessage:"Couldn’t create a project from this folder."}),Ao=F.intl.formatMessage({id:"TsUR8/",defaultMessage:"Hang tight, your project will open in a moment."});const Ro=e=>e?a.sjcl.exports.codec.hex.fromBits(a.sjcl.exports.hash.sha256.hash(e.toLowerCase())):"",So=e=>(e||"/").split("/").map(Ro).join("/"),yo=a.defineMessage({id:"1PRov9",defaultMessage:"Open project view"}),wo=(e,t,o)=>{const s=a.getBrowseState(e).currentFolderInfo,i=null==s?void 0:s.file_id,n=null==s?void 0:s.ns_id,r=null==s?void 0:s.ns_path,l=a.user(e).id;t!==a.WebUserActionLogEvent.SELECT_SPACES_PROJECT_VIEW_BUTTON?a.WebUserActionLog.log(l,t,{folder_file_id:i,ns_id:n,resource_namespace_path:So(r)}):a.WebUserActionLog.log(l,t,{folder_file_id:i,ns_id:n,resource_namespace_path:So(r),is_creating_new_space:null!=o&&o})};const To=(e,t)=>{if(T.context(e,t).isInsideVaultFolder)return!1;if(!T.isNothingSelected(e,t))return!1;const o=a.getBrowseState(e),s=o.currentFolderInfo,i=o.paginatedTotalNumFiles,n=null==s?void 0:s.type;if(n===a.FileTypes.SHARED_FOLDER||n===a.FileTypes.TEAM_SHARED_FOLDER||n===a.FileTypes.FAMILY_SHARED_FOLDER){const o=null==s?void 0:s._mount_access_perms,{expFssEntryPointForSpaces:n}=T.experiments(e,t),r=a.folderMemberCounts(e),l=r>1&&r<=20&&i>0&&i<500;if((null==o?void 0:o.includes("can_view"))&&(null==o?void 0:o.includes("can_view_members"))&&l&&n)return wo(e,a.WebUserActionLogEvent.SHOWN_SPACES_PROJECT_VIEW_BUTTON),!0}return!1},bo=e=>a.isSpacesEntryPointEnabled(e);F.intl.formatMessage({id:"x/e6Ro",defaultMessage:"Share this folder to be able to receive activity updates."});var Mo;function Io(e){const t=function(e){const t=[];return e.showTidyUp&&t.push({value:{type:y.ActionBarActionTypes.ORGANIZE,menuItem:Mo.TIDY_UP},description:F.intl.formatMessage(O.TIDY_UP_ACTION_STRING),icon:s.React$1.createElement(a.UIIcon,{src:z.MultipleFoldersLine})}),e.showNamingConventions&&t.push({value:{type:y.ActionBarActionTypes.ORGANIZE,menuItem:Mo.NAMING_CONVENTIONS},description:F.intl.formatMessage(O.APPLY_NAMING_CONVENTION_ACTION_STRING),icon:s.React$1.createElement(a.UIIcon,{src:Q.CursorLine})}),e.showDuplicateFiles&&t.push({value:{type:y.ActionBarActionTypes.ORGANIZE,menuItem:Mo.DUPLICATE_FILES},description:F.intl.formatMessage(O.FIND_DUPLICATES_ACTION_STRING),icon:s.React$1.createElement(a.UIIcon,{src:X.DuplicateLine})}),e.showAddAutomations?t.push({value:{type:y.ActionBarActionTypes.ORGANIZE,menuItem:Mo.ADD_AUTOMATIONS},description:F.intl.formatMessage(O.ADD_FOLDER_AUTOMATION_STRING),icon:s.React$1.createElement(a.UIIcon,{src:K.AutomationLine})}):e.showEditAutomations&&t.push({value:{type:y.ActionBarActionTypes.ORGANIZE,menuItem:Mo.EDIT_AUTOMATIONS},description:F.intl.formatMessage(O.EDIT_FOLDER_AUTOMATION_STRING),icon:s.React$1.createElement(a.UIIcon,{src:K.AutomationLine})}),{menuItems:t}}(e);if(t)return{type:y.ActionBarMenuType.DROPDOWN,menuSections:[t]}}!function(e){e.NAMING_CONVENTIONS="naming-conventions",e.TIDY_UP="tidy_up",e.DUPLICATE_FILES="duplicate_files",e.ADD_AUTOMATIONS="add-automations",e.EDIT_AUTOMATIONS="edit-automations"}(Mo||(Mo={}));const Fo=(e,t)=>T.context(e,t).isCurrentPathWriteable()&&T.isFolderTidyable(e,t),Oo=(e,t)=>T.context(e,t).isCurrentPathWriteable()&&T.isFolderTidyable(e,t),Co=(e,t)=>{const{expFlowsAutomatedFolderUI:o}=T.experiments(e,t),s=T.selectedFiles(e,t).first(),i=a.getCurrentFolderInfo(e),n=T.context(e,t),r=!!o&&T.isSingleSelectionFolder(e,t)&&!n.isInsideVaultFolder&&!T.isTeamMemberFolderSelected(e,t)&&!a.File.isReadOnlySharedFolder(s),l=!!o&&!s&&i&&n.isInFolderMode&&!n.isCurrentlyInRoot&&!n.isInsideTeamFolderRoot&&!n.isInsideVaultFolder&&i.type!==a.FileTypes.TEAM_MEMBER_FOLDER&&!a.File.isReadOnlySharedFolder(i);return r||l},No=(e,t)=>{const o=T.getFlowsUserAutomation(e,t),s=ee.getAllowedWorkflowActions(e);return!(null==o||!s.includes(o.actions[0].actionType))&&Co(e,t)},Do=(e,t)=>!T.getFlowsUserAutomation(e,t)&&Co(e,t),Po=(e,t)=>!!a.postTTIExperiments(e).expDuplicateFilesEnabled&&(T.context(e,t).isCurrentPathWriteable()&&T.isFolderTidyable(e,t)),Lo=(e,t)=>Fo(e,t)||Oo(e,t)||Co(e,t)||Po(e,t),xo={[T.ActionBarSelectionType.NONE]:{alwaysAtTopLevel:[y.ActionBarActionTypes.UPLOAD,y.ActionBarActionTypes.CREATE],atTopLevelIfSpace:[y.ActionBarActionTypes.ORGANIZE,y.ActionBarActionTypes.VAULT_LOCK,y.ActionBarActionTypes.VAULT_UNLOCK],alwaysInOverflow:[[y.ActionBarActionTypes.FOLLOW,y.ActionBarActionTypes.FOLLOWING,y.ActionBarActionTypes.TIDY_UP,y.ActionBarActionTypes.APPLY_NAMING_CONVENTION,y.ActionBarActionTypes.SHOW_DELETED_FILES,y.ActionBarActionTypes.HIDE_DELETED_FILES,y.ActionBarActionTypes.REQUEST_FILES,y.ActionBarActionTypes.REWIND,y.ActionBarActionTypes.ADD_CONTENT],[y.ActionBarActionTypes.SPACES_DROPDOWN,y.ActionBarActionTypes.EDIT_FOLDER_AUTOMATION,y.ActionBarActionTypes.ADD_FOLDER_AUTOMATION],[y.ActionBarActionTypes.ADD_FROM_GDRIVE]]},[T.ActionBarSelectionType.FILE]:{alwaysAtTopLevel:[y.ActionBarActionTypes.UPLOAD,y.ActionBarActionTypes.CREATE],atTopLevelIfSpace:[y.ActionBarActionTypes.DOWNLOAD,y.ActionBarActionTypes.OPEN,y.ActionBarActionTypes.UNZIP,y.ActionBarActionTypes.DELETE,y.ActionBarActionTypes.RESTORE,y.ActionBarActionTypes.PERMANENT_DELETE,y.ActionBarActionTypes.VAULT_LOCK,y.ActionBarActionTypes.VAULT_UNLOCK],alwaysInOverflow:[[y.ActionBarActionTypes.SHARE,y.ActionBarActionTypes.SHARE_COPY_LINK,y.ActionBarActionTypes.MANAGE_PERMISSIONS,y.ActionBarActionTypes.DOWNLOAD,y.ActionBarActionTypes.OPEN_IN_REPLAY,y.ActionBarActionTypes.EDIT_IMAGE,y.ActionBarActionTypes.EDIT_PDF,y.ActionBarActionTypes.OPEN,y.ActionBarActionTypes.SEND_FOR_SIGNATURE,y.ActionBarActionTypes.REQUEST_APPROVAL,y.ActionBarActionTypes.SELF_SIGN_ACTION,y.ActionBarActionTypes.CONVERT_TO_ARCHIVE,y.ActionBarActionTypes.SAVE_AS,y.ActionBarActionTypes.UNZIP],[y.ActionBarActionTypes.DELETE,y.ActionBarActionTypes.RESTORE,y.ActionBarActionTypes.PERMANENT_DELETE,y.ActionBarActionTypes.REMOVE,y.ActionBarActionTypes.RENAME,y.ActionBarActionTypes.MOVE,y.ActionBarActionTypes.COPY],[y.ActionBarActionTypes.ADD_TO_COLLECTION,y.ActionBarActionTypes.STAR,y.ActionBarActionTypes.UNSTAR,y.ActionBarActionTypes.PIN_TO,y.ActionBarActionTypes.PIN_TO_ROOT,y.ActionBarActionTypes.UNPIN],[y.ActionBarActionTypes.MANAGE_AS_ADMIN],[y.ActionBarActionTypes.ACTIVITY]],expSuggestedWorkflowsActions:{suggestedWorkflowActions:[y.ActionBarActionTypes.EDIT_PDF,y.ActionBarActionTypes.SEND_FOR_SIGNATURE,y.ActionBarActionTypes.SELF_SIGN_ACTION],compactOverflowMenuActions:[[y.ActionBarActionTypes.SHARE,y.ActionBarActionTypes.SHARE_COPY_LINK,y.ActionBarActionTypes.DOWNLOAD],[y.ActionBarActionTypes.DELETE,y.ActionBarActionTypes.RENAME]]}},[T.ActionBarSelectionType.FOLDER]:{alwaysAtTopLevel:[y.ActionBarActionTypes.UPLOAD,y.ActionBarActionTypes.CREATE],atTopLevelIfSpace:[y.ActionBarActionTypes.DOWNLOAD,y.ActionBarActionTypes.DELETE,y.ActionBarActionTypes.OPEN,y.ActionBarActionTypes.RESTORE,y.ActionBarActionTypes.JOIN_FOLDER_AGAIN,y.ActionBarActionTypes.PERMANENT_DELETE],alwaysInOverflow:[[y.ActionBarActionTypes.SHARE,y.ActionBarActionTypes.SHARE_COPY_LINK,y.ActionBarActionTypes.MANAGE_PERMISSIONS,y.ActionBarActionTypes.OPEN,y.ActionBarActionTypes.DOWNLOAD,y.ActionBarActionTypes.EDIT_FOLDER_AUTOMATION,y.ActionBarActionTypes.ADD_FOLDER_AUTOMATION,y.ActionBarActionTypes.TIDY_UP],[y.ActionBarActionTypes.DELETE,y.ActionBarActionTypes.RESTORE,y.ActionBarActionTypes.JOIN_FOLDER_AGAIN,y.ActionBarActionTypes.PERMANENT_DELETE,y.ActionBarActionTypes.RENAME,y.ActionBarActionTypes.MOVE,y.ActionBarActionTypes.COPY],[y.ActionBarActionTypes.STAR,y.ActionBarActionTypes.UNSTAR,y.ActionBarActionTypes.UNPIN,y.ActionBarActionTypes.PIN_TO,y.ActionBarActionTypes.PIN_TO_ROOT],[y.ActionBarActionTypes.EVENTS,y.ActionBarActionTypes.CALCULATE_FOLDER_SIZE,y.ActionBarActionTypes.MANAGE_AS_ADMIN,y.ActionBarActionTypes.SPACES_REDIRECT],[y.ActionBarActionTypes.ACTIVITY]]},[T.ActionBarSelectionType.MULTIPLE]:{alwaysAtTopLevel:[y.ActionBarActionTypes.UPLOAD,y.ActionBarActionTypes.CREATE],atTopLevelIfSpace:[y.ActionBarActionTypes.DOWNLOAD,y.ActionBarActionTypes.DELETE,y.ActionBarActionTypes.RESTORE,y.ActionBarActionTypes.PERMANENT_DELETE],alwaysInOverflow:[[y.ActionBarActionTypes.SHARE,y.ActionBarActionTypes.DOWNLOAD,y.ActionBarActionTypes.DELETE,y.ActionBarActionTypes.RESTORE,y.ActionBarActionTypes.PERMANENT_DELETE,y.ActionBarActionTypes.MOVE,y.ActionBarActionTypes.COPY,y.ActionBarActionTypes.CALCULATE_FOLDER_SIZE,y.ActionBarActionTypes.MANAGE_AS_ADMIN,y.ActionBarActionTypes.SAVE_AS,y.ActionBarActionTypes.CONVERT_TO_ARCHIVE,y.ActionBarActionTypes.ADD_TO_COLLECTION,y.ActionBarActionTypes.UNPIN,y.ActionBarActionTypes.PIN_TO,y.ActionBarActionTypes.PIN_TO_ROOT]]},[T.ActionBarSelectionType.VAULT]:{alwaysAtTopLevel:[y.ActionBarActionTypes.UPLOAD,y.ActionBarActionTypes.CREATE]},[T.ActionBarSelectionType.BACKUP_CONTENT]:{alwaysAtTopLevel:[y.ActionBarActionTypes.DOWNLOAD],atTopLevelIfSpace:[y.ActionBarActionTypes.BACKUP_COPY_TO_FSS,y.ActionBarActionTypes.REWIND,y.ActionBarActionTypes.VERSION_HISTORY,y.ActionBarActionTypes.DELETE,y.ActionBarActionTypes.SHOW_DELETED_FILES,y.ActionBarActionTypes.HIDE_DELETED_FILES,y.ActionBarActionTypes.RESTORE,y.ActionBarActionTypes.PERMANENT_DELETE,y.ActionBarActionTypes.CALCULATE_FOLDER_SIZE],alwaysInOverflow:[[y.ActionBarActionTypes.BACKUP_COPY_TO_FSS,y.ActionBarActionTypes.REWIND,y.ActionBarActionTypes.VERSION_HISTORY,y.ActionBarActionTypes.DELETE,y.ActionBarActionTypes.SHOW_DELETED_FILES,y.ActionBarActionTypes.HIDE_DELETED_FILES,y.ActionBarActionTypes.RESTORE,y.ActionBarActionTypes.PERMANENT_DELETE,y.ActionBarActionTypes.CALCULATE_FOLDER_SIZE]]},[T.ActionBarSelectionType.BACKUP_FOLDER]:{alwaysAtTopLevel:[y.ActionBarActionTypes.DOWNLOAD],atTopLevelIfSpace:[y.ActionBarActionTypes.BACKUP_COPY_TO_FSS,y.ActionBarActionTypes.REWIND,y.ActionBarActionTypes.DELETE,y.ActionBarActionTypes.SHOW_DELETED_FILES,y.ActionBarActionTypes.HIDE_DELETED_FILES,y.ActionBarActionTypes.RESTORE,y.ActionBarActionTypes.PERMANENT_DELETE,y.ActionBarActionTypes.CALCULATE_FOLDER_SIZE],alwaysInOverflow:[[y.ActionBarActionTypes.BACKUP_COPY_TO_FSS,y.ActionBarActionTypes.REWIND,y.ActionBarActionTypes.DELETE,y.ActionBarActionTypes.SHOW_DELETED_FILES,y.ActionBarActionTypes.HIDE_DELETED_FILES,y.ActionBarActionTypes.RESTORE,y.ActionBarActionTypes.PERMANENT_DELETE,y.ActionBarActionTypes.CALCULATE_FOLDER_SIZE]]}},ko=a.createSelector(T.actionBarSelectionType,a.browsePostTTIExperiments,a.shouldModifyActionMenu,((e,t,o)=>{var s;const a=T.copyActionBarActions(xo[e]),{alwaysInOverflow:i,atTopLevelIfSpace:n}=a;return e!==T.ActionBarSelectionType.FILE&&e!==T.ActionBarSelectionType.MULTIPLE||(V.logExposure({feature:"flows_browse_bar_save_as_ui",variant:t.expFlowsBrowseBarSaveAsUi}),"ON"===t.expFlowsBrowseBarSaveAsUi&&(null==n||n.push(y.ActionBarActionTypes.SAVE_AS))),o&&(null==i?void 0:i.length)&&(null===(s=i[0])||void 0===s?void 0:s.length)&&i[0].unshift(y.ActionBarActionTypes.CREATE),a})),Bo=a.createSelector(T.actionBarSelectionType,T.isSelectedBackupFolder,((e,t)=>T.getInlineScenarioActions(T.copyActionBarActions(xo[e]),t,!0))),Uo=a.createSelector(T.actionBarSelectionType,(e=>T.getInlineScenarioActions(T.copyActionBarActions(xo[e]),!0,!1))),$o=()=>a.createSelector(T.context,T.selectedFiles,T.user,((e,t,o)=>{const s=a.Viewer.get_root_name(o),i={firstEntryAccessibilityHint:e.getNameOfTargetFolder(s),noOfEntries:1};return{primaryActionContext:i,secondaryActionsContext:0===t.size?i:{firstEntryAccessibilityHint:a.getFilename(t.first()),noOfEntries:t.size}}})),Vo=()=>Object.assign(Object.assign({},T.getFileActionsSelectorsMap()),{[y.ActionBarActionTypes.UPLOAD]:a.createSelector(co,T.context,((e,t)=>{const o=t.isCurrentPathWriteable();return e?{actionType:y.ActionBarActionTypes.UPLOAD,isEnabled:o,text:O.UPLOAD_ACTION_STRING,icon:P.UploadLine,menu:D.getUploadMenu(),menuMinWidth:236,className:o?"browse-upload-action--enabled":"browse-upload-action--disabled"}:void 0})),[y.ActionBarActionTypes.CREATE]:a.createSelector(a.context,a.user,a.browsePostTTIExperiments,T.isCdmRoot,T.hasContentManagerAndSuperAdmin,G.getCaptureAccess,((e,t,o,s,i,n)=>{const{expEnableCloudDocsBinderCreate:r,expEnableCloudDocsPaperCreate:l,expEnableCaptureCreate:c,expFlowsAutomatedFolderUI:d}=o,u=!e.isInsideVaultFolder&&!s&&(e.isCurrentlyInRoot||!t.is_team),p=e.isCurrentlyInRoot&&!t.is_cdm_member&&i&&!e.isInsideVaultFolder,g=!!d&&!e.isInsideVaultFolder,m=a.classnames(a.OA_PULSAR_CLASS,a.OAPulsarAction.CREATE),h=!!c&&$.canUseRecorder&&!!n;return{actionType:y.ActionBarActionTypes.CREATE,isEnabled:e.isCurrentPathWriteable(),text:O.CREATE_ACTION_STRING,icon:b.AddLine,menu:D.getCreateMenu({showSharedFolderCreate:u,showTeamFolderCreate:p,showAutomatedFolderCreate:g,showPaperCreate:!!l,showBinderCreate:!!r,showCaptureCreate:h,showOnlyFolderCreation:e.isInsideVaultFolder}),menuMinWidth:236,className:"brws-action-toolbar-CREATE-menu",dropdownButtonClassName:m}})),[y.ActionBarActionTypes.REWIND]:T.createRewindActionSelector(),[y.ActionBarActionTypes.FILE_LOCK]:T.createFileLockActionSelector(),[y.ActionBarActionTypes.FILE_UNLOCK]:T.createFileUnlockActionSelector(),[y.ActionBarActionTypes.FILE_REQUEST_UNLOCK]:T.createFileRequestUnlockActionSelector(),[y.ActionBarActionTypes.CALCULATE_FOLDER_SIZE]:a.createSelector(no,T.selectedFiles,((e,t)=>e?{actionType:y.ActionBarActionTypes.CALCULATE_FOLDER_SIZE,isEnabled:t.some((e=>!a.File.isNoAccessSharedFolder(e))),text:O.CALCULATE_FOLDER_SIZE_ACTION_STRING,icon:A.CalculatorLine}:void 0)),[y.ActionBarActionTypes.UNPIN]:a.createSelector(_o,T.context,T.isNoAccessSharedFolderSelected,((e,t,o)=>e?{actionType:y.ActionBarActionTypes.UNPIN,isEnabled:!o&&t.isCurrentPathWriteable(),text:O.UNPIN_ACTION_STRING,icon:A.PinFill}:void 0)),[y.ActionBarActionTypes.PIN_TO]:a.createSelector(po,T.isNoAccessSharedFolderSelected,((e,t)=>e?{actionType:y.ActionBarActionTypes.PIN_TO,isEnabled:!t,text:O.PIN_TO_ACTION_STRING,icon:A.PinLine}:void 0)),[y.ActionBarActionTypes.PIN_TO_ROOT]:a.createSelector(go,T.context,T.isNoAccessSharedFolderSelected,((e,t,o)=>e?{actionType:y.ActionBarActionTypes.PIN_TO_ROOT,isEnabled:!o&&t.isCurrentPathWriteable(),text:O.PIN_TO_ROOT_ACTION_STRING,icon:A.PinLine,labelOverride:F.intl.formatMessage({id:"Jd2LFg",defaultMessage:"Pin to {folder}"},{folder:a.Emstring.em_snippet(a.filename(t.currentFQPath),8,1)})}:void 0)),[y.ActionBarActionTypes.JOIN_FOLDER_AGAIN]:a.createSelector(T.context,T.selectedFiles,mo,((e,t,o)=>o?{actionType:y.ActionBarActionTypes.JOIN_FOLDER_AGAIN,isEnabled:e.isCurrentPathWriteable()&&!t.some((e=>e.read_only)),text:O.JOIN_FOLDER_AGAIN_ACTION_STRING,icon:Y.RestoreLine}:void 0)),[y.ActionBarActionTypes.SHOW_DELETED_FILES]:a.createSelector(ho,T.context,((e,t)=>e?{actionType:y.ActionBarActionTypes.SHOW_DELETED_FILES,isEnabled:t.canViewContainingNSMembers,text:O.SHOW_DELETED_FILES_ACTION_STRING,icon:q.ShowLine}:void 0)),[y.ActionBarActionTypes.HIDE_DELETED_FILES]:a.createSelector(uo,T.context,((e,t)=>e?{actionType:y.ActionBarActionTypes.HIDE_DELETED_FILES,isEnabled:t.canViewContainingNSMembers,text:O.HIDE_DELETED_FILES_ACTION_STRING,icon:H.HideLine}:void 0)),[y.ActionBarActionTypes.ADD_CONTENT]:a.createSelector(eo,(e=>e?{actionType:y.ActionBarActionTypes.ADD_CONTENT,isEnabled:!0,text:O.ADD_CONTENT_ACTION_STRING,icon:b.AddLine,menu:Zt()}:void 0)),[y.ActionBarActionTypes.FOLLOW]:T.createFollowActionSelector(),[y.ActionBarActionTypes.FOLLOWING]:T.createFollowingActionSelector(),[y.ActionBarActionTypes.SPACES_REDIRECT]:a.createSelector(To,bo,((e,t)=>e?{actionType:y.ActionBarActionTypes.SPACES_REDIRECT,isEnabled:t,text:yo,icon:a.OpenLine,className:"action-bar-direct-to-spaces-button"}:void 0)),[y.ActionBarActionTypes.ADD_TO_COLLECTION]:T.createAddToCollectionActionSelector(),[y.ActionBarActionTypes.ORGANIZE]:a.createSelector(Lo,Fo,Oo,Po,Do,No,((e,t,o,s,a,i)=>e?{actionType:y.ActionBarActionTypes.ORGANIZE,isEnabled:!0,text:O.ORGANIZE_ACTION_STRING,icon:z.MultipleFoldersLine,menu:Io({showNamingConventions:t,showTidyUp:o,showDuplicateFiles:s,showAddAutomations:a,showEditAutomations:i}),menuMinWidth:236,dropdownButtonClassName:"browse-Organize-Home"}:void 0)),[y.ActionBarActionTypes.ADD_FROM_GDRIVE]:T.createAddFromGdriveActionSelector(),[y.ActionBarActionTypes.MANAGE_PERMISSIONS]:T.createManagePermissionsActionSelector()}),Go=Object.assign(Object.assign(Object.assign({},Vo()),T.getInlineFileActionsSelectors()),{[y.ActionBarActionTypes.ADD_TO_TRANSFER]:ao()}),Wo=Object.assign(Object.assign(Object.assign({},Vo()),T.getTabletFileActionsSelectors()),{[y.ActionBarActionTypes.ADD_TO_TRANSFER]:ao()}),Ho=Object.assign(Object.assign(Object.assign({},Vo()),T.getMobileFileActionsSelectors()),{[y.ActionBarActionTypes.ADD_TO_TRANSFER]:ao()}),jo={[T.ActionBarSelectionType.NONE]:{atTopLevelIfSpace:[y.ActionBarActionTypes.SHARE_COPY_LINK,y.ActionBarActionTypes.SHARE,y.ActionBarActionTypes.SHARE_MODAL,y.ActionBarActionTypes.ADD_TO_TRANSFER,y.ActionBarActionTypes.SPACES_DROPDOWN]},[T.ActionBarSelectionType.FILE]:{atTopLevelIfSpace:[y.ActionBarActionTypes.SHARE_COPY_LINK,y.ActionBarActionTypes.SHARE,y.ActionBarActionTypes.SHARE_MODAL,y.ActionBarActionTypes.ADD_TO_TRANSFER]},[T.ActionBarSelectionType.FOLDER]:{atTopLevelIfSpace:[y.ActionBarActionTypes.SHARE_COPY_LINK,y.ActionBarActionTypes.SHARE,y.ActionBarActionTypes.SHARE_MODAL,y.ActionBarActionTypes.ADD_TO_TRANSFER]},[T.ActionBarSelectionType.MULTIPLE]:{atTopLevelIfSpace:[y.ActionBarActionTypes.SHARE,y.ActionBarActionTypes.ADD_TO_TRANSFER]},[T.ActionBarSelectionType.VAULT]:{},[T.ActionBarSelectionType.BACKUP_CONTENT]:{atTopLevelIfSpace:[y.ActionBarActionTypes.ADD_TO_TRANSFER]},[T.ActionBarSelectionType.BACKUP_FOLDER]:{}},Yo=a.createSelector(T.actionBarSelectionType,(e=>jo[e])),qo=Object.assign(Object.assign({},T.getSidebarFileActionSelectors()),{[y.ActionBarActionTypes.ADD_TO_TRANSFER]:io(),[y.ActionBarActionTypes.SPACES_DROPDOWN]:T.createSpacesDropdownActionSelector()}),zo={[y.ActionBarActionTypes.SHARE_COPY_LINK]:T.createShareCopyLinkActionSelector(),[y.ActionBarActionTypes.SHARE_MODAL]:T.createShareModalActionSelector(),[y.ActionBarActionTypes.ADD_TO_TRANSFER]:io()},Ko=Object.assign(Object.assign({},T.FileActionsHandlersMap),{[y.ActionBarActionTypes.UPLOAD]:lo,[y.ActionBarActionTypes.CREATE]:(t,o,s)=>{const i=null==s?void 0:s.menuValue,n=a.user(t),r=o.actionSource===a.ActionSourceValue.OVERFLOW_MENU?a.ActionSourceValue.OVERFLOW_MENU:a.NewFileMenuFromType.BROWSE,l=null==i?void 0:i.menuItem;if(l===y.FolderCreationAction.FOLDER){const e=a.context(t),o=a.selectViewType(t,{instanceId:a.BROWSE_FILES_VIEW_ID}),{goldenGateRaclsEnabled:s}=a.experiments(t),{expFlowsCoreFolderSetupFlow:i}=a.postTTIExperiments(t),l=("ON"===i||"INCLUDE_SHARING"===i)&&!e.isInsideVaultFolder,c=a.autoTeamGroupId(t);i&&V.logExposure({feature:"flows_adoption_core_folder_setup_flow",variant:i}),T.handleCreateNewFolder(n,e,s,c,r,o,l)}else if(l===y.FolderCreationAction.SHARED_FOLDER){const e=a.context(t);n.is_team?T.handleSharedFolderClick(n,e):T.handleCreateSharedFolderClick(n,e)}else if(l===y.FolderCreationAction.TEAM_FOLDER){const e=a.context(t);T.handleRedirectToContentManager(e)}else if(l===y.FolderCreationAction.AUTOMATED_FOLDER){const o=a.context(t).currentFQPath;U.asyncLaunchWorkflowBuilder({operation:"create",parentFqPath:o,surface:"browse"}),a.logCreateAutomatedFolderClick({uid:n.id,source:r}),new Promise((function(t,o){e(["./c_flows_logging_flows_loggers"],t,o)})).then((({PapLogger:e})=>{e.logSelectAutoFolderCreateButton({actionSurface:"browse"})}))}else if(l===D.CaptureTypes.CAPTURE);else if(D.isUploadAction(l))lo(t,o,{menuValue:i});else{const e=l,o=a.path(t),s=a.selectionMode(t),i=0===a.sortedFilesWithFolderSizes(t).count(),{expCreateCloudDocsPaperWithApiV2:c,expCloudDocsGoogleCreate:d}=a.postTTIExperiments(t),{gddMigrationDates:u}=a.experiments(t),p=!!d||W.isGddMigrationDateWithinNumDays(u,30);a.logFileCreateClick({uid:n.id,source:r,action:D.newFileTypeToLogEvent(e),depth_folder_selected:N.getDepthFromPath(o),selection_mode:s,empty_folder:i}),N.createNewFile({user:n,path:o,documentType:e,source:a.NewFileMenuFromType.BROWSE,selection_mode:s,empty_folder:i,useApiV2ForPifsCreation:!!c,createShortcutForGdssFile:p})}},[y.ActionBarActionTypes.REWIND]:T.rewindActionHandler,[y.ActionBarActionTypes.FILE_LOCK]:T.fileLockActionHandler,[y.ActionBarActionTypes.FILE_UNLOCK]:T.fileUnlockActionHandler,[y.ActionBarActionTypes.FILE_REQUEST_UNLOCK]:T.fileRequestUnlockActionHandler,[y.ActionBarActionTypes.CALCULATE_FOLDER_SIZE]:(e,t)=>{u.handleCalculateFolderSize(T.getActionHandlerArgs(e,t))},[y.ActionBarActionTypes.UNPIN]:(e,t)=>{u.handleUnpin(T.getActionHandlerArgs(e,t),!0)},[y.ActionBarActionTypes.PIN_TO]:(e,t)=>{u.handleBrowsePinTo(T.getActionHandlerArgs(e,t),T.context(e,t),{snackbarWithShowButton:!0})},[y.ActionBarActionTypes.PIN_TO_ROOT]:(e,t)=>{u.handleBrowsePin(T.getActionHandlerArgs(e,t),{snackbarWithShowButton:!0})},[y.ActionBarActionTypes.JOIN_FOLDER_AGAIN]:(e,t)=>{T.context(e,t),u.handleReAdd(T.getActionHandlerArgs(e,t))},[y.ActionBarActionTypes.ADD_TO_TRANSFER]:(e,t)=>{u.handleAddToTransfer(T.getActionHandlerArgs(e,t))},[y.ActionBarActionTypes.SHOW_DELETED_FILES]:(e,t)=>{T.handleTrashCanClick(T.user(e,t),T.viewType(e,t),!1,T.context(e,t).currentFQPath,T.getActionHandlerArgs(e,t))},[y.ActionBarActionTypes.HIDE_DELETED_FILES]:(e,t)=>{const o=T.user(e,t),s=T.viewType(e,t),a=T.context(e,t),i=T.getActionHandlerArgs(e,t);T.handleTrashCanClick(o,s,!0,a.currentFQPath,i)},[y.ActionBarActionTypes.ADD_CONTENT]:(e,t,o)=>{const s=null==o?void 0:o.menuValue;T.handleAddContent(a.user(e),a.path(e),s.menuItem)},[y.ActionBarActionTypes.SPACES_DROPDOWN]:T.spacesDropdownActionHandler,[y.ActionBarActionTypes.FOLLOW]:T.followActionHandler,[y.ActionBarActionTypes.FOLLOWING]:T.followingActionHandler,[y.ActionBarActionTypes.SPACES_REDIRECT]:(e,t)=>{a.getStoreForBrowse().dispatch(j.toggleSpacesEntryPoint({value:!1})),a.Snackbar.sync(Ao,!0,"create-or-get-space-notification"),function(e,t){var s,i;o.__awaiter(this,void 0,void 0,(function*(){if(!T.isNothingSelected(e,t))return;let n;const r=a.getBrowseState(e),l=r.currentFolderInfo,c=null==l?void 0:l.file_id,d=(null==l?void 0:l.target_ns)?String(null==l?void 0:l.target_ns):void 0,u=null===(s=null==l?void 0:l.fq_path)||void 0===s?void 0:s.split("/").pop(),g=null===(i=r.user)||void 0===i?void 0:i.id;if(g&&d&&(n=yield function(e,t,s){return o.__awaiter(this,void 0,void 0,(function*(){const o=new a.FolderShareApiClient({userId:t,client:new a.UserApiV2Client});let i;const n=[];try{i=yield o.listMembers({contentId:e,limit:s})}catch(e){return void a.Snackbar.fail(Eo,"preview_members_failure")}if(i)return i.users.forEach((function(e){var t;const o=null===(t=e.account)||void 0===t?void 0:t.email;o&&n.push(o)})),n}))}(d,g,20)),c&&u&&g&&n){const t=yield function(e,t,s,i,n,r){return o.__awaiter(this,void 0,void 0,(function*(){const o={".tag":"regular_space"};try{const l=new a.UserApiV2Client;return(yield l.ns("spaces").rpc("create_or_get_spaces_for_folder",{name:e,file_id:s,members:i,space_type:o},{subjectUserId:t}))||(a.Snackbar.close(),a.Snackbar.fail(vo,"create_or_get_spaces_for_folder_failure"),void a.WebUserActionLog.log(t,a.WebUserActionLogEvent.OPEN_PROJECT_VIEW_FAILED,{folder_file_id:s,ns_id:n,resource_namespace_path:So(r),reason:"Spaces createOrGetSpacesForFolder API returned undefined"}))}catch(e){return a.Snackbar.close(),a.Snackbar.fail(fo,"create_or_get_spaces_for_folder_failure"),void a.WebUserActionLog.log(t,a.WebUserActionLogEvent.OPEN_PROJECT_VIEW_FAILED,{folder_file_id:s,ns_id:n,resource_namespace_path:So(r),reason:e})}}))}(u,g,c,n,null==l?void 0:l.ns_id,null==l?void 0:l.ns_path);if((null==t?void 0:t.result)&&(null==t?void 0:t.result[0])){const e=`/spaces/space/${t.result[0].space_pid}`;a.Snackbar.close(),a.redirect(new p.URI({path:e}))}wo(e,a.WebUserActionLogEvent.SELECT_SPACES_PROJECT_VIEW_BUTTON,null==t?void 0:t.new_space_created)}a.getStoreForBrowse().dispatch(j.toggleSpacesEntryPoint({value:!0}))}))}(e,t)},[y.ActionBarActionTypes.ORGANIZE]:(t,o,s)=>{const i=null==s?void 0:s.menuValue,n=null==i?void 0:i.menuItem,r=T.context(t,o),l=T.user(t,o),c=T.getActionHandlerArgs(t,o),{files:d}=c,g=d.first(),m=T.isSingleSelectionFolder(t,o)?null==g?void 0:g.fq_path:r.currentFQPath,h="/"===r.currentFQPath?"":r.currentFQPath;switch(n){case Mo.NAMING_CONVENTIONS:{const e={currentUserId:l.id,targetPath:h,namespaceId:r.currentNSID,origin:Z.NamingConventionOrigin.from_web_organized_menu};J.showNamingConventionsModal(e);break}case Mo.TIDY_UP:J.showTidyUpDialog({currentUserId:l.id,targetPath:h,namespaceId:r.currentNSID,actionSurface:te.TidySpecificActionSurfaceLogValue.ORGANIZE_WEB_ENTRYPOINT,isInsideFlowsEligibleFolder:a.isInsideFlowsEligibleFolder(t),isPaidUser:!!l.is_team||!!l.paid,rootFolderDisplayName:a.Viewer.get_root_name(l),numberOfFiles:a.unsortedFiles(t).filter((e=>!e.is_dir)).count()});break;case Mo.ADD_AUTOMATIONS:r&&m&&(U.asyncLaunchWorkflowBuilder({operation:"add",folderFqPath:m,surface:"browse",entryPoint:"from_web_organized_menu"}),u.logUserEventOnFile({args:c,action_type:a.WebUserActionLogEvent.ADD_FOLDER_RULES_MODAL_CLICK}),new Promise((function(t,o){e(["./c_flows_logging_flows_loggers"],t,o)})).then((({PapLogger:e})=>{e.logSelectAutoFolderAddButton({actionSurface:"browse"})})));break;case Mo.EDIT_AUTOMATIONS:r&&m&&(U.asyncLaunchWorkflowBuilder({operation:"edit",folderFqPath:m,surface:"browse",entryPoint:"from_web_organized_menu"}),u.logUserEventOnFile({args:c,action_type:a.WebUserActionLogEvent.MANAGE_FOLDER_RULES_CLICK}),new Promise((function(t,o){e(["./c_flows_logging_flows_loggers"],t,o)})).then((({PapLogger:e})=>{e.logSelectAutoFolderEditAutomationButton({actionSurface:"browse"})})));break;case Mo.DUPLICATE_FILES:{const e=r.currentFQPath,t=new p.URI({path:"/duplicate"});t.setQuery({path:e}),a.redirect(t.toString()),k.logBrowseTTS("find_duplicates"),a.logEvent({class:"duplicate_files",action:"open",object:"duplicate_files_page",properties:{userId:l.id.toString()}});break}default:n&&x.reportStack(`Bad organizeAction=[${n}]`,{severity:B.SEVERITY.CRITICAL})}},[y.ActionBarActionTypes.ADD_FROM_GDRIVE]:T.addFromGdriveActionHandler,[y.ActionBarActionTypes.MANAGE_PERMISSIONS]:T.managePermissionsActionHandler}),Qo=Object.assign(Object.assign({},T.ActionMenuToggleHandlersMap),{[y.ActionBarActionTypes.CREATE]:(e,t,o)=>{if(o){const t=a.user(e),o=a.path(e),s=a.selectionMode(e),i=0===a.sortedFilesWithFolderSizes(e).count();a.logFileCreateClick({uid:t.id,source:a.NewFileMenuFromType.BROWSE,action:a.WebUserActionLogEvent.FILE_CREATE_OPEN_MENU,depth_folder_selected:o?N.getDepthFromPath(o):void 0,selection_mode:s,empty_folder:i})}},[y.ActionBarActionTypes.UPLOAD]:(e,t,o)=>{if(o){const t=a.user(e),o=a.path(e),s=a.selectionMode(e),i=0===a.sortedFilesWithFolderSizes(e).count();a.logFileCreateClick({uid:t.id,source:a.NewFileMenuFromType.BROWSE,action:a.WebUserActionLogEvent.UPLOAD_MENU_CLICK,depth_folder_selected:o?N.getDepthFromPath(o):void 0,selection_mode:s,empty_folder:i}),a.logEvent(D.PAP_Select_Upload({actionScreen:"browse_screen",actionElement:"action_bar"}))}},[y.ActionBarActionTypes.ORGANIZE]:(e,t,o)=>{if(o){const o=a.user(e),s=T.context(e,t);a.WebUserActionLog.log(o.id,a.WebUserActionLogEvent.BROWSE_ORGANIZE_WEB_ENTRYPOINT_OPEN,{ns_id:s.currentNSID})}}}),Xo=a.createSelector(a.browsePostTTIData,(e=>{const{isOverFreeQuota:t,hasExcludedNsIds:o}=e;return{isOverFreeQuota:t,hasExcludedNsIds:o}})),Jo=a.createSelector(a.browsePostTTIExperiments,a.experiments,((e,t)=>{const{expVaultEnableViewOnlySharing:o,expSpacesFssDropdown:s,expFlowsAutomatedFolderUI:a,expFlowsManualArchive:i,expFlowsManualVideoGifUi:n,expFssEntryPointForSpaces:r,expFlowsApprovalFlowVariant:l,expFlowsApprovalAndVersioningNewBadgeVariant:c,expFlowsApprovalCopyVariant:d,expCollectionsInBrowse:u,expFlowsBrowseBarSaveAsUi:p,expBackupImprovedRestorations:g,expUserLevelSharingSettings:m,expCopyLinkInRightRail:h,expReplayBrowseAction:_,expImageEditEntryPoint:f}=e;return{expVaultEnableViewOnlySharing:Boolean(o),expSpacesFssDropdown:void 0!==s&&"OFF"!==s&&"CONTROL"!==s,expFlowsAutomatedFolderUI:Boolean(a),expFlowsManualArchive:Boolean(i),expFlowsManualVideoGifUi:Boolean(n),expFssEntryPointForSpaces:Boolean(r),expFlowsApprovalFlowVariant:l||"OFF",expFlowsApprovalAndVersioningNewBadgeVariant:c||"OFF",expFlowsApprovalCopyVariant:d||"OFF",expIsTransferEnabled:Boolean(t.isTransferEnabled),expCollectionsInBrowse:Boolean(u),expFlowsBrowseBarSaveAsUi:p||"OFF",expBackupImprovedRestorations:Boolean(g),expUserLevelSharingSettings:m||"OFF",expCopyLinkInRightRail:h||"OFF",expReplayBrowseAction:_||"OFF",expImageEditEntryPoint:f||"OFF"}}));T.getStoreForFolderSubscriptions();const Zo=({path:e,selectedFiles:t})=>(s.React$1.useEffect((()=>{T.getStoreForFolderSubscriptions().dispatch(T.fetchFolderSubscription(e))}),[e,T.fetchFolderSubscription]),s.React$1.useEffect((()=>{1===t.count()&&t.first().is_dir&&T.getStoreForFolderSubscriptions().dispatch(T.fetchFolderSubscription(t.first().fq_path))}),[t,T.fetchFolderSubscription]),null);Zo.displayName="FolderSubscriptionController";const es=s.React$1.memo((({user:e,className:t})=>{const o=a.useDispatch(),i=a.useSelector((e=>a.selectViewType(e,{instanceId:a.BROWSE_FILES_VIEW_ID}))),n=s.React$1.useCallback(((t,s)=>{const i=a.viewTypeFromViewMode(t);s.stopPropagation(),a.logSwitchViewType({uid:e.id,isSearchMode:!1,viewType:i}),o(j.setViewType(i))}),[o,e]);return s.React$1.createElement(a.ViewModeToggle,{className:t,currentMode:a.viewModeFromViewType(i),onSelection:n})}));es.displayName="BrowseViewModeToggle";const ts=({browsePostTTIExperiments:e,context:t})=>!!e.expLetMembersInviteData&&(e.expLetMembersInviteData.shouldShowLetMembersInviteCta&&t.isInsideTeamFolderTree&&t.isCurrentlyInRoot),os=({browsePostTTIExperiments:e,browsePostTTIData:t,context:o})=>t.firstTaskProps.is_eligible_team&&o.isInsideTeamFolderTree&&o.isCurrentlyInRoot,ss={loader:()=>new Promise((function(t,o){e(["./c_growth_ui_invite_facepile"],t,o)})).then((({InviteFacepile:e})=>e))},as=a.Loadable(ss);var is,ns,rs,ls;function cs(e){return(null==e?void 0:e.role)||""}t.FirstPathId=void 0,(is=t.FirstPathId||(t.FirstPathId={})).SUGGESTED_FOLDERS_ITERATION="suggested_folders_iteration",is.NONE="",function(e){e[e.ShowWithoutText=1]="ShowWithoutText",e[e.ShowWithText=2]="ShowWithText",e[e.ShowWithTextAsPrimary=3]="ShowWithTextAsPrimary"}(ns||(ns={})),function(e){e[e.None=0]="None",e[e.SuggestedFolders=1]="SuggestedFolders"}(rs||(rs={})),t.emptyStateType=void 0,(ls=t.emptyStateType||(t.emptyStateType={})).DROP_TARGET_VIEW="drop_target_view",ls.SUGGESTED_FOLDERS_VIEW="suggested_folders_view";const ds=s.React$1.forwardRef((({group:e,integrationPopoverInfo:t,onClick:o},i)=>{let n,r;const l=Es(o,"group",e),c=a.classnames("facepile-item","group-facepile-item"),d=a.avatarColorForUserIdentifier(e.name);return e.is_automatic?(r=ce.teamAccessTypeString(e.name,e.access_type),n=s.React$1.createElement(a.Facepile.Item,{className:a.classnames(c,"auto-group-facepile-item"),alt:r,onClick:t?void 0:l,backgroundColor:"#F7F5F2"},s.React$1.createElement(a.UIIcon,{src:re.TeamLine,role:"presentation",color:"black"}))):(r=ce.groupAccessTypeString(e.name,e.access_type,e.num_users),n=s.React$1.createElement(a.Facepile.Item,{ref:i,className:c,alt:r,onClick:t?void 0:l,backgroundColor:d},vs(e.name))),s.React$1.createElement(_s,{avatar:n,itemKey:`group:${e.gid}:${e.name}`,accessTypeString:r,popoverColor:d,integrationPopoverInfo:t,avatarInfo:{avatarType:"group",targetGroup:{gid:e.gid,groupName:e.name,message:r}}})}));ds.displayName="GroupFacepileItem";const us=s.React$1.forwardRef((({invitee:e,integrationPopoverInfo:t,onClick:o},i)=>{const n=ce.individualAccessTypeString(e.email_or_fbname,"pending",!1),r=Es(o,"invited",e),l=s.React$1.createElement(a.Facepile.Item,{ref:i,className:a.classnames("facepile-item","invitee-facepile-item"),alt:n,isInactive:!0,onClick:t?void 0:r},vs(e.email_or_fbname));return s.React$1.createElement(_s,{avatar:l,itemKey:`invitation:${e.invitation_id}`,accessTypeString:n,popoverColor:a.avatarColorForUserIdentifier(e.email_or_fbname),integrationPopoverInfo:t,avatarInfo:{avatarType:"invited_person",targetUser:{accountId:e.invitation_id,displayName:e.email_or_fbname,familiarName:void 0,accessType:n}}})}));us.displayName="InviteeFacepileItem";const ps=s.React$1.forwardRef((({member:e,arePairedUsersInSharedFolder:t,integrationPopoverInfo:o,onClick:i},n)=>{let r=e.display_name;const l=a.Viewer.get_viewer(),c=l.get_user_ids(!0).includes(e.user_id);if(c&&t){const t=e.user_id,o=l.get_user_by_role("personal",!0),s=l.get_user_by_role("work",!0);o&&t===o.id?r="Personal":s&&t===s.id&&null!=l.team_name&&(r=l.team_name)}r=a.Emstring.em_snippet(r,a.SNIPPET_SIZES.DISPLAY_NAME);const d=a.classnames("facepile-item","member-facepile-item",{"viewing-user-facepile-item":c,"family-member-facepile-item":!!e.same_family}),u=ce.individualAccessTypeString(r,e.access_type,c,t),p=a.avatarColorForUserIdentifier(e.display_name),g=Es(i,"member",e),m=s.React$1.createElement(a.Facepile.Item,{ref:n,className:d,alt:u,onClick:o?void 0:g,src:e.photo_url,backgroundColor:p},e.initials.toUpperCase());return s.React$1.createElement(_s,{avatar:m,itemKey:`user:${e.user_id}:${e.photo_url}`,accessTypeString:u,popoverColor:p,integrationPopoverInfo:o,canShowInitially:!0,avatarInfo:{avatarType:"joined_member",targetUser:{accountId:e.account_id,displayName:r,familiarName:e.familiar_name,accessType:u,isViewer:c,email:e.email,photoUrl:e.photo_url}}})}));ps.displayName="MemberFacepileItem";const gs=s.React$1.forwardRef((({overflowCount:e,integrationPopoverInfo:t,onClick:o},i)=>{const n="#a792723d",r=F.intl.formatMessage({id:"NwLz1M",defaultMessage:"{count, plural, one{{count} more member} other{{count} more members}}"},{count:e}),l=fs(o),c=e>=99?"99+":`${e}`,d=s.React$1.createElement(a.Facepile.Item,{ref:i,className:a.classnames("facepile-item","overflow-facepile-item"),alt:r,onClick:t?void 0:l,backgroundColor:n},c);return s.React$1.createElement(_s,{avatar:d,itemKey:"overflow_count",accessTypeString:r,popoverColor:n,integrationPopoverInfo:t,avatarInfo:{avatarType:"overflow",overflowInfo:{message:r}},onClick:l})}));gs.displayName="OverflowFacepileItem";const ms=s.React$1.forwardRef((({index:e,onClick:t},o)=>{const i=F.intl.formatMessage({id:"EIw3b/",defaultMessage:"Invite"}),n=`placeholder:${e}`,r=a.classnames("facepile-item","placeholder-facepile-item"),l=fs(t),c=s.React$1.createElement(a.Facepile.Item,{ref:o,className:r,alt:i,onClick:l,src:s.static_url("/static/metaserver/static/images/icons/no_member-vflE0FYQV.svg")});return s.React$1.createElement(a.Tooltip,{key:n,id:n,title:i,placement:"bottom"},c)}));ms.displayName="PlaceholderFacepileItem";const hs=s.React$1.forwardRef((({integrationPopoverInfo:e,onClick:t},o)=>{const i=ce.getDescriptionForSharedLink(),n="#F7F5F2",r=fs(t),l=s.React$1.createElement(a.Facepile.Item,{ref:o,className:a.classnames("facepile-item","shared-link-facepile-item"),alt:i,onClick:e?void 0:r,backgroundColor:n},s.React$1.createElement(a.UIIcon,{src:ne.LinkLine,role:"presentation",color:"black"}));return s.React$1.createElement(_s,{avatar:l,itemKey:"shared_link",accessTypeString:i,popoverColor:n,integrationPopoverInfo:e,avatarInfo:{avatarType:"shared_link",targetLink:{message:i}},onClick:r})}));hs.displayName="SharedLinkFacepileItem";const _s=({avatar:e,itemKey:t,accessTypeString:o,popoverColor:i,integrationPopoverInfo:n,canShowInitially:r,avatarInfo:l,onClick:c})=>{if(n){const o=ce.getViewerId();if(o)return s.React$1.createElement(a.Provider,{store:n.integrationStore,key:t},s.React$1.createElement(le.ProfileCardPopover,{popoverGroup:n.integrationPopoverGroup,integrationStore:n.integrationStore,entryPoint:n.entryPoint,viewerId:o,avatarInfo:l,file:n.fileInfo,onAvatarClick:c||void 0,isShowInitially:r&&n.autoDisplayTooltip,portalParentElement:document.body,avatarColor:i},e))}return s.React$1.createElement(a.Tooltip,{key:t,id:t,title:o,placement:"bottom"},e)};function fs(e){return function(t){null==e||e(),t.stopPropagation()}}function Es(e,t,o){return function(s){null==e||e(t,o),s.stopPropagation()}}function vs(e){return ce.getInitials(e).toUpperCase()}_s.displayName="FacepileItemWithPopover";const As=({user:e,maxFacepileItems:t,avatarSize:o,showCopyLinkInRightRail:i,isInsideFamilySharedFolder:n,numUndisplayableUsersAndInvites:r,arePairedUsersInSf:l,isCdmRoot:c,groups:d,invitations:u,members:p,sharedLinkExists:g,onAvatarClick:m,onOverflowCountClick:h,onSharedLinkClick:_,integrationPopoverInfo:f,integrationPopoverInfoNoAutoDisplay:E})=>{const[v,A]=s.React$1.useState(t),[R,S]=s.React$1.useState(null),y=s.React$1.useMemo((()=>Array(t).fill(0).map((e=>s.React$1.createRef()))),[t]),[w,T]=ae.useResizeObserver();s.React$1.useEffect((()=>{R&&(A(t),S(null))}),[null==T?void 0:T.contentRect.width]),s.React$1.useLayoutEffect((()=>{if(!y||!y[0]||!R)return void(v!==t&&A(t));const e=R.getBoundingClientRect().top,o=y.filter((t=>t.current&&t.current.getBoundingClientRect().top===e)).length;A(Math.max(2,o))}),[t,R]);const b=s.React$1.useCallback((()=>{let o=[];const a=null!=p?p:[],A=d?d.slice():[],R=u?u.slice():[],S=function(e,t){if(e)for(const o of e)if(o.user_id===t.id)return o;return}(a,e);let w=0;!i&&g&&o.push(s.React$1.createElement(hs,{key:"shared-link",ref:y[Math.min(w++,t-1)],onClick:_,integrationPopoverInfo:f})),S&&o.push(s.React$1.createElement(ps,{ref:y[Math.min(w++,t-1)],member:S,key:S.user_id,arePairedUsersInSharedFolder:l,integrationPopoverInfo:E,onClick:m})),null==A||A.forEach((e=>o.push(s.React$1.createElement(ds,{ref:y[Math.min(w++,t-1)],group:e,key:e.gid,integrationPopoverInfo:f,onClick:m})))),n?(null==a||a.forEach((e=>{e.user_id!==(null==S?void 0:S.user_id)&&e.same_family&&o.push(s.React$1.createElement(ps,{ref:y[Math.min(w++,t-1)],member:e,key:e.user_id,arePairedUsersInSharedFolder:l,integrationPopoverInfo:f,onClick:m}))})),null==a||a.forEach((e=>{e.user_id===(null==S?void 0:S.user_id)||e.same_family||o.push(s.React$1.createElement(ps,{ref:y[Math.min(w++,t-1)],member:e,key:e.user_id,arePairedUsersInSharedFolder:l,integrationPopoverInfo:f,onClick:m}))}))):null==a||a.forEach((e=>{e.user_id!==(null==S?void 0:S.user_id)&&o.push(s.React$1.createElement(ps,{ref:y[Math.min(w++,t-1)],member:e,key:e.user_id,arePairedUsersInSharedFolder:l,integrationPopoverInfo:f,onClick:m}))})),null==R||R.forEach((e=>o.push(s.React$1.createElement(us,{ref:y[Math.min(w++,t-1)],invitee:e,key:e.invitation_id,integrationPopoverInfo:f,onClick:m}))));let T=null!=r?r:0;if(r||o.length>v){T+=o.length-v+1,o=o.slice(0,v-1);for(let e=v-1;e<y.length;e++)y[e]=s.React$1.createRef()}if(T>0&&o.push(s.React$1.createElement(gs,{ref:y[Math.min(w++,t-1)],overflowCount:T,key:T,integrationPopoverInfo:f,onClick:h})),1===o.length&&S){if(!e.is_team_admin||!c)return;for(let e=1;e<=v-1;e++)o.push(s.React$1.createElement(ms,{ref:y[Math.min(w++,t-1)],index:e,key:`placeholder_${e}`,onClick:m}))}return o}),[l,y,d,f,E,u,c,n,t,p,r,v,m,h,_,g,i,e]),[M,I]=s.React$1.useState("top-start"),O={auto:!0,placement:M,onChangePlacement:e=>I(e)},C=b();if(void 0===C){let e;return e=g?ce.getDescriptionForSharedLink():F.intl.formatMessage({id:"KwZ+hv",defaultMessage:"Only you have access"}),s.React$1.createElement("div",{className:"browse-facepile--text-only"},s.React$1.createElement(ie.Truncate,{lines:2,tooltipControlProps:O},e))}return s.React$1.createElement("div",{ref:w},s.React$1.createElement(a.Facepile,{size:o},s.React$1.createElement("div",{key:"browse-facepile",ref:e=>S(e),className:a.classnames("browse-facepile",{"family-room-facepile":n})},C)))};As.displayName="BrowseFacepile";const Rs=({file:e})=>(t,s)=>o.__awaiter(void 0,void 0,void 0,(function*(){const o=s(),i=a.context(o),n=a.user(o);if(!e||!a.File.isTeamMemberFolder(e)&&a.File.canViewFileMembers(e,i)){if(e||!i.isCurrentlyInRoot)return a.ShareTibEventLogger.log(n.id,E.TiburonEventName.ClickManagePermissionsAction,a.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW,e?{file_id:e.file_id,fq_path:e.fq_path,ns_id:e.target_ns?e.target_ns:void 0}:{fq_path:i.currentFQPath,ns_id:i.currentNSID}),de.showShareModal(n,e||i,{browseContext:i,origin:a.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW,initialScreen:a.MANAGE_SCREEN},(({path:e,qargs:o})=>t(j.setUrl({path:e,qargs:o}))));{const e=a.Viewer.get_viewer(),t=n.is_team&&!e.team_is_limited,o=n.is_team_admin&&t?"/team/admin/members":"/team#members";a.open_tab(o)}}})),Ss=()=>{a.getStoreForSharedWith();const e=a.useDispatch(),t=a.useSelector(a.user),o=a.useSelector(a.context),i=a.useSelector(a.isRightRailCollapsed),n="ON"===a.useSelector(a.postTTIExperiments).expCopyLinkInRightRail,r=a.useSelector(a.isInSelectMode),l=a.useSelector(a.getFileFromSelectedFilesForSidebar),c=t.is_cdm_member&&"/"===o.currentFQPath&&o.currentNSID===o.rootNSID,d=a.useSelector((e=>a.getDataForFile(e,l))),{numUndisplayableUsersAndInvites:u=0,groups:p=[],invitations:g=[],joinedMembers:m=[]}=d||{},h=a.useSelector((e=>a.doesSharedLinkExistForPath(e,o.currentFQPath))),_=a.useSelector(a.getIntegrationData),f=l?d.sharedLinkExists:h,E=o.isInsideFamilySharedFolder&&i?"large":"standard",v=ce.arePairedUsersInSf(m),A=new se.IntegrationPopoverGroup;s.react.exports.useEffect((()=>{e(a.fetchIntegrationData())}),[e]);const R=()=>{e(Rs({file:l}))},S=e=>({integrationPopoverGroup:A,integrationStore:a.initStoreForIntegration(t.id),autoDisplayTooltip:!(!e||!(null==_?void 0:_.autoDisplayTooltip)),entryPoint:"browse_page_side_bar",fileInfo:l?{".tag":l.type===a.FileTypes.FILE?"file":"folder",id:a.fulfilled(l.file_id),name:ue.getFileName(l)}:void 0});return s.React$1.createElement("div",{className:"audience-box-facepile"},s.React$1.createElement(As,{user:t,maxFacepileItems:5,avatarSize:E,showCopyLinkInRightRail:n,isInsideFamilySharedFolder:o.isInsideFamilySharedFolder,numUndisplayableUsersAndInvites:u,arePairedUsersInSf:v,isCdmRoot:c&&!r,groups:p,invitations:g,members:m,sharedLinkExists:f,onAvatarClick:R,onOverflowCountClick:R,onSharedLinkClick:()=>de.showShareModal(t,l||o,{browseContext:o,origin:a.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW},(({path:t,qargs:o})=>e(j.setUrl({path:t,qargs:o})))),integrationPopoverInfo:S(),integrationPopoverInfoNoAutoDisplay:S(!1)}))},ys=()=>{a.getStoreForSharedWith();const e=a.useSelector(a.isBrowseLoadingFirstPage),t=a.useSelector(a.isSharedDataLoadedForBrowsePath),o=a.useSelector(a.getFileFromSelectedFilesForSidebar),i=!e&&t;return!a.useSelector(a.canViewMembers)||(null==o?void 0:o.isDeleted)?null:s.React$1.createElement("div",{className:a.classnames("shared-with-members","audience-box u-pad-top-xs u-pad-bottom-s u-mar-bottom-xs")},i?s.React$1.createElement(a.UserEducationEffect,{containerName:"SharedWithView",name:"AudienceBoxAvatars"},s.React$1.createElement(Ss,null)):s.React$1.createElement(oe.LoadingIndicator,{style:oe.LoadingIndicator.LoadingIndicatorStyle.DOTS}))},ws={selectedFilesSelector:a.selectedFiles,userSelector:a.user,contextSelector:a.context,overQuotaDataSelector:Xo,experimentSelector:Jo,isSearchMode:!1,actionSurface:a.ActionSurfaceLogValue.RIGHT_SIDEBAR,currentFolderInfo:a.getCurrentFolderInfo,flowsUserAutomation:ee.getUserAutomation,rightRailCollapsedState:a.isRightRailCollapsed,isInsideBackupFolder:a.isInsideBackupFolder,isSelectedBackupFolder:a.isSelectedBackupFolder,backupInfoByFile:a.folderBackupInfoByFile,backupInfoByPath:a.folderBackupInfoByPath},Ts=$o(),bs=T.createActionBarActionSelector(),Ms={handleAction:T.actionHandler,handleActionMenuToggle:T.actionMenuToggleHandler};class Is extends s.React$1.PureComponent{constructor(){super(...arguments),this.actionHandler={handleAction:e=>{this.props.handleAction(e,ws,Ko)},handleMenuToggle:({type:e,isOpen:t})=>{this.props.handleActionMenuToggle({type:e,isOpen:t},ws,T.ActionMenuToggleHandlersMap)}},this.onboardingChecklistShareButtonTooltipTriggerRef=s.React$1.createRef()}getTopLevelActions(e,t){const o=null==e?void 0:e[0],s=null==e?void 0:e[1],a=[];let i,n;return(null==o?void 0:o.actionType)===y.ActionBarActionTypes.SHARE_COPY_LINK?(t&&(i=o),n=s):n=o,i&&a.push(i),n&&a.push(n),a}render(){var e,t;const{browseActionBarActions:o,selectedFiles:a,accessibilityConfig:i,useCompactMode:n,showCopyLinkInRightRail:r}=this.props;return o.atTopLevelIfSpace=this.getTopLevelActions(o.atTopLevelIfSpace,r),s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement("div",{className:"brws-sharing-buttons",ref:this.onboardingChecklistShareButtonTooltipTriggerRef},(!!(null===(e=o.alwaysAtTopLevel)||void 0===e?void 0:e.length)||!!(null===(t=o.atTopLevelIfSpace)||void 0===t?void 0:t.length))&&s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(S.ActionBar,{actionHandler:this.actionHandler,actions:o,intl:F.intl,hideOverflowMenu:!0,accessibilityConfig:i,hideIcons:n,className:"brws-sharing-action-bar-container"}),n&&s.React$1.createElement(pe.AsyncOnboardingChecklistShareButtonTooltip,{triggerRef:this.onboardingChecklistShareButtonTooltipTriggerRef}))),(0===a.count()||1===a.count())&&!n&&s.React$1.createElement("div",{className:"brws-inline-audience-box"},s.React$1.createElement(ys,null)))}}Is.displayName="SidebarViewSharingSectionComponent";const Fs=a.connect(((e,t)=>{const o=t.useCompactMode?zo:qo;return{browseActionBarActions:bs(e,ws,o,Yo),context:a.context(e),selectedFiles:a.selectedFilesForSidebar(e),user:a.user(e),accessibilityConfig:Ts(e,ws),postTTIExperiments:a.postTTIExperiments(e),rightRailCollapsed:a.isRightRailCollapsed(e)}}),Ms)(Is);var Os=Object.freeze({__proto__:null,SidebarViewSharingSection:Fs});const Cs=({useCompactMode:e})=>{const t=a.useSelector(a.postTTIExperiments),o=a.useSelector(a.context),i=a.useSelector(a.selectedFilesForSidebar),n=a.useSelector(a.user),r=a.useSelector(a.browsePostTTIData),l=a.useSelector(j.paginatedTotalNumFiles),{firstTaskProps:c}=r,d="ON"===t.expCopyLinkInRightRail,u={browsePostTTIExperiments:t,selectedFiles:i,browsePostTTIData:r,context:o,showInviteSidePanel:!1},p=s.react.exports.useMemo((()=>((e,t)=>({role:cs(t.expPersonalizedFirstPaths),totalNumItems:e}))(l,t)),[l,t]),g=(e=>{const{selectedFiles:t,showInviteSidePanel:o}=e,s=t&&0!==t.size;return(o||os(e)||ts(e))&&!s})(u);return s.react.exports.createElement(s.react.exports.Fragment,null,g&&s.react.exports.createElement("div",{className:"brws-sharing-view--invite-ui"},s.react.exports.createElement(as,{isTeamAdmin:n.is_team_admin,isFirstTask:c.is_eligible_team,memberInfo:c.member_info,enableInviteSidePanel:!1,personalizationLogCtx:p,isLetMembersInviteEligible:ts(u),expLetMembersInviteData:ts(u)?t.expLetMembersInviteData:void 0,expBrowseRightRailEnabledEnabled:!0})),!g&&s.react.exports.createElement("div",{className:"brws-sharing-view--share-ui"},s.react.exports.createElement(Fs,{useCompactMode:e,showCopyLinkInRightRail:d})))};Cs.displayName="BrowseSharingView";var Ns=Object.freeze({__proto__:null,BrowseSharingView:Cs});const Ds={module_name:"clink_first_task",framework:"team_setup_essential"};var Ps,Ls={exports:{}};window,Ps=function(e){return function(e){var t={};function o(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=e,o.c=t,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}({"./jquery.qrcode.js":function(e,t,o){var s,a=o("jquery");(s=a).fn.qrcode=function(e){function t(e){this.mode=a.MODE_8BIT_BYTE,this.data=e}function o(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=new Array}t.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},o.prototype={addData:function(e){var o=new t(e);this.dataList.push(o),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=R.getRSBlocks(e,this.errorCorrectLevel),o=new S,s=0,a=0;a<t.length;a++)s+=t[a].dataCount;for(a=0;a<this.dataList.length;a++){var i=this.dataList[a];o.put(i.mode,4),o.put(i.getLength(),f.getLengthInBits(i.mode,e)),i.write(o)}if(o.getLengthInBits()<=8*s)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++){this.modules[s]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[s][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=o.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var o=-1;o<=7;o++)if(!(e+o<=-1||this.moduleCount<=e+o))for(var s=-1;s<=7;s++)t+s<=-1||this.moduleCount<=t+s||(this.modules[e+o][t+s]=0<=o&&o<=6&&(0==s||6==s)||0<=s&&s<=6&&(0==o||6==o)||2<=o&&o<=4&&2<=s&&s<=4)},getBestMaskPattern:function(){for(var e=0,t=0,o=0;o<8;o++){this.makeImpl(!0,o);var s=f.getLostPoint(this);(0==o||e>s)&&(e=s,t=o)}return t},createMovieClip:function(e,t,o){var s=e.createEmptyMovieClip(t,o);this.make();for(var a=0;a<this.modules.length;a++)for(var i=1*a,n=0;n<this.modules[a].length;n++){var r=1*n;this.modules[a][n]&&(s.beginFill(0,100),s.moveTo(r,i),s.lineTo(r+1,i),s.lineTo(r+1,i+1),s.lineTo(r,i+1),s.endFill())}return s},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=f.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var o=0;o<e.length;o++){var s=e[t],a=e[o];if(null==this.modules[s][a])for(var i=-2;i<=2;i++)for(var n=-2;n<=2;n++)this.modules[s+i][a+n]=-2==i||2==i||-2==n||2==n||0==i&&0==n}},setupTypeNumber:function(e){for(var t=f.getBCHTypeNumber(this.typeNumber),o=0;o<18;o++){var s=!e&&1==(t>>o&1);this.modules[Math.floor(o/3)][o%3+this.moduleCount-8-3]=s}for(o=0;o<18;o++)s=!e&&1==(t>>o&1),this.modules[o%3+this.moduleCount-8-3][Math.floor(o/3)]=s},setupTypeInfo:function(e,t){for(var o=this.errorCorrectLevel<<3|t,s=f.getBCHTypeInfo(o),a=0;a<15;a++){var i=!e&&1==(s>>a&1);a<6?this.modules[a][8]=i:a<8?this.modules[a+1][8]=i:this.modules[this.moduleCount-15+a][8]=i}for(a=0;a<15;a++)i=!e&&1==(s>>a&1),a<8?this.modules[8][this.moduleCount-a-1]=i:a<9?this.modules[8][15-a-1+1]=i:this.modules[8][15-a-1]=i;this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var o=-1,s=this.moduleCount-1,a=7,i=0,n=this.moduleCount-1;n>0;n-=2)for(6==n&&n--;;){for(var r=0;r<2;r++)if(null==this.modules[s][n-r]){var l=!1;i<e.length&&(l=1==(e[i]>>>a&1)),f.getMask(t,s,n-r)&&(l=!l),this.modules[s][n-r]=l,-1==--a&&(i++,a=7)}if((s+=o)<0||this.moduleCount<=s){s-=o,o=-o;break}}}},o.PAD0=236,o.PAD1=17,o.createData=function(e,t,s){for(var a=R.getRSBlocks(e,t),i=new S,n=0;n<s.length;n++){var r=s[n];i.put(r.mode,4),i.put(r.getLength(),f.getLengthInBits(r.mode,e)),r.write(i)}var l=0;for(n=0;n<a.length;n++)l+=a[n].dataCount;if(i.getLengthInBits()>8*l)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*l+")");for(i.getLengthInBits()+4<=8*l&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*l||(i.put(o.PAD0,8),i.getLengthInBits()>=8*l));)i.put(o.PAD1,8);return o.createBytes(i,a)},o.createBytes=function(e,t){for(var o=0,s=0,a=0,i=new Array(t.length),n=new Array(t.length),r=0;r<t.length;r++){var l=t[r].dataCount,c=t[r].totalCount-l;s=Math.max(s,l),a=Math.max(a,c),i[r]=new Array(l);for(var d=0;d<i[r].length;d++)i[r][d]=255&e.buffer[d+o];o+=l;var u=f.getErrorCorrectPolynomial(c),p=new A(i[r],u.getLength()-1).mod(u);for(n[r]=new Array(u.getLength()-1),d=0;d<n[r].length;d++){var g=d+p.getLength()-n[r].length;n[r][d]=g>=0?p.get(g):0}}var m=0;for(d=0;d<t.length;d++)m+=t[d].totalCount;var h=new Array(m),_=0;for(d=0;d<s;d++)for(r=0;r<t.length;r++)d<i[r].length&&(h[_++]=i[r][d]);for(d=0;d<a;d++)for(r=0;r<t.length;r++)d<n[r].length&&(h[_++]=n[r][d]);return h};for(var a={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},i=1,n=0,r=3,l=2,c=0,d=1,u=2,p=3,g=4,m=5,h=6,_=7,f={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;f.getBCHDigit(t)-f.getBCHDigit(f.G15)>=0;)t^=f.G15<<f.getBCHDigit(t)-f.getBCHDigit(f.G15);return(e<<10|t)^f.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;f.getBCHDigit(t)-f.getBCHDigit(f.G18)>=0;)t^=f.G18<<f.getBCHDigit(t)-f.getBCHDigit(f.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return f.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,o){switch(e){case c:return(t+o)%2==0;case d:return t%2==0;case u:return o%3==0;case p:return(t+o)%3==0;case g:return(Math.floor(t/2)+Math.floor(o/3))%2==0;case m:return t*o%2+t*o%3==0;case h:return(t*o%2+t*o%3)%2==0;case _:return(t*o%3+(t+o)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new A([1],0),o=0;o<e;o++)t=t.multiply(new A([1,E.gexp(o)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case a.MODE_NUMBER:return 10;case a.MODE_ALPHA_NUM:return 9;case a.MODE_8BIT_BYTE:case a.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case a.MODE_NUMBER:return 12;case a.MODE_ALPHA_NUM:return 11;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case a.MODE_NUMBER:return 14;case a.MODE_ALPHA_NUM:return 13;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),o=0,s=0;s<t;s++)for(var a=0;a<t;a++){for(var i=0,n=e.isDark(s,a),r=-1;r<=1;r++)if(!(s+r<0||t<=s+r))for(var l=-1;l<=1;l++)a+l<0||t<=a+l||0==r&&0==l||n==e.isDark(s+r,a+l)&&i++;i>5&&(o+=3+i-5)}for(s=0;s<t-1;s++)for(a=0;a<t-1;a++){var c=0;e.isDark(s,a)&&c++,e.isDark(s+1,a)&&c++,e.isDark(s,a+1)&&c++,e.isDark(s+1,a+1)&&c++,0!=c&&4!=c||(o+=3)}for(s=0;s<t;s++)for(a=0;a<t-6;a++)e.isDark(s,a)&&!e.isDark(s,a+1)&&e.isDark(s,a+2)&&e.isDark(s,a+3)&&e.isDark(s,a+4)&&!e.isDark(s,a+5)&&e.isDark(s,a+6)&&(o+=40);for(a=0;a<t;a++)for(s=0;s<t-6;s++)e.isDark(s,a)&&!e.isDark(s+1,a)&&e.isDark(s+2,a)&&e.isDark(s+3,a)&&e.isDark(s+4,a)&&!e.isDark(s+5,a)&&e.isDark(s+6,a)&&(o+=40);var d=0;for(a=0;a<t;a++)for(s=0;s<t;s++)e.isDark(s,a)&&d++;return o+=Math.abs(100*d/t/t-50)/5*10}},E={glog:function(e){if(e<1)throw new Error("glog("+e+")");return E.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return E.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},v=0;v<8;v++)E.EXP_TABLE[v]=1<<v;for(v=8;v<256;v++)E.EXP_TABLE[v]=E.EXP_TABLE[v-4]^E.EXP_TABLE[v-5]^E.EXP_TABLE[v-6]^E.EXP_TABLE[v-8];for(v=0;v<255;v++)E.LOG_TABLE[E.EXP_TABLE[v]]=v;function A(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var o=0;o<e.length&&0==e[o];)o++;this.num=new Array(e.length-o+t);for(var s=0;s<e.length-o;s++)this.num[s]=e[s+o]}function R(e,t){this.totalCount=e,this.dataCount=t}function S(){this.buffer=new Array,this.length=0}return A.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),o=0;o<this.getLength();o++)for(var s=0;s<e.getLength();s++)t[o+s]^=E.gexp(E.glog(this.get(o))+E.glog(e.get(s)));return new A(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=E.glog(this.get(0))-E.glog(e.get(0)),o=new Array(this.getLength()),s=0;s<this.getLength();s++)o[s]=this.get(s);for(s=0;s<e.getLength();s++)o[s]^=E.gexp(E.glog(e.get(s))+t);return new A(o,0).mod(e)}},R.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],R.getRSBlocks=function(e,t){var o=R.getRsBlockTable(e,t);if(null==o)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var s=o.length/3,a=new Array,i=0;i<s;i++)for(var n=o[3*i+0],r=o[3*i+1],l=o[3*i+2],c=0;c<n;c++)a.push(new R(r,l));return a},R.getRsBlockTable=function(e,t){switch(t){case i:return R.RS_BLOCK_TABLE[4*(e-1)+0];case n:return R.RS_BLOCK_TABLE[4*(e-1)+1];case r:return R.RS_BLOCK_TABLE[4*(e-1)+2];case l:return R.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},S.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var o=0;o<t;o++)this.putBit(1==(e>>>t-o-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},"string"==typeof e&&(e={text:e}),e=s.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:l,background:"#ffffff",foreground:"#000000"},e),this.each((function(){var t="canvas"==e.render?function(){var t=new o(e.typeNumber,e.correctLevel);t.addData(e.text),t.make();var s=document.createElement("canvas");s.width=e.width,s.height=e.height;for(var a=s.getContext("2d"),i=e.width/t.getModuleCount(),n=e.height/t.getModuleCount(),r=0;r<t.getModuleCount();r++)for(var l=0;l<t.getModuleCount();l++){a.fillStyle=t.isDark(r,l)?e.foreground:e.background;var c=Math.ceil((l+1)*i)-Math.floor(l*i),d=Math.ceil((r+1)*i)-Math.floor(r*i);a.fillRect(Math.round(l*i),Math.round(r*n),c,d)}return s}():function(){var t=new o(e.typeNumber,e.correctLevel);t.addData(e.text),t.make();for(var a=s("<table></table>").css("width",e.width+"px").css("height",e.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",e.background),i=e.width/t.getModuleCount(),n=e.height/t.getModuleCount(),r=0;r<t.getModuleCount();r++)for(var l=s("<tr></tr>").css("height",n+"px").appendTo(a),c=0;c<t.getModuleCount();c++)s("<td></td>").css("width",i+"px").css("background-color",t.isDark(r,c)?e.foreground:e.background).appendTo(l);return a}();s(t).appendTo(this)}))},e.exports=a.fn.qrcode},0:function(e,t,o){e.exports=o("./jquery.qrcode.js")},jquery:function(t,o){t.exports=e}})},Ls.exports=Ps(he.jquery.exports);class xs extends s.React$1.Component{render(){return s.React$1.createElement("div",{className:"hidden-option"},this.props.children)}}xs.displayName="Hidden";class ks extends s.React$1.Component{render(){return s.React$1.createElement(xs,null,s.React$1.createElement("select",Object.assign({},fe.omit(this.props,"options")),Array.from(this.props.options).map((e=>s.React$1.createElement("option",{key:e,label:e,value:e})))))}}ks.displayName="HiddenSelect",ks.propTypes={options:a.PropTypes.arrayOf(a.PropTypes.any).isRequired,value:a.PropTypes.any};class Bs extends s.React$1.Component{constructor(){super(...arguments),this.state={id:fe.uniqueId("option")}}UNSAFE_componentWillReceiveProps(e){if(null!=e.id)return this.setState({id:e.id})}render(){const e={"list-item":!0,"select-option":!0,"select-option-disabled":this.props.disabled};null!=this.props.className&&(e[this.props.className]=!0);const t=this.props.value;return s.React$1.createElement("div",Object.assign({},this.props,{"data-value":t,id:this.state.id,role:"option",className:a.classnames(e),"aria-disabled":this.props.disabled}),this.props.children)}}Bs.displayName="selectOption";class Us extends s.React$1.Component{constructor(){super(...arguments),this.displayName="selectInput",this.mouseInput=!0,this.state={open:!1,focused:void 0,keyboarsSelectPrefix:"",selectOptionId:fe.uniqueId("selected-option"),listboxId:fe.uniqueId("listbox"),value:this.props.defaultValue,errorWrapperIdName:fe.uniqueId("input-error")},this._getFilteredChildren=()=>fe.isArray(this.props.children)?fe.filter(this.props.children,(e=>e)):this.props.children,this.render=()=>{const e={"select-input":!0,"select-input-dropdown-shown":this.state.open,"select-input-disabled":this.props.isDisabled};this.props.variant&&(e[this.props.variant]=!0),this.props.className&&(e[this.props.className]=!0);const t={"list-menu":!0,"select-input-dropdown":!0,"select-input-disable-error":this.props["disable-errors"]},o=s.React$1.createElement(Ae.FormError,Object.assign({},this.props,{errorWrapperIdName:this.state.errorWrapperIdName}));let i=this.props.ariaDescriptionId;((null!=this.props.error?this.props.error.message_text:void 0)||null!=(null!=this.props.error?this.props.error.message_html:void 0))&&(i=o.props.id);const n=this.selectedOption();return s.React$1.createElement("div",{className:a.classnames(e),style:this.props.style,ref:"wrapperDiv"},o,s.React$1.createElement("button",{className:"select-input-button","aria-expanded":this.state.open,"aria-describedby":i,"aria-controls":this.state.listboxId,"aria-labelledby":this.props.ariaLabelId+" "+(null==n?void 0:n.props.id),ref:"selectButton",tabIndex:0,onClick:this.handleClickOnInputButton},s.React$1.createElement("div",{className:"select-input-input filter-item__filter-input",ref:"label"},n,s.React$1.createElement("div",{className:"select-input-dropdown-arrow"},s.React$1.createElement(a.Sprite,{group:"web",name:"arrow-down-gray",alt:""})))),s.React$1.createElement(ks,{name:this.props.name,defaultValue:this.props.defaultValue,value:this.getValue(),options:s.React$1.Children.map(this.props.children,(e=>e.props.value))}),s.React$1.createElement("div",{className:"hidden-option-container"},s.React$1.createElement("div",{id:this.state.listboxId,className:a.classnames(t),role:"listbox",onKeyDown:this.handleKeydown,onMouseMove:this.handleMouseMove,tabIndex:-1,ref:"dropdown"},this.menuChildren())))},this.handleMouseMove=e=>{let t;if(!this.props.isDisabled){e.pageX===o&&e.pageY===t||(this.mouseInput=!0);var o=e.pageX;return e.pageY}},this.sortedOptions=[],this._keyboardSelect=e=>{const t=fe.sortedIndexBy(this.sortedOptions,{text:e.toLowerCase()},"text"),o=this.sortedOptions[Math.max(t-1,0)],s=this.sortedOptions[Math.min(t,this.sortedOptions.length-1)];return this._commonPrefixLen(e,o.text)>=this._commonPrefixLen(e,s.text)?this.setState({keyboarsSelectPrefix:e,focused:o.value}):this.setState({keyboarsSelectPrefix:e,focused:s.value})},this.handleKeydown=e=>{if(!this.props.isDisabled){switch(this.mouseInput=!1,e.keyCode){case ve.Key_enum.Key.Tab:return this.setState({open:!1,focused:void 0}),!0;case ve.Key_enum.Key.Enter:case ve.Key_enum.Key.Space:this.state.open&&this.state.focused?(this.setValue(this.state.focused),this.setState({open:!1})):this.toggle();break;case ve.Key_enum.Key.Escape:if(this.state.open){const e=this.getValue();this.setValue(e),this.setState({open:!1})}break;case ve.Key_enum.Key.UpArrow:this.state.open?this.setState({focused:this.prev(this.state.focused)}):this.setState({open:!0});break;case ve.Key_enum.Key.DownArrow:this.state.open?this.setState({focused:this.next(this.state.focused)}):this.setState({open:!0});break;default:if(!this.state.open)return!0;if(!fe.values(ve.Key_enum.Key).includes(e.keyCode)){const t=String.fromCharCode(e.which),o=this.state.keyboarsSelectPrefix+t;this._keyboardSelect(o),this._keyboardSelect_timeout&&clearTimeout(this._keyboardSelect_timeout),this._keyboardSelect_timeout=setTimeout((()=>(this.setState({keyboarsSelectPrefix:""}),this._keyboardSelect_timeout=void 0)),500)}}return!1}},this.prev=e=>{let t,o;return s.React$1.Children.forEach(this.props.children,(s=>{o||s.props.disabled||(o=s.props.value),s.props.value===e&&(t=o),s.props.disabled||(o=s.props.value)})),t},this.next=e=>{let t,o;return s.React$1.Children.forEach(this.props.children,(s=>{s.props.disabled||(o===e&&(t=s.props.value),o=s.props.value)})),t||o},this.menuChildren=()=>{const e=this.getValue();return s.React$1.Children.map(this.props.children,(t=>s.React$1.cloneElement(t,{onMouseEnter:()=>{if(a.scroll_lock_document(),this.mouseInput)return this.setState({focused:t.props.value})},onMouseOut:()=>a.scroll_unlock_document(),onClick:()=>{if(!t.props.disabled)return this.setState({open:!1}),this.setValue(t.props.value)},className:a.classnames({"focused-option":null!=this.state.focused&&this.state.focused===t.props.value,"selected-option":e===t.props.value},t.props.className)})))},this.componentDidMount=()=>(this.globalMenuCloser=e=>{if(this.state.open){const t=he.$j(e.target).closest(".select-input");if(!t.length||t[0]!==s.reactDom.exports.findDOMNode(this.refs.wrapperDiv))return this.setState({open:!1,focused:void 0})}},he.$j(document).on("click",this.globalMenuCloser)),this.componentWillUnmount=()=>he.$j(document).off("click",this.globalMenuCloser),this.selectedOption=()=>{let e=null;return null!=this.props.headerElement?this.props.headerElement:(s.React$1.Children.forEach(this._getFilteredChildren(),(t=>{if(e||(e=t),(null!=t?t.props.value:void 0)===this.getValue())return e=t})),e?s.React$1.cloneElement(e,{id:this.state.selectOptionId}):null)},this.handleClickOnInputButton=e=>(e.preventDefault(),this.toggle()),this.toggle=()=>{if(!this.props.isDisabled)return this.state.open?this.setState({open:!1,focused:null}):this.setState({open:!0,focused:this.getValue()})},this.getValue=()=>{let e,t;return null!=(e=null!=(t=null!=this.props.value?this.props.value:null!=this.props.valueLink?this.props.valueLink.value:void 0)?t:this.state.value)?e:this.props.defaultValue},this.setValue=e=>{const t=this.getValue();if(this.props.valueLink?this.props.valueLink.requestChange(e):this.setState({value:e}),t!==e||null!=this.props.headerElement)return"function"==typeof this.props.onChange?this.props.onChange(t,e):void 0}}_commonPrefixLen(e,t){e=e.trim().toLowerCase(),t=t.trim().toLowerCase();let o=0;for(;o<e.length&&o<t.length&&e.charAt(o)===t.charAt(o);)o++;return o}componentWillMount(){const e=s.React$1.Children.map(this._getFilteredChildren(),(e=>({value:e.props.value,text:se.getText(e).trim().toLowerCase()})));return this.sortedOptions=fe.sortBy(e,"text")}componentDidUpdate(e,t){let o;const a=he.$j(s.reactDom.exports.findDOMNode(this.refs.dropdown)),i=he.$j(s.reactDom.exports.findDOMNode(this.refs.selectButton));this.state.open&&(o=a.find(`[data-value='${this.state.focused}']`),a.attr("aria-activedescendant",o.attr("id"))),this.state.open&&this.state.focused&&null==this.props.headerElement&&(o=a.find(`[data-value='${this.state.focused}']`),a.attr("aria-activedescendant",o.attr("id")),function(e,t){const o=e.scrollTop(),s=o+e.height(),a=t.position().top+o,i=a+t.height();a<o?e.scrollTop(a):i>s&&e.scrollTop(i-e.height())}(a,o));const n=t.open&&!this.state.open;if(!t.open&&this.state.open&&a.focus(),n)return i.focus()}}Us.defaultProps={errorWrapperClassName:"select-input-error-wrapper",ariaLabelId:"",ariaDescriptionId:"",style:null,headerElement:null},Us.displayName="selectInput";const $s=Ae.text,Vs=Us,Gs=Bs,Ws=a.styled(Vs)`
  .select-input-input {
    padding: 0 6px !important;
  }
`,Hs=a.styled.div`
  .phone-text {
    padding-bottom: 13px;
  }
`,js=a.styled(Gs)`
  &&&& {
    vertical-align: baseline;
  }
`;class Ys extends s.React$1.Component{constructor(e){super(e),this.getFullNumber=()=>Re.phone_helpers_webpack.exports.full_number(this.state.selectedCountryCode,this.state.phoneNumber),this.getCountryIso=()=>Re.phone_helpers_webpack.exports.iso_to_dialing(this.state.selectedCountryCode),this.getExampleNumber=()=>Re.phone_helpers_webpack.exports.get_example_mobile_number(this.getCountryIso()),this.onCountrySelected=(e,t)=>{this.setState({selectedCountryCode:t})},this.bindToInput=e=>t=>{this.setState(Object.assign(Object.assign({},this.state),{[e]:t.currentTarget.value}))},this.state={selectedCountryCode:ft.LOCALE&&"PK"!==ft.LOCALE?ft.LOCALE:"US",phoneNumber:""}}componentDidUpdate(e,t){this.state.selectedCountryCode===t.selectedCountryCode&&this.state.phoneNumber===t.phoneNumber||this.notifyListenerOfPhoneInput()}notifyListenerOfPhoneInput(){this.getFullNumber()?Re.phone_helpers_webpack.exports.is_valid(this.getFullNumber())?this.props.onPhoneNumberInput({type:"success",phoneNumber:this.getFullNumber()}):this.props.onPhoneNumberInput({type:"error"}):this.props.onPhoneNumberInput({type:"empty"})}renderCountryList(){return s.React$1.createElement(Ws,{onChange:this.onCountrySelected,value:this.state.selectedCountryCode,className:"phone-country",variant:"small"},this.props.countryList.map((e=>s.React$1.createElement(js,{key:e.countryCode,value:e.countryCode,disabled:"PK"===e.countryCode},e.countryName," ",e.phoneCode))))}renderLoading(){return s.React$1.createElement("img",{src:s.static_url("/static/metaserver/static/images/icons/ajax-loading-small-blue-vflVk_QNP.gif"),alt:F.intl.formatMessage({id:"jybGUg",defaultMessage:"Loading"})})}render(){if(this.props.isLoading)return this.renderLoading();const e=Re.phone_helpers_webpack.exports.format(this.getCountryIso(),this.state.phoneNumber),t=!this.state.phoneNumber||Re.phone_helpers_webpack.exports.is_valid(this.getFullNumber());return s.React$1.createElement(Hs,{className:"phone-number-input phone-number-input-inline"},s.React$1.createElement("div",{className:"phone-number-error-wrapper"},s.React$1.createElement("div",{className:"phone-number-error error-message"}," ")),this.renderCountryList(),s.React$1.createElement($s,{placeholder:this.getExampleNumber(),className:"phone-text",inline:!0,variant:"small",onChange:this.bindToInput("phoneNumber"),value:e,error:t?void 0:{message_text:F.intl.formatMessage({id:"Q8gucb",defaultMessage:"Invalid phone number"})}}))}}Ys.displayName="PhoneInput";const qs={type:"unknown_error"};function zs(e,t,s){return o.__awaiter(this,void 0,void 0,(function*(){try{const o={checkpoint_token:t};null!==s&&(o.backup_phone_number=s);const i=yield a.WebRequest({url:"/account/twofactor/enable_finish",data:o,subject_user:e});if("OK"===i)return{type:"success"};if("EXPIRED"===i)return{type:"error",error:"EXPIRED"}}catch(e){}return qs}))}function Ks(e,t){return o.__awaiter(this,void 0,void 0,(function*(){try{const o=yield a.WebRequest({url:"/account/twofactor/u2f_start_registration",data:{checkpoint_token:t},subject_user:e}),s=JSON.parse(o),i={challenge_id:s.challenge_id};for(const e of Object.keys(Se.PROTOCOLS))i[e]=s[e]&&JSON.parse(s[e]);return Object.keys(i).length>0?{type:"success",request:i}:qs}catch(e){return qs}}))}const Qs=Ae.password,Xs=F.intl.formatMessage({id:"fvZIUX",defaultMessage:"Sorry, an error occurred. Please try again later."});class Js extends s.React$1.Component{render(){const e=this.props.acceptButtonText||F.intl.formatMessage({id:"vJgZg+",defaultMessage:"Next"});let t,o;return this.props.dismissOptions&&(o=this.props.dismissOptions.text,t=e=>{-1!==e.currentTarget.className.indexOf("dbmodal-button")&&(e.preventDefault(),this.props.dismissOptions.onDismiss())}),s.React$1.createElement(ye.ModalWithCSS,{acceptButtonText:null===this.props.onAccept?null:e,autoClose:!1,onAccept:this.props.onAccept,onDismiss:t,title:this.props.title,submitting:this.props.submitting,id:this.props.id,className:this.props.className,dismissButtonText:o,helpLink:this.props.helpLink,onShow:this.props.onShow},s.React$1.createElement("div",{className:"twofactor-account-form"},this.props.children,this.props.errorText&&s.React$1.createElement("div",{className:"error-message"},this.props.errorText)))}}Js.displayName="ModalStepModal";class Zs extends s.React$1.Component{render(){return s.React$1.createElement(Js,{id:"twofactor-start",onAccept:this.props.onConfirm,title:this.props.title,acceptButtonText:F.intl.formatMessage({id:"kOQNUE",defaultMessage:"Get started"}),helpLink:s.React$1.createElement("a",{className:"learn-more",href:"https://www.dropbox.com/help/363",target:"_blank",rel:"noreferrer"},F.intl.formatMessage({id:"gk12sS",defaultMessage:"Learn more"}))},s.React$1.createElement("p",null,F.intl.formatMessage({id:"EIHDne",defaultMessage:"Two-step verification adds an extra layer of protection to your account. Whenever you sign in to the Dropbox website or link a new device, you’ll need to enter both your password and also a security code sent to your mobile phone."})))}}Zs.displayName="StartModal";class ea extends s.React$1.Component{constructor(e){super(e),this.onAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){this.setState({submitting:!0});const e=yield function(e,t,s){return o.__awaiter(this,void 0,void 0,(function*(){try{let o;o="enable"===s?"/account/twofactor/confirm_password":"disable"===s?"/account/twofactor/disable_confirm_password":"/account/twofactor/edit_confirm_password";const i=yield a.WebRequest({url:o,data:{password:t},subject_user:e});if(i.startsWith("OK:"))return{type:"success",checkpointToken:i.substring(3)};switch(i){case"EXPIRED_PASSWORD":case"INVALID":case"RATELIMIT":case"ALREADY_ENABLED":case"ALREADY_DISABLED":return{type:"error",error:i}}}catch(e){}return qs}))}(this.props.user.id,this.state.password,this.props.context);if(this.setState({submitting:!1}),"success"===e.type)this.props.onSuccessfulPassword(e.checkpointToken);else if("error"===e.type){if("INVALID"===e.error)this.setState({error:F.intl.formatMessage({id:"l/9ohN",defaultMessage:"Invalid password"})})}else this.setState({unexpectedError:Xs});this.props.loggingEventName&&a.UserActivityLogger.log("web",this.props.loggingEventName,{confirmPasswordResp:e.type})})),this.setPassword=e=>this.setState({password:e.currentTarget.value}),this.state={password:"",submitting:!1}}render(){return s.React$1.createElement(Js,{id:"twofactor-enter-password",onAccept:this.onAccept,title:this.props.title,submitting:this.state.submitting,errorText:this.state.unexpectedError},s.React$1.createElement("p",null,F.intl.formatMessage({id:"+HVGgM",defaultMessage:"For security, please enter your password for {email}."},{email:this.props.user.email})),s.React$1.createElement(Qs,{id:"password",value:this.state.password,variant:"small",onChange:this.setPassword,error:void 0===this.state.error?void 0:{message_text:this.state.error},placeholder:F.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"})}))}}ea.displayName="ConfirmPasswordModal";class ta extends s.React$1.Component{constructor(e){super(e),this.onAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){if(this.state.usePhoneDelivery)this.props.user.is_email_verified?this.props.onSelectionConfirmed({type:"phone"}):(new we.EmailVerification).show_verify_modal(void 0,Te.EmailVerificationReasons.TFA_SMS_REGISTRATION);else{this.setState({submitting:!0});const e=yield function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){try{const o=yield a.WebRequest({url:"/account/twofactor/add_phone",data:{checkpoint_token:t,offline:!0},subject_user:e});if(o.startsWith("OK:"))return{type:"success",b32EncodedKey:o.substring(3)};if("EXPIRED"===o)return{type:"error",error:"EXPIRED"}}catch(e){}return qs}))}(this.props.user.id,this.props.checkpointToken);this.setState({submitting:!1}),"success"===e.type?this.props.onSelectionConfirmed({type:"offline",offlineKey:e.b32EncodedKey}):"error"===e.type?this.props.onPasswordExpired():this.setState({unexpectedError:Xs})}})),this.state={usePhoneDelivery:!0,submitting:!1}}render(){const e=e=>()=>{this.setState({usePhoneDelivery:e})};return s.React$1.createElement(Js,{title:this.props.title,submitting:this.state.submitting,onAccept:this.onAccept,id:"twofactor-delivery-choice",errorText:this.state.unexpectedError},s.React$1.createElement("p",null,s.React$1.createElement("b",null,F.intl.formatMessage({id:"6Ooe3V",defaultMessage:"How would you like to receive your security codes?"}))),s.React$1.createElement("div",{className:"delivery-choice "+(this.state.usePhoneDelivery?"selected":""),id:"sms-choice"},s.React$1.createElement(_e.RadioButton,{id:"use-sms",name:"delivery","aria-label":"Use SMS",checked:this.state.usePhoneDelivery,"aria-checked":this.state.usePhoneDelivery,onChange:e(!0),tabIndex:0}),s.React$1.createElement("label",{htmlFor:"use-sms"},s.React$1.createElement("strong",null,F.intl.formatMessage({id:"ribcyl",defaultMessage:"Use text messages"})),s.React$1.createElement("br",null),F.intl.formatMessage({id:"rkKFQh",defaultMessage:"Security codes will be sent to your mobile phone"}))),s.React$1.createElement("div",{className:"delivery-choice "+(this.state.usePhoneDelivery?"":"selected"),id:"app-choice"},s.React$1.createElement(_e.RadioButton,{id:"use-app",name:"delivery",type:"radio",checked:!this.state.usePhoneDelivery,"aria-checked":!this.state.usePhoneDelivery,onChange:e(!1),tabIndex:0}),s.React$1.createElement("label",{htmlFor:"use-app"},s.React$1.createElement("strong",null,F.intl.formatMessage({id:"gbLFmN",defaultMessage:"Use a mobile app"})),s.React$1.createElement("br",null),F.intl.formatMessage({id:"9W0BXd",defaultMessage:"Security codes will be generated by an authenticator app"}))))}}ta.displayName="ChooseDeliveryModal";let oa=[];function sa(){return o.__awaiter(this,void 0,void 0,(function*(){try{return yield a.WebRequest({url:"/account/get_phone_input_data",dataType:"json"})}catch(e){return null}}))}const aa=e=>{let t=[];if(e){const{country_list:o,phone_code_map:s}=e;t=o.map((e=>({countryCode:e[0],countryName:e[1],phoneCode:s[e[0]]})))}return t};class ia extends s.React$1.Component{constructor(e){super(e),this.BAD_CARRIER=F.intl.formatMessage({id:"ffjRA4",defaultMessage:"Unfortunately, your carrier isn’t supported at this time."}),this.INVALID_NUMBER=F.intl.formatMessage({id:"ffjRA4",defaultMessage:"Unfortunately, your carrier isn’t supported at this time."}),this.NOTAMOBILE=F.intl.formatMessage({id:"ffjRA4",defaultMessage:"Unfortunately, your carrier isn’t supported at this time."}),this.UNREACHABLE=F.intl.formatMessage({id:"ffjRA4",defaultMessage:"Unfortunately, your carrier isn’t supported at this time."}),this.RATE_LIMIT=F.intl.formatMessage({id:"R8c4fE",defaultMessage:"You’ve tried to add two-step authentication with SMS too many times. Please try again after 24 hours."}),this.UNVERIFIED_EMAIL=F.intl.formatMessage({id:"HvNB6H",defaultMessage:"You must verify your email before you can add two-step authentication with SMS."}),this.onAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){if(this.state.phoneNumber&&"success"===this.state.phoneNumber.type){this.setState({submitting:!0});const e=yield function(e,t,s){return o.__awaiter(this,void 0,void 0,(function*(){try{const o=yield a.WebRequest({url:"/account/twofactor/add_phone",data:{checkpoint_token:t,phone_number:s},subject_user:e});if(o.startsWith("OK:"))return{type:"success",phoneSig:o.substring(3)};switch(o){case"EXPIRED":case"UNREACHABLE":case"BADCARRIER":case"INVALIDNUMBER":case"NOTAMOBILE":case"RATELIMIT":case"UNVERIFIED_EMAIL":return{type:"error",error:o}}}catch(e){}return qs}))}(this.props.user.id,this.props.checkpointToken,this.state.phoneNumber.phoneNumber);if(this.setState({submitting:!1}),"success"===e.type)this.props.onAccept({phoneNumber:this.state.phoneNumber.phoneNumber,phoneSig:e.phoneSig});else if("error"===e.type){const t=e=>{this.setState({unexpectedError:e})};switch(e.error){case"EXPIRED":this.props.onPasswordExpired();break;case"UNREACHABLE":t(this.UNREACHABLE);break;case"BADCARRIER":t(this.BAD_CARRIER);break;case"INVALIDNUMBER":t(this.INVALID_NUMBER);break;case"NOTAMOBILE":t(this.NOTAMOBILE);break;case"RATELIMIT":n.Notify.error(this.RATE_LIMIT);break;case"UNVERIFIED_EMAIL":t(this.UNVERIFIED_EMAIL)}}else this.setState({unexpectedError:Xs})}})),this.setPhoneNumber=e=>this.setState({phoneNumber:e}),this.state={submitting:!1,loadedUserConstants:oa}}UNSAFE_componentWillMount(){return o.__awaiter(this,void 0,void 0,(function*(){if(0===oa.length){const e=yield sa();if(e&&0===this.state.loadedUserConstants.length){const t=aa(e);oa=t,this.setState({loadedUserConstants:t})}}}))}render(){return s.React$1.createElement(Js,{id:"twofactor-enter-phone",className:"twofactor-overflow",title:this.props.title,onAccept:this.onAccept,submitting:this.state.submitting,errorText:this.state.unexpectedError,dismissOptions:{text:F.intl.formatMessage({id:"tSs2ty",defaultMessage:"Back"}),onDismiss:this.props.onDismiss}},s.React$1.createElement("p",{className:"subtitle"},F.intl.formatMessage({id:"HKKwpB",defaultMessage:"Enter your mobile phone number"})),s.React$1.createElement("p",null,F.intl.formatMessage({id:"NvAM7e",defaultMessage:"We’ll send a security code to this phone number whenever you sign in to the Dropbox website or link a new Device."})),s.React$1.createElement(Ys,{onPhoneNumberInput:this.setPhoneNumber,isLoading:0===this.state.loadedUserConstants.length,countryList:this.state.loadedUserConstants}))}}ia.displayName="EnterPhoneModal";class na extends s.React$1.Component{constructor(e){super(e),this.qrCodeContainer=s.React$1.createRef(),this.state={showBarcode:!0}}componentDidMount(){this.setupQrCode()}componentDidUpdate(){this.setupQrCode()}componentWillUpdate(e,t){this.clearQrCode()}setupQrCode(){const e=he.$j(this.qrCodeContainer.current);e.empty();const t=this.parseB32Key(this.props.totpB32Secret,!1),o={text:`otpauth://totp/Dropbox:${this.props.user.email}?secret=${t}&issuer=Dropbox`,height:200,width:200},s=document.createElement("canvas"),a=!(!s.getContext||!s.getContext("2d"));a||(o.render="table"),e.qrcode(o).show(),a||e.children("table").css("margin","0 auto")}clearQrCode(){he.$j(this.qrCodeContainer.current).empty()}parseB32Key(e,t){const o=e.replace(new RegExp("=+$"),"");return t?o.toLowerCase().replace(/(.{4})/g,"$1 "):o}render(){const e=e=>()=>{this.setState({showBarcode:e})};return s.React$1.createElement(Js,{title:this.props.title,onAccept:this.props.onAccept,id:"twofactor-offline-setup",dismissOptions:{text:F.intl.formatMessage({id:"tSs2ty",defaultMessage:"Back"}),onDismiss:this.props.onDismiss},onShow:()=>this.setupQrCode()},s.React$1.createElement("p",null,F.intl.formatMessage({id:"u09i+4",defaultMessage:"An authenticator app lets you generate security codes on your phone without needing to receive text messages. If you don’t already have one, we support any of <a>these apps</a>."},{a:e=>s.React$1.createElement("a",{href:"https://www.dropbox.com/help/363#2fa-apps",rel:"noopener noreferrer",target:"_blank"},e)})),s.React$1.createElement("p",null,F.intl.formatMessage({id:"b+PDmn",defaultMessage:"To configure your authenticator app:"})),s.React$1.createElement("ul",{className:"blue-bullets"},s.React$1.createElement("li",null,F.intl.formatMessage({id:"bKmf0p",defaultMessage:"Add a new time-based token."})),this.state.showBarcode?s.React$1.createElement("li",null,F.intl.formatMessage({id:"+kJxW6",defaultMessage:"Use your app to scan the barcode below, or <button>enter your secret key manually</button>."},{button:t=>s.React$1.createElement(a.Button,{variant:"transparent",onClick:e(!1)},t)})):s.React$1.createElement("li",null,F.intl.formatMessage({id:"LzEh8h",defaultMessage:"Enter the secret key below, or <button>scan a barcode instead</button>."},{button:t=>s.React$1.createElement(a.Button,{variant:"transparent",onClick:e(!0)},t)}))),this.state.showBarcode?s.React$1.createElement("div",{id:"qr-div",ref:this.qrCodeContainer}):s.React$1.createElement("div",{id:"secret-div"},this.parseB32Key(this.props.totpB32Secret,!0)))}}na.displayName="SetupOfflineModal";class ra extends s.React$1.Component{constructor(e){super(e),this.INVALID_CODE_GENERAL=F.intl.formatMessage({id:"LGWy5v",defaultMessage:"Invalid code."}),this.INVALID_CODE_TOTP=F.intl.formatMessage({id:"PEgSVc",defaultMessage:"Invalid code. Check the clock on your phone: it must be accurate to the minute."}),this.bindToInput=e=>t=>{this.setState(Object.assign(Object.assign({},this.state),{[e]:t.currentTarget.value}))},this.onAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){this.setState({submitting:!0});const e="phone"===this.props.deliveryDetails.type?this.props.deliveryDetails.phoneData.phoneSig:void 0,t=yield function(e,t,s,i){return o.__awaiter(this,void 0,void 0,(function*(){try{const o=yield a.WebRequest({url:"/account/twofactor/confirm_phone",data:{checkpoint_token:t,twofactor_code:s,phone_sig:i},subject_user:e}),n=JSON.parse(o);if("OK"===n.result)return{type:"success",backupCodes:n.codes};switch(n.result){case"INVALID":case"EXPIRED":case"RATELIMIT":return{type:"error",error:n.result}}}catch(e){}return qs}))}(this.props.user.id,this.props.checkpointToken,this.state.code,e);if(this.setState({submitting:!1}),"success"===t.type)this.props.onSuccessfulConfirm(t.backupCodes);else if("error"===t.type)switch(t.error){case"EXPIRED":this.props.onPasswordExpired();break;case"INVALID":const e=this.state.invalidCodeAttempts+1;0===this.state.invalidCodeAttempts||"phone"===this.props.deliveryDetails.type?this.setState({unexpectedError:this.INVALID_CODE_GENERAL,invalidCodeAttempts:e}):this.setState({unexpectedError:this.INVALID_CODE_TOTP,invalidCodeAttempts:e});break;case"RATELIMIT":n.Notify.error(F.intl.formatMessage({id:"kU4PMt",defaultMessage:"Too many invalid codes. Try again in a few minutes."}))}else this.setState({unexpectedError:Xs})})),this.state={submitting:!1,invalidCodeAttempts:0,code:""}}render(){return"phone"===this.props.deliveryDetails.type?(e=>s.React$1.createElement(Js,{title:this.props.title,onAccept:this.onAccept,submitting:this.state.submitting,id:"twofactor-enable-confirm",errorText:this.state.unexpectedError,dismissOptions:{text:F.intl.formatMessage({id:"tSs2ty",defaultMessage:"Back"}),onDismiss:this.props.onDismiss}},s.React$1.createElement("p",null,F.intl.formatMessage({id:"HONi9s",defaultMessage:"We sent a security code to {phone_number}. Enter it below to verify your phone number"},{phone_number:e})),s.React$1.createElement("div",{className:"twofactor-input-wrapper"},s.React$1.createElement(a.TextInput,{id:"phone-code",value:this.state.code,onChange:this.bindToInput("code"),placeholder:F.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"})}))))(this.props.deliveryDetails.phoneData.phoneNumber):(()=>s.React$1.createElement(Js,{title:this.props.title,onAccept:this.onAccept,submitting:this.state.submitting,id:"twofactor-enable-confirm",errorText:this.state.unexpectedError,dismissOptions:{text:F.intl.formatMessage({id:"tSs2ty",defaultMessage:"Back"}),onDismiss:this.props.onDismiss}},s.React$1.createElement("p",null,F.intl.formatMessage({id:"lG9gS/",defaultMessage:"Enter the security code generated by your mobile authenticator app to make sure it’s configured correctly."})),s.React$1.createElement("div",{className:"twofactor-input-wrapper"},s.React$1.createElement(a.TextInput,{id:"phone-code",value:this.state.code,onChange:this.bindToInput("code"),placeholder:F.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"})}))))()}}ra.displayName="ConfirmDeliveryModal";class la extends s.React$1.Component{constructor(e){super(e),this.SAME_AS_PRIMARY_ERROR=F.intl.formatMessage({id:"yJcqG4",defaultMessage:"You can’t use your primary phone as your backup"}),this.numberIsSameAsPrimary=()=>{const e=this.state.backupPhoneNumber,t=e&&"success"===e.type?e.phoneNumber:void 0;return t&&this.props.primaryPhone&&t===this.props.primaryPhone},this.onAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){if(this.numberIsSameAsPrimary())return;const e=this.state.backupPhoneNumber,t=e&&"success"===e.type?e.phoneNumber:void 0;if("edit_backup_phone"===this.props.flow){this.setState({submitting:!0});const e=yield function(e,t,s){return o.__awaiter(this,void 0,void 0,(function*(){try{const o=yield a.WebRequest({url:"/account/twofactor/set_backup_phone",data:{checkpoint_token:t,backup_phone_number:s||""},subject_user:e});if("OK"===o)return{type:"success"};if("EXPIRED"===o)return{type:"error",error:o}}catch(e){}return qs}))}(this.props.user.id,this.props.checkpointToken,t);this.setState({submitting:!1}),"success"===e.type?this.props.onAccept(t):"error"===e.type?this.props.onPasswordExpired():this.setState({unexpectedError:Xs})}else if("edit_twofactor"===this.props.flow){this.setState({submitting:!0});const e=yield zs(this.props.user.id,this.props.checkpointToken,t||null);if(this.setState({submitting:!1}),"success"===e.type)this.props.onAccept(t);else if("error"===e.type){if("EXPIRED"===e.error)this.props.onPasswordExpired()}else this.setState({unexpectedError:Xs})}else this.props.onAccept(t)})),this.setBackupPhoneNumber=e=>this.setState({backupPhoneNumber:e}),this.state={submitting:!1,isSameAsPrimary:!1,loadedUserConstants:oa}}UNSAFE_componentWillMount(){return o.__awaiter(this,void 0,void 0,(function*(){if(0===oa.length){const e=yield sa();if(e&&0===this.state.loadedUserConstants.length){const t=aa(e);oa=t,this.setState({loadedUserConstants:t})}}}))}render(){const e=this.numberIsSameAsPrimary()&&this.SAME_AS_PRIMARY_ERROR;return s.React$1.createElement(Js,{title:this.props.title,onAccept:this.onAccept,submitting:this.state.submitting,id:"twofactor-enter-backup-phone",className:"twofactor-overflow",errorText:e||this.state.unexpectedError,dismissOptions:{text:F.intl.formatMessage({id:"tSs2ty",defaultMessage:"Back"}),onDismiss:this.props.onDismiss}},s.React$1.createElement("p",{className:"subtitle"},F.intl.formatMessage({id:"PVsh9/",defaultMessage:"<strong>Backup phone number</strong> (optional)"},{strong:e=>s.React$1.createElement("strong",null,e)})),s.React$1.createElement("p",null,F.intl.formatMessage({id:"MLWfyM",defaultMessage:"If you lose access to your primary security code source, we can send them to your backup mobile number instead."})),s.React$1.createElement(Ys,{onPhoneNumberInput:this.setBackupPhoneNumber,isLoading:0===this.state.loadedUserConstants.length,countryList:this.state.loadedUserConstants}),s.React$1.createElement("p",{id:"backup-phone-number-description"},F.intl.formatMessage({id:"djBo1i",defaultMessage:"While this step is optional, we encourage you to set up a backup phone number in case you lose your mobile phone or are otherwise unable to receive your security code."})))}}function ca(e){return e.toLowerCase().replace(/(.{4})/g,"$1 ")}la.displayName="BackupPhoneModal";class da extends s.React$1.Component{constructor(e){super(e),this.onAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){this.setState({submitting:!0});const e=yield zs(this.props.user.id,this.props.checkpointToken,this.props.backupPhone||null);if(this.setState({submitting:!1}),"success"===e.type)this.props.onAccept();else if("error"===e.type){if("EXPIRED"===e.error)this.props.onPasswordExpired()}else this.setState({unexpectedError:Xs})})),this.state={submitting:!1}}render(){const e=void 0!==this.props.primaryPhone?F.intl.formatMessage({id:"HyWjj5",defaultMessage:"Your security codes will be sent by text message"}):F.intl.formatMessage({id:"bQoyjz",defaultMessage:"Your security codes will be generated by your authenticator app"});return s.React$1.createElement(Js,{title:this.props.title,onAccept:this.onAccept,submitting:this.state.submitting,id:"twofactor-recovery",errorText:this.state.unexpectedError,dismissOptions:{text:F.intl.formatMessage({id:"tSs2ty",defaultMessage:"Back"}),onDismiss:this.props.onDismiss}},s.React$1.createElement("div",{className:"deliveryLabel"},e),s.React$1.createElement("div",{className:"confirm-phones-outer"},this.props.primaryPhone&&s.React$1.createElement("div",{id:"confirm-phone-primary",className:"confirm-phones-inner"},s.React$1.createElement("span",{className:"confirm-phone-label"},F.intl.formatMessage({id:"9m9zTf",defaultMessage:"Primary phone number"})),s.React$1.createElement("span",{id:"confirm-phone-primary-number",className:"confirm-phone-number"},this.props.primaryPhone)),this.props.backupPhone&&s.React$1.createElement("div",{id:"confirm-phone-backup",className:"confirm-phones-inner"},s.React$1.createElement("span",{className:"confirm-phone-label"},F.intl.formatMessage({id:"4KZf0Q",defaultMessage:"Backup phone number"})),s.React$1.createElement("span",{id:"confirm-phone-backup-number",className:"confirm-phone-number"},this.props.backupPhone))),s.React$1.createElement("div",{className:"codesbox"},s.React$1.createElement("p",{className:"desc"},F.intl.formatMessage({id:"zSj4X8",defaultMessage:"You can use these one-time backup codes to access your account."})),s.React$1.createElement("div",{id:"backup-code-list-container"},s.React$1.createElement("ol",{className:"twofactor-backup-list"},this.props.recoveryCodes.map((e=>s.React$1.createElement("li",{className:"twofactor-backup-list__item"},s.React$1.createElement("span",{className:"twofactor-backup-list__code"},ca(e))))))),s.React$1.createElement("p",{className:"sub-desc"},F.intl.formatMessage({id:"Lb5frQ",defaultMessage:"Write these down and keep them safe."}))))}}da.displayName="ViewRecoveryCodesModal";class ua extends s.React$1.Component{constructor(e){super(e),this.loadRecoveryCodes=e=>o.__awaiter(this,void 0,void 0,(function*(){this.setState({submitting:!0});const t=yield function(e,t,s){return o.__awaiter(this,void 0,void 0,(function*(){try{const o=s?"/account/twofactor/new_rescue_code":"/account/twofactor/get_rescue_code",i=yield a.WebRequest({url:o,data:{checkpoint_token:t,user_json:!0},dataType:"json",subject_user:e});if("OK"===i.result)return{type:"success",backupCodes:i.codes};if("EXPIRED"===i.result)return{type:"error",error:"EXPIRED"}}catch(e){}return qs}))}(this.props.user.id,this.props.checkpointToken,e);if(this.setState({submitting:!1}),"success"===t.type)this.setState({backupCodes:t.backupCodes});else if("error"===t.type){if("EXPIRED"===t.error)this.props.onPasswordExpired()}else this.setState({unexpectedError:Xs})})),this.state={submitting:!1}}componentWillMount(){return o.__awaiter(this,void 0,void 0,(function*(){this.loadRecoveryCodes(!1)}))}render(){const{backupCodes:e}=this.state;return s.React$1.createElement(Js,{title:this.props.title,onAccept:this.props.onClose,acceptButtonText:F.intl.formatMessage({id:"nOO9Qi",defaultMessage:"OK"}),dismissOptions:{text:F.intl.formatMessage({id:"rnNUn1",defaultMessage:"Generate new codes"}),onDismiss:()=>this.loadRecoveryCodes(!0)},id:"twofactor-recovery-edit",submitting:this.state.submitting,errorText:this.state.unexpectedError},(e=>e?s.React$1.createElement("div",{className:"codesbox"},s.React$1.createElement("p",{className:"desc"},F.intl.formatMessage({id:"zSj4X8",defaultMessage:"You can use these one-time backup codes to access your account."})),s.React$1.createElement("div",{id:"backup-code-list-container"},s.React$1.createElement("ol",{className:"twofactor-backup-list"},e.map((e=>s.React$1.createElement("li",{className:"twofactor-backup-list__item"},s.React$1.createElement("span",{className:"twofactor-backup-list__code"},ca(e))))))),s.React$1.createElement("p",{className:"sub-desc"},F.intl.formatMessage({id:"Lb5frQ",defaultMessage:"Write these down and keep them safe."}))):s.React$1.createElement(a.Image,{src:s.static_url("/static/metaserver/static/images/icons/ajax-loading-small-blue-vflVk_QNP.gif"),alt:F.intl.formatMessage({id:"jybGUg",defaultMessage:"Loading"})}))(e))}}ua.displayName="EditRecoveryCodesModal";class pa extends s.React$1.Component{render(){return s.React$1.createElement(Js,{title:this.props.title,onAccept:this.props.onAccept,id:"twofactor-done"},s.React$1.createElement("p",null,F.intl.formatMessage({id:"4cZi/F",defaultMessage:"From now on, when you sign in to the Dropbox website or link a new device, you’ll need to enter a security code from your phone."})))}}pa.displayName="FinishTwofactorEnableModal";class ga extends s.React$1.Component{constructor(e){super(e),this.onAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){this.setState({submitting:!0});const e=yield function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){try{const o=yield a.WebRequest({url:"/account/twofactor/disable",data:{checkpoint_token:t},subject_user:e});if("OK"===o)return{type:"success"};if("EXPIRED"===o)return{type:"error",error:"EXPIRED"}}catch(e){}return qs}))}(this.props.user.id,this.props.checkpointToken);if(this.setState({submitting:!1}),"success"===e.type)this.props.onAccept();else if("error"===e.type){if("EXPIRED"===e.error)this.props.onPasswordExpired()}else this.setState({unexpectedError:Xs})})),this.state={submitting:!1}}render(){return s.React$1.createElement(Js,{title:this.props.title,onAccept:this.onAccept,submitting:this.state.submitting,id:"twofactor-disable",errorText:this.state.unexpectedError},s.React$1.createElement("p",null,F.intl.formatMessage({id:"wAS6mz",defaultMessage:"If you disable two-step verification, you’ll only need your email and password when you sign in to the Dropbox website or link a new device."})))}}ga.displayName="FinishTwofactorDisableModal";class ma extends s.React$1.Component{constructor(e){super(e),this.UNSUPPORTED_U2F_ERROR_STRING=F.intl.formatMessage({id:"nr9Ux4",defaultMessage:"Currently, security keys are only supported with Google Chrome, version 38 or higher."}),this.UNSUPPORTED_ERROR_STRING=F.intl.formatMessage({id:"oHNNG5",defaultMessage:"Currently, security keys are only supported with Google Chrome, version 38 or higher, and Firefox, version 60 or higher."}),this.onAccept=()=>{this.state.unsupportedBrowser?a.unmountModal():this.props.onAccept(),this.props.loggingEventName&&a.UserActivityLogger.log("web",this.props.loggingEventName,{unsupportedBrowser:this.state.unsupportedBrowser})},this.state={submitting:!0,unsupportedBrowser:!1,unsupportedErrorText:this.UNSUPPORTED_U2F_ERROR_STRING}}componentDidMount(){return o.__awaiter(this,void 0,void 0,(function*(){let e;try{if(e=yield Ks(this.props.user.id),"unknown_error"===e.type)throw e}catch(e){return this.setState({submitting:!1,unsupportedBrowser:!0,unsupportedErrorText:this.UNSUPPORTED_U2F_ERROR_STRING}),void this.props.onGetRequest()}const t=!Se.canRegisterAuthenticator(e.request);let o=this.UNSUPPORTED_U2F_ERROR_STRING;Se.isWebAuthnEnabled(e.request)&&(o=this.UNSUPPORTED_ERROR_STRING),this.setState({submitting:!1,unsupportedBrowser:t,unsupportedErrorText:o}),this.props.onGetRequest(e)}))}render(){const e=this.state.unsupportedBrowser?this.state.unsupportedErrorText:"";return s.React$1.createElement(Js,{title:this.props.title,id:"twofactor-security-key-unsupported-browser",onAccept:this.onAccept,errorText:e,acceptButtonText:this.state.unsupportedBrowser?F.intl.formatMessage({id:"6bRQ0U",defaultMessage:"Done"}):F.intl.formatMessage({id:"6fTvLO",defaultMessage:"Begin setup"}),submitting:this.state.submitting},s.React$1.createElement("div",{className:"modal-img"},s.React$1.createElement(a.Image,{src:s.static_url("/static/metaserver/static/images/security_keys/insert-vflkCfC4_.png"),srcHiRes:s.static_url("/static/metaserver/static/images/security_keys/insert@2x-vflTxG2RJ.png")})),s.React$1.createElement("div",{className:"instructions"},s.React$1.createElement("p",null,F.intl.formatMessage({id:"mgikY5",defaultMessage:"A security key allows you to complete two-step verification securely and conveniently, when logging into Dropbox. <a>Learn more</a>"},{a:e=>s.React$1.createElement("a",{href:"/help/363#2fa-security-keys",rel:"noopener noreferrer",target:"_blank"},e)}))))}}ma.displayName="SecurityKeyIntroModal";class ha extends s.React$1.Component{constructor(e){super(e),this.onPrepareAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){this.setState({registrationStatus:"pending_registration"})})),this.onAuthenticatorCallback=e=>o.__awaiter(this,void 0,void 0,(function*(){this.setState({submitting:!0});const t=yield function(e,t,s){return o.__awaiter(this,void 0,void 0,(function*(){try{const o=yield a.WebRequest({url:"/account/twofactor/u2f_finish_registration",data:{checkpoint_token:t,device_response:JSON.stringify(s)},subject_user:e});return o.startsWith("err:")?{type:"error",localizedError:JSON.parse(o.substring("err:".length)).security_key_register.message_text}:{type:"success",data:JSON.parse(o)}}catch(e){return qs}}))}(this.props.user.id,this.props.checkpointToken,e);this.setState({submitting:!1}),"success"===t.type?(this.props.onKeyAdded(),this.setState({registrationStatus:"success",deviceGid:t.data.device_gid})):"error"===t.type?this.setState({registrationStatus:"error",unexpectedError:t.localizedError}):this.setState({registrationStatus:"error"}),this.props.loggingEventName&&a.UserActivityLogger.log("web",this.props.loggingEventName,{respType:t.type})})),this.renderPrepare=()=>s.React$1.createElement(Js,{title:this.props.title,onAccept:this.onPrepareAccept,acceptButtonText:F.intl.formatMessage({id:"cTRGoc",defaultMessage:"Key inserted"}),submitting:this.state.submitting,errorText:this.state.unexpectedError},s.React$1.createElement("div",{className:"modal-img"},s.React$1.createElement(a.Image,{src:s.static_url("/static/metaserver/static/images/security_keys/insert-vflkCfC4_.png"),srcHiRes:s.static_url("/static/metaserver/static/images/security_keys/insert@2x-vflTxG2RJ.png")})),s.React$1.createElement("div",{className:"instructions"},s.React$1.createElement("p",null,F.intl.formatMessage({id:"3Ol37w",defaultMessage:"Start by inserting your security key into a USB port. <a>Learn more</a>"},{a:e=>s.React$1.createElement("a",{href:"/help/363#2fa-security-keys",rel:"noopener noreferrer",target:"_blank"},e)})))),this.renderPending=()=>s.React$1.createElement(Js,{title:this.props.title,errorText:this.state.unexpectedError},s.React$1.createElement("div",{className:"modal-img"},s.React$1.createElement(a.Image,{src:s.static_url("/static/metaserver/static/images/security_keys/detect-vflwOn2Nf.png"),srcHiRes:s.static_url("/static/metaserver/static/images/security_keys/detect@2x-vflx2BPRH.png")})),s.React$1.createElement("div",{className:"instructions"},s.React$1.createElement("p",null,s.React$1.createElement(a.Image,{src:s.static_url("/static/metaserver/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),className:"scanning-wheel"}),F.intl.formatMessage({id:"tq1aa1",defaultMessage:"Scanning for security key"})),s.React$1.createElement("p",null,F.intl.formatMessage({id:"e8eCgM",defaultMessage:"If your key has a button or a gold disk, tap it now. <a>Learn more</a>"},{a:e=>s.React$1.createElement("a",{href:"/help/363#2fa-security-keys",rel:"noopener noreferrer",target:"_blank"},e)})))),this.retryRegister=()=>{this.setState({registrationStatus:"pending_registration"})},this.renderError=()=>s.React$1.createElement(Js,{title:this.props.title,onAccept:this.retryRegister,acceptButtonText:F.intl.formatMessage({id:"n1zYou",defaultMessage:"Retry"}),errorText:this.state.unexpectedError},s.React$1.createElement("div",{className:"modal-img"},s.React$1.createElement(a.Image,{src:s.static_url("/static/metaserver/static/images/security_keys/detect-vflwOn2Nf.png"),srcHiRes:s.static_url("/static/metaserver/static/images/security_keys/detect@2x-vflx2BPRH.png")})),s.React$1.createElement("div",{className:"instructions"},s.React$1.createElement("p",null,F.intl.formatMessage({id:"50+STL",defaultMessage:"Re-insert your key and click ‘Retry’"})))),this.setNickname=e=>this.setState({nickname:e.currentTarget.value}),this.renameAndFinish=()=>{if(this.state.nickname){this.setState({renameSubmitting:!0});(new a.UserApiV2Client).ns("security_settings").rpc("rename_auth_device_v2",{device_gid:this.state.deviceGid,nickname:this.state.nickname},{subjectUserId:this.props.user.id}).then((e=>{this.setState({renameSubmitting:!1}),this.props.onKeyAdded(),this.props.onFinish()}),(e=>{this.setState({renameSubmitting:!1}),this.props.onFinish()}))}else this.props.onFinish()},this.state={submitting:!1,renameSubmitting:!1,registrationStatus:"prepare",deviceGid:"",nickname:""},this.currentRequest=this.props.request}componentDidUpdate(e,t){return o.__awaiter(this,void 0,void 0,(function*(){if(t.registrationStatus!==this.state.registrationStatus&&"pending_registration"===this.state.registrationStatus)if(void 0===this.currentRequest&&(this.setState({submitting:!0}),this.currentRequest=yield Ks(this.props.user.id,this.props.checkpointToken),this.setState({submitting:!1})),"success"===this.currentRequest.type){const e=yield Se.register(this.currentRequest.request);this.currentRequest=void 0,this.onAuthenticatorCallback(e)}else this.setState({registrationStatus:"error",unexpectedError:Xs})}))}renderSuccess(){return s.React$1.createElement(Js,{title:this.props.title,acceptButtonText:F.intl.formatMessage({id:"t0ve6c",defaultMessage:"Finish"}),onAccept:this.renameAndFinish,submitting:this.state.renameSubmitting},s.React$1.createElement("div",{className:"modal-img"},s.React$1.createElement(a.Image,{src:s.static_url("/static/metaserver/static/images/security_keys/success-vfldNQ5IO.png"),srcHiRes:s.static_url("/static/metaserver/static/images/security_keys/success@2x-vflv-3UZY.png")})),s.React$1.createElement("div",{className:"instructions"},s.React$1.createElement("p",null,F.intl.formatMessage({id:"qAhMHO",defaultMessage:"Key added!"})),s.React$1.createElement("p",null,F.intl.formatMessage({id:"FvQTeI",defaultMessage:"You can now use your security key to complete two-step verification when you sign into Dropbox."})),s.React$1.createElement("p",null,F.intl.formatMessage({id:"/8wKhI",defaultMessage:"If you’d like, you can also set a nickname for this security key, so that it’s easier to tell apart from any other key you have."}))),s.React$1.createElement(a.TextInput,{id:"nickname",value:this.state.nickname,onChange:this.setNickname,"disable-errors":!0,placeholder:F.intl.formatMessage({id:"J/uM6N",defaultMessage:"for example, ‘yellow USB key’"}),maxLength:100}))}render(){switch(this.state.registrationStatus){case"prepare":return this.renderPrepare();case"pending_registration":return this.renderPending();case"error":return this.renderError();case"success":return this.renderSuccess()}}}ha.displayName="SecurityKeyRegisterModal";class _a extends s.React$1.Component{constructor(e){super(e),this.onAccept=()=>o.__awaiter(this,void 0,void 0,(function*(){this.setState({submitting:!0});const e=yield function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){try{const o="/account/twofactor/revoke_all_trusted_devices",s=yield a.WebRequest({url:o,data:{checkpoint_token:t},subject_user:e});if("OK"===s)return{type:"success"};if("EXPIRED"===s)return{type:"error",error:"EXPIRED"}}catch(e){}return qs}))}(this.props.user.id,this.props.checkpointToken);if(this.setState({submitting:!1}),"success"===e.type)this.props.onAccept();else if("error"===e.type){if("EXPIRED"===e.error)this.props.onPasswordExpired()}else this.setState({unexpectedError:Xs})})),this.state={submitting:!1}}render(){return s.React$1.createElement(Js,{title:this.props.title,acceptButtonText:F.intl.formatMessage({id:"nOO9Qi",defaultMessage:"OK"}),onAccept:this.onAccept,dismissOptions:{text:F.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"}),onDismiss:this.props.onDismiss},id:"twofactor-revoke-all-trusted-devices",submitting:this.state.submitting,errorText:this.state.unexpectedError},s.React$1.createElement("p",null,F.intl.formatMessage({id:"B7S5UI",defaultMessage:"To sign in again you’ll need your phone or a backup option for the second step."})))}}_a.displayName="RevokeAllTrustedDevicesModal";const fa=a.defineMessage({id:"GU8La8",defaultMessage:"Link sent to {email}"}),Ea=a.defineMessage({id:"93LvA5",defaultMessage:"There was an error sending the link"}),va={EMAIL:{id:"email",label:F.intl.formatMessage({id:"Jf36zT",defaultMessage:"By email"}),content:F.intl.formatMessage({id:"5ZXdxv",defaultMessage:"We'll send a link to:"}),buttonText:F.intl.formatMessage({id:"JuuMAX",defaultMessage:"Email me the link"})},PHONE:{id:"phone",label:F.intl.formatMessage({id:"DVUAxh",defaultMessage:"By text"}),content:F.intl.formatMessage({id:"OeOpuZ",defaultMessage:"We'll send a link to:"}),buttonText:F.intl.formatMessage({id:"6sVXnz",defaultMessage:"Text me the link"})},QR:{id:"qr",label:F.intl.formatMessage({id:"Y+Foy6",defaultMessage:"QR code"}),content:F.intl.formatMessage({id:"heeSqP",defaultMessage:"Point your camera at the QR code to download Dropbox."}),buttonText:""}},Aa=s.static_url("/static/metaserver/static/images/growth/personalization/download_app_qr_code_no_margin-vflidVVmZ.png"),Ra=({email:e,dontNotify:t=!1,loggingExtras:i={},sendEmailButtonRef:r,sendTextButtonRef:l,showPrimaryButton:c})=>{const d=va.QR,u=va.EMAIL,[p,g]=s.react.exports.useState(d.id),[m,h]=s.react.exports.useState(Aa);s.react.exports.useEffect((()=>{c&&c(p!==va.QR.id),function(){return o.__awaiter(this,void 0,void 0,(function*(){const e=function(){const e=a.getActiveUser();if(e)return e;const t=a.Viewer.get_viewer().get_users();return t.length>0?t[t.length-1]:void 0}(),t=new a.DefaultUserApiV2Client(e),{image_src:o}=yield t.ns("growth").rpc("get_mobile_app_link_qr_image",void 0,{});return o}))}().then((e=>{h(e)}))}),[]);const _=(()=>{const[e,t]=s.react.exports.useState(null);return s.react.exports.useEffect((()=>{sa().then(t)}),[]),e})();return s.React$1.createElement("div",{className:"send-mobile-link"},s.React$1.createElement(me.Tabs,{selectedTab:p,onSelection:e=>{g(e),c&&c(e!==va.QR.id)}},s.React$1.createElement(me.Tabs.Group,null,s.React$1.createElement(me.Tabs.Tab,{id:d.id},d.label),s.React$1.createElement(me.Tabs.Tab,{id:u.id},u.label)),s.React$1.createElement(me.Tabs.Panel,{tabId:va.EMAIL.id},s.React$1.createElement("div",{className:"input-container"},s.React$1.createElement(a.Text,{tagName:"label",htmlFor:"email-input",size:"small",isBold:!0},va.EMAIL.content),s.React$1.createElement(a.TextInput,{id:"email-input",size:"large",value:e,withRightAccessory:s.React$1.createElement(a.UIIcon,{src:ge.LockLine}),disabled:!0})),s.React$1.createElement(a.Button,{className:"setup-button",variant:"primary",size:"large",onClick:()=>o.__awaiter(void 0,void 0,void 0,(function*(){const o={ctaName:"email_link"};try{a.TeamsWebActionsLogger.log("send_mobile_app_link",Object.assign(Object.assign({},i),{cta_shown:"email_link",sent_address:e})),yield a.WebRequest({url:"/email_mobile_app",data:{recipient_email:e}}),o.success="true",t||n.Notify.success(F.intl.formatMessage(fa,{email:e}))}catch(e){o.success="false",t||n.Notify.error(F.intl.formatMessage(Ea))}finally{be.SMBFunnelLogger.log(be.AMPMetrics.ACTIVATION_MOBILE_LINK_SEND,o)}})),ref:r,style:{display:r?"none":void 0}},va.EMAIL.buttonText),!!r&&s.React$1.createElement("div",{style:{height:2}}),s.React$1.createElement("div",{className:"notification-message"},s.React$1.createElement(a.Text,{tagName:"span",color:"faint"},F.intl.formatMessage({id:"hHhhyq",defaultMessage:"Double check your spam folder."})))),s.React$1.createElement(me.Tabs.Panel,{tabId:va.PHONE.id},s.React$1.createElement("div",{className:"input-container"},_?s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Text,{tagName:"label",size:"small",isBold:!0},va.PHONE.content),s.React$1.createElement(Re.SendAppLinkForm,{phoneInputData:_,onStatusChange:e=>{const{phoneNumber:o,sendStatus:s}=e;s===Re.SendStatus.SENDING?a.TeamsWebActionsLogger.log("send_mobile_app_link",Object.assign(Object.assign({},i),{cta_shown:"text_link",sent_address:o})):s===Re.SendStatus.SUCCESS?be.SMBFunnelLogger.log(be.AMPMetrics.ACTIVATION_MOBILE_LINK_SEND,{ctaName:"text_link",success:"true"}):s===Re.SendStatus.FAILURE&&be.SMBFunnelLogger.log(be.AMPMetrics.ACTIVATION_MOBILE_LINK_SEND,{ctaName:"text_link",success:"false"}),t||Re.showStatusUsingNotify(e)},size:"large",SubmitButton:()=>s.React$1.createElement(a.Button,{className:"setup-button",variant:"primary",size:"large",type:"submit",ref:l,style:{display:l?"none":void 0}},va.PHONE.buttonText),formTypes:[Re.SendAppLinkFormType.SMS],buttonPosition:Re.SendAppLinkButtonPosition.BOTTOM,isFullWidth:!0})):s.React$1.createElement("div",{style:{textAlign:"center"}},s.React$1.createElement(a.Spinner,{"aria-valuetext":"Loading"}))),!!_&&s.React$1.createElement(Re.SendAppLinkFormDisclaimer,{size:"large",color:"faint"})),s.React$1.createElement(me.Tabs.Panel,{tabId:va.QR.id},s.React$1.createElement("div",{className:"input-container"},s.React$1.createElement("div",{className:"qr-code-container"},s.React$1.createElement("img",{className:"qr-code-img",alt:F.intl.formatMessage({id:"downloadAppQRCodeImageAlt",defaultMessage:"Download Dropbox using this QR code"}),src:m}),s.React$1.createElement("div",{className:"qr-code-text-container"},s.React$1.createElement(a.Text,{tagName:"p",size:"standard"},va.QR.content)))))))};Ra.displayName="SendMobileLinkWithoutCss";const Sa=a.requireCssWithComponent(Ra,["/static/metaserver/static/css/admin/teams/essential_setup/send_mobile_link-vflGQi7zO.css"]);class ya extends s.React$1.PureComponent{constructor(e){super(e),this.submitButtonRef=s.React$1.createRef(),this.showPrimaryButton=e=>{this.setState({showPrimaryButton:e})},this.closeModal=()=>{this.props.onDismiss()},this.submit=()=>{this.submitButtonRef.current&&this.submitButtonRef.current.click(),this.props.dismissAfterSubmit&&this.closeModal()},this.state={showPrimaryButton:!0}}render(){const{linkedEmail:e,loggingExtras:t,showSendMobileLinkModal:o}=this.props;return s.React$1.createElement(a.Modal,{className:"send-mobile-link-modal",open:o,width:"small",onRequestClose:this.closeModal},s.React$1.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard"},s.React$1.createElement(a.Title,null,F.intl.formatMessage({id:"HzJQla",defaultMessage:"How should we send the download link to your mobile device?"}))),s.React$1.createElement(a.Modal.Body,null,s.React$1.createElement(Sa,{email:e,sendTextButtonRef:this.submitButtonRef,sendEmailButtonRef:this.submitButtonRef,loggingExtras:t,showPrimaryButton:this.showPrimaryButton})),s.React$1.createElement(a.Modal.Footer,null,s.React$1.createElement(a.Button,{variant:"opacity",onClick:this.closeModal},F.intl.formatMessage({id:"kB1zBv",defaultMessage:"Close"})),this.state.showPrimaryButton&&s.React$1.createElement(a.Button,{variant:"primary",onClick:this.submit},F.intl.formatMessage({id:"wHAaDF",defaultMessage:"Send me a link"}))))}}ya.displayName="SendMobileLinkModal";let wa=null;class Ta extends s.React$1.PureComponent{constructor(e){super(e),this.handleDismissSendMobileLinkModal=()=>{this.setState({showSendMobileLinkModal:!1})},this.handleHideOpenInMobileSnackbar=()=>{this.setState({showOpenInMobileSnackbar:!1})},this.state={isSendingNotification:!1,showSendMobileLinkModal:!1,showOpenInMobileSnackbar:!1,dismissSendMobileLinkModalAfterSubmit:!1}}componentDidMount(){wa||(wa=this)}componentWillUnmount(){wa=null}render(){const{showSendMobileLinkModal:e,showOpenInMobileSnackbar:t}=this.state,o=this.props.user&&s.React$1.createElement(ya,{linkedEmail:this.props.user.email,showSendMobileLinkModal:e,onDismiss:this.handleDismissSendMobileLinkModal,dismissAfterSubmit:this.state.dismissSendMobileLinkModalAfterSubmit,loggingExtras:Ds}),i=s.React$1.createElement(a.Snackbar$1,{className:"open-in-mobile-snackbar",open:t,onRequestClose:this.handleHideOpenInMobileSnackbar,timeout:0},s.React$1.createElement(a.Text,{inverse:!0},s.React$1.createElement(a.UIIcon,{className:"open-in-mobile-snackbar__icon",src:a.CheckmarkCircleLine})),s.React$1.createElement(a.Snackbar$1.Message,null,F.intl.formatMessage({id:"U/fUL+",defaultMessage:"Check your device for a notification"})),s.React$1.createElement(a.Snackbar$1.Actions,null,s.React$1.createElement(a.Button,{variant:"transparent",inverse:!0,onClick:()=>{var e;return this.sendNotificationToPhone((null===(e=this.props.folder)||void 0===e?void 0:e.fq_path)||"/",this.state.campaign)}},F.intl.formatMessage({id:"A+nrfT",defaultMessage:"Send it again"})),s.React$1.createElement(a.Button,{variant:"transparent",inverse:!0,onClick:this.handleHideOpenInMobileSnackbar},F.intl.formatMessage({id:"JBINyn",defaultMessage:"Close"}))));return s.React$1.createElement(s.React$1.Fragment,null,o,i)}sendNotificationToPhone(e,t){return o.__awaiter(this,void 0,void 0,(function*(){this.setState({isSendingNotification:!0,campaign:t});try{const o=new a.DefaultUserApiV2Client(this.props.user),{success:s}=yield o.ns("growth").rpc("send_open_mobile_app_notification",{folder_path:e,campaign:t},{});if(!s)throw new Error("Not sent");this.setState({showOpenInMobileSnackbar:!0})}catch(e){this.setState({showSendMobileLinkModal:!0})}finally{this.setState({isSendingNotification:!1})}}))}showMobileLinkModal(e=!1){this.setState({showSendMobileLinkModal:!0,dismissSendMobileLinkModalAfterSubmit:e})}}Ta.displayName="OpenInMobileModal";class ba extends s.React$1.PureComponent{static sendNotificationToPhone(e,t){return o.__awaiter(this,void 0,void 0,(function*(){wa&&!wa.state.isSendingNotification&&(yield wa.sendNotificationToPhone(e,t))}))}static showMobileLinkModal(e=!1){wa&&!wa.state.showSendMobileLinkModal&&wa.showMobileLinkModal(e)}render(){return s.React$1.createElement(Ta,Object.assign({},this.props))}}ba.displayName="OpenInMobileModalController";const Ma=()=>({logOverflowMenuImpression:Ia,logMoreActionsCtaClicked:Fa,logSuggestedWorkflowItemClicked:Oa}),Ia=(e,t)=>{a.logEvent({class:"file_actions",action:"shown",object:"suggested_workflows_overflow_menu",properties:{experimentVariant:e,fileType:Oe.getFileTypeFromString(t)}})},Fa=(e,t)=>{a.logEvent({class:"file_actions",action:"click",object:"suggested_workflows_more_actions",properties:{experimentVariant:e,fileType:Oe.getFileTypeFromString(t)}})},Oa=(e,t,o,s)=>{a.logEvent({class:"file_actions",action:"click",object:"suggested_workflows_menu_item",properties:{experimentVariant:e,fileType:Oe.getFileTypeFromString(t),overflowMenuStyle:o,overflowMenuActionType:s}})},Ca=$o(),Na={selectedFilesSelector:a.selectedFiles,userSelector:a.user,contextSelector:a.context,overQuotaDataSelector:Xo,experimentSelector:Jo,isSearchMode:!1,actionSurface:a.ActionSurfaceLogValue.ACTION_BAR,currentFolderInfo:a.getCurrentFolderInfo,flowsUserAutomation:ee.getUserAutomation,browsePostTTIData:a.browsePostTTIData,browsePostTTIExperiments:a.browsePostTTIExperiments,hasLinkedMobile:a.hasLinkedMobile,accessibilityConfig:e=>Ca(e,Na),rightRailCollapsedState:a.isRightRailCollapsed,isInsideBackupFolder:a.isInsideBackupFolder,isSelectedBackupFolder:a.isSelectedBackupFolder,backupInfoByFile:a.folderBackupInfoByFile,backupInfoByPath:a.folderBackupInfoByPath},Da=Vo(),Pa=T.createActionBarActionSelector(),La={handleAction:T.actionHandler,handleActionMenuToggle:T.actionMenuToggleHandler,setOverflowMenuCoordinates:j.setOverflowMenuCoordinates,setOverflowMenuOpenRequest:j.setOverflowMenuOpenRequest,setOverflowMenuCloseRequest:j.setOverflowMenuCloseRequest,setCreateMenuOpenRequest:j.setCreateMenuOpenRequest,setCaptureAccess:G.setCaptureAccess};class xa extends s.React$1.Component{constructor(){super(...arguments),this.state={overflowMenuOpenRequest:void 0},this.actionHandler={handleAction:(e,t)=>{e.event.stopPropagation(),t?Na.actionSurface=a.ActionSurfaceLogValue.RIGHT_CLICK_MENU:e.source===y.ActionBarActionEventSource.BUTTON||e.source===y.ActionBarActionEventSource.BUTTON_MENU?Na.actionSurface=a.ActionSurfaceLogValue.ACTION_BAR:Na.actionSurface=a.ActionSurfaceLogValue.OVERFLOW_MENU,this.props.handleAction(e,Na,Ko)},handleMenuToggle:({type:e,isOpen:t})=>{this.props.handleActionMenuToggle({type:e,isOpen:t},Na,Qo)}},this.onOverflowMenuToggle=e=>{if(e.isOpen){const{num_files_selected:e,num_folders_selected:t}=a.countFilesAndFolders(this.props.selectedFiles);a.logBrowseAction({uid:this.props.user.id,action:a.WebUserActionLogEvent.OPEN_OVERFLOW_MENU,num_files_selected:e,num_folders_selected:t,action_surface:this.props.overflowMenuCoordinates?a.ActionSurfaceLogValue.RIGHT_CLICK_MENU:a.ActionSurfaceLogValue.ACTION_BAR}),this.props.setOverflowMenuCloseRequest()}else this.props.setOverflowMenuCoordinates(),this.props.setOverflowMenuCloseRequest()},this.resetOverflowMenuCoordinates=(e,t)=>{this.props.overflowMenuCoordinates&&(this.props.setOverflowMenuCoordinates(),this.props.setOverflowMenuCloseRequest({autoFocus:!1})),(null==t?void 0:t.size)&&e.stopPropagation()}}componentDidMount(){void 0===this.props.canAccessCapture&&Fe.fetchCaptureAccess(this.props.user).then((e=>{this.props.setCaptureAccess(e)}))}render(){const{browseActionBarActions:e,accessibilityConfig:t,responsive:o,path:i,selectedFiles:n,user:r,showSharingView:l,selectedOrCurrentFolder:c,showBrowseViewToggle:d,overflowMenuTitle:u,canShowSelectionIndicatorInToolbar:p,isRightRailCollapsed:g,overflowMenuOpenRequest:m,overflowMenuCloseRequest:h,overflowMenuCoordinates:_,createMenuOpenRequest:f,setCreateMenuOpenRequest:E,expSuggestedWorkflowsVariant:v}=this.props,A=o.isResponsive?o.isMatchedLarge?y.ResponsiveSize.DESKTOP:o.isMatchedMedium?y.ResponsiveSize.TABLET:y.ResponsiveSize.MOBILE:y.ResponsiveSize.DESKTOP,R=p?s.React$1.createElement("div",{className:"family-brws-selection-view-mode-container"},s.React$1.createElement(Ie.SelectionIndicator,{responsive:o,selectedFilesCount:n.size,rightRailCollapsed:g}),s.React$1.createElement(es,{user:r,className:"brws-action-toolbar-view-mode-toggle"})):s.React$1.createElement(es,{user:r,className:"brws-action-toolbar-view-mode-toggle"}),w=1===n.size?n.first().ext:void 0;return s.React$1.createElement("div",{className:a.classnames("brws-action-toolbar"),style:{width:this.props.fixedWidth},onClick:e=>this.resetOverflowMenuCoordinates(e,n)},s.React$1.createElement(Zo,{path:i,selectedFiles:n}),s.React$1.createElement(S.ActionBar,{className:"brws-action-toolbar-actionbar",actionHandler:this.actionHandler,actions:e,intl:F.intl,responsive:!0,responsiveSize:A,accessibilityConfig:t,handleOverflowMenuToggle:this.onOverflowMenuToggle,overflowMenuOpenRequest:m,overflowMenuCloseRequest:h,overflowMenuTitle:u,expActionBarRedesignEnabled:!0,overflowMenuCoordinates:_,hideOverflowMenuHeader:!1,resolveOverflowMenuOpenRequest:()=>{this.props.setOverflowMenuOpenRequest(void 0)},canShowSelectionIndicatorInToolbar:p,createMenuOpenRequest:f,resolveCreateMenuOpenRequest:()=>{E()},expSuggestedWorkflowsVariant:v,expSuggestedWorkflowsLoggingCallbacks:Ma(),fileExtension:w,logPDFEditImpression:()=>{a.logPDFEditImpression(r.id,n,_?a.ActionSurfaceLogValue.RIGHT_CLICK_MENU:a.ActionSurfaceLogValue.ACTION_BAR)},logOverflowMenuItemImpression:e=>{a.logOverflowMenuItemImpression(r.id,n,_?a.ActionSurfaceLogValue.RIGHT_CLICK_MENU:a.ActionSurfaceLogValue.ACTION_BAR,e)}}),l&&s.React$1.createElement("div",{className:"brws-action-toolbar-sharing-view-container"},s.React$1.createElement(Cs,{useCompactMode:A!==y.ResponsiveSize.DESKTOP})),d&&R,s.React$1.createElement(ba,{folder:c,user:r}))}}xa.displayName="BrowseActionToolbarController";const ka=a.connect(((e,t)=>{var o;const s=a.user(e),i=a.context(e),n=a.selectedFiles(e).toList(),r=a.backups(e),l=null===(o=null==r?void 0:r.find((e=>e.fqPath===i.currentFQPath)))||void 0===o?void 0:o.displayName,c=r&&n.isEmpty()&&l?l:Me.getTitle(n,s,i,F.intl),d=t.responsive.isResponsive&&!t.responsive.isMatchedLarge&&!t.responsive.isMatchedMedium,u=t.responsive.isResponsive&&!t.responsive.isMatchedLarge&&t.responsive.isMatchedMedium,p=d?Ho:u?Wo:Da,g=Na.accessibilityConfig?Na.accessibilityConfig(e):void 0,m=Na.selectedFilesSelector(e),h=1===m.count()&&m.first().is_dir?m.first():Na.currentFolderInfo(e);return{browseActionBarActions:Pa(e,Na,p,ko),user:s,accessibilityConfig:g,selectedFiles:a.selectedFiles(e),path:a.path(e),showBrowseViewToggle:a.showBrowseViewToggleInToolbar(e),showSharingView:a.showShareViewInToolbar(e,t.responsive),fileActionsExperiments:Na.experimentSelector(e),selectedOrCurrentFolder:h,overflowMenuTitle:c,canShowSelectionIndicatorInToolbar:a.showSelectionIndicatorInToolbar(e),isRightRailCollapsed:a.isRightRailCollapsed(e),overflowMenuOpenRequest:a.overflowMenuOpenRequest(e),overflowMenuCloseRequest:a.overflowMenuCloseRequest(e),overflowMenuCoordinates:a.overflowMenuCoordinates(e),createMenuOpenRequest:a.createMenuOpenRequest(e),canAccessCapture:G.getCaptureAccess(e),expSuggestedWorkflowsVariant:a.expSuggestedWorkflowsVariant(e)}}),La)(xa),Ba=({responsive:e,fixedWidth:t})=>{const o=a.useSelector(a.context),i=a.useSelector(a.browseLoadingState),n=void 0!==t?t+28:t;return s.React$1.createElement(s.React$1.Fragment,null,"/"===o.currentFQPath?s.React$1.createElement(Qt,{canRenderItems:!0,isOnBrowse:!0}):null,[a.LoadingState.LOADED,a.LoadingState.LOAD_ERROR,a.LoadingState.LOADING_REMAINING_PAGES,a.LoadingState.UPDATING_FILTERED_VIEW].includes(i)&&!o.isInsideVaultFolder&&!o.isInFamilySharedFolder&&s.React$1.createElement(ka,{responsive:e,fixedWidth:n}))};a.injectInternalStyle("metaserver/static/js/browse/filtered_view/empty_state.module.out.css",(e=>"._emptyContainer_upjf8_1{display:flex;flex-direction:row;height:282px;justify-content:center;width:80%}._emptyContainerResponsive_upjf8_9{align-items:center;flex-direction:column;margin-right:28px;margin-top:80px}._emptyContent_upjf8_16{align-items:flex-start;display:flex;flex-direction:column;justify-content:center;padding:var(--spacing__unit--2)}._contentText_upjf8_24{margin:var(--spacing__unit--2) 0}._imageResponsive_upjf8_28{width:250px}"));const Ua="_emptyContainer_upjf8_1",$a="_emptyContainerResponsive_upjf8_9",Va="_emptyContent_upjf8_16",Ga="_contentText_upjf8_24",Wa="_imageResponsive_upjf8_28",Ha=({selectedFilter:e,responsive:t})=>{if(e===a.BrowseFilterType.NONE)return null;const o=a.EMPTY_STATE_CONFIG[e];return s.React$1.createElement("div",{className:a.classnames({[Ua]:!0,[$a]:!t.isMatchedMedium})},s.React$1.createElement(a.Image,{className:a.classnames({[Wa]:!t.isMatchedMedium}),src:o.illustrationUrl,srcHiRes:o.illustrationHiResUrl,alt:""}),s.React$1.createElement("div",{className:Va},s.React$1.createElement(a.Title,null,o.title),s.React$1.createElement(a.Text,{className:Ga},o.subtitle),s.React$1.createElement(a.Button,{onClick:()=>{a.getStoreForBrowse().dispatch(j.setFilterTypes([]))},variant:"outline"},a.EMPTY_STATE_CTA_BUTTON)))},ja="popstate";const Ya=new class{constructor(){this.navigationHistory=[],this.onPopState=()=>{const e=this.peekItem(1);e&&e.url===a.get_href()?this.wasLastNavigationBack=!0:(this.wasLastNavigationBack=!1,this.clear())}}clear(){this.navigationHistory=[]}popItem(){return this.navigationHistory.pop()}pushItem(e){this.navigationHistory.push(e)}peekItem(e=0){if(this.navigationHistory.length>e)return this.navigationHistory[this.navigationHistory.length-1-e]}register(){window.addEventListener(ja,this.onPopState),this.navigationHistory=[]}unregister(){window.removeEventListener(ja,this.onPopState),this.navigationHistory=[]}getLastScrollPosition(e){if(this.wasLastNavigationBack||this.pushItem({url:a.get_href(),fq_path:e}),this.wasLastNavigationBack){this.wasLastNavigationBack=!1;const e=this.popItem();return e&&e.fq_path}if(this.wasNavigateUpFolder){this.wasNavigateUpFolder=!1;const e=this.peekItem(1);return e&&e.fq_path}}navigateUpFolder(){this.wasNavigateUpFolder=!0}},qa=({width:e})=>s.React$1.createElement("img",{"aria-hidden":"true",src:s.static_url("/static/metaserver/static/images/file_imports/google_drive_icon-vfl1z5-Cq.svg"),width:e}),za=({width:e})=>s.React$1.createElement("img",{"aria-hidden":"true",src:s.static_url("/static/metaserver/static/images/file_imports/microsoft_onedrive_icon-vflLR7ql-.svg"),width:e});function Ka(e){return{class:"files_browser",action:"select",object:"import_empty_state",properties:e}}const Qa=["google","google_drive","google_photos","one_drive","icloud","microsoft"];function Xa(e){return Qa.find((t=>t===(null==e?void 0:e.toLowerCase())))}const Ja=({children:e,popoverOptions:t,buttonVariant:o="transparent",withIconLeft:i})=>1===t.length?s.React$1.createElement(a.Button,{className:"empty-state-drop-target__cta",onClick:t[0].handleClick,variant:"primary"},e):s.React$1.createElement(a.Menu.Wrapper,{onSelection:({handleClick:e})=>{e()},className:"empty-state-drop-target__cta"},(({getContentProps:n,getTriggerProps:r})=>s.React$1.createElement(s.React$1.Fragment,null,i?s.React$1.createElement(a.Button,Object.assign({withIconLeft:s.React$1.createElement(a.UIIcon,{src:i}),variant:o},r()),e):s.React$1.createElement(a.Button,Object.assign({variant:o},r()),e),s.React$1.createElement(a.Menu.Content,Object.assign({},n()),s.React$1.createElement(a.Menu.Segment,null,t.map(((e,t)=>s.React$1.createElement(a.Menu.ActionItem,{key:t,value:e,className:`popover-option__${String(e.iconName)}`,withLeftAccessory:s.React$1.createElement(a.UIIcon,{src:e.iconSrc,className:"cta-option-block__icon"})},s.React$1.createElement(a.Text,null,e.displayName)))))))));Ja.displayName="TertiaryLinkPopover";const Za=()=>"V1"===h.DEFAULT_DRAG_AND_DROP||"V2"===h.DEFAULT_DRAG_AND_DROP,ei=({isDraggingFiles:t,onMount:o,popoverOptions:i,IconComponent:n=a.SpotIcon,children:r})=>{var l;s.react.exports.useEffect((()=>{o(),a.OALogger.logToProEvents(a.FileListEmptyUploadEvents.VIEW_EMPTY_STATE)}),[]);const{description:c,buttonText:d,googleDriveButtonText:u,onedriveButtonText:p,fileImportsOrText:g}={description:F.intl.formatMessage({id:"c36Skn",defaultMessage:"Drag files and folders here to upload"}),buttonText:Za()?"":F.intl.formatMessage({id:"hCAGEJ",defaultMessage:"Add from computer"}),googleDriveButtonText:F.intl.formatMessage({id:"6jhwNV",defaultMessage:"Add from Google Drive"}),onedriveButtonText:F.intl.formatMessage({id:"o1L7D0",defaultMessage:"Add from Microsoft OneDrive"}),fileImportsOrText:F.intl.formatMessage({id:"NRKTKN",defaultMessage:"or"})},m=a.useSelector((e=>a.getBrowseState(e))),{fileImportsEntryPointsEmptyState:h}=m.experiments,_=()=>{a.logEvent(Ka({actionSurface:"browse",experimentVariant:h,externalProvider:Xa("google_drive")})),new Promise((function(t,o){e(["./c_file_imports_ui_entry"],t,o)})).then((e=>{e.clickOnImportFromGoogleDrive({currentPath:m.path})}))},f=(null===(l=m.user)||void 0===l?void 0:l.cdm_tmf_path)||"/",E=m.path===f?h:"OFF",v=a.useSelector(De.getIsDropzoneActive);return s.react.exports.useEffect((()=>{"V1"!==E&&"V2"!==E&&"V3"!==E||(a.logEvent({class:"files_browser",action:"shown",object:"import_empty_state",properties:{actionSurface:"browse",experimentVariant:E}}),a.logExposure({feature:"file_imports_entry_points_empty_state",variant:E}))}),[E]),s.React$1.createElement("div",{className:a.classnames("empty-state-drop-target",{"empty-state-drop-target--drag-active":t&&!Za(),"empty-state-drop-target--drag-available":!t&&!v,"empty-state-drop-target--drag-active-blue":v&&Za()})},s.React$1.createElement("div",{className:"empty-state-drop-target__copy"},Za()?s.React$1.createElement("div",{style:{paddingTop:"100px"}},s.React$1.createElement(a.Text,{color:"faint"},s.React$1.createElement(n,{src:A.UploadFolderSpot}),s.React$1.createElement("div",null,s.React$1.createElement("strong",null,F.intl.formatMessage({id:"OxWWfA",defaultMessage:"Drop files here to upload,"}))," ",s.React$1.createElement("br",null)," ",F.intl.formatMessage({id:"zvJBaT",defaultMessage:"or use the 'Upload' button"})))):s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(n,{className:"empty-state-drop-target__icon",src:A.UploadFolderSpot}),s.React$1.createElement("div",{className:"empty-state-drop-target__text"},c," ")," "),"V1"===E?s.React$1.createElement("div",{className:"empty-state-drop-target__gdrive_buttons_v1"},s.React$1.createElement(a.Button,{variant:"transparent",onClick:_},u),s.React$1.createElement("div",null,g),s.React$1.createElement(Ja,{buttonVariant:"transparent",popoverOptions:i},d)):"V2"===E?s.React$1.createElement("div",{className:"empty-state-drop-target__gdrive_buttons_v2"},s.React$1.createElement(a.Button,{withIconLeft:s.React$1.createElement("div",{className:"empty-state-drop-target__gdrive_icon"},s.React$1.createElement(qa,null)),variant:"opacity",onClick:_},u),s.React$1.createElement(Ja,{withIconLeft:b.AddLine,buttonVariant:"outline",popoverOptions:i},d)):"V3"===E?s.React$1.createElement("div",{className:"empty-state-drop-target__imports_buttons_v3"},s.React$1.createElement(a.SplitButton,{withIconLeft:s.React$1.createElement("div",{className:"empty-state-drop-target__gdrive_icon"},s.React$1.createElement(qa,null)),renderMenu:({buttonProps:t})=>s.React$1.createElement(a.Menu.Wrapper,{onSelection:t=>{"onedrive"===t&&(a.logEvent(Ka({actionSurface:"browse",experimentVariant:h,externalProvider:Xa("one_drive")})),new Promise((function(t,o){e(["./c_file_imports_ui_entry"],t,o)})).then((e=>{e.clickOnImportFromOneDrive({currentPath:m.path})})))}},(({getTriggerProps:e,getContentProps:o})=>s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Button,Object.assign({"aria-label":"Show options"},t,e())),s.React$1.createElement(a.Menu.Content,Object.assign({},o(),{placement:"bottom-end"}),s.React$1.createElement(a.Menu.Segment,null,s.React$1.createElement(a.Menu.ActionItem,{key:"onedrive",value:"onedrive",withLeftAccessory:s.React$1.createElement(a.UIIcon,{src:za})},p)))))),variant:"opacity",onClick:_},u),s.React$1.createElement(Ja,{withIconLeft:b.AddLine,buttonVariant:"outline",popoverOptions:i},d)):s.React$1.createElement("div",{className:"empty-state-drop-target__button"},s.React$1.createElement(Ja,{popoverOptions:i},d))),r&&s.React$1.createElement("div",{className:"empty-state-drop-target__children"},r))};ei.displayName="EmptyStateDropTarget";const ti=e=>{const t=a.getStoreForBrowse(),i=a.useSelector(a.overflowMenuCoordinates),n=a.useSelector(a.isValidEnhancedRightClickVariant),r=()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield t.dispatch(j.setOverflowMenuCloseRequest({autoFocus:!1})),yield o.__awaiter(void 0,void 0,void 0,(function*(){yield t.dispatch(j.setOverflowMenuCoordinates(void 0)),yield t.dispatch(j.setOverflowMenuOpenRequest(void 0)),yield t.dispatch(j.setOverflowMenuCloseRequest(void 0))}))})),l=e=>{e.key!==a.Key_enum.Key.Escape&&27!==e.keyCode||r()};return s.React$1.useEffect((()=>(window.addEventListener("keydown",l,!0),()=>{window.removeEventListener("keydown",l)})),[]),s.React$1.createElement("div",{onClick:e=>{r()},onContextMenu:e=>o.__awaiter(void 0,void 0,void 0,(function*(){e.preventDefault(),e.stopPropagation();const{clientX:o,clientY:s}=e;i&&(yield r()),setTimeout((()=>{t.dispatch(j.setOverflowMenuCoordinates([o,s])),t.dispatch(j.setOverflowMenuOpenRequest({autoFocus:!1}))}),200)})),className:a.classnames({"maestro-browse-app-content--full-height-container":n})},e.children)};ti.displayName="BrowseRightClickActionMenu";const oi=a.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield a.waitForTTI();const{InFolderActivationPartialStateErrorBoundary:t}=yield new Promise((function(t,o){e(["./c_in-folder-activation_in_folder_activation"],t,o)}));return t}))}),si=a.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{InFolderActivationEmptyStateDropTargetErrorBoundary:t}=yield new Promise((function(t,o){e(["./c_in-folder-activation_in_folder_activation"],t,o)}));return t}))});function ai(e){return-1!==["V3","V4","V5","V6","V7","V8","V9","V10","V11","V12","V13"].indexOf(e)}class ii{constructor(e,t){this.uid=e,this.targetPath=t}logPredictionEvent(e,t,s){return o.__awaiter(this,void 0,void 0,(function*(){const o=Math.round(Date.now()/1e3),a=t?e.map((e=>({prediction_uuid:e.predictionId,utc_timestamp:o}))):void 0,i=s?e.map((e=>({action:s,prediction_uuid:e.predictionId,utc_timestamp:o}))):void 0;yield(new xe.TeamApiV2Client).ns("ml_platform").rpc("log_predictions_events",{predict_requested:void 0,viewed:a,actioned:i},{subjectUserId:this.uid})}))}logOpenSuggestedItem(e,t,s,i){return o.__awaiter(this,void 0,void 0,(function*(){const o=a.WebUserActionLogEvent.SUGGEST_OPEN_SUGGESTED_ITEM;yield a.WebUserActionLog.log(this.uid,o,{source:i,position:s,clickOrigin:t,isDir:e.isDir,suggestId:e.suggestId,mlModel:e.mlModel,depth:a.depth(this.targetPath)}),yield this.logPredictionEvent([e],void 0,o)}))}logOpenParentFolder(e,t,s,i){return o.__awaiter(this,void 0,void 0,(function*(){const t=a.WebUserActionLogEvent.SUGGEST_OPEN_PARENT_FOLDER;yield a.WebUserActionLog.log(this.uid,t,{source:i,position:s,clickOrigin:"parent-folder",isDir:!0,suggestId:e.suggestId,mlModel:e.mlModel,depth:a.depth(this.targetPath)}),yield this.logPredictionEvent([e],void 0,t)}))}logClickDismissSuggestedItem(e,t,o,s){a.WebUserActionLog.log(this.uid,a.WebUserActionLogEvent.SUGGEST_CLICK_DISMISS_SUGGESTED_ITEM,{source:s,position:o,clickOrigin:"dismiss-suggested-item",isDir:e.isDir,suggestId:e.suggestId,mlModel:e.mlModel,depth:a.depth(this.targetPath)})}logDismissSuggestedItem(e,t,o,s,i){const n=a.WebUserActionLogEvent.SUGGEST_DISMISS_SUGGESTED_ITEM;a.WebUserActionLog.log(this.uid,n,{source:i,position:o,clickOrigin:"dismiss-suggested-item",isDir:e.isDir,suggestId:e.suggestId,mlModel:e.mlModel,depth:a.depth(this.targetPath)}),this.logPredictionEvent([e],void 0,n)}logSuggestedShown(e,t,o,s){a.WebUserActionLog.log(this.uid,a.WebUserActionLogEvent.SUGGEST_SECTION_SHOWN,{source:s,items_shown:o,num_items:e,variant:t,depth:a.depth(this.targetPath)})}logShowHideSection(e,t){e?a.WebUserActionLog.log(this.uid,a.WebUserActionLogEvent.SUGGEST_HIDE_SECTION,{source:t,depth:a.depth(this.targetPath)}):a.WebUserActionLog.log(this.uid,a.WebUserActionLogEvent.SUGGEST_UNHIDE_SECTION,{source:t,depth:a.depth(this.targetPath)})}logSectionRendered(e,t){a.WebUserActionLog.log(this.uid,a.WebUserActionLogEvent.SUGGEST_SECTION_RENDERED,{renderTimeMS:e,source:t,depth:a.depth(this.targetPath)})}logRenderedSuggestedItems(e,t){const o=a.WebUserActionLogEvent.SUGGEST_RENDER_SUGGESTED_ITEM;for(let s=0;s<e.length;s++){const i=e[s];a.WebUserActionLog.log(this.uid,o,{source:t,index:s,isDir:i.isDir,suggestId:i.suggestId,mlModel:i.mlModel,depth:a.depth(this.targetPath)})}this.logPredictionEvent(e,o,void 0)}}const ni=(e,t)=>new Promise(((s,i)=>o.__awaiter(void 0,void 0,void 0,(function*(){try{const o=yield function(e,t){const o=t.map((e=>({id:e.resourceId,type:a.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID})));return new Promise(((t,s)=>{a.SilentBackgroundRequest({url:"/home_feed/get_file_metadata",type:"POST",subject_user:e.id,dataType:"json",data:{resources_json:JSON.stringify(o)},success:e=>{t(e)},error:e=>{s(e)}})}))}(e,t),i=new Map;for(const e of o)i.set(ri(e.id),e.file_metadata);s(i)}catch(e){i(e)}}))));const ri=e=>e,li=new class{constructor(){this.getCache=()=>o.__awaiter(this,void 0,void 0,(function*(){return this.cache})),this.prewarm=(e,t)=>o.__awaiter(this,void 0,void 0,(function*(){return this.cache=ni(e,t),this.cache.then((()=>{}))})),this.getFileMetadata=e=>this.getCache().then((t=>t.get(e)))}},ci=s.react.exports.createContext(null),di=({user:e,fetchSuggestedItemsInFolder:t,source:o,trackDismissSuggestedItem:i,openSuggestedItem:n,openSuggestedParent:r,folderPathString:l,prefetchSuggestedItems:c,children:d,_logger:u})=>{var p;const g=Pe.getFolderPath(l),[m,h]=s.react.exports.useState(Pe.SuggestLoadingState.PREFETCHING),[_,f]=s.react.exports.useState([]),[E,v]=s.react.exports.useState(null!==(p=a.UserLocalStorage.get(e.id,Pe.SUGGEST_SECTION_IS_HIDDEN_LOCAL_STORAGE_KEY))&&void 0!==p&&p),[A,R]=s.react.exports.useState(null),[S,y]=s.react.exports.useState(g),w=s.react.exports.useMemo((()=>null!=u?u:new ii(e.id,S)),[u,e,S]),T=s.react.exports.useCallback((t=>{const{items:o,modelVariant:s}=t;R(s),f(o),h(Pe.SuggestLoadingState.SUCCESS),li.prewarm(e,o)}),[e,R,f,h]),b=s.react.exports.useCallback((s=>{h(Pe.SuggestLoadingState.FETCHING),t(e,10,s,o).then(T).catch((()=>{h(Pe.SuggestLoadingState.FAILURE)}))}),[h,t,e,o,T]),M=s.react.exports.useCallback((()=>{v((t=>{const s=!t;return a.UserLocalStorage.set(e.id,Pe.SUGGEST_SECTION_IS_HIDDEN_LOCAL_STORAGE_KEY,s),w.logShowHideSection(s,o),s}))}),[v,w,o,e.id]),I=s.react.exports.useCallback(((e,t)=>i(e,t,o).then((()=>{f((e=>e.map((e=>Object.assign(Object.assign({},e),{isDismissed:e.key===t.key})))))}))),[f,i,o]),F=s.react.exports.useCallback((e=>()=>{e.isDismissed&&f((t=>t.filter((t=>t.key!==e.key))))}),[f]),O=s.react.exports.useCallback((()=>{const e=()=>b(S);m===Pe.SuggestLoadingState.PREFETCHING?c(T,e):e()}),[m,T,b,c,S]);return s.react.exports.useEffect((()=>{O()}),[]),s.react.exports.useEffect((()=>{m!==Pe.SuggestLoadingState.PREFETCHING&&(b(g),y(g))}),[g,y,b]),s.react.exports.createElement(ci.Provider,{value:{loadingState:m,logger:w,isHiddenByUser:E,suggestedItems:_,onToggleSuggestVisibility:M,dismissSuggestedItem:I,removeSuggestionFromUi:F,user:e,source:o,modelVariant:A,openSuggestedItem:n,openSuggestedParent:r,currentFolderPath:S}},d)};di.displayName="SuggestionsContextProvider";const ui=a.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield a.waitForTTI();const{SuggestNonEmpty:t}=yield new Promise((function(t,o){e(["./c_content_suggestions_suggest_nonempty"],t,o)}));return t})),loading:e=>s.React$1.createElement(Pe.SuggestLoadingInner,Object.assign({},e))}),pi=(e,t)=>{if(!t)return[...e];const o=[];for(const s of e)gi(s,t)||o.push();return o},gi=(e,t)=>{for(const o of t)if(mi(e,o))return!0;return!1},mi=(e,t)=>e.resourceId===t.resourceId,hi=[{".tag":"file"},{".tag":"paper_document"}],_i=ke.createApiv2Query({requestMethod:"suggest:get_suggested_v2",queryFn:({apiArg:e})=>({signal:t})=>(new a.UserApiV2Client).ns("suggest").rpc("get_suggested_v2",e,{subjectUserId:a.mustGetActiveUserId(),signal:t}),optionsFn:e=>Object.assign(Object.assign({},e),{cacheTime:1/0,staleTime:1/0})}),fi=e=>{const t=((e,t)=>{const o=s.react.exports.useRef(null);return s.react.exports.useCallback((s=>{var a,i;const n=(null===(a=o.current)||void 0===a?void 0:a.containingFolderPath)!==s.containingFolderPath?null:o.current;!s.modelVariant||(null==n?void 0:n.suggestionAvailableCount)===s.suggestionAvailableCount&&(null==n?void 0:n.modelVariant)===s.modelVariant||e.logSuggestedShown(s.suggestionAvailableCount,s.modelVariant,s.suggestionSlotCount,t);const r=pi(s.renderedItems,null==n?void 0:n.renderedItems);r.length>0&&e.logRenderedSuggestedItems(r,t),o.current=Object.assign(Object.assign({},s),{renderedItems:[...null!==(i=null==n?void 0:n.renderedItems)&&void 0!==i?i:[],...r]})}),[e,t])})(e.logger,e.source),[o,a]=s.React$1.useState(!1),i=s.React$1.useRef(Date.now());if(e.isHiddenByUser)return null;const n=()=>{if(!o){const t=Date.now()-i.current;e.logger.logSectionRendered(t,e.source),a(!0)}},{itemsToShow:r,tileWidth:l,tileMarginRight:c,useTileWidthForCard:d,filenameMaxChars:u,shouldTruncateFilenameOnTileHover:p,filenameWidthAfterTruncation:g,subheaderLabelMaxChars:m,showIconsInsteadOfThumbnails:h,fileIconSize:_}=e.getLayoutFn?e.getLayoutFn(e.containerWidth,e.responsive,e.suggestedItems.length,Pe.isLoading(e.loadingState)):Pe.getLayout(e.containerWidth);if(Pe.isLoading(e.loadingState))return s.React$1.createElement(Pe.SuggestLoadingInner,{isHiddenByUser:e.isHiddenByUser,itemsToShow:r,tileWidth:l,tileMarginRight:c,suggestLoadingTile:e.suggestLoadingTile});if(e.loadingState===Pe.SuggestLoadingState.FAILURE)return n(),e.suggestEmpty?e.suggestEmpty({}):s.React$1.createElement(Le.SuggestEmpty,null);const f=e.suggestedItems.slice(0,r);return t({containingFolderPath:e.currentFolderPath,renderedItems:f,suggestionAvailableCount:e.suggestedItems.length,suggestionSlotCount:r,modelVariant:e.modelVariant}),0===r||0===e.suggestedItems.length?(n(),e.suggestEmpty?e.suggestEmpty({}):s.React$1.createElement(Le.SuggestEmpty,null)):s.React$1.createElement(ui,{logger:e.logger,user:e.user,source:e.source,dismissSuggestedItem:e.dismissSuggestedItem,removeSuggestionFromUi:e.removeSuggestionFromUi,tileWidth:l,tileMarginRight:c,useTileWidthForCard:d,suggestLoadingTile:e.suggestLoadingTile,suggestedItemsToShow:f,isHiddenByUser:e.isHiddenByUser,itemsToShow:r,openSuggestedItem:e.openSuggestedItem,openSuggestedParent:e.openSuggestedParent,filenameMaxChars:u,shouldTruncateFilenameOnTileHover:p,filenameWidthAfterTruncation:g,subheaderLabelMaxChars:m,showIconsInsteadOfThumbnails:h,fileIconSize:_,markRenderTime:n})};fi.displayName="SuggestComponentInnerNoCss";const Ei=e=>{const t=s.react.exports.useContext(ci);if(!t)return s.React$1.createElement("div",null,"Error: Missing SuggestionsContext");const{loadingState:o,logger:a,isHiddenByUser:i,suggestedItems:n,dismissSuggestedItem:r,removeSuggestionFromUi:l,onToggleSuggestVisibility:c,user:d,source:u,modelVariant:p,openSuggestedItem:g,openSuggestedParent:m,currentFolderPath:h}=t;return s.React$1.createElement(Pe.SuggestFrame,{isHiddenByUser:i,onHeightChanged:e.onHeightChanged},e.suggestHeader?e.suggestHeader({isHiddenByUser:i,buttonAction:c,isLoading:Pe.isLoading(o)}):s.React$1.createElement(Pe.SuggestHeader,{isHiddenByUser:i,buttonAction:c}),s.React$1.createElement(fi,{isHiddenByUser:i,loadingState:o,containerWidth:e.containerWidth,responsive:e.responsive,logger:a,suggestedItems:n,user:d,source:u,modelVariant:p,dismissSuggestedItem:r,removeSuggestionFromUi:l,openSuggestedItem:g,openSuggestedParent:m,currentFolderPath:h,suggestEmpty:e.suggestEmpty,suggestLoadingTile:e.suggestLoadingTile,getLayoutFn:e.getLayoutFn}))};Ei.displayName="SuggestComponentNoCss";const vi=()=>(_i.useQuery({apiArg:{num_items:10,accepted_types:hi,client_type:{".tag":"web_browse"}}}),null);vi.displayName="ReactQueryEnabledSuggestComponent";const Ai=a.requireCssWithComponent(Ei,["/static/metaserver/static/css/home_access/main-vflo2nZq0.css"]);var Ri,Si,yi;t.InFolderActivationExperiment=void 0,(Ri=t.InFolderActivationExperiment||(t.InFolderActivationExperiment={})).core_o21n_in_folder_activation_m2="core_o21n_in_folder_activation_m2",Ri.core_act_sharing_made_easy="core_act_sharing_made_easy",t.InFolderActivationM2Variant=void 0,(Si=t.InFolderActivationM2Variant||(t.InFolderActivationM2Variant={})).OFF="OFF",Si.CONTROL="CONTROL",Si.V1="V1",Si.V1_FILE_IMPORTS="V1_FILE_IMPORTS",t.SharingMadeEasyVariant=void 0,(t.SharingMadeEasyVariant||(t.SharingMadeEasyVariant={})).V1="V1",function(e){e.BASIC="BASIC",e.PLUS="PLUS",e.PROFESSIONAL="PROFESSIONAL"}(yi||(yi={}));const wi=a.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield a.waitForTTI();const{OnboardingChecklist:t}=yield new Promise((function(t,o){e(["./c_onboarding_checklist"],t,o)}));return t}))}),Ti=a.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield a.waitForTTI();const{SuggestedItemsToMoveComponent:t}=yield new Promise((function(t,o){e(["./c_suggested_items_to_move"],t,o)}));return t}))}),bi=a.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield a.waitForTTI();const{EmptyStateDropTarget:t}=yield new Promise((function(t,o){e(["./c_growth_ui_empty_state_drop_target"],t,o)}));return t}))}),Mi=a.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield a.waitForTTI();const{SuggestedFolders:t}=yield new Promise((function(t,o){e(["./c_suggested_folders"],t,o)}));return t}))}),Ii=({user:e,context:o,files:i,browsePostTTIExperiments:n,browsePostTTIData:r,isEligibleForOnboardingChecklist:l,showAdminChecklistQarg:c,initialIncompleteOnboardingTaskCount:d,handleOnboardingTaskCountChange:u,responsive:p,isEligibleForSuggestedItemsToMove:g,autoTeamGroupId:m,shouldShowTeamSpaceEmptyZone:_,totalNumItems:f,initialTotalNumItems:E,getDropTargetProps:v,accM3Variant:A})=>{var R;const S=a.useSelector(a.initialSuggestedItemsToMoveCount);if(l&&(c||void 0===d||d>0)&&!["V1","V2"].includes(A)){const e=null===(R=r.firstTaskProps.member_info.users.find((e=>null!==e.admin_role)))||void 0===R?void 0:R.display_name;return s.React$1.createElement(wi,{adminName:e,onTaskCountChange:u,responsive:p})}if(g&&(null===S||S>0))return s.React$1.createElement(Ti,{autoTeamGroupId:m,files:i,user:e});const y=n.expPersonalizedFirstPaths,w=cs(y),T=(null==(b=y)?void 0:b.firstPath)||t.FirstPathId.NONE;var b;const M=function(e){return(null==e?void 0:e.suggestedFoldersType)||rs.None}(y);if(_&&T===t.FirstPathId.SUGGESTED_FOLDERS_ITERATION&&w&&E<=4&&M!==rs.None)return s.React$1.createElement(Mi,{autoTeamGroupId:m,files:i,isTeamView:!0,user:e,context:o,teamLoggerCtx:{userRole:w,numInitialItems:E,activeFirstPath:T}});const I=y?{firstPath:T,role:w}:void 0;return _&&1===f&&"V1"!==h.DEFAULT_DRAG_AND_DROP&&"V2"!==h.DEFAULT_DRAG_AND_DROP?s.React$1.createElement(bi,Object.assign({},v,{personalizationCtx:I})):null};function Fi(e,t){if(void 0!==t)return{feature:e,variant:t.variant,metadata:{metadata:t.metadata}}}Ii.displayName="ActivationBrowseZone";const Oi=({children:e,coreActSfProM2:t})=>{const o=s.React$1.useMemo((()=>({core_act_sf_pro_m2:Fi("core_act_sf_pro_m2",t)})),[t]);return s.React$1.createElement(be.ExperimentProvider,Object.assign({},o),e)};Oi.displayName="ActivationBrowseZoneExperimentProvider";const Ci=["general-activation:error-boundary"],Ni=s.React$1.memo((e=>{var t;return s.React$1.createElement(be.ErrorBoundary,Object.assign({},e,{exceptionTags:[...null!==(t=e.exceptionTags)&&void 0!==t?t:[],...Ci]}))}));Ni.displayName="GeneralActivationErrorBoundary",a.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{AddSharedFolders:t}=yield new Promise((function(t,o){e(["./c_add_shared_folders"],t,o)}));return t}))});const Di=a.defineMessage({id:"WZu6Dd",defaultMessage:"Other things you can do"}),Pi=a.defineMessage({id:"WODwII",defaultMessage:"More you can do now"}),Li=a.defineMessage({id:"v6r9av",defaultMessage:"More ways to add content"}),xi=a.defineMessage({id:"7mWgl4",defaultMessage:"More you can do now"}),ki=a.defineMessage({id:"+r3opP",defaultMessage:"What to do next"}),Bi=a.defineMessage({id:"0Jjh2r",defaultMessage:"Close"}),Ui={creatingFolderSpinnerAriaText:a.defineMessage({id:"sJ70Z1",defaultMessage:"Creating folder"}),createSuggestedFolder:a.defineMessage({id:"ZBBkg4",defaultMessage:"Create"}),dismissSuggestedFolder:a.defineMessage({id:"CmTVpN",defaultMessage:"Dismiss"}),setAccessLevelSelectAriaLabel:a.defineMessage({id:"PbXzjX",defaultMessage:"Set permission for {item}"}),createSuggestedFolderSuccessMsg:a.defineMessage({id:"4h7t7m",defaultMessage:"Created folder for {folderName}."}),createSuggestedFolderErrorMsg:a.defineMessage({id:"bgaDTg",defaultMessage:"Failed to create folder for {folderName}."}),createSuggestedFolderPermissionErrorMsg:a.defineMessage({id:"P2+xa4",defaultMessage:"Your folder settings weren't saved. Right now, {folderName} is invite-only. To change this, update the folder access."}),suggestedFoldersTitleForBusiness:a.defineMessage({id:"6NVOWp",defaultMessage:"Suggested folders based on your role"}),suggestedFoldersTitleForPersonal:a.defineMessage({id:"wWUAR1",defaultMessage:"Create suggested folders"}),teamAccessLevelInviteOnly:a.defineMessage({id:"p7XIqt",defaultMessage:"Invite-only access"}),teamAccessLevelEveryoneCanEdit:a.defineMessage({id:"xwP9BL",defaultMessage:"Everyone can edit"}),teamAccessLevelEveryoneCanView:a.defineMessage({id:"yP3Iv4",defaultMessage:"Everyone can view"}),uploadedFromGoogleDrive:a.defineMessage({id:"sW0Fph",defaultMessage:"Uploaded from Google Drive"}),uploadedFromOneDrive:a.defineMessage({id:"K+NlGf",defaultMessage:"Uploaded from Microsoft OneDrive"}),upload:a.defineMessage({id:"3t/eQf",defaultMessage:"Upload"})},$i=({isPersonal:e,isCurrentlyInRoot:t,initialTotalNumItems:o,suggestedFoldersCount:s})=>{if(!e)return!1;if(!t)return!1;if(o>3)return!1;return!(void 0!==s)||0!==s};var Vi;!function(e){e.SharingMadeEasy="SharingMadeEasy",e.SuggestedFolders="SuggestedFolders",e.AddSharedFolders="AddSharedFolders"}(Vi||(Vi={}));const Gi=({isCurrentlyInRoot:e,isPersonal:t,hasBoltSMEShareFiredDuringPageLifetime:o,hasUserEverSharedFileOrFolder:s,suggestedSharingActionsCount:i,isProTrialUser:n,sfProVariant:r,suggestedFoldersCount:l,initialTotalNumItems:c})=>{const d=$i({isPersonal:t,isCurrentlyInRoot:e,initialTotalNumItems:c,suggestedFoldersCount:l}),u=(({isProTrialUser:e,isCurrentlyInRoot:t,suggestedSharingActionsCount:o,hasUserEverSharedFileOrFolder:s,hasBoltSMEShareFiredDuringPageLifetime:a})=>!!e&&(!!t&&!(void 0!==o&&(0===o||!s&&!a))))({isProTrialUser:n,isCurrentlyInRoot:e,suggestedSharingActionsCount:i,hasUserEverSharedFileOrFolder:s,hasBoltSMEShareFiredDuringPageLifetime:o});if(r===a.Variant.OFF||r===a.Variant.CONTROL)return(({isEligibleForSharingMadeEasy:e,isEligibleForSuggestedFoldersForPersonal:t})=>e?{widgetsShown:[Vi.SharingMadeEasy],defaultWidget:Vi.SharingMadeEasy}:t?{widgetsShown:[Vi.SuggestedFolders],defaultWidget:Vi.SuggestedFolders}:null)({isEligibleForSharingMadeEasy:u,isEligibleForSuggestedFoldersForPersonal:d});if(r===a.Variant.V1)return(({isEligibleForSharingMadeEasy:e,isEligibleForSuggestedFoldersForPersonal:t,hasBoltSMEShareFiredDuringPageLifetime:o})=>e&&o?{widgetsShown:[Vi.SharingMadeEasy],defaultWidget:Vi.SharingMadeEasy}:t?{widgetsShown:[Vi.SuggestedFolders],defaultWidget:Vi.SuggestedFolders}:e?{widgetsShown:[Vi.SharingMadeEasy],defaultWidget:Vi.SharingMadeEasy}:null)({isEligibleForSharingMadeEasy:u,isEligibleForSuggestedFoldersForPersonal:d,hasBoltSMEShareFiredDuringPageLifetime:o});if(r===a.Variant.V2)return(({isEligibleForSharingMadeEasy:e,isEligibleForSuggestedFoldersForPersonal:t})=>{const o=[];let s;return e&&(o.push(Vi.SharingMadeEasy),s=Vi.SharingMadeEasy),t&&(o.push(Vi.SuggestedFolders),s||(s=Vi.SuggestedFolders)),s?{widgetsShown:o,defaultWidget:s}:null})({isEligibleForSharingMadeEasy:u,isEligibleForSuggestedFoldersForPersonal:d});throw new Error(`get_active_widgets was called with an unknown variant: ${r}`)};var Wi;!function(e){e.SUGGESTED_FOLDERS="suggested_folders",e.SHARING_MADE_EASY="sharing_made_easy"}(Wi||(Wi={}));const Hi={[Vi.SharingMadeEasy]:Wi.SHARING_MADE_EASY,[Vi.SuggestedFolders]:Wi.SUGGESTED_FOLDERS};var ji;!function(e){e.SUGGESTED_FOLDERS="suggested_folders",e.SHARING_MADE_EASY="sharing_made_easy",e.TABS="tabs"}(ji||(ji={}));const Yi=F.intl.formatMessage(ki),qi=F.intl.formatMessage(Ui.suggestedFoldersTitleForPersonal),zi=({user:o,context:i,files:n,browsePostTTIData:r,isCurrentlyInRoot:l,isProTrialUser:c,suggestedSharingActionsCount:d,hasBoltSMEShareFiredDuringPageLifetime:u,hasUserEverSharedFileOrFolder:p,handleSuggestedSharingActionsCountChange:g,suggestedFoldersCount:m,initialTotalNumItems:h,handleSuggestedFoldersCountChange:_,shouldShowAddSharedFolders:f,isColumnResizingEnabled:E,scrollContainerWidth:v})=>{var A,R;const S=a.useSelector(a.isAddSharedFoldersDismissed),y=s.react.exports.useRef(!1),w=(null===(A=r.addSharedFoldersInfo)||void 0===A?void 0:A.asf_variant)||"OFF",T=null===(R=r.addSharedFoldersInfo)||void 0===R?void 0:R.asf_metadata;s.react.exports.useEffect((()=>{f&&!S&&["CONTROL","ON"].includes(w)&&!y.current&&(y.current=!0,Promise.resolve(new Promise((function(t,o){e(["./c_add_shared_folders_logging"],t,o)}))).then((({logEvent:e,logStormcrowExposure:t})=>{"CONTROL"===w&&e(a.AddSharedFoldersEvents.ADD_SHARED_FOLDERS_EXPOSURE,{variant:w}),t(w,T)})))}),[f,S,w,T]);const[b,M]=s.react.exports.useState(),I=a.useExperimentVariant("core_act_sf_pro_m2")||a.Variant.OFF,F=s.react.exports.useMemo((()=>{try{return Gi({isCurrentlyInRoot:l,isPersonal:!0,hasBoltSMEShareFiredDuringPageLifetime:u,hasUserEverSharedFileOrFolder:p,suggestedSharingActionsCount:d,isProTrialUser:c,sfProVariant:I,suggestedFoldersCount:m,initialTotalNumItems:h})}catch(e){return x.reportException({err:e,severity:B.SEVERITY.NONCRITICAL,tags:["browse-footer-personal:get-active-widgets","activation:general-activation"],force:!0}),null}}),[l,u,p,d,c,I,m,h]),O=s.react.exports.useMemo((()=>(({widgetsShown:e,suggestedSharingActionsCount:t,suggestedFoldersCount:o})=>{if(!e)return[];const s=e.filter((e=>{switch(e){case Vi.SharingMadeEasy:return void 0!==t;case Vi.SuggestedFolders:return void 0!==o;default:return!1}}));return e.length>s.length?[]:s})({widgetsShown:null==F?void 0:F.widgetsShown,suggestedSharingActionsCount:d,suggestedFoldersCount:m})),[F,d,m]);(({loadedActiveWidgets:e,hasShared:t})=>{const o=s.react.exports.useRef();s.react.exports.useEffect((()=>{let s;if(e.length>1)s=ji.TABS;else if(e.includes(Vi.SuggestedFolders))s=ji.SUGGESTED_FOLDERS;else{if(!e.includes(Vi.SharingMadeEasy))return void(o.current=void 0);s=ji.SHARING_MADE_EASY}o.current!==s&&(a.logEvent({class:"onboard",action:"shown",object:"browse_footer",properties:{browseFooterIsPersonal:!0,browseFooterSurface:s,hasShared:t}}),o.current=s)}),[e,t])})({loadedActiveWidgets:O,hasShared:p||u});const C=a.useLogExposure("core_act_sf_pro_m2"),N=s.React$1.useRef(!1),D=$i({isPersonal:!0,isCurrentlyInRoot:l,initialTotalNumItems:h,suggestedFoldersCount:m});if(s.React$1.useEffect((()=>{"function"==typeof C&&D&&(N.current||(N.current=C()))}),[D,C]),!F)return null;const{widgetsShown:P,defaultWidget:L}=F,k=b&&P.includes(b)?b:L,U=O.length>1;return s.React$1.createElement(me.Tabs,{selectedTab:k,onSelection:e=>{e!==b&&(M(e),(e=>{a.logEvent({class:"onboard",action:"change",object:"browse_footer_tabs",properties:{browseFooterTab:Hi[e]}})})(e))}},U&&s.React$1.createElement(me.Tabs.Group,null,s.React$1.createElement(me.Tabs.Tab,{id:Vi.SuggestedFolders},qi),s.React$1.createElement(me.Tabs.Tab,{id:Vi.SharingMadeEasy},Yi)),P.includes(Vi.SuggestedFolders)&&s.React$1.createElement(Ki,{show:k===Vi.SuggestedFolders,tabId:Vi.SuggestedFolders},s.React$1.createElement(Ni,{fallback:null,resetKeys:[o,n,i],componentTag:"suggested-folders-individual",reportMetrics:!0},s.React$1.createElement(Mi,{files:n,isTeamView:!1,user:o,context:i,handleSuggestedFoldersCountChange:_,shouldHideHeading:U}))),P.includes(Vi.SharingMadeEasy)&&s.React$1.createElement(Ki,{show:k===Vi.SharingMadeEasy,tabId:Vi.SharingMadeEasy},s.React$1.createElement(oi,{user:o,context:i,isColumnResizingEnabled:E,width:v,numItems:n.size,experiment:t.InFolderActivationExperiment.core_act_sharing_made_easy,variant:t.SharingMadeEasyVariant.V1,shouldHideHeading:U,onActionsCountChange:g})),!1)};zi.displayName="BrowseFooterPersonal";const Ki=({show:e,tabId:t,children:o})=>s.React$1.createElement("div",{role:"tabpanel","aria-hidden":!e,"aria-describedby":t,style:e?void 0:{display:"none"}},o);a.injectInternalStyle("metaserver/static/js/browse/filtered_view/browse_view_filter.module.out.css",(e=>'._container_p5quv_1{background-color:var(--color__standard__background);margin-left:-44px;margin-top:var(--spacing__unit--1_5);padding:0 var(--spacing__unit--2) var(--spacing__unit--1_5);position:-webkit-sticky;position:sticky;top:63px;width:100%;z-index:3}._container_p5quv_1:before{border-top:1px solid var(--color__standard__border);content:"";display:block;padding-bottom:var(--spacing__unit--1_5);width:100%}._containerResponsive_p5quv_20{margin-left:-16px}._chipComponent_p5quv_24{margin-right:var(--spacing__unit--1)}'));const Qi="_container_p5quv_1",Xi="_containerResponsive_p5quv_20",Ji="_chipComponent_p5quv_24",Zi=({responsive:e})=>{const t=a.getStoreForBrowse(),o=a.useSelector(a.selectedFilterTypes).toArray(),i=0===o.length?a.BrowseFilterType.NONE:o[0];s.react.exports.useEffect((()=>()=>{t.dispatch(j.setFilterTypes([]))}),[t]);const n=e=>()=>{e===i?t.dispatch(j.setFilterTypes([])):t.dispatch(j.setFilterTypes([e]))};return s.React$1.createElement("div",{className:a.classnames({[Qi]:!0,[Xi]:!e.isMatchedLarge})},a.BrowseFilterConfigs.map((({displayName:e,icon:t,type:o},r)=>{return s.React$1.createElement(a.FilterChip,{className:Ji,isSelected:(l=o,l===i),key:r,onClick:n(o),withIconLeft:s.React$1.createElement(a.UIIcon,{src:t})},e);var l})))};Zi.displayName="BrowseViewFilter";const en=(e,t)=>({audienceText:e[0],tooltipText:t,accessLog:e[1]}),tn=e=>e.filter(Boolean).reduce(((e,t)=>s.React$1.createElement(s.React$1.Fragment,null,e,s.React$1.createElement("br",null),"+ ",t))),on=F.intl.formatMessage({id:"qsCrP2",defaultMessage:"your team"}),sn=F.intl.formatMessage({id:"q9Both",defaultMessage:"thisFolder"}),an=()=>{var e;return null!==(e=a.Viewer.get_viewer().team_name)&&void 0!==e?e:on},nn=" "+F.intl.formatMessage({id:"wKmA05",defaultMessage:"+ others"}),rn={ONLY_YOU:[F.intl.formatMessage({id:"CQcL59",defaultMessage:"Only you"}),"only_you"],LIMITED:[F.intl.formatMessage({id:"fiJC4S",defaultMessage:"Limited"}),"limited"],LIMITED_OTHER:[F.intl.formatMessage({id:"fiJC4S",defaultMessage:"Limited"})+nn,"limited_plus_others"],TEAM:[an(),"company"],TEAM_OTHER:[an()+nn,"company_plus_others"],PARENT:[F.intl.formatMessage({id:"RBqYQP",defaultMessage:"Parent"}),"parent"],PARENT_OTHER:[F.intl.formatMessage({id:"RBqYQP",defaultMessage:"Parent"})+nn,"parent_plus_others"]},ln={onlyYou:F.intl.formatMessage({id:"kWQx7/",defaultMessage:"You are the only person with access"}),certainItems:(e=sn)=>F.intl.formatMessage({id:"eT8Pi8",defaultMessage:"You only have access to certain items within {folderName}"},{folderName:e}),noAccess:F.intl.formatMessage({id:"nViKas",defaultMessage:"You do not have access to this folder"}),team:e=>F.intl.formatMessage({id:"Oau+Od",defaultMessage:"Everyone at {team_name} ({count, plural, one{{count} person} other{{count} people}})"},{team_name:an(),count:e}),tmrTeam:e=>F.intl.formatMessage({id:"DjR0GE",defaultMessage:"{count, plural, one{{count} team member has} other{All {count} team members have}} access."},{count:e}),parent:(e,t)=>F.intl.formatMessage({id:"l7tX5p",defaultMessage:"{count} with access to parent folder {parentFolderName}"},{count:e,parentFolderName:s.React$1.createElement("b",null,t)}),withLink:F.intl.formatMessage({id:"fuKova",defaultMessage:"anyone with link"}),withOutsideMember:e=>e&&F.intl.formatMessage({id:"dC1wLy",defaultMessage:"{count} outside {team_name}"},{team_name:an(),count:e}),withTeamMember:e=>e&&F.intl.formatMessage({id:"7cek/w",defaultMessage:"{count} at {team_name}"},{team_name:an(),count:e})},cn=({audienceText:e,tooltipText:t,tabIndex:o,accessLog:i,groups:n,file:r})=>{const l=a.useDispatch(),c=a.useSelector(a.isInSelectMode),d=a.useSelector(a.context),u=s.React$1.useMemo((()=>c||r&&(r.isDeleted||a.File.isTeamMemberFolder(r)||!a.File.canViewFileMembers(r,d))?"default":"pointer"),[c,r,d]);return s.React$1.createElement(a.Text,{"data-testid":"membership-column-text",className:"membership-column-text",onMouseEnter:()=>{if(null==r?void 0:r.is_in_team_folder_tree){const e=a.getAudienceDescriptionLoggingPayload(n,r,i);a.TeamsWebActionsLogger.log("hover_on_audience_description_text",e)}}},s.React$1.createElement(a.StylelessButton,{className:"audience-description",cursor:u,onClick:e=>{if(!c&&!(null==r?void 0:r.isDeleted))return l(Rs({file:r})),e.preventDefault(),e.stopPropagation()},tabIndex:o,"aria-label":e.toString()+" "+(null==t?void 0:t.toString())},a.isAccessColumnEnabled_TTVCTest()?e:""))},dn=F.intl.formatMessage({id:"fiJC4S",defaultMessage:"Limited"}),un=F.intl.formatMessage({id:"mo3voz",defaultMessage:"Limited"}),pn=({tabIndex:e,file:t})=>{const o=a.useSelector(a.isBrowseLoadingFirstPage),i=a.useSelector(a.isSharedDataLoadedForBrowsePath)&&!o,n=a.useSelector(a.user),r=a.useSelector(a.context),l=a.useSelector((e=>a.canViewMembersOfFile(e,t))),c=a.useSelector((e=>a.canTraverseFile(e,t))),d=a.useSelector((e=>a.getDataForFile(e,t)));if(!i)return null;let{audienceDescription:u,numUndisplayableUsersAndInvites:p=0,groups:g=[],invitations:m=[],joinedMembers:h=[],memberCount:_=0,sharedLinkExists:f=!1,accessTextData:E={total_groups_and_users:0,total_unique_inherited_members:0,total_unique_users:0,users_outside_team:0,is_confidential:!1,isParentTmr:!1,is_parent_tsd:!1,is_parent_namespace:!1,has_team_group:!1,has_group:!1}}=d||{};E=Object.assign(Object.assign({},E),{folderName:null==t?void 0:t.fq_path.split("/").slice(-1)[0],parentFolderName:r.getNameOfTargetFolder(),hasSharedLink:f,canViewMembers:l,canTraverse:c});let{audienceText:v,tooltipText:A,accessLog:R}=(({total_groups_and_users:e,total_unique_inherited_members:t,total_unique_users:o,users_outside_team:s,is_confidential:a,is_parent_tsd:i,is_parent_namespace:n,isParentTmr:r,has_team_group:l,has_group:c,hasSharedLink:d=!1,folderName:u=sn,parentFolderName:p="",canViewMembers:g=!0,canTraverse:m=!0})=>{if(!g)return en(rn.LIMITED,m?ln.certainItems(u):ln.noAccess);if(0===e)return en(["",""],"");if((i||r)&&l)return e>=1&&0===s?d?en(rn.TEAM_OTHER,tn([ln.team(o),ln.withLink])):en(rn.TEAM,r?ln.tmrTeam(o):ln.team(o)):en(rn.TEAM_OTHER,tn([ln.team(o-s),ln.withOutsideMember(s),d&&ln.withLink]));if(n||t===o&&!d&&!a)return d?en(rn.PARENT_OTHER,tn([ln.parent(t,p),ln.withLink])):en(rn.PARENT,ln.parent(o,p));if(1===e&&1===o&&!c&&!d)return en(rn.ONLY_YOU,ln.onlyYou);if(a||i&&!l)return 0!==s||d?en(rn.LIMITED_OTHER,tn([ln.withTeamMember(o-s),ln.withOutsideMember(s),d&&ln.withLink])):en(rn.LIMITED,ln.withTeamMember(o));const h=Math.max(o-s-t,0);return en(rn.PARENT_OTHER,tn([ln.parent(t,p),h&&ln.withTeamMember(h),ln.withOutsideMember(s),d&&ln.withLink]))})(E);if(!v){const e=g.concat(h||[]).concat(m||[]),o=e.length+(p||0),[i]=ce.findOwnerAndMeInJoinedMembers(h||[],n);if(null==t?void 0:t.isDeleted)v=F.intl.formatMessage({id:"RBvabN",defaultMessage:"Deleted"});else if(l)if(u)v=u;else if(o>=0&&(1!==o||!i)){v=F.intl.formatMessage({id:"ECZFz/",defaultMessage:"{count, plural, one{{count} member} other{{count} members}}"},{count:_});const t=e.slice(0,5).map((e=>a.Emstring.em_snippet(e.display_name||e.email||e.name||e.email_or_fbname||"",a.SNIPPET_SIZES.DISPLAY_NAME)));if(o>5){t.pop();const e=o-4,s=F.intl.formatMessage({id:"asRDyH",defaultMessage:"{count, plural, one{and {count} more...} other{and {count} more...}}"},{count:e});t.push(s)}A=t.length>0?t.reduce(((e,t)=>s.React$1.createElement(s.React$1.Fragment,null,e,s.React$1.createElement("br",null),t))):""}else v=F.intl.formatMessage({id:"ZP6Ear",defaultMessage:"Only you"});else v=E.canTraverse?un:dn}return!r.isCurrentlyInRoot||t||n.is_cdm_member?s.React$1.createElement("div",{className:"shared-with-members"},A?s.React$1.createElement(a.Tooltip,{placement:"bottom",className:"membership-column-tooltip","data-testid":"membership-column-tooltip",title:A},s.React$1.createElement("div",null,s.React$1.createElement(cn,{tabIndex:e,audienceText:v,accessLog:R,groups:g,file:t,tooltipText:A}))):s.React$1.createElement(cn,{tabIndex:e,audienceText:v,accessLog:R,groups:g,file:t})):null},gn=a.Loadable({loader:()=>(new Promise((function(t,o){e(["./c_file_uploader_clean_persistent_dropzone"],t,o)})),new Promise((function(t,o){e(["./c_file_uploader_clean_dropzone_outline"],t,o)})).then((({DropzoneOutline:e})=>e))),loading:({children:e})=>s.React$1.createElement(s.React$1.Fragment,null,e)}),mn=a.Loadable({loader:()=>new Promise((function(t,o){e(["./c_file_uploader_clean_persistent_dropzone"],t,o)})).then((({PersistentDropzone:e})=>e)),loading:({children:e})=>s.React$1.createElement(s.React$1.Fragment,null,e)}),hn=[a.NameSpaceAccess.ACCESS_NO_ACCESS,a.NameSpaceAccess.ACCESS_READER,a.NameSpaceAccess.ACCESS_READER_NO_COMMENT];const _n=()=>(()=>{const e=a.getQueryArgs()[a.BrowseQueryArg.show]||[];return e&&r.DBHistory.remove_query_param(a.BrowseQueryArg.show),e.filter((e=>Object.values(a.BrowseQueryArgShowValue).includes(e)))})().includes(a.BrowseQueryArgShowValue.ADMIN_CHECKLIST);class fn extends s.React$1.Component{constructor(e){super(e),this.scrollContainer=s.React$1.createRef(),this.observingLeftNav=s.React$1.createRef(),this.hasLoggedInFolderActivationExperiment=!1,this.updateScrollContainerWidth=()=>{null!==this.scrollContainer.current&&this.setState({scrollContainerWidth:Ce.getWidthOfElement(this.scrollContainer.current)})},this.filesViewActionHandlers={onDelete:e=>{this.postTTIModules.then((({actionHandlers:t})=>{const o={user:this.props.user,files:e,isSearchMode:!1,viewType:this.props.viewType};t.handleDelete(o,this.props.context)}))},onShowRename:e=>this.props.setFileRename({file:e,renameState:a.RenameState.PENDING_INPUT}),onSetClipboard:e=>this.props.setFilesToClipboard({clipboard:e}),onPasteFromClipboard:()=>{this.postTTIModules.then((({fileops:e})=>{this.props.pasteFilesFromClipboard({copyFiles:e.copyFilesDeprecated,moveFiles:e.moveFiles})}))},onNewFolderSubmit:e=>d.browseActions.createFolder({pathName:this.props.context.currentFQPath,folderName:e,user:this.props.user,nsId:this.props.context.rootNSID,checkFSWs:!0}),onNewFolderCancel:()=>d.browseActions.cancelCreateFolder(),onRenameSubmit:(e,t)=>this.props.renameFile({file:e,name:t,checkFSWs:!0}),onRenameCancel:e=>this.props.setFileRename({file:e,renameState:null}),onSwitchViewType:e=>{a.logSwitchViewType({uid:this.props.user.id,isSearchMode:!1,viewType:e}),this.props.setViewType(e)},onColumnsChanged:({columns:e,canDisplayFolderSizes:t,numVisibleColumns:o})=>{this.props.setColumns({columns:e,user:this.props.user,viewTypeScope:this.props.viewTypeScope,updateGlobalScope:!0,numVisibleColumns:o}),this.props.setCanDisplayFolderSizes({canDisplayFolderSizes:t})},onCanDisplayFolderSizesChanged:e=>this.props.setCanDisplayFolderSizes({canDisplayFolderSizes:e}),onAddFileJumpKeyCode:e=>this.props.addFileJumpKeyCode({keyChar:e}),onResetFileJump:()=>this.props.resetFileJumpFilter(),onShowShare:d.browseActions.handleShowShareModal},this.shouldShowEmptyStateDropTarget=()=>this.props.context.isInsideMyTeamFolderTree&&this.props.context.isCurrentlyInRoot&&1===this.props.totalNumItems||this.props.isFirstTaskEmptyState,this.shouldShowInFolderActivationForPersonal=()=>this.props.loadingState===a.LoadingState.LOADED&&0===this.props.files.size&&void 0!==this.props.currentFolderInfo&&!a.File.isFamilySharedFolder(this.props.currentFolderInfo)&&!this.props.user.is_team&&!this.props.context.isCurrentlyInRoot&&!this.props.context.isInsideVaultFolder&&!this.props.context.isInsideTeamFolderTree&&!this.props.isInsideBackupFolder&&this.props.browseExperiments.coreO21nInFolderActivationM2&&"OFF"!==this.props.browseExperiments.coreO21nInFolderActivationM2,this.shouldShowFilesView=()=>{const{shouldHideFilesAndSidebar:e,shouldShowVaultEmptyState:t,shouldShowFamilyEmptyState:o}=this.props;return!e&&!t&&!o},this.shouldShowFilters=()=>"ON"===h.RECENTS_AND_STARRED_IN_BROWSE&&this.shouldShowFilesView()&&"/"===this.props.path,this.getDropTargetProps=()=>{const e=[];let t=F.intl.formatMessage({id:"SHYorf",defaultMessage:"Upload files to the team space"});return e.push({iconName:"upload-file",iconSrc:R.UploadFileLine,displayName:F.intl.formatMessage({id:"Qayhb5",defaultMessage:"Upload files"}),handleClick:()=>this.props.handleUploadButtonClick(!1,"dropzone-upload-button")}),Ne.is_input_webkitdirectory_supported()&&(t=F.intl.formatMessage({id:"ZmstxO",defaultMessage:"Add files and folders to the team space"}),e.push({iconName:"upload-folder",iconSrc:R.UploadFolderLine,displayName:F.intl.formatMessage({id:"53oUlv",defaultMessage:"Upload folder"}),handleClick:()=>this.props.handleUploadButtonClick(!0,"dropzone-upload-button")})),{popoverOptions:e,ariaLabel:t,isDropTargetRoot:!this.state.currentDropTarget,isDraggingFiles:this.props.isDraggingExternalFiles||this.props.isDraggingInternalFiles,isLoading:this.props.loadingState===a.LoadingState.LOADING_FIRST_PAGE}},this.getIsFileJumping=()=>this.props.isFileJumping,this.handleOnboardingTaskCountChange=(e,t)=>{void 0===this.state.initialIncompleteOnboardingTaskCount&&this.setState({initialIncompleteOnboardingTaskCount:e-t})},this.handleUpdateDropTarget=e=>{this.props.isFirstTaskEmptyState&&this.setState({currentDropTarget:e})},this.handleDragStart=(e,t)=>{this.setState({internalDraggedFiles:t})},this.handleDragEnd=e=>{this.setState({internalDraggedFiles:void 0})},this.handleFixedHeaderHeightChange=e=>{const t=this.props.browsePostTTIData.firstTaskProps.is_eligible_team?38:0;this.setState({fixedHeaderHeight:(e||0)+t})},this.handleGetOverflowMenuActions=(e,t,o)=>[new Array],this.handleLocationLinkClick=(e,t)=>{if(!t){const t=a.parent_dir(e.fq_path);this.props.setUrl({path:t})}},this.handleOpenPaper=e=>{a.redirect(e.url)},this.handleFocusSearchBar=()=>{document.getElementsByClassName("dig-GlobalHeader-Search__input")[0].focus()},this.handleFileListSortChange=(e,t)=>{this.props.setAndStoreSortOrder({sortField:e,sortDirection:t})},this.handleSelectionChange=(e,t)=>{this.props.setSelection({selection:e,actionSource:t})},this.handleStarClick=(e,t)=>{const o=t?a.WebUserActionLogEvent.STAR:a.WebUserActionLogEvent.REMOVE_STAR,{user:s,viewType:i,selectedFiles:n}=this.props,{num_files_selected:r,num_folders_selected:l}=a.countFilesAndFolders(n);this.shouldShowFilters()&&this.props.selectedFilter===a.BrowseFilterType.STARRED&&!t&&this.props.updateStarredView(e),a.logBrowseAction({uid:s.id,source:"BROWSE",action:o,num_files_selected:r,num_folders_selected:l,view_type:i,result:e})},this.handleOpenFileSharedWithMe=e=>{a.redirect(e.href)},this.handleNavigateToParentFolder=()=>{Ya.navigateUpFolder();const e=a.parent_dir(this.props.path);if(a.isBackupBrowse()){const t=this.props.context.rootNSID,o=!!this.props.backupFolderPath;if(t&&a.isUnmountedBackupBrowse(this.props.user,t))o&&this.props.setUrl({path:e});else{const t=this.props.backupFolderPath===this.props.path;o&&!t&&this.props.setUrl({path:e})}}else this.props.setUrl({path:e})},this.onContainerClick=e=>{a.shouldClickDeselect(e)&&this.props.onClearSelection({actionSource:a.ActionSourceValue.WHITESPACE})},this.renderSharedWithController=(e,t)=>e.type===a.FileTypes.TEAM_SHARED_FOLDER&&("archived"===e.team_folder_status||"archive_in_progress"===e.team_folder_status)?null:s.React$1.createElement("div",{className:"brws-vertically-center brws-shared-with-wrapper"},s.React$1.createElement(pn,{tabIndex:t,file:e})),this.hrefForFile=(e,t)=>a.href_for_file(e,t,Object.assign({context:"standalone_preview"},this.props.isInsideBackupFolder?{[a.BACKUP_QUERY_PARAM]:"true"}:{})),this.handleSuggestionHeightChanged=e=>{this.setState({suggestionHeight:e})},this.handleSuggestedFoldersCountChange=e=>{this.setState({suggestedFoldersCount:e})},this.handleSuggestedSharingActionsCountChange=e=>{this.setState({suggestedSharingActionsCount:e})},a.getStoreForSharedWith(),this.state={fixedHeaderHeight:0,suggestionHeight:0,suggestedFoldersCount:void 0,suggestedSharingActionsCount:void 0,activationBoltSME:void 0,hasBoltSMEShareFiredDuringPageLifetime:!1},this.resizeObserver=new v.index(this.updateScrollContainerWidth)}componentDidMount(){return o.__awaiter(this,void 0,void 0,(function*(){Ya.register(),this.updateScroll(),this.shouldShowFilesView()||this.props.handleComponentTTI("FilesViewController");const t=this.props.responsive.isMatchedLarge;this.postTTIModules=new Promise((s=>{a.waitForTTI().then((()=>o.__awaiter(this,void 0,void 0,(function*(){const[o,a]=yield Promise.all([new Promise((function(t,o){e(["./c_browse_file_actions_action_handlers"],t,o)})).then((function(e){return e.action_handlers_esnext})),new Promise((function(t,o){e(["./c_ui_fileops_actions"],t,o)}))]);t&&!this.state.scrollContainerWidth&&this.updateScrollContainerWidth(),s({actionHandlers:o,fileops:a})}))))})),window.addEventListener("resize",this.updateScrollContainerWidth),t&&this.updateScrollContainerWidth();const s=document.querySelector(".maestro-secondary-sidebar-v2");s&&this.resizeObserver.observe(s),this.setState({showAdminChecklistQarg:_n()})}))}componentWillUnmount(){window.removeEventListener("resize",this.updateScrollContainerWidth),Ya.unregister(),this.resizeObserver.disconnect(),this.state.activationBoltSME&&this.state.activationBoltSME.unsubscribe()}componentDidUpdate(e){if(e.loadingState===a.LoadingState.LOADING_FIRST_PAGE&&this.props.loadingState!==e.loadingState&&this.updateScroll(),!this.observingLeftNav.current){const e=document.querySelector(".maestro-nav__container");e&&(this.resizeObserver.observe(e),this.observingLeftNav.current=!0)}this.state.activationBoltSME||this.registerSharingMadeEasyBoltListener(),this.props.forYouVariant!==e.forYouVariant&&"CONTROL"===this.props.forYouVariant&&a.logExposure({feature:"core_tact_welcome_mat",variant:this.props.forYouVariant})}updateScroll(){var e;const t=Ya.getLastScrollPosition(this.props.path);if(t){const{selection:e,setSelection:o}=this.props;o({selection:e.set("selected",a.immutable.exports.OrderedSet([t])).set("anchor",t),skipLogging:!0})}0===this.props.files.size&&!this.props.context.isCurrentlyInRoot&&(null===(e=this.scrollContainer)||void 0===e?void 0:e.current)&&this.scrollContainer.current.scroll(0,0)}isListView(){return this.props.viewType===a.ViewType.CondensedList||this.props.viewType===a.ViewType.List}logInFolderActivationQualifiedUser(t,s,a){return o.__awaiter(this,void 0,void 0,(function*(){if(this.hasLoggedInFolderActivationExperiment)return;this.hasLoggedInFolderActivationExperiment=!0;(yield new Promise((function(t,o){e(["./c_activation_sharing_made_easy_logger_utils"],t,o)}))).logInFolderActivationQualify(t,s)}))}render(){var e;const{files:o,context:i,selectedFiles:n,isDraggingExternalFiles:r,isDraggingInternalFiles:l,isUploadModalOpen:c,loadingState:d,browsePostTTIExperiments:u,browsePostTTIData:p,responsive:g,user:m,path:_,autoTeamGroupId:f,onNavigateToFileOrFolder:E,viewType:v,isRewindVisible:S,isFolderHistoryVisible:y,createNewFolderState:w,currentSort:T,fileRename:b,isFileViewerShown:M,arePostTTIModulesLoaded:I,handleComponentTTI:O,selection:C,totalNumItems:N,isQueryingFolderSizes:D,viewTypeColumns:P,starredState:x,viewTypeScope:k,contentSlot:B,emptyContentSlot:U,shouldHideFilesAndSidebar:$,clipboard:V,isActive:G,currentFolderInfo:W,isInsideBackupFolder:H,context:{isCurrentlyInRoot:j},selectedFilter:Y}=this.props,q=o,z=function({internalDraggedFiles:e,context:t,isDraggingInternalFiles:o,isDraggingExternalFiles:s,isUploadModalOpen:i}){return t.isInsideSharedFolder&&hn.includes(t.currentSharedFolderPermissionRole)?a.DropTargetHighlightMode.NONE:o&&e?e.some((e=>e.isDeleted||e.type===a.FileTypes.TEAM_SHARED_FOLDER))?a.DropTargetHighlightMode.NONE:e.some((e=>e.type===a.FileTypes.SHARED_FOLDER))?t.currentNSAllowsNesting?a.DropTargetHighlightMode.ALL_FOLDERS:a.DropTargetHighlightMode.NONSHARED_FOLDERS:a.DropTargetHighlightMode.ALL_FOLDERS:s&&!i||o&&!i?a.DropTargetHighlightMode.ALL_FOLDERS:a.DropTargetHighlightMode.NONE}({context:i,internalDraggedFiles:this.state.internalDraggedFiles,isDraggingExternalFiles:r,isDraggingInternalFiles:l,isUploadModalOpen:c}),K=0===o.size&&!j,Q=g.isMatchedLarge,X=a.BROWSE_RIGHT_RAIL_ACTION_BAR_HEIGHT+(this.shouldShowFilters()?a.BROWSE_FILTERS_HEIGHT:0),J=this.shouldShowEmptyStateDropTarget(),Z=a.classnames("maestro-browse-app-content","maestro-content-scroll",{"maestro-content-scroll_scroll-disabled":d===a.LoadingState.LOADING_FIRST_PAGE||K,"maestro-browse-app-content--empty-state":J,"maestro-content-scroll--horizontal-scrollable":Q,"maestro-browse-app-content--empty-state-content":Q&&J}),ee=s.React$1.createElement(Ce.FilesViewController,Object.assign({id:a.BROWSE_FILES_VIEW_ID},this.filesViewActionHandlers,{disabledMultiselect:S||y,getOverflowMenuActions:this.handleGetOverflowMenuActions,renderSharedWithController:this.renderSharedWithController,hrefForFile:this.hrefForFile,onLocationLinkClick:this.handleLocationLinkClick,onNavigateToFileOrFolder:E,onOpenFileSharedWithMe:this.handleOpenFileSharedWithMe,onNavigateToParentFolder:this.handleNavigateToParentFolder,onOpenPaper:this.handleOpenPaper,onFocusSearchBar:this.handleFocusSearchBar,context:i,createNewFolderState:w,currentSort:T,dropTargetHighlightMode:z,fileRename:b,items:q,responsive:g,getIsFileJumping:this.getIsFileJumping,isDraggingExternalFiles:r,isDraggingInternalFiles:l,isFileViewerShown:M,isOverFreeQuota:p.isOverFreeQuota,arePostTTIModulesLoaded:I,loadingState:d,onComponentTTI:O,onSelectionChange:this.handleSelectionChange,onSortChange:this.handleFileListSortChange,onStarClick:this.handleStarClick,path:_,selectedFiles:n,selection:C,setFileUploaderPath:L.FileUploaderController.setPathAndPermissions,totalNumFiles:N,user:m,isQueryingFolderSizes:D,columns:P[v],viewTypeColumns:P,viewTypes:a.AllViewTypes,viewTypeScope:k,starredState:x,stickyOffsetTop:X,scrollContainer:this.scrollContainer,isStickyColumnHeader:!0,scrollPositionOffset:this.state.fixedHeaderHeight+this.state.suggestionHeight,highDensity:!0,updateDropTarget:this.handleUpdateDropTarget,onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,eligibleForFirstTaskSubtitle:p.firstTaskProps.is_subtitle,expVaultEnableViewOnlySharing:u.expVaultEnableViewOnlySharing||!1,customEmptyFolderView:({handleTTI:e,isDraggingExternalFiles:n,isColumnResizingEnabled:r,width:l})=>{var c,d;if(this.shouldShowFilters()&&this.props.selectedFilter!==a.BrowseFilterType.NONE)return s.React$1.createElement(Ha,{selectedFilter:this.props.selectedFilter,responsive:this.props.responsive});if($i({isPersonal:!this.props.user.is_team,isCurrentlyInRoot:this.props.context.isCurrentlyInRoot,initialTotalNumItems:this.props.initialTotalNumItems,suggestedFoldersCount:this.state.suggestedFoldersCount}))return e(),["V1","V2"].includes(null!==(d=null===(c=this.props.browseExperiments.coreActSfProM2)||void 0===c?void 0:c.variant)&&void 0!==d?d:"OFF")?s.React$1.createElement("div",{className:"suggested-folders-drop-target-container"},s.React$1.createElement(ei,{popoverOptions:this.getDropTargetProps().popoverOptions,onMount:e,isDraggingFiles:n})):s.React$1.createElement("div",{className:"suggested-folders-empty-state"});if(this.props.context.isCurrentlyInRoot&&("OFF"===h.DEFAULT_DRAG_AND_DROP||"CONTROL"===h.DEFAULT_DRAG_AND_DROP))return s.React$1.createElement(ei,{popoverOptions:this.getDropTargetProps().popoverOptions,onMount:e,isDraggingFiles:n});if(this.shouldShowInFolderActivationForPersonal()){const a=t.InFolderActivationExperiment.core_o21n_in_folder_activation_m2,c=this.props.browseExperiments.coreO21nInFolderActivationM2;if(this.logInFolderActivationQualifiedUser(a,c),c!==t.InFolderActivationM2Variant.CONTROL)return s.React$1.createElement(mn,{responsive:this.props.responsive,location:"dedicated_dropzone",shouldHideOutline:!0},s.React$1.createElement(si,{user:m,context:i,isColumnResizingEnabled:r,width:l,popoverOptions:this.getDropTargetProps().popoverOptions,onMount:e,isDraggingFiles:n,numItems:o.size,experiment:a,variant:c,currentFolderInfo:W}))}},isActionBarEnabled:!0,inlineActionBar:Xt,enableUnity:!0,clipboard:V,isActive:G,isColumnResizingEnabled:Q,columnResizeStorageSetting:Ce.localStorage,scrollContainerWidth:this.state.scrollContainerWidth,isDragToSelectEnabled:!0,expFlowsAutomatedFolderUI:null!==(e=u.expFlowsAutomatedFolderUI)&&void 0!==e&&e,currentFolderInfo:W,useSkinnyCheckboxes:!0,preventSelectionOnDrag:!0,isInsideBackupFolder:H,isRightClickEnabled:!0,selectedFilter:Y})),te=()=>a.isBrowseSuggestionsEnabled_TTVCTest()&&ai(this.props.browseExperiments.browseContentSuggestionsVariant)&&!this.props.isInsideBackupFolder&&!!this.scrollContainer.current,oe=()=>{if(Ne.is_mobile_or_tablet()||"OFF"===h.DEFAULT_DRAG_AND_DROP||"CONTROL"===h.DEFAULT_DRAG_AND_DROP||this.shouldShowInFolderActivationForPersonal()&&0===this.props.files.size||this.props.isInsideBackupFolder||i.isInsideVaultFolder||this.props.loadingState!==a.LoadingState.LOADING_REMAINING_PAGES&&this.props.loadingState!==a.LoadingState.LOADED&&this.props.loadingState!==a.LoadingState.UPDATING_FILTERED_VIEW||i.isInsideSharedFolder&&hn.includes(i.currentSharedFolderPermissionRole))return null;const e=this.shouldShowFilters()&&this.props.selectedFilter!==a.BrowseFilterType.NONE&&0===this.props.files.size;return te()&&0===this.props.files.size&&!e?s.React$1.createElement(mn,{areSuggestionsVisible:!0,responsive:this.props.responsive,location:"dedicated_dropzone"},s.React$1.createElement("div",{style:{top:"40%",margin:"auto",textAlign:"center"}},s.React$1.createElement(a.Text,{color:"faint"},s.React$1.createElement(a.SpotIcon,{src:A.UploadFolderSpot}),s.React$1.createElement("div",null,s.React$1.createElement("strong",null,F.intl.formatMessage({id:"OxWWfA",defaultMessage:"Drop files here to upload,"})),s.React$1.createElement("br",null),F.intl.formatMessage({id:"zvJBaT",defaultMessage:"or use the 'Upload' button"}))))):0!==this.props.files.size||e?s.React$1.createElement(mn,{responsive:this.props.responsive,location:"dedicated_dropzone"},s.React$1.createElement("div",{style:{top:"40%",margin:"auto",textAlign:"center",verticalAlign:"middle"}},s.React$1.createElement(a.Text,{color:"faint",style:{display:"flex"}},s.React$1.createElement(a.UIIcon,{src:R.UploadFolderLine}),s.React$1.createElement("div",null,s.React$1.createElement("strong",null,F.intl.formatMessage({id:"7ICCWi",defaultMessage:"Drop files here to upload, "})),F.intl.formatMessage({id:"zvJBaT",defaultMessage:"or use the 'Upload' button"}))))):s.React$1.createElement(mn,{isFolderEmpty:!0,responsive:this.props.responsive,location:"dedicated_dropzone"},s.React$1.createElement("div",{style:{top:"40%",margin:"auto",textAlign:"center"}},s.React$1.createElement(a.Text,{color:"faint"},s.React$1.createElement(a.SpotIcon,{src:A.UploadFolderSpot}),s.React$1.createElement("div",null,s.React$1.createElement("strong",null,F.intl.formatMessage({id:"7ICCWi",defaultMessage:"Drop files here to upload, "})),s.React$1.createElement("br",null),F.intl.formatMessage({id:"zvJBaT",defaultMessage:"or use the 'Upload' button"})))))};return s.React$1.createElement("div",{className:Z,ref:this.scrollContainer,onClick:this.onContainerClick},s.React$1.createElement(gn,{shouldHideOutline:this.props.isInsideBackupFolder||("V1"===h.DEFAULT_DRAG_AND_DROP||"V2"===h.DEFAULT_DRAG_AND_DROP)&&0===this.props.files.size,shouldActivatePersistentOutline:!0,location:"outer_dropzone","data-testid":"dropzone-outline"},s.React$1.createElement("div",{className:a.classnames({"maestro-browse-app-content--browse-sticky-hack":!0,"maestro-browse-app-content--empty-state-content":J})},s.React$1.createElement(Ba,{responsive:g,fixedWidth:Q?this.state.scrollContainerWidth:void 0}),"V1"===h.DEFAULT_DRAG_AND_DROP&&a.isDragAndDropEnabled_TTVCTest()&&oe(),(()=>{if(te()){const e=Ce.getWidthOfElement(this.scrollContainer.current);if(e)return s.React$1.createElement(mn,{location:"browse_suggestions",responsive:this.props.responsive,shouldHideOutline:!0},s.React$1.createElement("div",{className:"browse-suggest"},this.props.browseExperiments.shouldUseReactQueryForContentSuggestions?s.React$1.createElement(vi,null):s.React$1.createElement(Ai,{containerWidth:e,onHeightChanged:this.handleSuggestionHeightChanged,responsive:this.props.responsive})))}return null})(),"V2"===h.DEFAULT_DRAG_AND_DROP&&a.isDragAndDropEnabled_TTVCTest()&&oe(),(i.isInsideVaultFolder||i.isInFamilySharedFolder)&&(Q?s.React$1.createElement("div",{style:{position:"sticky",left:0,width:this.state.scrollContainerWidth}},s.React$1.createElement("div",{ref:B})):s.React$1.createElement("div",{ref:B})),(i.isInsideVaultFolder||i.isInFamilySharedFolder)&&!$&&s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(ka,{responsive:g}),s.React$1.createElement("div",{className:a.classnames({"brws-vault-empty-content":!!i.isInsideVaultFolder,"brws-family-empty-content":!!i.isInFamilySharedFolder}),ref:U})),this.shouldShowFilesView()&&s.React$1.createElement(s.React$1.Fragment,null,this.shouldShowFilters()&&s.React$1.createElement(Zi,{responsive:this.props.responsive}),s.React$1.createElement(ti,null,ee)),s.React$1.createElement(Oi,{coreActSfProM2:this.props.browseExperiments.coreActSfProM2},m.is_team&&s.React$1.createElement(Ii,{user:m,context:i,files:o,browsePostTTIExperiments:this.props.browsePostTTIExperiments,browsePostTTIData:this.props.browsePostTTIData,isEligibleForOnboardingChecklist:this.props.isEligibleForOnboardingChecklist,showAdminChecklistQarg:this.state.showAdminChecklistQarg,initialIncompleteOnboardingTaskCount:this.state.initialIncompleteOnboardingTaskCount,handleOnboardingTaskCountChange:this.handleOnboardingTaskCountChange,responsive:g,isEligibleForSuggestedItemsToMove:this.props.isEligibleForSuggestedItemsToMove,autoTeamGroupId:f,shouldShowTeamSpaceEmptyZone:this.props.shouldShowTeamSpaceEmptyZone,totalNumItems:this.props.totalNumItems,initialTotalNumItems:this.props.initialTotalNumItems,getDropTargetProps:this.getDropTargetProps(),accM3Variant:this.props.browseExperiments.coreActAccM3}),!m.is_team&&s.React$1.createElement(Ni,{componentTag:"browse-footer-personal",fallback:null},s.React$1.createElement(zi,{user:m,context:i,files:o,browsePostTTIData:this.props.browsePostTTIData,isCurrentlyInRoot:this.props.context.isCurrentlyInRoot,suggestedSharingActionsCount:this.state.suggestedSharingActionsCount,handleSuggestedSharingActionsCountChange:this.handleSuggestedSharingActionsCountChange,isProTrialUser:this.props.isProTrialUser,hasBoltSMEShareFiredDuringPageLifetime:this.state.hasBoltSMEShareFiredDuringPageLifetime,hasUserEverSharedFileOrFolder:this.props.userHasSharedFileOrFolder,suggestedFoldersCount:this.state.suggestedFoldersCount,handleSuggestedFoldersCountChange:this.handleSuggestedFoldersCountChange,initialTotalNumItems:this.props.initialTotalNumItems,shouldShowAddSharedFolders:this.props.shouldShowAddSharedFolders,isColumnResizingEnabled:Q,scrollContainerWidth:this.state.scrollContainerWidth}))))))}registerSharingMadeEasyBoltListener(){var e,t;if(!(({hasUserEverSharedFileOrFolder:e,sfProVariant:t})=>void 0!==t&&(t===a.Variant.V1||!e))({hasUserEverSharedFileOrFolder:this.props.userHasSharedFileOrFolder,sfProVariant:this.props.sfProVariant}))return;const o=null===(t=null===(e=this.props.browsePostTTIData)||void 0===e?void 0:e.activationBoltInfo)||void 0===t?void 0:t.CoreActSharingMadeEasyBoltInfo;if(!o)return;const{id:s,token:i,revision:n}=o;if(!s||!i||void 0===n)return;const r=a.ActivationBolt(s,n.toString(),i,(e=>{e.find((e=>e.unique_id===s))&&this.setState({hasBoltSMEShareFiredDuringPageLifetime:!0})}),(()=>{x.reportException({err:new Error("ActivationBolt BoltRefreshCallback invoked."),severity:B.SEVERITY.NONCRITICAL,tags:["activation-bolt:refresh","activation:general-activation"],force:!0})}));r.start(),this.setState({activationBoltSME:r})}}fn.displayName="BrowseFilesViewController";const En=a.connect(((e,t)=>{const{context:o,sortedFilesWithFolderSizes:s,sortedFilesWithFolderSizesAndTags:i,isFolderHistoryVisible:n,path:r,selection:l,selectedFiles:c,newFolderCreationState:d,isRewindVisible:u,sortOrder:p,isQueryingFolderSizes:g,user:m,browsePostTTIExperiments:h,isFileJumping:_,shouldShowTeamSpaceEmptyZone:f,browsePostTTIData:E,autoTeamGroupId:v,experiments:A,arePostTTIModulesLoaded:R,selectViewTypeScope:S,shouldHideFilesAndSidebar:y,clipboard:w,selectIsTagsColumnEnabled:T,getCurrentFolderInfo:b,isEligibleForSuggestedItemsToMove:M,browseLoadingState:I,isEligibleForOnboardingChecklist:F,isInsideBackupFolder:O,isProTrialUser:C,userHasSharedFileOrFolder:N,backupFolderPath:D,selectedFilter:P}=a.Selectors,{paginatedTotalNumFiles:L,shouldShowVaultEmptyState:x,shouldShowFamilyEmptyState:k}=j.FolderOverviewSelectors,{selectViewType:B}=a.FilesViewInstanceSelectors,{isValidEnhancedRightClickVariant:U,forYouVariant:$}=a.ActivationSelectors;let V=a.viewTypeColumns(e),G=S(e);switch(P(e)){case a.BrowseFilterType.RECENTS:V=a.recentsViewTypeColumns,G=a.VIEW_TYPE_SCOPE_RECENTS_VIEW;break;case a.BrowseFilterType.STARRED:V=a.starredViewTypeColumns,G=a.VIEW_TYPE_SCOPE_STARRED_VIEW}return{arePostTTIModulesLoaded:R(e),files:T(e)?i(e):s(e),user:m(e),context:o(e),path:r(e),selection:l(e),selectedFiles:c(e),browsePostTTIExperiments:h(e),viewType:B(e,{instanceId:a.BROWSE_FILES_VIEW_ID}),isRewindVisible:u(e),currentSort:p(e),isFileJumping:_(e),loadingState:I(e),viewTypeColumns:V,isQueryingFolderSizes:g(e),totalNumItems:L(e),fileRename:a.fileRename(e),createNewFolderState:d(e),isFolderHistoryVisible:n(e),shouldShowTeamSpaceEmptyZone:f(e),browsePostTTIData:E(e),autoTeamGroupId:v(e),browseExperiments:A(e),viewTypeScope:G,shouldShowVaultEmptyState:x(e),shouldShowFamilyEmptyState:k(e),shouldHideFilesAndSidebar:y(e),clipboard:w(e),currentFolderInfo:b(e),isEligibleForSuggestedItemsToMove:M(e),isEligibleForOnboardingChecklist:F(e),isInsideBackupFolder:O(e),backupFolderPath:D(e),shouldShowAddSharedFolders:a.shouldShowAddSharedFolders(e),isValidEnhancedRightClickVariant:U(e),isProTrialUser:C(e),userHasSharedFileOrFolder:N(e),sfProVariant:a.getSFProVariant(e),forYouVariant:$(e),selectedFilter:P(e)}}),(e=>a.bindActionCreators({addFileJumpKeyCode:j.addFileJumpKeyCode,resetFileJumpFilter:j.resetFileJumpFilter,setAndStoreSortOrder:j.setAndStoreSortOrder,onClearSelection:j.clearSelection,setSelection:j.setSelection,setUrl:j.setUrl,setFilesToClipboard:j.setFilesToClipboard,pasteFilesFromClipboard:j.pasteFilesFromClipboard,renameFile:d.renameFile,setCanDisplayFolderSizes:j.setCanDisplayFolderSizes,setFileRename:a.setFileRename,setViewType:j.setViewType,setColumns:a.setColumns,filterOutColumns:a.filterOutColumns,updateStarredView:j.updateStarredView},e)))(fn),vn={selectedFilesSelector:a.selectedFiles,userSelector:a.user,contextSelector:a.context,overQuotaDataSelector:Xo,experimentSelector:Jo,isSearchMode:!1,actionSurface:a.ActionSurfaceLogValue.RIGHT_SIDEBAR,currentFolderInfo:a.getCurrentFolderInfo,flowsUserAutomation:ee.getUserAutomation,rightRailCollapsedState:a.isRightRailCollapsed,isInsideBackupFolder:a.isInsideBackupFolder,isSelectedBackupFolder:a.isSelectedBackupFolder,backupInfoByFile:a.folderBackupInfoByFile,backupInfoByPath:a.folderBackupInfoByPath},An=a.createSelector(a.user,(e=>a.RestorationStepsLogger.generate_restore_id(e.id))),Rn=(e,t)=>t.size>0?t.toList():e?a.immutable.exports.List([e]):a.immutable.exports.List([]),Sn=a.createSelector(a.getCurrentFolderInfo,a.selectedFiles,Rn),yn=a.createSelector(a.selectCurrentFolderInfoWithTags,a.selectedFilesWithTags,Rn),wn=e=>a.getStateAtNamespace(e,a.DELOREAN_NAMESPACE_KEY),Tn=e=>wn(e).events;var bn,Mn,In,Fn,On,Cn;t.RewindState=void 0,(bn=t.RewindState||(t.RewindState={}))[bn.InProgress=0]="InProgress",bn[bn.Done=1]="Done",t.DeloreanActionType=void 0,(Mn=t.DeloreanActionType||(t.DeloreanActionType={})).initialize="DELOREAN/initialize",Mn.dismissNUX="DELOREAN/hide-nux",Mn.setHasDismissedNUX="DELOREAN/set-has-dismissed-NUX",Mn.setEventsLoaded="DELOREAN/set-folder-history-events-loaded",Mn.setFolderHistoryEventsError="DELOREAN/set-folder-history-events-error",Mn.setFolderHistoryPaginationLoading="DELOREAN/set-folder-history-events-loading-more",Mn.setFolderHistoryPaginationLoaded="DELOREAN/set-folder-history-events-loaded-more",Mn.setEventCountsInitialLoad="DELOREAN/set-folder-history-event-counts-initial-load",Mn.loadEventCounts="DELOREAN/load-event-counts",Mn.setRewindEventCountsError="DELOREAN/set-folder-history-event-counts-error",Mn.setLoadingGraphWeek="DELOREAN/set-loading-graph-week",Mn.setRewindPanelSelectedDate="DELOREAN/set-rewind-panel-selected-date",Mn.clearEventList="DELOREAN/clear-event-list",Mn.changeRewindPageToNone="DELOREAN/change-rewind-page-to-none",Mn.changeRewindPageToNUX="DELOREAN/change-rewind-page-to-nux",Mn.changeRewindPageToNUXOrDayResolution="DELOREAN/change-rewind-page-to-nux-or-day-resolution",Mn.changeRewindPageToGraphPage="DELOREAN/change-rewind-page-to-graph-page",Mn.changeRewindPageToActivityListPage="DELOREAN/change-rewind-page-to-activity-list-page",Mn.changeRewindPageToConfirmationPage="DELOREAN/change-rewind-page-to-confirmation-page",Mn.changeRewindPageToRewindStarted="DELOREAN/change-rewind-page-to-rewind-started",Mn.changeRewindPageToUpsell="DELOREAN/change-rewind-page-to-upsell",Mn.setGraphRangeForward="DELOREAN/navigate-graph-forward",Mn.setGraphRangeBack="DELOREAN/navigate-graph-backward",Mn.setGraphLoadFinished="DELOREAN/set-graph-load-finished",Mn.changeRewindPageFromConfirmationPageToGraphPage="DELOREAN/cancel-confirmation-page",Mn.goBackFromActivityListPage="DELOREAN/go-back-from-activity-list-page",Mn.goBackFromConfirmationPage="DELOREAN/go-back-from-confirmation-page",Mn.setRewindComplete="DELOREAN/set-rewind-complete",Mn.setRewindInProgress="DELOREAN/set-rewind-in-progress",t.RewindFlowPage=void 0,(In=t.RewindFlowPage||(t.RewindFlowPage={})).notVisible="notVisible",In.NUXPage="NUXPage",In.graphPage="graphPage",In.activityListPage="activityListPage",In.confirmationPage="confirmationPage",In.startedPage="startedPage",In.upsellPage="upsellPage",t.PaginationDirection=void 0,(Fn=t.PaginationDirection||(t.PaginationDirection={})).future="future",Fn.past="past",function(e){e.neverLoaded="neverLoaded",e.loadingEntirePanel="loadingEntirePanel",e.hasContent="hasContent",e.error="error"}(On||(On={})),function(e){e.event="event",e.dateBanner="date-banner",e.emptyDay="empty-day"}(Cn||(Cn={}));const Nn=e=>{const{isInRightRail:t}=e;return s.React$1.createElement("div",{className:a.classnames("folder-history-event-header",{"folder-history-event-header--right-rail":t})},s.React$1.createElement("div",null,s.React$1.createElement(a.Text,{size:"small",color:t?"standard":"faint",isBold:!0},e.segmentName)))},Dn=e=>{const{actor:t,toBeRolledBack:o}=e;if(!t)return null;const i=t.photo_url?t.photo_url:void 0,n=a.getInitials(t.display_name),r=a.classnames({"folder-history-event-card__avatar":!0,"folder-history-event-card__avatar--to-be-rolled-back":o});return s.React$1.createElement("div",{className:"folder-history-event-card__avatar-container"},s.React$1.createElement(a.Avatar,{className:r,src:i,backgroundColor:a.avatarColorForUserIdentifier(n),size:"small",hasNoOutline:!0},n))},Pn=e=>{const{style:t}=e;return s.React$1.createElement("div",{className:"folder-history-event-card__line-container"},s.React$1.createElement("div",{className:a.classnames({"folder-history-event-card__line":!0,"folder-history-event-card__line--pulse":"pulsing"===t,"folder-history-event-card__line--normal":"default"===t,"folder-history-event-card__line--hovered":"dashed"===t,"folder-history-event-card__line--selected":"solid"===t,"folder-history-event-card__line--invisible":"none"===t})}),e.text&&s.React$1.createElement("div",{className:"folder-history-event-card__line__text"},e.text))},Ln=e=>s.React$1.createElement("div",{className:a.classnames("folder-history-event-card__card-heading",{"folder-history-event-card__card-heading--right-rail":e.isInRightRail})},Ge.legacyFormatHtmlAsReact(e.event.eventHeadline,{strong:e=>s.React$1.createElement("strong",null,e)})),xn=e=>s.React$1.createElement("div",{className:a.classnames("folder-history-event-card__card-subheading",{"folder-history-event-card__card-subheading--right-rail":e.isInRightRail})},s.React$1.createElement(a.Text,{size:"small",color:"faint"},e.event.timeAgo,e.event.cardSubheading?s.React$1.createElement("span",null," • ",e.event.cardSubheading):void 0));class kn extends s.React$1.Component{constructor(e){super(e),this.handleMouseOver=e=>{const t=e.currentTarget.getBoundingClientRect();this.props.onMouseOver(this.props.event,(e.clientY-t.top)/t.height>.5?"bottom":"top")},this.handleMouseOut=()=>{this.props.onMouseOut(this.props.event)},this.onClickOnEvent=()=>{this.props.onClick(this.props.event)}}render(){const{event:e,rewindMode:t,dividerLineStateTop:o,dividerLineStateBottom:i,isInRightRail:n}=this.props,r=s.React$1.createElement("div",{className:a.classnames("folder-history-event-card__border",{"folder-history-event-card__border--right-rail":n})},s.React$1.createElement(Dn,{actor:e.actor,toBeRolledBack:this.props.willRewindEvent}),s.React$1.createElement("div",{className:a.classnames({"folder-history-event-card__card-text":!0,"folder-history-event-card__card-text--right-rail":n})},s.React$1.createElement(Ln,{event:e,isInRightRail:n}),s.React$1.createElement(xn,{event:e,isInRightRail:n}))),l=t?s.React$1.createElement("button",{className:a.classnames("for-rewind",{"include-in-rewind":!this.props.willRewindEvent,"event-text-faded":this.props.isFaded}),onClick:this.onClickOnEvent},r):s.React$1.createElement("div",null,r);return s.React$1.createElement("div",{onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseOut,className:a.classnames({"folder-history-event-card":!0,"folder-history-event-card--right-rail":n})},s.React$1.createElement(Pn,Object.assign({},o)),l,s.React$1.createElement(Pn,Object.assign({},i)))}}function Bn(e){return e}function Un(e,t){return e[".tag"]===t}function $n(e,t){return e[".tag"]===t}function Vn(e){return Un(e,"single_object_metadata")||Un(e,"move_metadata")||Un(e,"move_in_metadata")||Un(e,"move_out_metadata")||Un(e,"rollback_metadata")||Un(e,"edit_metadata")?e.name:Un(e,"rename_metadata")?e.to_name:Un(e,"other")||Un(e,"multi_object_metadata")?"":e}kn.displayName="FolderHistoryEventCard";let Gn=0;function Wn(){return String(++Gn)}function Hn(e,t){return e.filter(t)}function jn(e,t){for(let o=0;o<e.length;o++)if(t(e[o]))return o}const Yn=()=>{};function qn(e){return F.intl.formatDate(e,{weekday:"short",month:"short",day:"numeric"})}function zn(e){const t=new Date(e.getTime());return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function Kn(e){const t=new Date(e.getTime()),o=zn(t),s=zn(t);return s.setDate(s.getDate()+1),Math.abs(t.getTime()-o.getTime())<Math.abs(t.getTime()-s.getTime())?o.getTime():s.getTime()}function Qn(e){const{err:t,isForRewindFlow:o}=e,s=t&&t.error&&t.error.err&&t.error.err[".tag"];return t&&t.raw&&504===t.raw.status?o?F.intl.formatMessage({id:"Z1gIYu",defaultMessage:"There were too many changes for us to display, but we can still help you use Rewind."}):F.intl.formatMessage({id:"48nq81",defaultMessage:"There were too many changes for us to display."}):"unsupported_version"===s?F.intl.formatMessage({id:"h4NBWz",defaultMessage:"Please refresh your browser."}):"access_error"===s?F.intl.formatMessage({id:"+C1mk4",defaultMessage:"You do not have permission to view this location."}):o?F.intl.formatMessage({id:"kvj0Bl",defaultMessage:"There was an internal Dropbox error, but we can still help you use Rewind."}):F.intl.formatMessage({id:"DuR7iM",defaultMessage:"There was an internal Dropbox error."})}function Xn(){a.open_tab("https://www.dropbox.com/support")}const Jn=91,Zn=500,er=a.BrowseQueryArg.folder_history,tr=a.BrowseQueryArg.rewind;var or;!function(e){e[e.Avatar=0]="Avatar",e[e.Heading=1]="Heading",e[e.Subheading=2]="Subheading"}(or||(or={}));const sr=e=>{const{type:t,animated:o}=e,i=o&&t!==or.Avatar,n=a.classnames({"folder-history-skeleton__skeleton-card":!0,"folder-history-skeleton__avatar":t===or.Avatar,"folder-history-skeleton__heading":t===or.Heading,"folder-history-skeleton__subheading":t===or.Subheading});return s.React$1.createElement("div",{className:n},i&&s.React$1.createElement("div",{className:"folder-history-skeleton__glint"}))};class ar extends s.React$1.PureComponent{render(){return s.React$1.createElement("div",{className:"folder-history-event-card folder-history-event-skeleton"},s.React$1.createElement("div",{className:"folder-history-event-card__border"},s.React$1.createElement("div",{className:"folder-history-event-card__avatar-container"},s.React$1.createElement(sr,{type:or.Avatar,animated:this.props.animated})),s.React$1.createElement("div",{className:"folder-history-event-card__card-text"},s.React$1.createElement("div",{className:"folder-history-event-card__card-heading"},s.React$1.createElement(sr,{type:or.Heading,animated:this.props.animated})),s.React$1.createElement("div",{className:"folder-history-event-card__card-subheading"},s.React$1.createElement(sr,{type:or.Subheading,animated:this.props.animated})))))}}ar.displayName="FolderHistoryCardSkeleton";class ir extends s.React$1.PureComponent{constructor(e){super(e),this.setRef=e=>{this.element=e},this.state={height:Zn}}componentDidMount(){this.setState({height:this.element&&this.element.clientHeight||Zn})}render(){const e=Jn,t=Math.ceil(this.state.height/e),o=[];for(let e=0;e<t;e++)o.push(s.React$1.createElement(ar,{key:e,animated:this.props.animated}));return s.React$1.createElement("div",{className:"folder-history-skeleton",ref:this.setRef},o)}}ir.displayName="FolderHistoryEventCardsSkeleton";const nr={move:{generateWithYou:e=>1===e?a.defineMessage({id:"kRLsxP",defaultMessage:"You moved <strong>{single_item_name}</strong> from <strong>{src_folder}</strong> to this folder"}):a.defineMessage({id:"8zDWI3",defaultMessage:"{count, plural, one{You moved {count} item from <strong>{src_folder}</strong> to this folder} other{You moved {count} items from <strong>{src_folder}</strong> to this folder}}"}),generateWithName:e=>1===e?a.defineMessage({id:"X1BqiH",defaultMessage:"{name} moved <strong>{single_item_name}</strong> from <strong>{src_folder}</strong> to this folder"}):a.defineMessage({id:"Cl/4Rx",defaultMessage:"{count, plural, one{{name} moved {count} item from <strong>{src_folder}</strong> to this folder} other{{name} moved {count} items from <strong>{src_folder}</strong> to this folder}}"}),generateWithYouAndFolder:e=>1===e?a.defineMessage({id:"d/RzfK",defaultMessage:"You moved <strong>{single_item_name}</strong> from <strong>{src_folder}</strong> to <strong>{dst_folder}</strong>"}):a.defineMessage({id:"dSRYcI",defaultMessage:"{count, plural, one{You moved {count} item from <strong>{src_folder}</strong> to <strong>{dst_folder}</strong>} other{You moved {count} items from <strong>{src_folder}</strong> to <strong>{dst_folder}</strong>}}"}),generateWithNameAndFolder:e=>1===e?a.defineMessage({id:"QKMF0j",defaultMessage:"{name} moved <strong>{single_item_name}</strong> from <strong>{src_folder}</strong> to <strong>{dst_folder}</strong>"}):a.defineMessage({id:"TURZT1",defaultMessage:"{count, plural, one{{name} moved {count} item from <strong>{src_folder}</strong> to <strong>{dst_folder}</strong>} other{{name} moved {count} items from <strong>{src_folder}</strong> to <strong>{dst_folder}</strong>}}"})},move_in:{generateWithYou:e=>1===e?a.defineMessage({id:"XJqVGH",defaultMessage:"You moved <strong>{single_item_name}</strong> into this folder"}):a.defineMessage({id:"JxriCD",defaultMessage:"{count, plural, one{You moved {count} item into this folder} other{You moved {count} items into this folder}}"}),generateWithName:e=>1===e?a.defineMessage({id:"filSNo",defaultMessage:"{name} moved <strong>{single_item_name}</strong> into this folder"}):a.defineMessage({id:"8gVsSR",defaultMessage:"{count, plural, one{{name} moved {count} item into this folder} other{{name} moved {count} items into this folder}}"}),generateWithYouAndFolder:e=>1===e?a.defineMessage({id:"trPbPE",defaultMessage:"You moved <strong>{single_item_name}</strong> into <strong>{dst_folder}</strong>"}):a.defineMessage({id:"axxaX3",defaultMessage:"{count, plural, one{You moved {count} item into <strong>{dst_folder}</strong>} other{You moved {count} items into <strong>{dst_folder}</strong>}}"}),generateWithNameAndFolder:e=>1===e?a.defineMessage({id:"pWAwtE",defaultMessage:"{name} moved <strong>{single_item_name}</strong> into <strong>{dst_folder}</strong>"}):a.defineMessage({id:"TKRX3z",defaultMessage:"{count, plural, one{{name} moved {count} item into <strong>{dst_folder}</strong>} other{{name} moved {count} items into <strong>{dst_folder}</strong>}}"})},move_out:{generateWithYou:e=>1===e?a.defineMessage({id:"i7aMt9",defaultMessage:"You moved <strong>{single_item_name}</strong> out of this folder"}):a.defineMessage({id:"cPrY3T",defaultMessage:"{count, plural, one{You moved {count} item out of this folder} other{You moved {count} items out of this folder}}"}),generateWithName:e=>1===e?a.defineMessage({id:"uIVHWb",defaultMessage:"{name} moved <strong>{single_item_name}</strong> out of this folder"}):a.defineMessage({id:"vzdkNF",defaultMessage:"{count, plural, one{{name} moved {count} item out of this folder} other{{name} moved {count} items out of this folder}}"}),generateWithYouAndFolder:e=>1===e?a.defineMessage({id:"Xrh3zC",defaultMessage:"You moved <strong>{single_item_name}</strong> out of <strong>{src_folder}</strong>"}):a.defineMessage({id:"coNoZH",defaultMessage:"{count, plural, one{You moved {count} item out of <strong>{src_folder}</strong>} other{You moved {count} items out of <strong>{src_folder}</strong>}}"}),generateWithNameAndFolder:e=>1===e?a.defineMessage({id:"5N4vbB",defaultMessage:"{name} moved <strong>{single_item_name}</strong> out of <strong>{src_folder}</strong>"}):a.defineMessage({id:"+IBZTK",defaultMessage:"{count, plural, one{{name} moved {count} item out of <strong>{src_folder}</strong>} other{{name} moved {count} items out of <strong>{src_folder}</strong>}}"})}},rr={rename:{you:e=>1===e?a.defineMessage({id:"H0eBAl",defaultMessage:"You renamed {single_item_name_prev} to <strong>{single_item_name_next}</strong>"}):a.defineMessage({id:"JrID4H",defaultMessage:"{count, plural, one{You renamed {count} item} other{You renamed {count} items}}"}),name:e=>1===e?a.defineMessage({id:"kiIqI2",defaultMessage:"{name} renamed {single_item_name_prev} to <strong>{single_item_name_next}</strong>"}):a.defineMessage({id:"ASnOd4",defaultMessage:"{count, plural, one{{name} renamed {count} item} other{{name} renamed {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"fWzfms",defaultMessage:"You renamed {single_item_name_prev} to <strong>{single_item_name_next}</strong> in {folder_path}"}):a.defineMessage({id:"6a1Rvf",defaultMessage:"{count, plural, one{You renamed {count} item in {folder_path}} other{You renamed {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"2NFHH7",defaultMessage:"{name} renamed {single_item_name_prev} to <strong>{single_item_name_next}</strong> in {folder_path}"}):a.defineMessage({id:"ben5Q2",defaultMessage:"{count, plural, one{{name} renamed {count} item in {folder_path}} other{{name} renamed {count} items in {folder_path}}}"})},unshare:{you:e=>1===e?a.defineMessage({id:"sinwN6",defaultMessage:"You unshared <strong>{single_item_name}</strong>"}):a.defineMessage({id:"GcYOVe",defaultMessage:"{count, plural, one{You unshared {count} item} other{You unshared {count} items}}"}),name:e=>1===e?a.defineMessage({id:"2v0dx6",defaultMessage:"{name} unshared <strong>{single_item_name}</strong>"}):a.defineMessage({id:"ZB5/iN",defaultMessage:"{count, plural, one{{name} unshared {count} item} other{{name} unshared {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"eqyScK",defaultMessage:"You unshared <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"TsV/DS",defaultMessage:"{count, plural, one{You unshared {count} item in {folder_path}} other{You unshared {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"vM9XAD",defaultMessage:"{name} unshared <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"hELrb9",defaultMessage:"{count, plural, one{{name} unshared {count} item in {folder_path}} other{{name} unshared {count} items in {folder_path}}}"})},unmount:{you:e=>1===e?a.defineMessage({id:"mPhnVF",defaultMessage:"You deleted <strong>{single_item_name}</strong>"}):a.defineMessage({id:"eXwZkw",defaultMessage:"{count, plural, one{You deleted {count} item} other{You deleted {count} items}}"}),name:e=>1===e?a.defineMessage({id:"AX/4il",defaultMessage:"{name} deleted <strong>{single_item_name}</strong>"}):a.defineMessage({id:"tR8p1/",defaultMessage:"{count, plural, one{{name} deleted {count} item} other{{name} deleted {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"ITG2x1",defaultMessage:"You deleted <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"Rdz77s",defaultMessage:"{count, plural, one{You deleted {count} item in {folder_path}} other{You deleted {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"Re3uD/",defaultMessage:"{name} deleted <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"ON/b0t",defaultMessage:"{count, plural, one{{name} deleted {count} item in {folder_path}} other{{name} deleted {count} items in {folder_path}}}"})},share:{you:e=>1===e?a.defineMessage({id:"hDr6DO",defaultMessage:"You shared <strong>{single_item_name}</strong>"}):a.defineMessage({id:"dd/i5u",defaultMessage:"{count, plural, one{You shared {count} item} other{You shared {count} items}}"}),name:e=>1===e?a.defineMessage({id:"ITkgMJ",defaultMessage:"{name} shared <strong>{single_item_name}</strong>"}):a.defineMessage({id:"Thllsi",defaultMessage:"{count, plural, one{{name} shared {count} item} other{{name} shared {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"14X21j",defaultMessage:"You shared <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"tkfLxs",defaultMessage:"{count, plural, one{You shared {count} item in {folder_path}} other{You shared {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"CUocxO",defaultMessage:"{name} shared <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"bbivSg",defaultMessage:"{count, plural, one{{name} shared {count} item in {folder_path}} other{{name} shared {count} items in {folder_path}}}"})},mount:{you:e=>1===e?a.defineMessage({id:"AJk/mG",defaultMessage:"You added <strong>{single_item_name}</strong>"}):a.defineMessage({id:"gRr0Xj",defaultMessage:"{count, plural, one{You added {count} item} other{You added {count} items}}"}),name:e=>1===e?a.defineMessage({id:"bvecjC",defaultMessage:"{name} added <strong>{single_item_name}</strong>"}):a.defineMessage({id:"rVz+0L",defaultMessage:"{count, plural, one{{name} added {count} item} other{{name} added {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"uiGNOZ",defaultMessage:"You added <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"gY6USQ",defaultMessage:"{count, plural, one{You added {count} item in {folder_path}} other{You added {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"G6pT4u",defaultMessage:"{name} added <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"GSjEU0",defaultMessage:"{count, plural, one{{name} added {count} item in {folder_path}} other{{name} added {count} items in {folder_path}}}"})},lost_access:{you:e=>1===e?a.defineMessage({id:"nKTH5m",defaultMessage:"You were removed from <strong>{single_item_name}</strong>"}):a.defineMessage({id:"m5kUfa",defaultMessage:"{count, plural, one{You were removed from {count} item} other{You were removed from {count} items}}"}),name:e=>1===e?a.defineMessage({id:"nKTH5m",defaultMessage:"You were removed from <strong>{single_item_name}</strong>"}):a.defineMessage({id:"m5kUfa",defaultMessage:"{count, plural, one{You were removed from {count} item} other{You were removed from {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"DWyepJ",defaultMessage:"You were removed from <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"6wETc+",defaultMessage:"{count, plural, one{You were removed from {count} item in {folder_path}} other{You were removed from {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"DWyepJ",defaultMessage:"You were removed from <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"6wETc+",defaultMessage:"{count, plural, one{You were removed from {count} item in {folder_path}} other{You were removed from {count} items in {folder_path}}}"})},add:{you:e=>1===e?a.defineMessage({id:"AJk/mG",defaultMessage:"You added <strong>{single_item_name}</strong>"}):a.defineMessage({id:"gRr0Xj",defaultMessage:"{count, plural, one{You added {count} item} other{You added {count} items}}"}),name:e=>1===e?a.defineMessage({id:"bvecjC",defaultMessage:"{name} added <strong>{single_item_name}</strong>"}):a.defineMessage({id:"rVz+0L",defaultMessage:"{count, plural, one{{name} added {count} item} other{{name} added {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"uiGNOZ",defaultMessage:"You added <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"gY6USQ",defaultMessage:"{count, plural, one{You added {count} item in {folder_path}} other{You added {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"G6pT4u",defaultMessage:"{name} added <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"GSjEU0",defaultMessage:"{count, plural, one{{name} added {count} item in {folder_path}} other{{name} added {count} items in {folder_path}}}"})},edit:{you:e=>1===e?a.defineMessage({id:"i2Xj04",defaultMessage:"You edited <strong>{single_item_name}</strong>"}):a.defineMessage({id:"brKsol",defaultMessage:"{count, plural, one{You edited {count} item} other{You edited {count} items}}"}),name:e=>1===e?a.defineMessage({id:"5WdAIs",defaultMessage:"{name} edited <strong>{single_item_name}</strong>"}):a.defineMessage({id:"6GvPYk",defaultMessage:"{count, plural, one{{name} edited {count} item} other{{name} edited {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"/LISaT",defaultMessage:"You edited <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"46onFW",defaultMessage:"{count, plural, one{You edited {count} item in {folder_path}} other{You edited {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"4/u0CZ",defaultMessage:"{name} edited <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"XX70v0",defaultMessage:"{count, plural, one{{name} edited {count} item in {folder_path}} other{{name} edited {count} items in {folder_path}}}"})},delete:{you:e=>1===e?a.defineMessage({id:"mPhnVF",defaultMessage:"You deleted <strong>{single_item_name}</strong>"}):a.defineMessage({id:"eXwZkw",defaultMessage:"{count, plural, one{You deleted {count} item} other{You deleted {count} items}}"}),name:e=>1===e?a.defineMessage({id:"AX/4il",defaultMessage:"{name} deleted <strong>{single_item_name}</strong>"}):a.defineMessage({id:"tR8p1/",defaultMessage:"{count, plural, one{{name} deleted {count} item} other{{name} deleted {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"ITG2x1",defaultMessage:"You deleted <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"Rdz77s",defaultMessage:"{count, plural, one{You deleted {count} item in {folder_path}} other{You deleted {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"Re3uD/",defaultMessage:"{name} deleted <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"ON/b0t",defaultMessage:"{count, plural, one{{name} deleted {count} item in {folder_path}} other{{name} deleted {count} items in {folder_path}}}"})},restore:{you:e=>1===e?a.defineMessage({id:"VV/eYK",defaultMessage:"You restored <strong>{single_item_name}</strong>"}):a.defineMessage({id:"ExAvCI",defaultMessage:"{count, plural, one{You restored {count} item} other{You restored {count} items}}"}),name:e=>1===e?a.defineMessage({id:"AsODc2",defaultMessage:"{name} restored <strong>{single_item_name}</strong>"}):a.defineMessage({id:"WXFbJn",defaultMessage:"{count, plural, one{{name} restored {count} item} other{{name} restored {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"nbcoHm",defaultMessage:"You restored <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"GBuqK+",defaultMessage:"{count, plural, one{You restored {count} item in {folder_path}} other{You restored {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"LThlyI",defaultMessage:"{name} restored <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"v7lRJw",defaultMessage:"{count, plural, one{{name} restored {count} item in {folder_path}} other{{name} restored {count} items in {folder_path}}}"})},restore_version:{you:e=>1===e?a.defineMessage({id:"Naoobk",defaultMessage:"You restored a previous version of <strong>{single_item_name}</strong>"}):a.defineMessage({id:"W5uw4O",defaultMessage:"{count, plural, one{You restored a previous version of {count} item} other{You restored a previous version of {count} items}}"}),name:e=>1===e?a.defineMessage({id:"2cWry4",defaultMessage:"{name} restored a previous version of <strong>{single_item_name}</strong>"}):a.defineMessage({id:"4+3wxk",defaultMessage:"{count, plural, one{{name} restored a previous version of {count} item} other{{name} restored a previous version of {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"wyxc8i",defaultMessage:"You restored a previous version of <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"5c+qgK",defaultMessage:"{count, plural, one{You restored a previous version of {count} item in {folder_path}} other{You restored a previous version of {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"KZq2LH",defaultMessage:"{name} restored a previous version of <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"RLihov",defaultMessage:"{count, plural, one{{name} restored a previous version of {count} item in {folder_path}} other{{name} restored a previous version of {count} items in {folder_path}}}"})},rollback:{you:e=>1===e?a.defineMessage({id:"9U9gjD",defaultMessage:"You rolled back <strong>{single_item_name}</strong>"}):a.defineMessage({id:"y2iJBv",defaultMessage:"{count, plural, one{You rolled back {count} item} other{You rolled back {count} items}}"}),name:e=>1===e?a.defineMessage({id:"l3ZNyl",defaultMessage:"{name} rolled back <strong>{single_item_name}</strong>"}):a.defineMessage({id:"T49I/A",defaultMessage:"{count, plural, one{{name} rolled back {count} item} other{{name} rolled back {count} items}}"}),youFolder:e=>1===e?a.defineMessage({id:"J6Utpo",defaultMessage:"You rolled back <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"HcGUcR",defaultMessage:"{count, plural, one{You rolled back {count} item in {folder_path}} other{You rolled back {count} items in {folder_path}}}"}),nameFolder:e=>1===e?a.defineMessage({id:"eET7px",defaultMessage:"{name} rolled back <strong>{single_item_name}</strong> in {folder_path}"}):a.defineMessage({id:"2b/+g/",defaultMessage:"{count, plural, one{{name} rolled back {count} item in {folder_path}} other{{name} rolled back {count} items in {folder_path}}}"})},unknown:{you:()=>null,name:()=>null,youFolder:()=>null,nameFolder:()=>null},other:{you:()=>null,name:()=>null,youFolder:()=>null,nameFolder:()=>null}};function lr(e){const{event:t,itemCount:o,relativeFolderDisplayPath:s}=e,i=t.op_type;let n={single_item_name:Vn(t.object_metadata),count:o,name:t.actor.display_name,folder_path:s,strong:e=>`<strong>${e[0]}</strong>`};if($n(i,"move")||$n(i,"move_in")||$n(i,"move_out"))return function(e){const{event:t,itemCount:o,i18nParams:s}=e,i=t.object_metadata;if(!t.op_type)return"";const n=t.op_type[".tag"];if("move_in"!==n&&"move_out"!==n&&"move"!==n)throw new Error("Unhandled move type in getMoveTooltip");let r=!1,l=!1,c="",d="";if(Un(i,"move_metadata"))c=a.child_dir(i.from_containing_path),d=a.child_dir(i.to_containing_path);else if(Un(i,"move_in_metadata"))c="",d=a.child_dir(i.to_containing_path);else{if(!Un(i,"move_out_metadata"))throw new Error("Unknown type for move metadata.");c=a.child_dir(i.from_containing_path),d=""}r=a.normalize(d)===a.normalize(e.path),l=a.normalize(c)===a.normalize(e.path);const u=Object.assign(Object.assign({},s),{count:o,src_folder:c,dst_folder:d}),{generateWithYou:p,generateWithYouAndFolder:g,generateWithName:m,generateWithNameAndFolder:h}=nr[n];return"move"===n||"move_in"===n?r?e.isYou?F.intl.formatMessage(p(o),u):F.intl.formatMessage(m(o),u):e.isYou?F.intl.formatMessage(g(o),u):F.intl.formatMessage(h(o),u):"move_out"===n?l?e.isYou?F.intl.formatMessage(p(o),u):F.intl.formatMessage(m(o),u):e.isYou?F.intl.formatMessage(g(o),u):F.intl.formatMessage(h(o),u):n}(Object.assign(Object.assign({},e),{i18nParams:n}));if($n(i,"rename")){const e=t.object_metadata;if(!Un(e,"rename_metadata"))throw new Error("rename optype without associated rename metadata?");n=Object.assign(Object.assign({},n),{single_item_name_prev:e.from_name,single_item_name_next:e.to_name,count:o})}const{you:r,youFolder:l,name:c,nameFolder:d}=rr[i[".tag"]];return void 0===s?e.isYou?r(o)?F.intl.formatMessage(r(o),n):"":c(o)?F.intl.formatMessage(c(o),n):"":e.isYou?l(o)?F.intl.formatMessage(l(o),n):"":d(o)?F.intl.formatMessage(d(o),n):""}const cr={delete:{generateWithYou:()=>a.defineMessage({id:"dI/OK5",defaultMessage:"You deleted <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"XeXPUa",defaultMessage:"{name} deleted <strong>{item_name}</strong>"})},edit:{generateWithYou:()=>a.defineMessage({id:"LBOymk",defaultMessage:"You edited <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"bOQ/DU",defaultMessage:"{name} edited <strong>{item_name}</strong>"})},add:{generateWithYou:()=>a.defineMessage({id:"+6lkxP",defaultMessage:"You added <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"KtZq4r",defaultMessage:"{name} added <strong>{item_name}</strong>"})},lost_access:{generateWithYou:()=>a.defineMessage({id:"GnRAIi",defaultMessage:"You were removed from <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"GnRAIi",defaultMessage:"You were removed from <strong>{item_name}</strong>"})},mount:{generateWithYou:()=>a.defineMessage({id:"+6lkxP",defaultMessage:"You added <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"KtZq4r",defaultMessage:"{name} added <strong>{item_name}</strong>"})},move:{generateWithYou:()=>a.defineMessage({id:"NeW8sZ",defaultMessage:"You moved <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"CUmnlA",defaultMessage:"{name} moved <strong>{item_name}</strong>"})},move_in:{generateWithYou:()=>a.defineMessage({id:"NeW8sZ",defaultMessage:"You moved <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"CUmnlA",defaultMessage:"{name} moved <strong>{item_name}</strong>"})},move_out:{generateWithYou:()=>a.defineMessage({id:"NeW8sZ",defaultMessage:"You moved <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"CUmnlA",defaultMessage:"{name} moved <strong>{item_name}</strong>"})},rename:{generateWithYou:()=>a.defineMessage({id:"dkI8Ly",defaultMessage:"You renamed {from_name} to <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"BKfMXQ",defaultMessage:"{name} renamed {from_name} to <strong>{item_name}</strong>"})},restore:{generateWithYou:()=>a.defineMessage({id:"r8n/88",defaultMessage:"You restored <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"dSxBG5",defaultMessage:"{name} restored <strong>{item_name}</strong>"})},restore_version:{generateWithYou:()=>a.defineMessage({id:"zRWIxa",defaultMessage:"You restored a previous version of <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"ctbg/G",defaultMessage:"{name} restored a previous version of <strong>{item_name}</strong>"})},rollback:{generateWithYou:()=>a.defineMessage({id:"B70y83",defaultMessage:"You rewound <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"UqoZNX",defaultMessage:"{name} rewound <strong>{item_name}</strong>"})},share:{generateWithYou:()=>a.defineMessage({id:"wGoymc",defaultMessage:"You shared <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"TYVys/",defaultMessage:"{name} shared <strong>{item_name}</strong>"})},unmount:{generateWithYou:()=>a.defineMessage({id:"dI/OK5",defaultMessage:"You deleted <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"XeXPUa",defaultMessage:"{name} deleted <strong>{item_name}</strong>"})},unshare:{generateWithYou:()=>a.defineMessage({id:"U/bb2x",defaultMessage:"You unshared <strong>{item_name}</strong>"}),generateWithName:()=>a.defineMessage({id:"USM+is",defaultMessage:"{name} unshared <strong>{item_name}</strong>"})},unknown:{generateWithYou:()=>({}),generateWithName:()=>({})},other:{generateWithYou:()=>({}),generateWithName:()=>({})}};function dr(e){const t=e.getTime(),o=a.getTimeBands(Date.now());return t>=o.today?F.intl.formatMessage({id:"JDRaFD",defaultMessage:"Today"}):t>=o.yesterday?F.intl.formatMessage({id:"2iSDDx",defaultMessage:"Yesterday"}):F.intl.formatDate(e,{year:"numeric",month:"short",day:"numeric"})}function ur(e){const{eventPath:t,user:o}=e;return void 0===t?void 0:""===t?a.Viewer.get_root_name(o):a.child_dir(t)}function pr({event:e,path:t,currentFolder:o,user:s}){let i=0;if(e.object_metadata)if(Un(e.object_metadata,"single_object_metadata")||Un(e.object_metadata,"multi_object_metadata")||Un(e.object_metadata,"rename_metadata")||Un(e.object_metadata,"move_metadata")||Un(e.object_metadata,"move_in_metadata")||Un(e.object_metadata,"move_out_metadata")||Un(e.object_metadata,"rollback_metadata"))i=e.object_metadata.contents_count||0;else if(Un(e.object_metadata,"edit_metadata"))i=1;else{if(!Un(e.object_metadata,"other"))return e.object_metadata;i=1}0===i&&(i=1);const n=new Date(e.timestamp_us/1e3);let r=null;e.object_metadata&&Un(e.object_metadata,"rollback_metadata")&&0!==e.object_metadata.to_timestamp&&(r=new Date(e.object_metadata.to_timestamp/1e3));const l={month:"short",day:"numeric",hour:"numeric",minute:"2-digit"},c=F.intl.formatDate(n,l),d=F.intl.formatDate(n,{weekday:"short",month:"short",day:"numeric"}),u=r?F.intl.formatDate(r,l):null,g=F.intl.formatDate(n,{hour:"numeric",minute:"2-digit"}),m=a.normalize(Un(h=e.object_metadata,"multi_object_metadata")||Un(h,"single_object_metadata")||Un(h,"edit_metadata")||Un(h,"rename_metadata")||Un(h,"rollback_metadata")?a.normalize(h.containing_path):Un(h,"move_metadata")||Un(h,"move_in_metadata")?a.normalize(h.to_containing_path):Un(h,"move_out_metadata")?a.normalize(h.from_containing_path):Un(h,"other")?"":h);var h;const _=m+a.normalize(Vn(e.object_metadata))===t,f=e.actor.account_id===s.id,E=lr({isYou:f,event:e,itemCount:i,path:t,relativeFolderDisplayPath:""}),v=function(e){const{event:t,user:o}=e,s=t.actor.display_name,i=t.op_type,n={item_name:Vn(t.object_metadata),name:s,from_name:t.object_metadata&&"from_name"in t.object_metadata&&t.object_metadata.from_name,to_name:t.object_metadata&&"to_name"in t.object_metadata&&t.object_metadata.to_name,from_containing_path:t.object_metadata&&"from_containing_path"in t.object_metadata?t.object_metadata.from_containing_path:"",to_containing_path:t.object_metadata&&"to_containing_path"in t.object_metadata?t.object_metadata.to_containing_path:"",rollback_date:e.fullRollbackDate,strong:e=>`<strong>${e.join("")}</strong>`};return""===n.from_containing_path&&(n.from_containing_path=a.Viewer.get_root_name(o)),""===n.to_containing_path&&(n.to_containing_path=a.Viewer.get_root_name(o)),""===n.item_name&&(n.item_name=a.Viewer.get_root_name(o)),null!==e.fullRollbackDate?e.objectIsCurrentFolder?e.isYou?F.intl.formatMessage({id:"TlB3sY",defaultMessage:"You rewound this folder to {rollback_date}"},n):F.intl.formatMessage({id:"fSDEDR",defaultMessage:"{name} rewound this folder to {rollback_date}"},n):e.isYou?F.intl.formatMessage({id:"gtjB22",defaultMessage:"You rewound <strong>{item_name}</strong> to {rollback_date}"},n):F.intl.formatMessage({id:"PZQMga",defaultMessage:"{name} rewound <strong>{item_name}</strong> to {rollback_date}"},n):e.isYou?F.intl.formatMessage(cr[i[".tag"]].generateWithYou(),n):F.intl.formatMessage(cr[i[".tag"]].generateWithName(),n)}({event:e,isYou:f,user:s,objectIsCurrentFolder:_,fullRollbackDate:u});let A;A=$n(e.op_type,"delete")?new p.URI({scheme:"https",authority:"www.dropbox.com",path:"/deleted_files"}):a.browse_uri_for_fq_path(s,m);const R=_?void 0:function({event:e,user:t,path:o}){const s=e.object_metadata;if("from_containing_path"in s&&"to_containing_path"in s){const e=ur({eventPath:s.from_containing_path,user:t}),o=ur({eventPath:s.to_containing_path,user:t});return F.intl.formatMessage({id:"L2sa5J",defaultMessage:"from {src} to {dst}"},{src:e,dst:o})}if("from_containing_path"in s){const e=ur({eventPath:s.from_containing_path,user:t});return F.intl.formatMessage({id:"sSt7o/",defaultMessage:"from {location}"},{location:e})}if("to_containing_path"in s){const e=ur({eventPath:s.to_containing_path,user:t});return a.normalize(s.to_containing_path)!==a.normalize(o)?F.intl.formatMessage({id:"/0++y2",defaultMessage:"to {location}"},{location:e}):void 0}if("containing_path"in s){const e=ur({eventPath:s.containing_path,user:t});return""===a.normalize(s.containing_path)&&"name"in s&&""===s.name?void 0:a.normalize(s.containing_path)!==a.normalize(o)?F.intl.formatMessage({id:"N9Moi6",defaultMessage:"in {location}"},{location:e}):void 0}if(!Un(s,"other"))return s}({event:e,user:s,path:t});return{type:Cn.event,actor:e.actor,count:i,browseHref:A,eventCardDate:dr(n),confirmationCardDate:c,formattedDate:d,date:n,tooltip:E,uid:Wn(),eventHeadline:v,timestamp:n.getTime(),displayTooltip:E!==v,cardSubheading:R,operationName:(S=e.op_type,$n(S,"add")?"added":$n(S,"delete")?"deleted":$n(S,"edit")?"edited":$n(S,"lost_access")?"lost access":$n(S,"mount")?"mounted":$n(S,"move")?"moved":$n(S,"move_in")?"moved in":$n(S,"move_out")?"moved out":$n(S,"rename")?"renamed":$n(S,"restore")?"restore":$n(S,"restore_version")?"restore_version":$n(S,"rollback")?"rollback":$n(S,"share")?"shared":$n(S,"unmount")?"unmounted":$n(S,"unshare")?"unshared":$n(S,"other")||$n(S,"unknown")?"error":S),timeAgo:g};var S}function gr(e,t,o){return e.slice(e.length-t,e.length-o).reduce(((e,t)=>e+t.count),0)>0}a.injectInternalStyle("metaserver/static/js/delorean/components/folder_history/folder_history.module.out.css",(e=>"._folder-history-loading_eqmc6_1{align-items:center;display:flex;height:100%;justify-content:center}"));const mr="_folder-history-loading_eqmc6_1",hr=e=>{const{cursor:o,direction:i,isInRightRail:n}=e;return s.React$1.createElement("div",{className:a.classnames({"folder-history-show-more-card":!0,"folder-history-show-more-card--future":i===t.PaginationDirection.future,"folder-history-show-more-card--past":i===t.PaginationDirection.past,"folder-history-show-more-card--right-rail":n})},s.React$1.createElement(a.Button,{variant:"transparent",size:"small",withIconLeft:e.direction===t.PaginationDirection.future?s.React$1.createElement(a.UIIcon,{src:a.ChevronUpLine,size:"small"}):s.React$1.createElement(a.UIIcon,{src:a.ChevronDownLine,size:"small"}),onClick:()=>{e.onShowMore(o)}},e.direction===t.PaginationDirection.future?F.intl.formatMessage({id:"aJv1kI",defaultMessage:"Show newer history"}):F.intl.formatMessage({id:"N8asgh",defaultMessage:"Show older history"})))};class _r extends s.React$1.PureComponent{constructor(e){super(e),this.previousTopOfListRef=null,this.topOfListRef=null,this.selectedDateOnGraphRef=null,this.onMouseOverEvent=(e,t)=>{if(this.props.events.type===On.hasContent){const o=this.getProcessedEvents(this.props.events.processedEvents),s=jn(o,(t=>t.type===Cn.event&&t.uid===e.uid));if(void 0===s)return;let a,i;if(1===s&&"top"===t&&(t="bottom"),"top"===t){i=o[s];for(let e=s-1;e>=0;e--){const t=o[e];if(t.type===Cn.event){a=t;break}}}if("bottom"===t){a=o[s];for(let e=s+1;e<o.length;e++){const t=o[e];if(t.type===Cn.event){i=t;break}}}a&&i?this.setState({hoveredEvents:{topEvent:a,botEvent:i}}):a&&!i?this.setState({hoveredEvents:{topEvent:a}}):this.setState({hoveredEvents:void 0})}},this.handleClick=e=>{this.props.isForARewind&&this.setState({selectedEvents:this.state.hoveredEvents}),this.state.hoveredEvents&&this.props.onClickEvent(this.state.hoveredEvents)},this.eventRef=e=>{e!==this.topOfListRef&&null!==e&&(this.previousTopOfListRef=this.topOfListRef,this.topOfListRef=s.ReactDOM.findDOMNode(e))},this.setSelectedDateOnGraphRef=e=>{this.selectedDateOnGraphRef=null!==e?s.ReactDOM.findDOMNode(e):null},this.setContainerRef=e=>{this.containerRef=e},this.hoverOut=()=>{this.setState({hoveredEvents:void 0})},this.state={hoveredEvents:void 0,selectedEvents:void 0}}componentDidUpdate(e){if((this.topOfListRef&&!document.body.contains(this.topOfListRef)||this.previousTopOfListRef&&!document.body.contains(this.previousTopOfListRef))&&(this.topOfListRef=null,this.previousTopOfListRef=null,this.selectedDateOnGraphRef=null),this.props.events.type===On.hasContent&&this.props.pagesLoaded!==e.pagesLoaded&&this.props.pagesLoaded&&this.props.pagesLoaded)if(this.props.isInitialLoad)this.selectedDateOnGraphRef&&this.selectedDateOnGraphRef.scrollIntoView(!0);else if(this.containerRef&&this.previousTopOfListRef&&this.topOfListRef){const e=this.containerRef,t=this.previousTopOfListRef.offsetTop-this.topOfListRef.offsetTop;e.scrollBy(0,t)}}getProcessedEvents(e){if(this.props.selectedDateTsInMs){const o=zn(new Date(this.props.selectedDateTsInMs));if(!(e.filter((e=>e.type===Cn.dateBanner&&e.date.getTime()===o.getTime())).length>0)){const s=(t=o,{type:Cn.dateBanner,eventCardDate:dr(t),date:zn(t)}),a=function(e){return{type:Cn.emptyDay,date:e,uid:Wn()}}(o);if(e[0].date<o)e=this.props.events.type===On.hasContent&&"reached-end"===this.props.events.cursorFuture.type?[s,...e]:[s,a,...e];else if(e[e.length-1].date>o)e=this.props.events.type===On.hasContent&&"reached-end"===this.props.events.cursorPast.type?[...e,s]:[...e,s,a];else for(let t=0;t<e.length-1;t++)if(e[t].date>o&&e[t+1].date<o){e.splice(t+1,0,s,a);break}}}var t;return e}renderNeverLoaded(){return null}renderError(e){const{isInRightRail:t}=this.props;return s.React$1.createElement("div",null,s.React$1.createElement("div",{className:a.classnames("folder-history-event-list__empty-text",{"folder-history-event-list__empty-text--right-rail":t})},s.React$1.createElement(a.Text,{color:"faint"},e," "),s.React$1.createElement(a.Link,{href:"#",variant:"monochromatic",onClick:t?this.props.reloadEvents:Xn},t?F.intl.formatMessage({id:"JXEmzE",defaultMessage:"Try again."}):F.intl.formatMessage({id:"K2WP/Z",defaultMessage:"Contact support"}))))}renderLoading(){const{isInRightRail:e}=this.props;return e?s.React$1.createElement("div",{className:mr},s.React$1.createElement(a.Spinner,{"data-testid":"rewind-activity-list-spinner","aria-valuetext":F.intl.formatMessage({id:"FysXyj",defaultMessage:"Loading folder history"})})):s.React$1.createElement(ir,{animated:!0})}renderEvents(e){const{isInRightRail:o}=this.props;let i,n;switch(e.cursorPast.type){case"never-fetched":i=s.React$1.createElement("div",{className:"folder-history-show-more-card"},s.React$1.createElement(a.Spinner,{"data-testid":"rewind-activity-list-spinner",size:"xsmall","aria-valuetext":"Loading"}));break;case"reached-end":i=s.React$1.createElement("div",{className:a.classnames("folder-history-empty-event-card",{"folder-history-empty-event-card--right-rail":o})},s.React$1.createElement(a.Text,{size:o?"small":void 0},F.intl.formatMessage({id:"WXQmpV",defaultMessage:"That’s as far back as it goes"})));break;default:i=s.React$1.createElement(hr,{cursor:e.cursorPast,direction:t.PaginationDirection.past,onShowMore:this.props.onShowMorePast,isInRightRail:o})}if(this.props.isForARewind)switch(e.cursorFuture.type){case"never-fetched":n=s.React$1.createElement("div",{className:"folder-history-show-more-card"},s.React$1.createElement(a.Spinner,{"data-testid":"rewind-activity-list-spinner",size:"xsmall","aria-valuetext":"Loading"}));break;case"reached-end":n=s.React$1.createElement("div",{className:a.classnames("folder-history-empty-event-card",{"folder-history-empty-event-card--right-rail":o})},s.React$1.createElement(a.Text,{size:o?"small":void 0},F.intl.formatMessage({id:"ooTeZE",defaultMessage:"That’s all that happened"})));break;default:n=s.React$1.createElement(hr,{cursor:e.cursorFuture,direction:t.PaginationDirection.future,onShowMore:this.props.onShowMoreFuture})}const r=this.getProcessedEvents(e.processedEvents),l=this.state.hoveredEvents?jn(r,(e=>e.type===Cn.event&&e.uid===this.state.hoveredEvents.topEvent.uid)):void 0,c=this.state.selectedEvents?jn(r,(e=>e.type===Cn.event&&e.uid===this.state.selectedEvents.topEvent.uid)):void 0,[d,...u]=r;return s.React$1.createElement(Ce.StickyContainer,{offsetTop:o?27:0},this.renderEvent({event:d,willRewindEvent:!1,isTopmostEvent:!1,isAnythingInListSelectedOrHovered:void 0!==this.state.selectedEvents}),n,u.map(((e,t)=>{let o=!1;return this.props.isForARewind&&(this.state.selectedEvents&&void 0!==c&&t<c&&(o=!0),!this.state.selectedEvents&&void 0!==l&&t<l&&(o=!0),e.type===Cn.emptyDay&&(this.state.selectedEvents?e.date<this.state.selectedEvents.topEvent.date&&(!this.state.selectedEvents.botEvent||e.date>this.state.selectedEvents.botEvent.date)&&(o=!0):this.state.hoveredEvents&&e.date<this.state.hoveredEvents.topEvent.date&&(!this.state.hoveredEvents.botEvent.date||e.date>this.state.hoveredEvents.botEvent.date)&&(o=!0)),void 0===l&&void 0===c&&(o=!0)),this.renderEvent({event:e,willRewindEvent:o,isTopmostEvent:0===t,isAnythingInListSelectedOrHovered:!!this.state.selectedEvents||!!this.state.hoveredEvents})})),i)}renderEvent({event:e,willRewindEvent:t,isTopmostEvent:o,isAnythingInListSelectedOrHovered:i}){const{isInRightRail:n}=this.props;if(e.type===Cn.event){const a={top:{style:"none",position:"top",text:""},bottom:{style:"none",position:"bottom",text:""}};if(this.props.isForARewind){const t=F.intl.formatMessage({id:"4EZH1k",defaultMessage:"Choose what to keep"});this.state.hoveredEvents&&this.state.hoveredEvents.botEvent&&this.state.hoveredEvents.botEvent.uid===e.uid&&(a.top={position:"top",style:"dashed",text:t}),this.state.hoveredEvents&&!this.state.hoveredEvents.botEvent&&this.state.hoveredEvents.topEvent.uid===e.uid&&(a.bottom={position:"bottom",style:"dashed",text:t}),this.state.selectedEvents&&this.state.selectedEvents.botEvent&&this.state.selectedEvents.botEvent.uid===e.uid&&(a.top={position:"top",style:"solid",text:this.state.selectedEvents.botEvent.confirmationCardDate}),this.state.selectedEvents&&!this.state.selectedEvents.botEvent&&this.state.selectedEvents.topEvent.uid===e.uid&&(a.bottom={position:"bottom",style:"solid",text:this.state.selectedEvents.topEvent.confirmationCardDate}),i||(a.top={position:"top",style:"pulsing",text:""})}return s.React$1.createElement(kn,{key:e.uid,ref:o?this.eventRef:void 0,rewindMode:this.props.isForARewind,onClick:this.handleClick,onMouseOver:this.onMouseOverEvent,onMouseOut:Yn,event:e,willRewindEvent:t,isFaded:t&&!!this.state.hoveredEvents,isSelected:!1,dividerLineStateTop:a.top,dividerLineStateBottom:a.bottom,isInRightRail:n})}return e.type===Cn.dateBanner?s.React$1.createElement(Ce.Sticky,{ref:this.props.selectedDateTsInMs&&Kn(e.date)===Kn(new Date(this.props.selectedDateTsInMs))?this.setSelectedDateOnGraphRef:void 0,className:"folder-history-sticky-header"},s.React$1.createElement(Nn,{segmentName:e.eventCardDate,isInRightRail:this.props.isInRightRail})):e.type===Cn.emptyDay?s.React$1.createElement("div",{className:a.classnames({"folder-history-empty-event-card":!0,"folder-history-empty-event-card--right-rail":n,"folder-history-empty-event-card__include-in-rewind":this.props.isForARewind&&!t})},s.React$1.createElement(a.Text,{color:n?"standard":"faint",size:n?"small":void 0},F.intl.formatMessage({id:"l0PRXC",defaultMessage:"Nothing happened on this day"}))):e}renderEmptyList(){const{isInRightRail:e}=this.props;return this.props.events.type!==On.hasContent?null:s.React$1.createElement("div",null,!e&&s.React$1.createElement(Nn,{segmentName:F.intl.formatMessage({id:"JDRaFD",defaultMessage:"Today"})}),!e&&s.React$1.createElement("img",{alt:"",className:"folder-history-event-list__empty-img",src:s.static_url("/static/metaserver/static/images/delorean/illo-no-activity-vflHN_Psx.png")}),s.React$1.createElement("div",{className:a.classnames("folder-history-event-list__empty-text",{"folder-history-event-list__empty-text--right-rail":e})},s.React$1.createElement(a.Text,{color:"faint",size:e?"small":"standard"},e?F.intl.formatMessage({id:"vzvhs0",defaultMessage:"Updates to this folder will show up here."}):F.intl.formatMessage({id:"LUEaoA",defaultMessage:"There’s nothing in our records"}))))}render(){let e;return this.props.events.type===On.error?e=this.renderError(this.props.events.errorString):this.props.events.type===On.loadingEntirePanel?e=this.renderLoading():this.props.events.type===On.hasContent?e=0===this.props.events.processedEvents.length?this.renderEmptyList():this.renderEvents(this.props.events):(this.props.events,e=null),s.React$1.createElement("div",{onMouseLeave:this.hoverOut,ref:this.setContainerRef,className:a.classnames("folder-history-event-list",{"folder-history-event-list--right-rail":this.props.isInRightRail})},e)}}function fr(e){"unsupported_version"===(e&&e.error&&e.error.err&&e.error.err[".tag"])&&a.Snackbar.fail(F.intl.formatMessage({id:"H0vBqO",defaultMessage:"Dropbox is out of date. Please refresh your browser."}),"delorean-unsupported-version")}function Er(e){return(s,i)=>o.__awaiter(this,void 0,void 0,(function*(){let i;try{i=yield function(e){return o.__awaiter(this,void 0,void 0,(function*(){const o={path:e.fqpath,version:2,direction:e.direction===t.PaginationDirection.future?{".tag":"future"}:{".tag":"past"},timestamp:e.timestampInSeconds?e.timestampInSeconds:0,filter:{only_rewindable:e.onlyRewindableEvents,op_type_filters:e.opTypeFilters},ns_id:e.rootNsId};try{return yield(new a.UserApiV2Client).ns("chronicle").rpc("list_events",o,{subjectUserId:e.user.id})}catch(e){throw fr(e),e}}))}(e)}catch(o){const a=Qn({err:o,isForRewindFlow:e.onlyRewindableEvents});return void s({type:t.DeloreanActionType.setFolderHistoryEventsError,errorString:a})}e.clearEventList&&s({type:t.DeloreanActionType.clearEventList}),s({type:t.DeloreanActionType.setEventsLoaded,events:i.events||[],user:e.user,direction:e.direction,cursor:i.cursor?{type:"has-cursor",cursor:i.cursor}:{type:"reached-end"},hasMore:i.has_more||!1,fqPath:e.fqpath}),e.done&&e.done()}))}function vr(e){const{fqPath:o,user:s,openToRewind:i}=e;return{type:t.DeloreanActionType.initialize,fqPath:o,user:s,openToRewind:i,viewer:a.Viewer.get_viewer()}}function Ar(e){const{direction:s}=e;return(i,n)=>o.__awaiter(this,void 0,void 0,(function*(){i({type:t.DeloreanActionType.setFolderHistoryPaginationLoading,direction:e.direction});const r=Tn(n());if(!("processedEvents"in r))return;if(r.processedEvents[r.processedEvents.length-1].type!==Cn.event)return;let l;try{l=yield function(e){return o.__awaiter(this,void 0,void 0,(function*(){const{cursorObj:o,fqpath:s,direction:i,rootNsId:n}=e,r={cursor:o.cursor,path:s,direction:i===t.PaginationDirection.future?{".tag":"future"}:{".tag":"past"},version:2,ns_id:n};try{return(new a.UserApiV2Client).ns("chronicle").rpc("list_events",r,{subjectUserId:e.userId})}catch(e){throw fr(e),e}}))}({userId:e.user.id,fqpath:e.fqpath,cursorObj:e.direction===t.PaginationDirection.future?e.futureCursor:e.pastCursor,direction:s,rootNsId:e.rootNsId})}catch(o){const s=Qn({err:o,isForRewindFlow:e.isForRewindFlow});return void i({type:t.DeloreanActionType.setFolderHistoryEventsError,errorString:s})}i({type:t.DeloreanActionType.setFolderHistoryPaginationLoaded,user:e.user,events:l.events||[],cursor:l.has_more?{type:"has-cursor",cursor:l.cursor}:{type:"reached-end"},hasMore:l.has_more||!1,direction:s,fqPath:e.fqpath}),e.done&&e.done(l.events?l.events.length:0)}))}_r.displayName="FolderHistory";class Rr extends s.React$1.Component{constructor(e){super(e)}render(){const e=this.props.currentStep>1;return s.React$1.createElement("div",{className:"rewind-graph-title-container"},s.React$1.createElement("div",{className:"rewind-step-header"},e?s.React$1.createElement(a.IconButton,{className:"rewind-step-back",variant:"transparent",size:"small",onClick:this.props.onGoBack},s.React$1.createElement(a.UIIcon,{size:"small",src:a.ChevronLeftLine})):s.React$1.createElement("span",{className:"rewind-step-back"}),s.React$1.createElement(a.Text,{className:"rewind-step-header__text",size:"large"},F.intl.formatMessage({id:"i62rvF",defaultMessage:"{current_step} of {max_step}:"},{current_step:this.props.currentStep,max_step:this.props.maxStep})," "),s.React$1.createElement(a.Text,{className:"rewind-step-header__text",size:"large",isBold:!0},this.props.instructions)))}}Rr.displayName="RewindStepHeader";class Sr extends s.React$1.Component{constructor(e){super(e)}render(){return this.props.visible?s.React$1.createElement("div",{className:"rewind-continue-widget"},s.React$1.createElement("span",{className:"rewind-continue-widget--text"},s.React$1.createElement(a.Text,null,this.props.text)),s.React$1.createElement(a.Button,{variant:"primary",onClick:this.props.onContinue,className:"rewind-continue-widget__button"},F.intl.formatMessage({id:"LgJiOW",defaultMessage:"Continue"}))):null}}var yr,wr,Tr;Sr.displayName="RewindContinueWidget",function(e){e.load_callout="delorean_browse_load_callout",e.exit_callout="delorean_browse_exit_callout",e.load_preview="delorean_browse_load_preview",e.click_preview_cancel="delorean_browse_click_preview_cancel",e.click_preview_rb="delorean_browse_click_preview_rb",e.click_preview_back="delorean_browse_click_preview_back",e.click_help="delorean_browse_click_help",e.click_nux_next="delorean_browse_click_nux_next",e.load_day_graph="delorean_browse_load_day_graph",e.click_day_graph_date="delorean_browse_click_day_graph_date",e.click_day_graph_next="delorean_browse_click_day_graph_next",e.load_events="delorean_browse_load_events",e.click_events_back="delorean_browse_click_events_back",e.click_events_load_new="delorean_browse_click_events_load_new",e.click_events_load_old="delorean_browse_click_events_load_old",e.click_events_next="delorean_browse_click_events_next",e.load_progress="delorean_browse_load_progress",e.load_completion="delorean_browse_load_completion",e.exit_drawer="delorean_browse_exit_drawer",e.load_nux="delorean_browse_load_nux",e.load_upsell="delorean_browse_load_upsell",e.click_upsell="delorean_browse_click_upsell"}(yr||(yr={})),t.DeloreanCloseReason=void 0,(wr=t.DeloreanCloseReason||(t.DeloreanCloseReason={})).click_close="click_close",wr.page_exit="page_exit",wr.browse_folder="browse_folder",t.DeloreanPage=void 0,(Tr=t.DeloreanPage||(t.DeloreanPage={})).nux="nux",Tr.day_graph="day_graph",Tr.events="events",Tr.preview="preview",Tr.progress="progress",Tr.completion="completion",Tr.upsell="upsell",Tr.error_1="error_1",Tr.error_2="error_2";const br=e=>e.isInsideSharedFolder?"sf":e.isInsideTeamFolderTree?"team_space":"home_ns",Mr=e=>{const{user:t,restoreId:o,startTsInMs:s,count:i}=e;a.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:yr.click_events_load_new,extra:{tti:String(Date.now()-s),num_events:String(i)}})};class Ir extends s.React$1.Component{constructor(e){super(e),this.initialEventTimestamp=null,this.startLoadTsInMs=null,this.loadEvents=()=>{const e=Math.floor((this.props.selectedDateTsInMs+We.ONE_DAY_MS)/1e3);this.props.dispatch(Er({user:this.props.user,fqpath:this.props.fqpath,onlyRewindableEvents:this.props.isForRewindFlow,direction:t.PaginationDirection.past,timestampInSeconds:e,opTypeFilters:[],done:this.loadPageOfEvents,clearEventList:!1,rootNsId:this.props.rootNsId})),this.props.isForRewindFlow&&this.props.dispatch(Er({user:this.props.user,fqpath:this.props.fqpath,direction:t.PaginationDirection.future,onlyRewindableEvents:this.props.isForRewindFlow,timestampInSeconds:e,opTypeFilters:[],done:this.loadPageOfEvents,clearEventList:!1,rootNsId:this.props.rootNsId}))},this.loadPageOfEvents=()=>{const{user:e,restoreId:t,events:o}=this.props;this.setState((s=>{const i=s.pagesLoaded+1;if(i===(this.props.isForRewindFlow?2:1)&&((e=>{const{user:t,restoreId:o,events:s,startLoadTsInMs:i}=e;let n;null!==i&&(n=Date.now()-i);const r=s.type===On.hasContent?s.processedEvents.filter((e=>e.type===Cn.event)).length:0;a.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:yr.load_events,extra:{num_events:String(r),tti:String(n)}})})({user:e,restoreId:t,startLoadTsInMs:this.startLoadTsInMs,events:o}),this.props.events.type===On.hasContent))for(const e of this.props.events.processedEvents)if(e.type===Cn.event){this.initialEventTimestamp=e.timestamp;break}return Object.assign(Object.assign({},s),{pagesLoaded:i})}))},this.onGoBack=()=>{const{user:e,restoreId:o}=this.props;(e=>{const{user:t,restoreId:o}=e;a.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:yr.click_events_back})})({user:e,restoreId:o}),this.props.dispatch({type:t.DeloreanActionType.goBackFromActivityListPage})},this.showMoreFuture=e=>{const o=Date.now();this.props.dispatch(Ar({user:this.props.user,fqpath:this.props.fqpath,futureCursor:e,direction:t.PaginationDirection.future,isForRewindFlow:this.props.isForRewindFlow,rootNsId:this.props.rootNsId,done:e=>{const{user:t,restoreId:s}=this.props;Mr({user:t,restoreId:s,startTsInMs:o,count:e})}}))},this.showMorePast=e=>{const o=Date.now();this.props.dispatch(Ar({user:this.props.user,fqpath:this.props.fqpath,pastCursor:e,direction:t.PaginationDirection.past,isForRewindFlow:this.props.isForRewindFlow,rootNsId:this.props.rootNsId,done:e=>{const{user:t,restoreId:s}=this.props;Mr({user:t,restoreId:s,startTsInMs:o,count:e})}}))},this.selectEventForRewind=e=>{this.setState({eventAboveDivider:e.topEvent})},this.onContinue=()=>{this.state.eventAboveDivider&&(this.logContinue(this.state.eventAboveDivider),this.props.dispatch({type:t.DeloreanActionType.changeRewindPageToConfirmationPage,eventAboveDivider:this.state.eventAboveDivider}))},this.logContinue=e=>{if(this.props.events.type!==On.hasContent)return;const t=this.initialEventTimestamp,{user:o,restoreId:s}=this.props;(e=>{const{user:t,events:o,initialEventTimestamp:s,selectedEvent:i,restoreId:n}=e,r=s,l=i.timestamp,c=jn(o,(e=>e.type===Cn.event&&e.timestamp===r))||0,d=jn(o,(e=>e.type===Cn.event&&e.timestamp===l))||0;a.RestorationStepsLogger.log_step({userId:t.id,restoreId:n,step:yr.click_events_next,extra:{num_events_offset:String(Math.abs(c-d))}})})({selectedEvent:e,events:this.props.events.processedEvents,restoreId:s,initialEventTimestamp:t,user:o})},this.state={pagesLoaded:0,eventAboveDivider:void 0}}componentDidMount(){this.startLoadTsInMs=Date.now(),this.props.dispatch({type:t.DeloreanActionType.clearEventList}),this.loadEvents()}render(){const{isInRightRail:e}=this.props;return s.React$1.createElement("div",{className:a.classnames("folder-history-ie11fix",{"folder-history-ie11fix--right-rail":e})},s.React$1.createElement("div",{className:a.classnames("folder-history-event-list-container",{"folder-history-event-list-container--right-rail":e})},this.props.isForRewindFlow&&s.React$1.createElement(Rr,{currentStep:2,maxStep:3,instructions:F.intl.formatMessage({id:"nfkI3y",defaultMessage:"Fine tune"}),onGoBack:this.onGoBack}),s.React$1.createElement(_r,{selectedDateTsInMs:this.props.selectedDateTsInMs,events:this.props.events,isForARewind:this.props.isForRewindFlow,isInitialLoad:this.props.isInitialLoad,onShowMoreFuture:this.showMoreFuture,onShowMorePast:this.showMorePast,onClickEvent:this.props.isForRewindFlow?this.selectEventForRewind:Yn,reloadEvents:this.loadEvents,pagesLoaded:this.state.pagesLoaded,isInRightRail:e}),s.React$1.createElement(Sr,{onContinue:this.onContinue,visible:!!this.state.eventAboveDivider,text:F.intl.formatMessage({id:"BRqDy1",defaultMessage:"Now, let’s review"})})))}}Ir.displayName="RewindActivityListPage";const Fr={hasDismissedNUX:!1,isInitialLoad:!0,pageData:{[t.RewindFlowPage.notVisible]:{page:t.RewindFlowPage.notVisible},[t.RewindFlowPage.NUXPage]:{page:t.RewindFlowPage.NUXPage},[t.RewindFlowPage.graphPage]:{page:t.RewindFlowPage.graphPage,contents:{type:"initial-load"},graphStartOffset:7,graphEndOffset:0},[t.RewindFlowPage.confirmationPage]:{page:t.RewindFlowPage.confirmationPage,eventAboveDivider:void 0},[t.RewindFlowPage.activityListPage]:{page:t.RewindFlowPage.activityListPage,selectedDateTsInMs:0,selectedDateString:""},[t.RewindFlowPage.startedPage]:{page:t.RewindFlowPage.startedPage,rewindState:t.RewindState.InProgress,rewindId:"",selectedEvent:void 0},[t.RewindFlowPage.upsellPage]:{page:t.RewindFlowPage.upsellPage}},activePage:t.RewindFlowPage.notVisible,folderDisplayName:"",rootDisplayName:"",folderName:"",fqpath:"",events:{type:On.loadingEntirePanel}};function Or(e,o){const{user:s,viewer:i,openToRewind:n}=o,r=a.normalize(o.fqPath),l=function(e,t){let o="";return o="personal"===e.role?t.is_paired||t.linked_users_set.has_linked_or_paired_users()?F.intl.formatMessage({id:"QPBzI3",defaultMessage:"Personal"}):F.intl.formatMessage({id:"rIir19",defaultMessage:"Dropbox"}):t.team_name,o}(s,i);let c="";c=""===r?l:a.child_dir(r);const d=Fr;return Object.assign(Object.assign({},d),{folderDisplayName:c,rootDisplayName:l,folderName:a.child_dir(r),fqpath:r,activePage:n?t.RewindFlowPage.NUXPage:t.RewindFlowPage.notVisible})}function Cr(e,o){if(a.normalize(e.fqpath)!==a.normalize(o.fqPath))return e;const s=e.events.type===On.hasContent?e.events.processedEvents:[],i=o.events.map((t=>pr({event:t,path:e.fqpath,currentFolder:e.folderName,user:o.user})));let n,r=e.events.type===On.hasContent?e.events.cursorFuture:{type:"never-fetched"},l=e.events.type===On.hasContent?e.events.cursorPast:{type:"never-fetched"};o.direction===t.PaginationDirection.future?(n=Hn([...i,...s],(e=>e.type===Cn.event)),r=o.hasMore?o.cursor:{type:"reached-end"}):(n=Hn([...s,...i],(e=>e.type===Cn.event)),l=o.hasMore?o.cursor:{type:"reached-end"}),n=n.sort(((e,t)=>t.timestamp-e.timestamp));const c=[];let d;for(const e of n)d&&e.eventCardDate===d.eventCardDate||c.push({type:Cn.dateBanner,eventCardDate:e.eventCardDate,date:zn(new Date(e.timestamp))}),c.push(e),d=e;let u=!1,p=!1;return e.events.type===On.hasContent&&(u=o.direction!==t.PaginationDirection.past&&e.events.loadingPastPage,p=o.direction!==t.PaginationDirection.future&&e.events.loadingFuturePage),Object.assign(Object.assign({},e),{isInitialLoad:o.type===t.DeloreanActionType.setEventsLoaded,events:{type:On.hasContent,loadingPastPage:u,loadingFuturePage:p,processedEvents:c,cursorFuture:r,cursorPast:l}})}function Nr(e,o){if("loaded"!==e.pageData.graphPage.contents.type)return e;const s=o.type===t.DeloreanActionType.setGraphRangeBack,a=e.pageData.graphPage.graphStartOffset+(s?o.length:-o.length),i=e.pageData.graphPage.graphEndOffset+(s?o.length:-o.length);return Object.assign(Object.assign({},e),{pageData:Object.assign(Object.assign({},e.pageData),{[t.RewindFlowPage.graphPage]:Object.assign(Object.assign({},e.pageData.graphPage),{graphStartOffset:a,graphEndOffset:i,contents:Object.assign(Object.assign({},e.pageData.graphPage.contents),{type:"loaded",hasDataThisWeek:gr(e.pageData.graphPage.contents.data,a,i)})})})})}function Dr(e=Fr,o){switch(o.type){case t.DeloreanActionType.initialize:return Or(0,o);case t.DeloreanActionType.dismissNUX:return function(e,t){return Object.assign(Object.assign({},e),{hasDismissedNUX:!0})}(e);case t.DeloreanActionType.setFolderHistoryPaginationLoading:return function(e,o){return e.events.type===On.hasContent?Object.assign(Object.assign({},e),{events:Object.assign(Object.assign({},e.events),{loadingPastPage:o.direction===t.PaginationDirection.past,loadingFuturePage:o.direction===t.PaginationDirection.future})}):e}(e,o);case t.DeloreanActionType.setEventsLoaded:return Cr(e,o);case t.DeloreanActionType.setFolderHistoryEventsError:return function(e,t){return Object.assign(Object.assign({},e),{events:{type:On.error,errorString:t.errorString}})}(e,o);case t.DeloreanActionType.setFolderHistoryPaginationLoaded:return Cr(e,o);case t.DeloreanActionType.setHasDismissedNUX:return function(e,t){return Object.assign(Object.assign({},e),{hasDismissedNUX:t.hasDismissedNUX})}(e,o);case t.DeloreanActionType.changeRewindPageToNone:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.notVisible})}(e);case t.DeloreanActionType.changeRewindPageToGraphPage:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.graphPage})}(e);case t.DeloreanActionType.changeRewindPageToNUX:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.NUXPage})}(e);case t.DeloreanActionType.changeRewindPageToRewindStarted:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.startedPage,pageData:Object.assign(Object.assign({},e.pageData),{[t.RewindFlowPage.startedPage]:{page:t.RewindFlowPage.startedPage,selectedEvent:o.event,rewindId:o.rewindId,rewindState:t.RewindState.InProgress}})})}(e,o);case t.DeloreanActionType.changeRewindPageToNUXOrDayResolution:return function(e,o){return e.hasDismissedNUX?Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.graphPage}):Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.NUXPage})}(e);case t.DeloreanActionType.changeRewindPageToConfirmationPage:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.confirmationPage,pageData:Object.assign(Object.assign({},e.pageData),{confirmationPage:{page:t.RewindFlowPage.confirmationPage,eventAboveDivider:o.eventAboveDivider}})})}(e,o);case t.DeloreanActionType.changeRewindPageFromConfirmationPageToGraphPage:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.graphPage})}(e);case t.DeloreanActionType.changeRewindPageToUpsell:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.upsellPage})}(e);case t.DeloreanActionType.loadEventCounts:return function(e,o){const s=e.pageData.graphPage.contents,a=[..."loaded"===s.type?s.data:[],...o.eventCounts],i={};for(const e of a)i[e.dateTsInMs]=e;const n=Object.keys(i).map((e=>i[Number(e)])).sort(((e,t)=>e.dateTsInMs-t.dateTsInMs)),r="loaded"===s.type?s.selectedDateTsInMs:void 0,l="loaded"===s.type?s.selectedDateString:void 0;return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.graphPage,pageData:Object.assign(Object.assign({},e.pageData),{graphPage:{page:t.RewindFlowPage.graphPage,graphStartOffset:e.pageData.graphPage.graphStartOffset,graphEndOffset:e.pageData.graphPage.graphEndOffset,contents:{type:"loaded",data:n,hasDataThisWeek:gr(n,e.pageData.graphPage.graphStartOffset,e.pageData.graphPage.graphEndOffset),selectedDateTsInMs:r,selectedDateString:l,loadingNextWeek:!1,loadingPreviousWeek:!1,namespaceCount:o.namespaceCount,changedNamespaceCount:o.changedNamespaceCount}}})})}(e,o);case t.DeloreanActionType.setRewindEventCountsError:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.graphPage,pageData:Object.assign(Object.assign({},e.pageData),{graphPage:{page:t.RewindFlowPage.graphPage,graphStartOffset:e.pageData.graphPage.graphStartOffset,graphEndOffset:e.pageData.graphPage.graphEndOffset,contents:{type:"error",errorString:o.errorString}}})})}(e,o);case t.DeloreanActionType.setRewindPanelSelectedDate:return function(e,o){return e.activePage!==t.RewindFlowPage.graphPage||"loaded"!==e.pageData.graphPage.contents.type?e:Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.graphPage,pageData:Object.assign(Object.assign({},e.pageData),{graphPage:{page:t.RewindFlowPage.graphPage,graphStartOffset:e.pageData.graphPage.graphStartOffset,graphEndOffset:e.pageData.graphPage.graphEndOffset,contents:Object.assign(Object.assign({},e.pageData.graphPage.contents),{selectedDateTsInMs:o.selectedDateTsInMs,selectedDateString:o.selectedDateString})}})})}(e,o);case t.DeloreanActionType.changeRewindPageToActivityListPage:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.activityListPage,pageData:Object.assign(Object.assign({},e.pageData),{activityListPage:{page:t.RewindFlowPage.activityListPage,selectedDateTsInMs:o.selectedDateTsInMs,selectedDateString:o.selectedDateString}})})}(e,o);case t.DeloreanActionType.clearEventList:return function(e,t){return Object.assign(Object.assign({},e),{isInitialLoad:!0,events:{type:On.loadingEntirePanel}})}(e);case t.DeloreanActionType.goBackFromActivityListPage:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.graphPage})}(e);case t.DeloreanActionType.goBackFromConfirmationPage:return function(e,o){return Object.assign(Object.assign({},e),{activePage:t.RewindFlowPage.activityListPage})}(e);case t.DeloreanActionType.setGraphRangeBack:case t.DeloreanActionType.setGraphRangeForward:return Nr(e,o);case t.DeloreanActionType.setRewindComplete:return function(e,o){return Object.assign(Object.assign({},e),{pageData:Object.assign(Object.assign({},e.pageData),{[t.RewindFlowPage.startedPage]:Object.assign(Object.assign({},e.pageData.startedPage),{rewindState:t.RewindState.Done})})})}(e);case t.DeloreanActionType.setRewindInProgress:return function(e,o){return Object.assign(Object.assign({},e),{pageData:Object.assign(Object.assign({},e.pageData),{[t.RewindFlowPage.startedPage]:Object.assign(Object.assign({},e.pageData.startedPage),{rewindState:t.RewindState.InProgress})})})}(e);case t.DeloreanActionType.setLoadingGraphWeek:return function(e,o){return"loaded"!==e.pageData.graphPage.contents.type?e:Object.assign(Object.assign({},e),{pageData:Object.assign(Object.assign({},e.pageData),{[t.RewindFlowPage.graphPage]:Object.assign(Object.assign({},e.pageData.graphPage),{contents:Object.assign(Object.assign({},e.pageData.graphPage.contents),{loadingNextWeek:"forward"===o.graphPositionChange,loadingPreviousWeek:"backward"===o.graphPositionChange})})})})}(e,o);case t.DeloreanActionType.setGraphLoadFinished:return function(e,o){return"loaded"!==e.pageData.graphPage.contents.type?e:Object.assign(Object.assign({},e),{pageData:Object.assign(Object.assign({},e.pageData),{[t.RewindFlowPage.graphPage]:Object.assign(Object.assign({},e.pageData.graphPage),{contents:Object.assign(Object.assign({},e.pageData.graphPage.contents),{loadingNextWeek:!1,loadingPreviousWeek:!1})})})})}(e);default:return e}}const Pr=fe.once((()=>{const e=a.getStoreAndRegisterReducers({[a.DELOREAN_NAMESPACE_KEY]:Dr});return a.getStoreForBackup(),e})),Lr={includeAdds:!1,includeDeletes:!1,includeEdits:!1,includeMovesRenames:!1,includeRollbacks:!1},xr={includeAdds:!0,includeDeletes:!0,includeEdits:!0,includeMovesRenames:!0,includeRollbacks:!0},kr=Object.keys(xr).length,Br={includeAdds:F.intl.formatMessage({id:"ZZaddC",defaultMessage:"Added"}),includeDeletes:F.intl.formatMessage({id:"hH81BT",defaultMessage:"Deleted"}),includeEdits:F.intl.formatMessage({id:"70WThr",defaultMessage:"Edited"}),includeMovesRenames:F.intl.formatMessage({id:"r98g8J",defaultMessage:"Moved or renamed"}),includeRollbacks:F.intl.formatMessage({id:"zN84c7",defaultMessage:"Rewound"})},Ur=e=>Object.keys(e).filter((t=>e[t])).length,$r=e=>Ur(e)===kr,Vr=e=>0===Ur(e),Gr=e=>$r(e)||Vr(e),Wr=e=>s.React$1.createElement(a.Menu.ActionItem,{key:e.value,value:e.value,role:"menuitemcheckbox","aria-checked":e.isChecked,"aria-label":e.label,withLeftAccessory:s.React$1.createElement(_e.Checkbox,{"data-testid":"filter-menu-item-checkbox",checked:e.isChecked,onChange:e.callback,readOnly:!0,tabIndex:-1})},s.React$1.createElement("span",{className:a.classnames({"folder-history-filter-item-label--right-rail":e.isInRightRail})},e.label));class Hr extends s.React$1.Component{constructor(e){super(e),this.handleMenuSelection=e=>{const t=!this.state[e];this.updateEvents(Object.assign(Object.assign({},this.state),{[e]:t})),this.props.onLogFilterUpdate&&this.props.onLogFilterUpdate(t?a.WebUserActionLogEvent.SELECT_HISTORY_TYPE:a.WebUserActionLogEvent.CLEAR_SELECT_HISTORY_TYPE)},this.toggle=()=>{$r(this.state)?(this.updateEvents(Lr),this.props.onLogFilterUpdate&&this.props.onLogFilterUpdate(a.WebUserActionLogEvent.CLEAR_SELECT_HISTORY_TYPE)):(this.updateEvents(xr),this.props.onLogFilterUpdate&&this.props.onLogFilterUpdate(a.WebUserActionLogEvent.SELECT_ALL_HISTORY_TYPE))},this.updateEvents=e=>{if(this.setState(Object.assign({},e)),o=this.state,s=e,o.includeAdds===s.includeAdds&&o.includeDeletes===s.includeDeletes&&o.includeEdits===s.includeEdits&&o.includeMovesRenames===s.includeMovesRenames&&o.includeRollbacks===s.includeRollbacks||$r(o)&&Vr(s)||Vr(o)&&$r(s))return;var o,s;const a=(e=>{const t=[];return Gr(e)||(e.includeAdds&&t.push({".tag":"include_adds"}),e.includeDeletes&&t.push({".tag":"include_deletes"}),e.includeEdits&&t.push({".tag":"include_edits"}),e.includeMovesRenames&&t.push({".tag":"include_moves_and_renames"}),e.includeRollbacks&&t.push({".tag":"include_rollbacks"})),t})(e);this.props.dispatch({type:t.DeloreanActionType.clearEventList}),this.props.dispatch(Er({user:this.props.user,fqpath:this.props.fqpath,direction:t.PaginationDirection.past,timestampInSeconds:0,onlyRewindableEvents:!1,opTypeFilters:a,clearEventList:!0,rootNsId:this.props.rootNsId}))},this.state=Lr}componentDidMount(){this.state=Lr}updateFilter(e){return()=>{this.updateEvents(Object.assign(Object.assign({},this.state),{[e]:!this.state[e]}))}}render(){const e=Ur(this.state),{isInRightRail:t}=this.props,o=t?F.intl.formatMessage({id:"k7FRk3",defaultMessage:"Filter"}):F.intl.formatMessage({id:"zlnfYS",defaultMessage:"History type"});return s.React$1.createElement(a.Menu.Wrapper,{closeOnSelection:!1,isPortaled:!1,className:"",onSelection:this.handleMenuSelection},(({getContentProps:i,getTriggerProps:n})=>s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.FilterChip,Object.assign({withDropdownIcon:!0,isSelected:!Gr(this.state)&&!t,size:t?"small":void 0,"data-testid":"folder-history-filter-chip"},n()),o,e>0?t?` • ${e}`:s.React$1.createElement(a.NotificationBadge,{className:"folder-history-filter__badge"},e):null),s.React$1.createElement(a.Menu.Content,Object.assign({},i(),{style:t?{width:296}:void 0}),s.React$1.createElement(a.Menu.Segment,{withLabel:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement("span",{className:a.classnames({"folder-history-filter-dropdown-label--right-rail":t})},F.intl.formatMessage({id:"kF0BIo",defaultMessage:"Select type"})),s.React$1.createElement(a.Button,{variant:"transparent",onClick:this.toggle},s.React$1.createElement("span",{className:a.classnames({"folder-history-filter-dropdown-filter-button--right-rail":t})},$r(this.state)?F.intl.formatMessage({id:"cZ6jlq",defaultMessage:"Clear"}):F.intl.formatMessage({id:"kTr/8f",defaultMessage:"Select all"}))))},Object.keys(xr).map((e=>s.React$1.createElement(Wr,{key:e,value:e,label:Br[e],isChecked:this.state[e],callback:this.updateFilter(e)}))))))))}}Hr.displayName="FolderHistoryFilter";a.injectInternalStyle("metaserver/static/js/right_rail/folder_activity/folder_activity.module.out.css",(e=>"._container_8liyr_1{display:flex;flex-direction:column;height:auto}._container-loading_8liyr_8,._events-list_8liyr_13{flex-grow:1;height:100%}._events-list_8liyr_13,._filter-row_8liyr_20{display:flex}._filter-row_8liyr_20{background-color:var(--color__standard__background);padding-top:3px;position:-webkit-sticky;position:sticky;top:0;white-space:nowrap;z-index:2}._filter-row-rewind_8liyr_33{font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);line-height:var(--type__body__small--lineheight);margin-left:var(--spacing__base_unit)}"));const jr="_container_8liyr_1",Yr="_container-loading_8liyr_8",qr="_events-list_8liyr_13",zr="_filter-row_8liyr_20",Kr="_filter-row-rewind_8liyr_33",Qr=Pr(),Xr=e=>!e.isSelection&&1===e.files.size&&Ve.isListBladeDirectory(e.files),Jr=({user:e,files:t,restoreId:o,rewindAction:i,onRewindButtonClick:n,onLogEvent:r})=>{const l=a.useIntl(),c=a.useDispatch(),d=a.useSelector(Tn),u=a.normalize(t.first().fq_path);s.react.exports.useEffect((()=>{c(vr({fqPath:u,user:e,openToRewind:!1}))}),[u,e,c]);const p=s.react.exports.useCallback((()=>{n&&(n(),r({eventName:a.WebUserActionLogEvent.REWIND_MODAL_LAUNCH}))}),[n,r]),g=s.react.exports.useCallback((e=>{r({eventName:e})}),[r]);return s.react.exports.createElement("div",{className:a.classnames(jr,{[Yr]:d.type===On.loadingEntirePanel})},s.react.exports.createElement("div",{className:zr},s.react.exports.createElement(Hr,{dispatch:c,user:e,fqpath:u,isInRightRail:!0,onLogFilterUpdate:g}),i&&s.react.exports.createElement(a.Tooltip,{title:l.formatMessage({id:"9qF084",defaultMessage:"Rewind"})},s.react.exports.createElement(a.IconButton,{variant:"transparent",onClick:p,className:Kr,size:"small",disabled:!i.isEnabled},s.react.exports.createElement(a.UIIcon,{src:$e.RewindLine,"aria-label":l.formatMessage(i.text),size:"small"})))),s.react.exports.createElement("div",{className:qr},s.react.exports.createElement(Ir,{dispatch:c,user:e,fqpath:u,events:d,selectedDateTsInMs:(new Date).getTime(),restoreId:o,isForRewindFlow:!1,isInitialLoad:!0,key:u,isInRightRail:!0})))};Jr.displayName="FolderActivityWithoutStore";const Zr=s.react.exports.memo((e=>{const t=a.useIntl(),{id:o,files:i}=e;return Xr(e)&&Ve.isListBladeDirectory(i)?s.react.exports.createElement(Be.RightRail.Blade,{withTitle:t.formatMessage({id:"CyQ/TZ",defaultMessage:"Activity"}),withIcon:s.react.exports.createElement(a.UIIcon,{src:Ue.FolderHistoryLine}),id:o},s.react.exports.createElement(a.Provider,{store:Qr},s.react.exports.createElement(Jr,Object.assign({},e,{files:i})))):null}));Zr.displayName="FolderActivity";const el=s.react.exports.memo((e=>{const{id:t}=e,o=a.useIntl();return Xr(e)?s.react.exports.createElement(Be.RightRail.CollapsedBladeIcon,{id:t,withIcon:s.react.exports.createElement(a.UIIcon,{src:Ue.FolderHistoryLine,"aria-label":o.formatMessage({id:"HEBotB",defaultMessage:"Open Activity"})}),tooltip:o.formatMessage({id:"1063Dm",defaultMessage:"Activity"})}):null}));el.displayName="CollapsedFolderActivityButton";const tl={CollapsedButton:el,Blade:Zr,isBladeSupported:Xr},ol=T.createRewindActionSelector(),sl=Ve.enhanceBladeUI(tl,(()=>{const e=a.useSelector(An),t=a.useSelector((e=>ol(e,vn))),o=a.useDispatch();return{restoreId:e,rewindAction:t,onRewindButtonClick:s.react.exports.useCallback((()=>{o(((e,t)=>{const o=t();T.rewindActionHandler(o,vn)}))}),[o])}})),al=Ve.enhanceBladeUI(Ve.InfoBladeUI,(()=>{var e;const t=a.useDispatch(),o=a.useSelector(a.browsePostTTIExperiments).expBrowseManualTagging,i=a.useSelector(a.browsePostTTIExperiments).expFlowsAutomatedFolderUI,n=a.useSelector(a.browsePostTTIExperiments).expFlowsAutoTagUi,r=a.useSelector(a.browsePostTTIExperiments).expAutoTaggingAwarenessVariant,l=a.useSelector(a.browsePostTTIExperiments).expFlowsApprovalFlowVariant,c=a.useSelector(a.isInsideBackupFolder),d=null!==(e=a.useSelector(a.backupFolderPath))&&void 0!==e?e:void 0;return{setUrl:s.React$1.useCallback((e=>t(j.setUrl({path:e}))),[t]),manualTaggingVariant:o,flowsAutomatedFolderUiVariant:i,flowsAutoTagUiVariant:n,autoTaggingAwarenessVariant:r,flowsApprovalVariant:l,isInsideBackup:c,backupFolderPath:d,navigateToBlade:e=>{t(j.expandBlade(e))}}}));a.injectInternalStyle("metaserver/static/js/right_rail/pinned_blade/pinned_items_list.module.out.css",(e=>"._list_dk35q_1{flex-direction:column;justify-content:center}._list_dk35q_1,._row_dk35q_7{display:flex}._row_dk35q_7{align-items:center;height:40px}._row_dk35q_7 svg{height:24px;min-height:24px;min-width:24px;width:24px}._row_dk35q_7:not(:first-child){margin-top:var(--spacing__base_unit)}._row-name_dk35q_22{flex-grow:1;margin-left:var(--spacing__unit--0_5);margin-right:var(--spacing__base_unit);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}._row-name_dk35q_22:focus{box-shadow:none;margin:0;margin-left:var(--spacing__unit--0_5);padding:0;text-decoration:underline}._row-name_dk35q_22:focus:not([data-focus-visible-added]){box-shadow:none;text-decoration:none}._row_dk35q_7:hover ._row-name_dk35q_22:hover{text-decoration:underline}._unpin-button_dk35q_50{color:var(--color__faint__text);margin-left:auto;opacity:0}._row-name_dk35q_22:focus~._unpin-button_dk35q_50,._unpin-button_dk35q_50:focus{opacity:1}._row_dk35q_7:not(:hover) ._row-name_dk35q_22:focus:not([data-focus-visible-added])~._unpin-button_dk35q_50{opacity:0}._row_dk35q_7:hover ._unpin-button_dk35q_50{opacity:1}"));const il="_list_dk35q_1",nl="_row_dk35q_7",rl="_row-name_dk35q_22",ll="_unpin-button_dk35q_50",cl=({file:e})=>e.is_dir?s.react.exports.createElement(a.IconContent,{name:a.convertLegacyFolderIconToSpectrum(e.icon,"small"),"aria-label":a.File.getFilename(e)}):s.react.exports.createElement(a.FileIcon,{path:e.fq_path,variant:"small","aria-label":a.File.getFilename(e)});cl.displayName="PinnedItemsIcon";const dl=({file:e,onNavigateToFileOrFolder:t,onUnpin:o,isCurrentFolderReadOnly:i})=>{const n=s.react.exports.useCallback((()=>{t(e,{actionSource:a.ActionSourceValue.PINNED_BLADE})}),[t,e]),r=s.react.exports.useCallback((()=>{o(e)}),[o,e]),l=a.useIntl();return s.react.exports.createElement("div",{className:nl},s.react.exports.createElement(cl,{file:e}),s.react.exports.createElement(a.Link,{hasNoUnderline:!0,variant:"monochromatic",href:n,className:rl},s.react.exports.createElement(a.Text,{size:"small"},s.react.exports.createElement(ie.Truncate,{location:.5,tooltipControlProps:{placement:"top",openDelay:500}},a.File.getFilename(e)))),!i&&s.react.exports.createElement(a.Tooltip,{title:l.formatMessage({id:"iOpE6C",defaultMessage:"Unpin"})},s.react.exports.createElement(a.IconButton,{variant:"transparent",size:"small",className:ll,"aria-label":l.formatMessage({id:"4mXyBy",defaultMessage:"Unpin {file}"},{file:a.File.getFilename(e)}),onClick:r},s.react.exports.createElement(a.UIIcon,{src:a.CloseLine,size:"small"}))))};dl.displayName="PinnedItemsListRow";const ul=s.react.exports.memo((e=>{var{files:t}=e,a=o.__rest(e,["files"]);return s.react.exports.createElement("div",{className:il},t.map((e=>s.react.exports.createElement(dl,Object.assign({file:e},a,{key:e.fq_path})))))}));ul.displayName="PinnedItemsList";a.injectInternalStyle("metaserver/static/js/right_rail/pinned_blade/pinned_blade.module.out.css",(e=>"._container_bcbqe_1{flex-grow:1}._drop-target_bcbqe_5{align-items:center;background-color:var(--color__standard__background);border:1px dashed var(--color__disabled__border);display:flex;justify-content:center;margin-bottom:8px;min-height:40px;padding:var(--spacing__unit--1_5);position:-webkit-sticky;position:sticky;top:0}._drop-target-active_bcbqe_18{background-color:var(--color__theme__primary--lightest);border-color:var(--color__core__accent)}._drop-target-text_bcbqe_25{pointer-events:none}"));const pl="_container_bcbqe_1",gl="_drop-target_bcbqe_5",ml="_drop-target-active_bcbqe_18",hl="_drop-target-text_bcbqe_25",_l=e=>!e.isInsideBackup&&!e.isSelection&&1===e.files.size&&Ve.isListBladeDirectory(e.files)&&!e.files.first().is_in_vault_folder,fl=j.makePinnedItemsSelector(),El=j.makeFolderFileIdSelector(),vl=({files:e,user:t,onNavigateToFileOrFolder:o,onSnackbarShow:i,onLogEvent:n})=>{const[r,l]=s.react.exports.useState(!1),c=e.first(),d=a.filename(c.fq_path,a.Viewer.get_root_name(t)),u=a.useSelector((e=>fl(e,{path:c.fq_path}))),p=a.useSelector((e=>El(e,{path:c.fq_path})))||a.fileToContentReferenceId(c),g=!a.canEditOverviewForFile(c),m=a.useDispatch(),h=a.useIntl();s.react.exports.useEffect((()=>{m(j.reloadContentReferences({folderFileId:p,componentNamespace:"pinned_blade"}))}),[p,m]);const _=s.react.exports.useCallback((e=>{m(j.removeContentReferences({componentNamespace:"pinned_blade",fileIds:[e.file_id],folderFileId:p,snackbarConfig:{folderName:d,onShow:()=>{i(c.fq_path)}}})),n({eventName:a.WebUserActionLogEvent.FOLDER_OVERVIEW_UNPIN})}),[m,p,d,n,c.fq_path,i]),f=s.react.exports.useCallback((e=>{e.dataTransfer.types.includes(Ne.INTERNAL_FILE_DATA_TRANSFER_TYPE)&&l(!0)}),[l]),E=s.react.exports.useCallback((e=>{l(!1)}),[l]),v=s.react.exports.useCallback((e=>{const t=e.dataTransfer;if(r&&t.types.includes(Ne.INTERNAL_FILE_DATA_TRANSFER_TYPE)){const e=t&&t.getData(Ne.INTERNAL_FILE_DATA_TRANSFER_TYPE),{fileInfos:o}=JSON.parse(e);o&&m(j.addContentReferences({componentNamespace:"pinned_blade",fileIds:o.map(a.fileToContentReferenceId),folderFileId:p,snackbarConfig:{folderName:d,onShow:()=>{i(c.fq_path)}}}))}l(!1),e.stopPropagation(),e.preventDefault()}),[l,c.fq_path,i,p,d,m,r]),A=s.react.exports.useCallback((e=>{g&&e.dataTransfer.types.includes(Ne.INTERNAL_FILE_DATA_TRANSFER_TYPE)&&a.Snackbar.fail(h.formatMessage({id:"uLAlio",defaultMessage:"Can’t pin files or folders to a read-only folder"}))}),[g,h]);return s.react.exports.createElement("div",{onDrop:A,className:pl},!g&&s.react.exports.createElement("div",{className:a.classnames(gl,{[ml]:r}),onDragEnter:f,onDrop:v,onDragLeave:E},s.react.exports.createElement(a.Text,{color:"faint",size:"small",className:hl},h.formatMessage({id:"DBhFpB",defaultMessage:"Drag files or folders into here to quickly find them later."}))),!!(null==u?void 0:u.length)&&s.react.exports.createElement(ul,{files:u,onNavigateToFileOrFolder:o,onUnpin:_,isCurrentFolderReadOnly:g}))};vl.displayName="PinnedBladeWithoutStore";const Al=s.react.exports.memo((e=>{const t=a.useIntl(),{id:o,files:i}=e;return _l(e)&&Ve.isListBladeDirectory(i)?s.react.exports.createElement(Be.RightRail.Blade,{withTitle:t.formatMessage({id:"2H0C/o",defaultMessage:"Pinned items"}),withIcon:s.react.exports.createElement(a.UIIcon,{src:A.PinLine}),id:o},s.react.exports.createElement(a.Provider,{store:a.getStoreForFolderOverview()},s.react.exports.createElement(vl,Object.assign({},e,{files:i})))):null}));Al.displayName="PinnedBlade";const Rl=s.react.exports.memo((e=>{const{id:t}=e,o=a.useIntl();return _l(e)?s.react.exports.createElement(Be.RightRail.CollapsedBladeIcon,{id:t,withIcon:s.react.exports.createElement(a.UIIcon,{src:A.PinLine,"aria-label":o.formatMessage({id:"Qf32GQ",defaultMessage:"Open pinned items"})}),tooltip:o.formatMessage({id:"GQQdjj",defaultMessage:"Pinned items"})}):null}));Rl.displayName="CollapsedPinnedBladeButton";const Sl={CollapsedButton:Rl,Blade:Al,isBladeSupported:_l};const yl={info:al,pinned_items:Ve.enhanceBladeUI(Sl,(function(){const e=a.useDispatch();return{onSnackbarShow:s.react.exports.useCallback((t=>{e(j.setUrl({path:t,expandedBlade:"pinned_items"}))}),[e])}})),comments:Ve.enhanceBladeUI(Ve.CommentsBladeUI,(({onLogEvent:e,files:t})=>({onClickAnnotation:s.React$1.useCallback((o=>{const s=t.first();s instanceof a.File&&(u.browseNavigateActions.navigateToFileOrFolder({file:s,activeCommentThreadId:o.threadID}),e({eventName:a.WebUserActionLogEvent.BROWSE_COMMENT_ACTION,extra:{action:"click_annotation"}}),o.e.stopPropagation())}),[t,e])}))),folder_activity:sl,file_activity:Ve.enhanceBladeUI(Ve.FileActivityBladeUI,(()=>{const e=a.useSelector((e=>a.selectViewType(e,{instanceId:a.BROWSE_FILES_VIEW_ID})));return{handleVersionHistory:s.React$1.useCallback(((t,o)=>u.handleVersions({user:t,files:o,isSearchMode:!1,viewType:e,isSidebar:!0,actionSurface:a.ActionSurfaceLogValue.RIGHT_SIDEBAR,rightRailState:"opened"})),[e])}}))},wl={info:a.WebUserActionLogEvent.CLICK_ON_INFO,pinned_items:a.WebUserActionLogEvent.VIEW_PINNED_ITEMS,folder_activity:a.WebUserActionLogEvent.VIEW_FOLDER_ACTIVITY,file_activity:a.WebUserActionLogEvent.VIEW_FILE_ACTIVITY,comments:a.WebUserActionLogEvent.VIEW_COMMENTS},Tl=({isCollapsed:e})=>{const t=a.useIntl(),o=e?"right-rail-loading-indicator--collapsed":"right-rail-loading-indicator",i=e?"small":"large";return s.react.exports.createElement("div",{className:o},s.react.exports.createElement(a.Spinner,{className:"right-rail-loading-spinner",size:i,"aria-valuetext":t.formatMessage({id:"SociMV",defaultMessage:"Loading"})}))};Tl.displayName="LoadingPlaceholder";const bl=({responsive:e,onNavigateToFileOrFolder:t})=>{const o=a.useSelector(Sn),i=a.useSelector(a.selectedFiles),n=a.useSelector(a.isContinuousOnboardingBackgroundActive),r=a.useSelector(a.user),l=a.useSelector((e=>a.selectViewType(e,{instanceId:a.BROWSE_FILES_VIEW_ID}))),c=a.useSelector(a.context),d=a.useSelector(a.isRightRailCollapsed),p=a.useSelector(a.browseLoadingState),g=a.useSelector(a.isInsideBackupFolder),m=a.useSelector((e=>{if(g&&1===o.size&&Ve.isBladeDirectory(o.first()))return a.backupFolderTimestampSelector(e,o.first().fq_path)})),_=a.useSelector(a.backups),f=a.useSelector(a.selectIsTaggingEnabled),E=a.useSelector(yn),{num_files_selected:v,num_folders_selected:A}=a.countFilesAndFolders(o),R=a.useDispatch(),S=s.react.exports.useCallback((e=>{R(j.setRightRailIsCollapsed(e)),a.logBrowseAction({uid:r.id,num_files_selected:v,num_folders_selected:A,view_type:l,action:e?a.WebUserActionLogEvent.COLLAPSE_RIGHT_SIDEBAR:a.WebUserActionLogEvent.OPEN_RIGHT_SIDEBAR,action_surface:a.ActionSurfaceLogValue.RIGHT_SIDEBAR,right_sidebar_state:e?"opened":"collapsed"})}),[R,r,v,A,l]),y=s.react.exports.useCallback((e=>{R(j.expandBlade(e))}),[R]),w=s.react.exports.useCallback(((e,o)=>{e instanceof a.File?t(e,o):x.reportException({err:new Error("Received FSWM in browse"),severity:"non-critical"})}),[t]),T=je.useStabilizedCallback((e=>{u.logUserEventOnFile({args:{files:o,isSearchMode:!1,user:r,viewType:l,actionSurface:a.ActionSurfaceLogValue.RIGHT_SIDEBAR,rightRailState:d?"collapsed":"opened"},action_type:e.eventName,extra:e.extra})})),b={files:f?E:o,user:r,viewType:l,isSearchMode:!1,isSelection:i.size>0,onNavigateToFileOrFolder:w,onLogEvent:T,isInsideBackup:g,lastBackupTime:m},M=!(!e||!e.isResponsive||e.isMatchedLarge),I=a.useIntl(),F=null==_?void 0:_.find((e=>e.fqPath===c.currentFQPath));let O;O=g?F&&a.getDisplayedFilename(Me.getTitle(o,r,c,I))===a.filename_without_extension(a.filename(F.fqPath))?F.displayName:_?a.getDisplayedFilename(Me.getTitle(o,r,c,I)):"":a.getDisplayedFilename(Me.getTitle(o,r,c,I));const C=((e,t)=>{const o=a.useSelector(a.expandedBlade),i=!!yl[o]&&yl[o].isBladeSupported(Object.assign(Object.assign({},e),{id:o}));return s.react.exports.useEffect((()=>{i||t(a.DEFAULT_BROWSE_BLADE)}),[i,t]),i?o:a.DEFAULT_BROWSE_BLADE})(b,y),N=s.react.exports.useCallback((e=>{if(!d&&e===C)return;y(e);const t=wl[e];t&&a.logBrowseAction({uid:r.id,num_files_selected:v,num_folders_selected:A,view_type:l,action:t,action_surface:a.ActionSurfaceLogValue.RIGHT_SIDEBAR,right_sidebar_state:d?"collapsed":"opened"})}),[y,r,v,A,l,d,C]),D=s.react.exports.useCallback((e=>{N(e),S(!1)}),[N,S]),P=s.react.exports.useCallback((()=>{S(!1)}),[S]),L=s.react.exports.useCallback((()=>{S(!0)}),[S]);if(s.react.exports.useEffect((()=>{"V1"!==h.WEBXP_IA_RR_BROWSE&&"V2"!==h.WEBXP_IA_RR_BROWSE||a.setIAExposure(r.id)}),[]),M)return null;if(p===a.LoadingState.LOADING_FIRST_PAGE)return s.react.exports.createElement(Tl,{isCollapsed:d});const k=a.isFacePileEnabled_TTVCTest()?s.react.exports.createElement(Cs,null):null,B=b.files.size>0?Object.entries(yl).map((([e,{Blade:t}])=>s.react.exports.createElement(t,Object.assign({},b,{key:e,id:e})))):[],U=b.files.size>0?Object.entries(yl).map((([e,{CollapsedButton:t}])=>s.react.exports.createElement(t,Object.assign({},b,{key:e,id:e})))):[],$=a.classnames({"browse-right-rail--collapsed-container":d,"browse-right-rail--expanded-container":!d});return s.react.exports.createElement(s.react.exports.Fragment,null,s.react.exports.createElement(Be.RightRail.RightRailWrapper,{isExpanded:!d,onExpand:P,onExpandBlade:d?D:N,className:$,expandedBlade:C,onCollapse:L,withTitle:O,header:k,expandedChildren:B,collapsedChildren:U}),s.react.exports.createElement(He.AsyncContinuousOnboarding,{userId:r.id,isBackgroundActive:n}))};bl.displayName="BrowseRightRailWithoutCss";const Ml=a.requireCssWithComponent(bl,["/static/metaserver/static/css/right_rail/right_rail-vflKsUXs7.css","/static/metaserver/static/css/delorean/delorean-vflhckSBA.css","/static/typescript/component_libraries/dig-experimental/src/index.web-vfl_m6TBk.css","/static/typescript/libraries/comments2/src/index-vfljiK9YC.css"]),Il=({onNavigateToFileOrFolder:e})=>{const t=a.useSelector(a.shouldHideFilesAndSidebar),o=a.useSelector(a.isRightRailCollapsed),i=Ye.useResponsiveProps();return t?null:s.React$1.createElement("div",{className:o?"brws-right-rail-wrapper--collapsed":"brws-right-rail-wrapper"},s.React$1.createElement(Ml,{responsive:i,onNavigateToFileOrFolder:e}))},{lazy:Fl,Suspense:Ol}=s.React,Cl=Fl((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{FamilyBrowseRoot:t}=yield new Promise((function(t,o){e(["./c_family_ui_family_browse_root"],t,o)}));return{default:t}})))),Nl=e=>s.react.exports.createElement(Ol,{fallback:s.react.exports.createElement("div",null)},s.react.exports.createElement(Cl,Object.assign({},e))),Dl=a.Loadable({displayName:"AsyncCustomizationModal",loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{CustomizationModalController:t}=yield new Promise((function(t,o){e(["./c_folder_subscriptions_customization_customization_modal_controller"],t,o)}));return t}))}),Pl=s.React$1.lazy((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{FolderUnfollower:t}=yield new Promise((function(t,o){e(["./c_folder_subscriptions_follow_folder_unfollower"],t,o)}));return{default:t}})))),Ll=()=>s.React$1.createElement(s.React$1.Suspense,{fallback:null},s.React$1.createElement(Pl,null)),xl=a.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{ActivationRoot:t}=yield new Promise((function(t,o){e(["./c_activation_activation_root"],t,o)}));return t}))});xl.displayName="AsyncActivationRoot";const{lazy:kl,Suspense:Bl}=s.React,Ul=kl((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{VaultRoot:t}=yield new Promise((function(t,o){e(["./c_vault_vault_browse_root"],t,o)}));return{default:t}})))),$l=e=>s.react.exports.createElement(Bl,{fallback:s.react.exports.createElement("div",null)},s.react.exports.createElement(Ul,Object.assign({},e))),{lazy:Vl,Suspense:Gl}=s.React,Wl=Vl((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{FlowsRoot:t}=yield new Promise((function(t,o){e(["./c_flows_components_flows_browse_root"],t,o)}));return{default:t}})))),Hl=e=>s.react.exports.createElement(Gl,{fallback:s.react.exports.createElement("div",null)},s.react.exports.createElement(Wl,Object.assign({},e))),jl=s.React$1.createContext({}),Yl=e=>o.__awaiter(void 0,void 0,void 0,(function*(){e.preventDefault(),e.stopPropagation()})),ql=s.React$1.lazy((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{MigrationModal:t}=yield new Promise((function(t,o){e(["./c_gg_to_cdm_migration_migration_modal"],t,o)}));return{default:t}})))),zl=e=>{const t=a.useSelector(a.ggToCdmMigrationVariant),o=a.useSelector(a.isGgToCdmMigrationExperimentActive);return s.React$1.createElement(s.React$1.Fragment,null,o&&s.React$1.createElement(s.React$1.Suspense,{fallback:s.React$1.createElement("div",null)},s.React$1.createElement(ql,Object.assign({},e,{ggToCdmMigrationVariant:t}))))};function Kl(e){const t=function(e){const t=a.getStoreForBrowse().getState();return a.unsortedFiles(t).get(e)}(e);if(t){const e=a.getStoreForBrowse(),o=e.getState(),s=a.user(o),i=a.context(o);Ke.asyncShowShareModal(s,t,{browseContext:i,origin:a.SHARE_ACTION_ORIGIN_TYPE.ONBOARDING_CHECKLIST},(({path:t,qargs:o})=>e.dispatch(j.setUrl({path:t,qargs:o}))))}}const Ql=e=>{const t=e=>Qe.TASK_ORDER.indexOf(e.type[".tag"]);return e.sort(((e,o)=>t(e)-t(o)))};const Xl=["intro","install_desktop","install_mobile","upload_personal","upload_team","end"];function Jl(e){return Xl.find((t=>t===(null==e?void 0:e.toLowerCase())))}const Zl="onboarding_task_carousel",ec="carousel_seen",tc=e=>{x.reportException({err:new Error(e),severity:B.SEVERITY.NONCRITICAL,force:!1,tags:["team-activation",Zl,"upload_to_member_folder"]})},oc=()=>{L.FileUploaderController.handleUploadButtonClick({folderUpload:!1,source:a.ActionSourceValue.ONBOARDING_TASK_CAROUSEL,actionElement:L.UploadElement.ACTION_BAR,actionScreen:"continuous_onboarding"})},sc=a.Loadable({loader:()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield a.waitForTTI();const{OnboardingTaskCarousel:t}=yield new Promise((function(t,o){e(["./c_activation_onboarding_task_carousel"],t,o)}));return t}))}),ac=(e,t)=>o.__awaiter(void 0,void 0,void 0,(function*(){if("/"!==t)return;if(!["V1","V2"].includes(e.accM3Variant))return;if(Ne.is_mobile_or_tablet())return;const i=yield(n=e.user.id,o.__awaiter(void 0,void 0,void 0,(function*(){const e=new a.UserApiV2Client;return(yield e.ns("growth").rpc("performed_user_action",{project:"acc",action:ec},{subjectUserId:n})).has_performed})));var n;if("V2"===e.accM3Variant&&i)return;const r=(yield se.getTasks())||[];if(0===r.length)return;if(r.every((e=>e.is_completed))&&i)return;const l=Ql(r);a.mountModal(s.React$1.createElement(sc,Object.assign({onboardingTasks:l},e)),!0,"onboarding-task-carousel")})),ic=({className:e})=>{const t=a.useIntl();return s.React$1.createElement(a.AccessoryBadge,{className:e},t.formatMessage(tt.UNLIMITED))};ic.displayName="UnlimitedBadge";const nc=({backups:e,quota:t,getIdForExemptAPI:o,onSave:i})=>{const n=a.useIntl(),[r,l]=s.React$1.useState(!1),[c,d]=s.React$1.useState({}),u=t=>{const s=t?Object.assign({},c):{};[a.BackupType.COMPUTER,a.BackupType.EXTERNAL_DRIVE].forEach((t=>{if(!s[t]&&!e.find((e=>e.type===t&&e.quotaExempt))){const a=e.filter((e=>e.type===t)).sort(((e,t)=>(e.size||0)<(t.size||0)?1:-1))[0];s[t]=a?o(a):""}})),i(s)};s.React$1.useEffect((()=>{st.logEvent({event:"show_sku_modal",page_source:"backup"})}),[]);const p=()=>{st.logEvent({event:"close_sku_modal",action_surface:"sku_modal",page_source:"backup"}),u(!1)};return r?s.React$1.createElement(a.Modal,{open:!0,isCentered:!0,width:500,onRequestClose:p,"data-testid":"backup-sku-modal"},s.React$1.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard"},s.React$1.createElement(a.Modal.Title,null,s.React$1.createElement(a.FormattedMessage,Object.assign({},tt.SKU_MODAL_EDB_TITLE)))),s.React$1.createElement(a.Modal.Body,{hasVerticalSpacing:!0},tt.SKU_MODAL_EDB_CONTENT(n)),s.React$1.createElement(a.Modal.Footer,null,s.React$1.createElement(a.Button,{variant:"primary",onClick:p},s.React$1.createElement(a.FormattedMessage,Object.assign({},tt.SKU_MODAL_EDB_OK_BUTTON))))):s.React$1.createElement(a.Modal,{open:!0,isCentered:!0,width:700,onRequestClose:p,"data-testid":"backup-sku-modal"},s.React$1.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard"},s.React$1.createElement(a.Modal.Title,{className:"sku-modal-title"},s.React$1.createElement(a.GlyphLogo,{src:a.BackupGlyph,size:32}),s.React$1.createElement(a.FormattedMessage,Object.assign({},tt.SKU_MODAL_TITLE)))),s.React$1.createElement(a.Modal.Body,{hasVerticalSpacing:!0},tt.SKU_MODAL_DESCRIPTION(n,t?a.format_bytes(t):void 0),s.React$1.createElement("div",{className:"sku-modal-content"},[a.BackupType.COMPUTER,a.BackupType.EXTERNAL_DRIVE].map((t=>{const i=e.filter((({type:e})=>e===t)),r=i.find((({quotaExempt:e})=>!!e)),u=c[t]||(r?o(r):"");return s.React$1.createElement("div",{key:t,className:"sku-modal-section"},i.length?s.React$1.createElement(a.Select,{id:t,value:u,onChange:e=>d((o=>Object.assign(Object.assign({},o),{[t]:e})))},i.map((e=>s.React$1.createElement(a.Select.Option,{key:o(e),value:o(e),withAccessory:s.React$1.createElement(a.UIIcon,{src:e.type===a.BackupType.EXTERNAL_DRIVE?A.ExternalDriveLine:"mac"===e.platform?at.AppleExternalLogo:"win"===e.platform?at.WindowsExternalLogo:A.BackupLine})},s.React$1.createElement(s.React$1.Fragment,null,e.name,o(e)===u&&s.React$1.createElement(ic,{className:"sku-modal-badge"})))))):s.React$1.createElement(a.Button,{variant:"outline",onClick:()=>t===a.BackupType.COMPUTER?ot.launchBackupOnDesktop():l(!0),withIconLeft:s.React$1.createElement(a.UIIcon,{src:t===a.BackupType.COMPUTER?it.ComputerLine:A.ExternalDriveLine})},tt.SKU_MODAL_BACKUP_BUTTON(n,t)),s.React$1.createElement(a.Text,{color:"faint",size:"small",className:"sku-modal-subtitle"},tt.SKU_MODAL_SUBTITLE(n,t,i.length)))})))),s.React$1.createElement(a.Modal.Footer,null,s.React$1.createElement(a.Button,{variant:"opacity",onClick:p},s.React$1.createElement(a.FormattedMessage,Object.assign({},tt.SKU_MODAL_CLOSE_BUTTON))),s.React$1.createElement(a.Button,{variant:"primary",onClick:()=>{st.logEvent({event:"close_sku_modal",action_surface:"sku_modal",page_source:"backup",extra:{button:"cta"}}),u(!0)}},s.React$1.createElement(a.FormattedMessage,Object.assign({},tt.SKU_MODAL_CTA_BUTTON)))))},rc=({skuModalEnabled:e,userSKU:t,allBackups:o,userQuota:i,updateBackupExemptInfoCB:r})=>{const l=a.getActiveUser(),c=a.useIntl(),[d,u]=s.React$1.useState(!1);s.React$1.useEffect((()=>{n.require_css("/static/metaserver/static/css/sync_everything/backup_web-vflBl1Q39.css")}),[]);const p=()=>{const e={accountId:null==l?void 0:l.account_id,source:"backup_web"};ot.launchBackupOnDesktop(e),st.logEvent({event:"open_desktop_app",page_source:"backup",extra:{action:"manage_backups"}})};return s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Menu.Wrapper,null,(({getTriggerProps:i,getContentProps:n})=>s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Button,Object.assign({},i(),{variant:"transparent",withDropdownIcon:!0,withIconLeft:s.React$1.createElement(a.UIIcon,{src:et.SettingsLine}),className:"backup-settings-button"}),c.formatMessage(tt.MANAGE_BACKUPS)),s.React$1.createElement(a.Menu.Content,Object.assign({},n()),s.React$1.createElement(a.Menu.Segment,null,e&&t===a.ProductPlanType.SYNC_EVERYTHING&&s.React$1.createElement(a.Menu.ActionItem,{withLeftAccessory:s.React$1.createElement(a.UIIcon,{src:A.RepeatLine}),withTitle:c.formatMessage(tt.MANAGE_BACKUP_SKU),onClick:()=>u(!0),disabled:(null!=o?o:[]).length<2}),s.React$1.createElement(a.Menu.ActionItem,{withLeftAccessory:s.React$1.createElement(a.UIIcon,{src:a.OpenLine}),withTitle:c.formatMessage(tt.OPEN_BACKUP_SETTINGS),onClick:p,disabled:Ne.is_mobile_or_tablet(),className:"backup-settings-menu-action-button","data-testid":"backup-settings-menu-action-button"})),s.React$1.createElement(a.Menu.Segment,null,s.React$1.createElement(a.Menu.ActionItem,{withTitle:c.formatMessage(tt.LEARN_MORE),onClick:()=>a.open_tab("/account/plan")})))))),e&&d&&o&&s.React$1.createElement(nc,{backups:o,quota:i,getIdForExemptAPI:a.getIdForExemptAPI,onSave:e=>{const t=[];[{type:a.BackupType.COMPUTER,api:T.setQuotaExemptCB},{type:a.BackupType.EXTERNAL_DRIVE,api:T.setQuotaExemptEDB}].forEach((({type:s,api:i})=>{o&&e[s]&&(i(l,e[s]),o.forEach((o=>{a.getIdForExemptAPI(o)===e[s]&&t.push(o.name)})),r(e))})),u(!1),t.length&&a.Snackbar.complete(tt.SKU_MODAL_SUCCESS_SNACKBAR(c,t),void 0)}}))};var lc,cc;rc.displayName="ManageBackupsButton",function(e){e[e.ERROR=0]="ERROR",e[e.LOADING=1]="LOADING",e[e.COMPLETE=2]="COMPLETE"}(lc||(lc={})),function(e){e.CREATE="create",e.UPDATE="update",e.DELETE="delete",e.GET="get",e.GETALL="getAll",e.ADD_SIGNATURE="addSignature"}(cc||(cc={}));a.injectInternalStyle("metaserver/static/js/cloud_docs/gdd_migration/ui/banners/banner_template.module.out.css",(e=>"._bannerTemplateWrapper_169nt_1{padding-left:var(--spacing__unit--2);padding-right:var(--spacing__unit--2);padding-top:var(--spacing__unit--2)}._bannertemplateTextWrapper_169nt_7{white-space:pre-wrap}"));const dc="_bannerTemplateWrapper_169nt_1",uc="_bannertemplateTextWrapper_169nt_7",pc=({actions:e,bodyText:t,title:o,type:i,variant:n,withCloseButton:r,withLeftPictogram:l,onRequestClose:c})=>s.React$1.createElement("div",{className:dc},s.React$1.createElement(a.Banner,Object.assign({type:i,withCloseButton:r,onRequestClose:c},"rich"===n?{variant:n,withLeftPictogram:l}:{variant:n}),s.React$1.createElement(a.Banner.Message,null,o&&s.React$1.createElement(a.Title,{size:"small"},o),s.React$1.createElement("span",{className:uc},t)),e&&s.React$1.createElement(a.Banner.Actions,null,e)));pc.displayName="BannerTemplate";const gc={v:"4.8.0",meta:{g:"LottieFiles AE 3.1.1",a:"",k:"",d:"",tc:""},fr:60,ip:1,op:175,w:420,h:420,nm:"fss-shortcut",ddd:0,assets:[{id:"image_0",w:15,h:15,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAAv0lEQVQokZ3NsQnCQBjF8f8dmmgqG2uziWNkCcEzVSawSSOCYCu4QDZwAAvdxEoQc99ZSCSoMRdf+96Pp9L5LCnL+5ZOUeV6sx33AKJhdG5YxQ4mAM45RAQAEcEYM1K+X+l8ljjndkEQhCKCvZcL7Quttfug378BhdZP1oorOAjDq2imCnWqup/4Heb56lTvG3EbbMQ+8Ctuh3L4in0fP3BX+ML/QAD9LwTQYmXZBVrFBSiUdkeMMaMsM7HvWz0PawWQ+nNtqTMAAAAASUVORK5CYII=",e:1},{id:"image_1",w:15,h:15,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAAv0lEQVQokZ3NsQnCQBjF8f8dmmgqG2uziWNkCcEzVSawSSOCYCu4QDZwAAvdxEoQc99ZSCSoMRdf+96Pp9L5LCnL+5ZOUeV6sx33AKJhdG5YxQ4mAM45RAQAEcEYM1K+X+l8ljjndkEQhCKCvZcL7Quttfug378BhdZP1oorOAjDq2imCnWqup/4Heb56lTvG3EbbMQ+8Ctuh3L4in0fP3BX+ML/QAD9LwTQYmXZBVrFBSiUdkeMMaMsM7HvWz0PawWQ+nNtqTMAAAAASUVORK5CYII=",e:1},{id:"image_2",w:15,h:15,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAAv0lEQVQokZ3NsQnCQBjF8f8dmmgqG2uziWNkCcEzVSawSSOCYCu4QDZwAAvdxEoQc99ZSCSoMRdf+96Pp9L5LCnL+5ZOUeV6sx33AKJhdG5YxQ4mAM45RAQAEcEYM1K+X+l8ljjndkEQhCKCvZcL7Quttfug378BhdZP1oorOAjDq2imCnWqup/4Heb56lTvG3EbbMQ+8Ctuh3L4in0fP3BX+ML/QAD9LwTQYmXZBVrFBSiUdkeMMaMsM7HvWz0PawWQ+nNtqTMAAAAASUVORK5CYII=",e:1},{id:"image_3",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAEt0lEQVR4nO3dT2ibdRzH8c/zRJc10dqyGkXb1bLRHlYEpzAXh/ijeBo7eFnnbSADL94GnnrQCR7moQNhl4HX1lOZl15KFFw8qRXKSgttWhpcbJu1PGmeR5c8+Xlo4rL0T5Ka9vd86ed1GXny0Hzhvf7yPEn6xEIdrpsbtrT+0IJ+G7DeqLc/HYwGstBIa1tPRCIvjdbb39pto+c5l+DjK1h4D8BzLZ+S6tEAFrWlv90r4o5w3pbzIyy8v9t9ZEQGtv9uW1vncvXG/+J43kYvSqFZAG1HPhrVo7VlfRyJvDhe2fA0XN5xwWhB9kw8Gygvj4wWdJal9XeVG7bnbfSWn9Mo+Nq8vHMPAGyUQiPggYgkl4HtpfIDs3NQM7TWrwKAXSg86TY9DDXOsix4nnPJLvolnmALo7V+x247eTJkehBqjuf93WmbHoKa52zm3mQ4oRhOKIYTiuGEYjihGE4ohhOK4YRiOKEYTiiGE4rhhGI4oRhOKIYTiuGEYjihGE4o4x8UWslncXvmPibT03AKnulx9nWuoxu3zg8jHhswPQosL+9oUw++ks9iaPLLwAerdefCdQz3xY09fiazOmF0qbw9c19cNAAY+W28/k6HzGi4yfS0yYc/MKfgIbk6Z3QGo+Ek/rYFBY8qhTJ+VPl/XO27iGtVBwljqSS+T/1icKKjIzrc6WjXM4fmydV5g9McLS6VQjGcUAwnFMMJxXBCMZxQDCcUwwkVyBPwq30XcTraVXe/eKx/x+2bg1daOstYKol0PtvSn9kKgQx3rS9+oDcr47GBlr/J+WB1LpDhuFQKxXBCBXKpHEslG3rBOB7rr3mRea7lLzSvBHCZBAIartG3Zm4OXtnx7sA3Mz8c1liBwqVSKIYTiuGEYjihGE4ohhOK4YRiOKEYTiiGE4rhhGI4oRhOKIYTiuGEYjihGE4ohhOK4YQK5GdOGjWWSuJB1dUPgvrBnsMgOlw6nw3kh1WPApdKoYyGO9ch98siexr424bDZDTcrfPDJh/+wG70D6EnesroDEbDxWMDuHPhOtqfl/MV5Df6hwLxH87o1fOqmb42ViN6ol3Gf9OA7avnBeaoMgjXgJSER5VCMZxQDCcUwwnFcEIxnFAMJxTDCcVwQjGcUAwnFMMJxXBCMZxQDCcUwwnFcEIxnFC26/KrwCSyi37R9AzUpGKx4NilUsn0HNSk9J+Z3+2tLbdgehBqXOWpzc4+3vjH8CzUhLX1dSilRm3P835dWz+ef/Eije/7WFvLFoHt04G7y8sr8H3f8FhUz8LiEoq+PwMAtlJqvOj7mw9n5xkvwBYWl/B4YxMAPgOenoB/mnddPJydB8/rgsX3fSwsLqH8dPaTUupnALAqOyQSiXsAPgGAl7tOofv11xAOnzAyLG0He5RZRSbzF4rbK+GCUups5X6reudEIvE1gM8r26ORCDo7O9De/gKikQhCodBRzn7sOLkc3LwHJ5erLIsV00qpt6o3WKgxNTXVa9v2FIAzu/3wcPgEwuFwSwc+zvyij7zr7nX3JoAvlFKjtXfsCFdRDjgC4DKAV/bbl1pqE8AfAO4qpcb32qnhGOWQH5VvDgI4u9/+1LCJ8r+P9gtV61/UNGWGMTmo2wAAAABJRU5ErkJggg==",e:1},{id:"image_4",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAEkElEQVR4nO3csU8bZxzG8ec9p7gFYkAtRGqRSqROSChE6tAtnEq7hr1DPTVTJbplTP+Ddu1SOrBFFd0qNchmY0RFcqSoUEdBKQ4OxubsC+DzdbBNUgLYJtjvPc3zkawE28I/5Ru/dz7d2aAFz/OmY6hNhzDTBuF0q+fLBRlkgTCLmpN+7+rVdOunn8L3CxOoOUnAJAF8fKkDSjuKAJZQMwtnRXwtnF8u3gPMPICh7s4m7QiB3w4Og+TIyMjeq/cfhysUCsPxvljaADd6P560UAxCZ2ZwcHCteYfT/IuiRdpQzNTSnucd72M4QH15VLTIG3JMbaH5g1MoFIYb2zSJOAPc8L1SEgCcd9+JzUE7IjRCgzkAcGAwY3kW6UQYzgKAc1Q9+tT2LNI+Y8yA7xcmnGo1GLY9jHSoemXCqQW1AdtzSGf8oxeDTuunSdQUi6VPFI6UwpFSOFIKR0rhSCkcKYUjpXCkFI6UwpFSOFIKR0rhSCkcKYUjpXCkFI6UwpG6YnuAXAlYXDVY3TAoH9ie5nzXR4E7t0JMjYe2R7H7jsuVgG8XHSxnoh8NAP7eAe7eN3iQOfXqtJ6yGm5xlSPYST+tvOXhVjfs/wNcRPkAWN+yO7vVcIzvtqjQXiUphSOlcKQUjpTCkbJ+5KQdU+PoydGKXAlYjsCH63aQhAvx1WfdD7e+ZbCc6frLXAotlaQUjpTCkVI4UhQ7Jw8ypicHdT2iY6cU4Z6V6jd5SUslKYUjRbFUjiWAa4nuv453UD89gQFFuNnJ3h05uXuf45CXlkpSCkdK4UgpHCmKnZP1LYPF1e6/To7oQz5JOPvnMUaNlkpSCkdK4UhRbOM+nwzxxeTl/K4/MjwnBJ2HIty1xOWd5fXn/2QnR0slKYUjpXCkKLZxudLlfQBnOjpyHopwyxmeM4x7RUslKYUjpXCkFI6UwpFSOFJWw10ftfnqb2YsYff7vKyGu3PL/peZXcTtm2FPTtA9j9VwU+MhvvsyxEDc5hSduX0zxDcR+A9n/cjJ7GSI2cmQ4pySsYT9d1qT9XBNUfgOSCbaqySlcKQUjpTCkVI4UgpHSuFIKRwphSOlcKQUjpTCkVI4UgpHSuFIKRwphSOlcKQUjpTCETo8PPCcIAiqtgeRzjx9mvvL2fe8ou1BpH2Vig8AcPLPd/OWZ5EO7OTzcF037fj+i9938s9tzyNtCIIAO/ndJ0B952Tp8eMnCILA8ljSysZmFtVq9VcAcFzXXasGwUrm4SPFi7CNzSx2C3sA8APw8uPAfLlSQebho+ONn0RDEATY2MyisTn73nXdLAAcX2mRSqWSAH4GgNEP3sf4Rx8iHu+zMKoA9WD/bD/D9nYO1fpK+Ivrusnm4/+5RCaVSs0BWAAwBAAD/f0YGRlGIjGIgf5+xGKx3k3+Firt76NS9lHa328ui00/uq47/+odr13blEqlhlFfR78+7ZfH432Ix4kuaIu4oBqgXKmc9fAKgHuu66ZPPnDmRWmNgHON2wwa70LpuhUAaQBLruuunfWktq8mbIScbvw40bjJm0s3/tw7L9RJ/wKyXU3llhog+AAAAABJRU5ErkJggg==",e:1},{id:"image_5",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAEQ0lEQVR4nO3cP0wbZxzG8ed9TTEFB2y1lWiLGoYydIjioVOkSLxSty7MZajXbGztmC5RurVTx1Kp6VhRKUM3G2XMUKRIiZQG4gQpdYqD/x0+B+6964CPImNim/x576c8H8kCn0/4J311r88nbIUBPM/LpxDmI6i8QpQftD+dkUIZiMoIdendc+dKg3fvw/dr8wh1AVAFAOdf6YA0jAaANYRq9bSIJ8L5e42rgFoBMPN6Z6NhRMAfz/dtIZfL1Y9vPwpXq9Wy6fFUSQEX3/x4NEDDRnoxk8lsxBt0/AujJdpMSoUlz/OOzjE0cLg8MlrizWgVrsZ3dK1Wy3Zf0yjhFHDR95oFANAT76SWwBMRMSKFJQDQUFh0PAuNIoq+AAB9EBx87noWGp5Sasr3a/M6CGzW9TA0omBsXoc2nHI9B43GP+hk9ODdKGkajeanDCcUwwnFcEIxnFAMJxTDCcVwQjGcUAwnFMMJxXBCMZxQDCcUwwnFcEIxnFAMJxTDCTXmegB0HiN8eA1R9SYQNF1P80IqcwFq4TpU9rLrURwfcZ3HsLcvIar8lvhoABB5dxD+9SWiyg3Xo7gNFz68JiJYr/Dvb1yP4DZcVL3p8unPLmgiqt9yOoLbpVLg0ZYUPKsUiuGEYjihGE4ohhOK4YRiOKEYTij3F5n7ULNfARPJ+CaqqPIr0Nl2PcYJyQz34XIirsADQFi/hSiB4bhUCsVwQjGcUAwnFMMJxXBCMZxQDCcUwwnFcEIxnFAMJxTDCcVwQjGcUAwnFMMJxXBCJfJfF9C6g8j1DLGg4XqCvhIZLnzwresREo9LpVAMJxTDCcVwQjGcUAwnFMMJxXBCMZxQTsOpzAWXT/9SlOOPgbkNt3Dd5dOfmZq7Akx84nQGt+Gyl6E/+wkYm3Y5xkjU3BXohe9dj+H+IrOaXUZqdtn5d2MNQ02cd36kxZyHiyXlE6hS8KxSKIYTiuGEYjihGE4ohhOK4YRiOKEYTiiGE4rhhGI4oRhOKIYTiuGEYjihGE4ohhOK4YRiOIH295972lobuB6ERvPkydMHuuV5yfx0OvXVbvsAAF19tlt1PAuNYKdahTGmpH2/8+dO9ZnreWgI1lrsVHe3gcOTk7VHj7ZhrXU8Fg2yuVVGEAS/A4A2xmwE1q7fvXef8RJsc6uM3VodAH4A/n87sLLXbuPuvftHL36UDNZabG6V0X05+84YUwYAFe9QLBYLAH4GgA/efw9zH3+EdHrcwagEHAb7p/IvKpWnCA5Xwl+MMYX4cXV852KxuARgFcAMAExNTiKXy2J6OoOpyUmkUqk3N/lbqNlqob3no9lqxcti7EdjzMrxDQo9isViFofr6Nf9/ng6PY50Ov0q532r2cBir90+7eF1AFeNMaXeB06Ei3UDLnVvi+gehfTarQMoAVgzxmycttOp4Xp1Q+a7d+e7N3p5pe7P+otC9foPWtooDax4L/UAAAAASUVORK5CYII=",e:1}],layers:[{ddd:0,ind:1,ty:2,nm:"Arrow 3",refId:"image_0",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:25,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:95,s:[0]},{t:135,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[171.649,321.865,0],ix:2},a:{a:0,k:[7.238,7.238,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:2,ty:2,nm:"Arrow 2",refId:"image_1",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:50,s:[0]},{t:90,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[253.649,167.865,0],ix:2},a:{a:0,k:[7.238,7.238,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:3,ty:2,nm:"Arrow 1",refId:"image_2",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:5,s:[0]},{t:45,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[89.649,167.865,0],ix:2},a:{a:0,k:[7.238,7.238,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:4,ty:2,nm:"Gsheets",refId:"image_3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[292,131.618,0],ix:2},a:{a:0,k:[54.662,55.764,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:5,ty:2,nm:"Gdoc",refId:"image_4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[210,285.618,0],ix:2},a:{a:0,k:[54.662,55.764,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:6,ty:2,nm:"Gslides",refId:"image_5",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[128,131.618,0],ix:2},a:{a:0,k:[54.662,55.764,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0}],markers:[]},mc=s.React$1.lazy((()=>new Promise((function(t,o){e(["./c_lottie-react_build_index"],t,o)})))),hc=s.React$1.lazy((()=>new Promise((function(t,o){e(["./c_lottie-react_build_index"],t,o)}))));a.injectInternalStyle("metaserver/static/js/cloud_docs/gdd_migration/ui/shared_components/radio_button_group.module.out.css",(e=>"._radioButtonGroupRow_1qd9u_1{align-items:flex-start;display:flex;margin-top:var(--spacing__unit--1)}._radioButtonGroupRow_1qd9u_1:first-child{margin-top:0}._rowLabelContainer_1qd9u_11{display:flex;flex-direction:column}._radioButtonGroupRow_1qd9u_1>*+*{margin-left:var(--spacing__base_unit)}"));const _c="_radioButtonGroupRow_1qd9u_1",fc="_rowLabelContainer_1qd9u_11",Ec=({checked:e,disabled:t,id:o,labelText:i,helperText:n,onChange:r})=>s.React$1.createElement("span",{className:_c},s.React$1.createElement(_e.RadioButton,{id:o,checked:e,onChange:r,disabled:t}),s.React$1.createElement("span",{className:fc},s.React$1.createElement(a.Text,{tagName:"label",htmlFor:o},i),n&&s.React$1.createElement(a.Text,{color:"faint"},n)));Ec.displayName="RadioButtonGroup";const vc={v:"4.8.0",meta:{g:"LottieFiles AE 3.1.1",a:"",k:"",d:"",tc:""},fr:60,ip:0,op:175,w:420,h:420,nm:"fss-convert",ddd:0,assets:[{id:"image_0",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAEQ0lEQVR4nO3cP0wbZxzG8ed9TTEFB2y1lWiLGoYydIjioVOkSLxSty7MZajXbGztmC5RurVTx1Kp6VhRKUM3G2XMUKRIiZQG4gQpdYqD/x0+B+6964CPImNim/x576c8H8kCn0/4J311r88nbIUBPM/LpxDmI6i8QpQftD+dkUIZiMoIdendc+dKg3fvw/dr8wh1AVAFAOdf6YA0jAaANYRq9bSIJ8L5e42rgFoBMPN6Z6NhRMAfz/dtIZfL1Y9vPwpXq9Wy6fFUSQEX3/x4NEDDRnoxk8lsxBt0/AujJdpMSoUlz/OOzjE0cLg8MlrizWgVrsZ3dK1Wy3Zf0yjhFHDR95oFANAT76SWwBMRMSKFJQDQUFh0PAuNIoq+AAB9EBx87noWGp5Sasr3a/M6CGzW9TA0omBsXoc2nHI9B43GP+hk9ODdKGkajeanDCcUwwnFcEIxnFAMJxTDCcVwQjGcUAwnFMMJxXBCMZxQDCcUwwnFcEIxnFAMJxTDCTXmegB0HiN8eA1R9SYQNF1P80IqcwFq4TpU9rLrURwfcZ3HsLcvIar8lvhoABB5dxD+9SWiyg3Xo7gNFz68JiJYr/Dvb1yP4DZcVL3p8unPLmgiqt9yOoLbpVLg0ZYUPKsUiuGEYjihGE4ohhOK4YRiOKEYTij3F5n7ULNfARPJ+CaqqPIr0Nl2PcYJyQz34XIirsADQFi/hSiB4bhUCsVwQjGcUAwnFMMJxXBCMZxQDCcUwwnFcEIxnFAMJxTDCcVwQjGcUAwnFMMJxXBCJfJfF9C6g8j1DLGg4XqCvhIZLnzwresREo9LpVAMJxTDCcVwQjGcUAwnFMMJxXBCMZxQTsOpzAWXT/9SlOOPgbkNt3Dd5dOfmZq7Akx84nQGt+Gyl6E/+wkYm3Y5xkjU3BXohe9dj+H+IrOaXUZqdtn5d2MNQ02cd36kxZyHiyXlE6hS8KxSKIYTiuGEYjihGE4ohhOK4YRiOKEYTiiGE4rhhGI4oRhOKIYTiuGEYjihGE4ohhOK4YRiOIH295972lobuB6ERvPkydMHuuV5yfx0OvXVbvsAAF19tlt1PAuNYKdahTGmpH2/8+dO9ZnreWgI1lrsVHe3gcOTk7VHj7ZhrXU8Fg2yuVVGEAS/A4A2xmwE1q7fvXef8RJsc6uM3VodAH4A/n87sLLXbuPuvftHL36UDNZabG6V0X05+84YUwYAFe9QLBYLAH4GgA/efw9zH3+EdHrcwagEHAb7p/IvKpWnCA5Xwl+MMYX4cXV852KxuARgFcAMAExNTiKXy2J6OoOpyUmkUqk3N/lbqNlqob3no9lqxcti7EdjzMrxDQo9isViFofr6Nf9/ng6PY50Ov0q532r2cBir90+7eF1AFeNMaXeB06Ei3UDLnVvi+gehfTarQMoAVgzxmycttOp4Xp1Q+a7d+e7N3p5pe7P+otC9foPWtooDax4L/UAAAAASUVORK5CYII=",e:1},{id:"image_1",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAG00lEQVR4nO3cXUxTZxgH8P85FQqc8tGIEAEnwnSSTSXbgpk342xqlizLwGs/yG5mzExc3NxXsunVFjfNlukudjONZslulN0tkaV4wwLJFi1REEfFOPko1Urb08NHT7uLtoiFftGWcx76/JIGevr27RP+ed/zvuW0ApLw+XzNJgSbQxCaBYSak7VnyyRgBAiNICh2F5eWdidvvgRVddcjKHYAQgeAjVktkKViCkAngsKFeCEuCk5Vpk4CwjEA5bmtjaUiBPw+M6t1WK3WJwuPzwfndrsrzIWmbgHYsfLlsSSmtJDYarFYbkQPiNFfODRDKzcJwW6fzze/xhCB8PTIoRleuSgEL0TviG63uyJyTmMGJwA7VJ+nAwDEogJTG3ghQkZIQBsAiBDQqnMtLB2h0G4AEOcCc6/qXQtLnSAIkqq668VAQKvQuxiWpsCaejGoBSW962DpUeemLWLyZsxopqY8z3NwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRHFwRK3Ru4BcCipezNwbwpxzFABQ9sY7OleUPeSDWxjO3OQYZu7dQVDxQr31zzPtil98mYNbaamGk08MExyHkx5dgxv95viKhTPnHMOj337OSl+WllaYN23JSl/LJbic425JKtHlMvS7+2h+bEEsseC5s7+ioKpGl9cfd05+yNuBZQj6fQg4x3StwTDnuFyr3n8UVfs/yKgPpb8Pjo8PZKmizPCII4qDA6DY+6DY+/QuIy15M1Um4jgRnv5MUinWth9C9f6jOleUHI+4BTTFC+flc7h75F1oPo/e5SRk2BFX1NiEmsOfJ2yjDg9CsffC09OVUp+zEw/h6emCp6cLxY1bsf7wF0u2m3YM4r8zn2LjVz+lXfdKMWxwJqkU0raWhG2kbS2obDuIOecoRk4dwfTwQNy2PnsvJi7/mPLre/76E9PDAyhqbEr5OStpVUyVBVU1aDh9CYXVtXHbLGfx4b52JZOycmpVBAeER2hVlhcV6vBgVvvLJsNOlUtxXj43P91Vth/C+vefPQeW7doNnEm/33gb80QjWG+kglvIdfUiCqrrUNl2cP6YSSpFYXUtZiceptUXheV/LLLBAYBi730mOAAoSDE4TfHEPe8VNWyFyVKWlRpzhXRwJmnxH1dTvCk9d9oxOL/xjrX5fKfhgyO9OLHubV90LNGWIFVG3QIsRGrEFVTXQtregsLqOlj3ti/a57mvXc34NcpeezPjPlYCqeCse9ph3bN4lAHRt6tS32DHQ2WhQnqqjNIUL+6fOpL2ajJW3fGvSUyTwCoITunvg+PEgaTvjFS8/nbcSw0Kqmqw8cvzsO7Zl4sSc4LUVKn090G5GQ5IUzzw2ftSXoyYNzRgw2dn4enpgup4+pzihqbwxp0YWsHd7EvrjeKllO3aTTKoWOSnynxFasRlwmfvxcRb6Y1WaVsLGr69lKOKMsMjjqi8GXEmqSzpP2ZjFTduzVE1mcub4IobmzK+rtJIDBucYu9D/1sv6F2GYRk2uGxThwfSvgo50QVFesub4DTFA6Wf1kWvifCqkqi8GXGW7TvRcNqYe7Ll4BFHVN6MuNmJhxmf44x0uV7eBOe+dsXQF7imi6fKZTDXb9H9M+C6jrj1n3yHmZEhBJyj4W9bcI4hMJmbj+ia6zdj3XsfZaevTVsgSqVZ6Wu5dA3OsrMVlp2ti47P3BtCUPHCf+vvyNdo3Mk4VFEqRfFLr2RQrbEY8hwXnYaW+kPnIlSKDBlcIhxqGLngEkkUavSL2FaLvFlV6vVlMrmSN8GtNhwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcURwcQbOzMz5R07SA3oWw9IyOTvwren2+Kb0LYanz+1UAgOh69Nilcy0sDZMuF2RZ7hZVdfqPSdcjvethKdA0DZOuxw+A8OKk8/79B9A0TeeyWDLDjhEEAoErACDKsnwjoGnXbw8McXgGNuwYwWP3EwD4Hni6HTim+P24PTA0f/JjxqBpGoYdI4iczk7JsjwCAEK0gc1m6wDwCwCsq1yLutoamM2FOpTKgHBgY+NOjI9PIBCeCS/KstwRfVxY2Nhms7UBuACgHACkkhJYrRUoK7NAKimByWRaucrzkMfrhV9R4fF6o9Ni1A+yLB9beEBADJvNVoHwPHpoqc7N5kKYzeZs1pvXtIAGxe+P9/B1ACdlWe6OfWBRcFGRANsit1ZERiHLuesAugF0yrJ8I16juMHFigTZHLlbH7mxzHVHfj5JFFSs/wHta2tCkJQHdgAAAABJRU5ErkJggg==",e:1},{id:"image_2",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAEv0lEQVR4nO3dz0/adxzH8df3S1tWsYqp87Bpp8mihzapaZYs5eQn7trE7ND2Ni69u6TXJd167Jasf8HczfawuO7iaeCh9LZ4cG00U2g0nUUUQeDb6vcLPQDOYS2g6Ofzjq9HQhT4Bt7JUz58+amFOnK53LAPxeESrGELpeF629MhWUgApQSKdvT8hQvR+pu/h+Ok+1G0w4AVBvBZSwekRmQATKFoTRwUcV84J5+5B1jjADqPdzZqRAn4/e22F+7q6trce/puuHQ6HfSf80Ut4OrJj0d1ZLySPdLe3j5bPcGu/sJoRuv0WcVoLpfb3cewgfLyyGjG67St4kT1iJ1Op4OV+zQynAVcdXLZMADYH531jYE7ImKULIwBgA0LI5pnoWaUSl8BgL3j7nyhexZqnGVZAcdJ99uu6wV1D0NNcs/020WvGNA9BzXH2XnTbtffjEyTyWQ/ZzihGE4ohhOK4YRiOKEYTiiGE4rhhGI4oRhOKIYTiuGEYjihGE4ohhOK4YRiOKEYTqgzugdYzq/jwdwTTK/MIrvj6B7ngy4He3H/2i2EeoZ0j6L3FrecX8fo9A94HH9mfDQA+HtzBV//+RMexWO6R9Eb7sHcExHBan331yPdI+gNN70yW38jA2V3HMSS81pn0BpO4q3NFNyrFEr7XuVR3By4jtsDod3jk/EYHsefaZzo5IgOdynQ/b9d81hyQeM0J4tLpVAMJxTDCcVwQjGcUAwnFMMJxXBCGfkA/ObAdVwKdNfdLtQzuO/43Ss3WjrLZDyGlfx6Sy+zFYwMd3sgdKgXK0M9Qy1/kfNpct7IcFwqhWI4oYxcKifjsYaeMA71DNY8yTzf8iealw1cJgFDwzX60szdKzf2vTrw49wfxzWWUbhUCsVwQjGcUAwnFMMJxXBCMZxQDCcUwwnFcEIxnFAMJxTDCcVwQjGcUAwnFMMJxXBCMZxQRr7npFGT8Rie7vn2A1Pf2HMcRIdbya8b+WbVk8ClUiit4S4He3Ve/ZH0NfDZhuOkNdz9a7d0Xv2h3RkcRV/gotYZtIYL9Qzh4ZdhdJw9r3OMptwZHDXiD85KJVfTgUCb9v+Tqvu7sRrRF+jWfksDgNXk2rfG7FWa8B2QknCvUiiGE4rhhGI4oRhOKIYTiuGEYjihGE4ohhOK4YRiOKEYTiiGE4rhhGI4oRhOKIYTiuGEYjiBtrff5mzP81zdg1BzXr16/Y+9lctldA9CjSsUyv/l0k6tb6Q0z0JNWEuloJSK2o7zZnotdTo/8SKN53lYS20sA+Wdk6mXL5fheZ7msaiexaUEXNf9DQBspdSs63kzz18sMJ7BFpcS2EhvAsDPwH8PB8bzhQKev1jYvfMjM3ieh8WlBCp3Z98rpRIAYFU3iEQiYQC/AMDH3RfR++kn8PvPaRiVgHKwf1eTWF19Dbe8Ev6qlApXz7f2bhyJRMYATADoBIBAWxu6uoLo6GhHoK0NPp/v5CY/hbJbWyjkHWS3tqrLYtVDpdT43hMs1IhEIkGU19Fv3nfhfv85+P3+Vs57qnmuh3yhcNDZMwDuKaWitWfsC1dVCThWOYygciukYzcDIApgSik1e9BGB4arVQk5XDnaXznQ0UUrPzc/FKrWO0L2XeSRNX9jAAAAAElFTkSuQmCC",e:1},{id:"image_3",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAHcElEQVR4nO2cX2xTVRzHv/cO2Vi3saIyXJdYrYlsLGMm20AIhBtcjU+C40GNi4MnNSbDBI0PajA8GXiQGCNPgsGgMQzYm7YPHZCMLdsDkjGIsVjDuv/udv2zTuhdfeif3dv139a19xz7+yTLeu793dNf7mfnzz09q4AM+P3+5hIsNYchNAsIN2eKJ9aIABcQdmFJ7NtUWdmXOTwJwaBsxpLYBQhdAJ5d1wSJbJgHcA1LwoVUEleICwbmTwLCcQCb85sbkQ1hoPffR0qX0Wj0qI/HxcmyXF26saRPAHYWPj0iA/NKWDxQUVFxO3ZAjL0gaUyzuURY6vP7/fE5hghEukeSxjybRWHpQqwgyrJcHR3TCMYRgJ1Bv7cLAMSyJ0oOgSYi3BAWcAgARAg4oHMuxGoIh18BAPFx6HGL3rkQ2SMIgiEYlM1iKKRU650MsUpCG8zikrJk0DsPYnUEHy9WiJnDCNaYn/e+QOI4hcRxConjFBLHKSSOU0gcp5A4TiFxnELiOIXEcQqJ4xQSxykkjlNIHKeQOE4hcZxC4jiFxHEKieOUDXonkE98iwHcm3DB7ZkGABx+SdI3oXWEe3FqOeOeGdyb+Au+xQCGXKOauFZzA4krNNnKKSaYEUdyVoeu4j689FXB5Lg9M/jW8cu61HWwvg3bt5nXpa61IsxOT8oGQ7ku29Abvjiix9vmTGVZOa58cAam6q26vP/k9MxH9DiwBnyLC3DLM7rmwMwYl2+6rZ3otr6TUx2Dzjt467uP1ymj3KAWxykkjlNIHKcUzRh31nYRZ20X4+Vdlib89P5pAMDzJ15Neo06hjWYFGdt3IOj+w5rjp3qPYfRcWe8fPrNE6gz1sTLo+NOnOo9V7Ac9YZJcQPOOzj95glUli3/s2xHaztGeyPi6rbUoKOlXXNNz7A9bZ0mYw3qtiyLbqi1xF/vsjQlvUYdwxpMivMG/bg8ZNO0Omvj3niLsu7Yo4n3LQZgG+lPW+eRVmvKxwFWu8N0MDs5OX/zqqZsMm6Nt4COVqvm3Pc3rsIb9BcsNxZgssUBwNjcFHqG7ZousaO1Hd6bftTXPq+J7Rm2Zazv8pANA87f4+WGWgs+f/09AEj5UK2OYQ1mxQFAz5BNI87auBfuuSltzLAdYwnHkuGWp+CWk8cNOu/klqgOMNtVApFJivqmmoxb0f1qpybm/I2riZcVBUy3OCDSotSzPvVMc9B5R/OIkI50a5UPzvyWW5I6wHSLAyJjk1ueTnoucQJTTDDf4gDg/I0r+CxhkuCWpzM+AqgZcP4O2MLxsslYgyPR2al6RUWNOoY1uBA3lmRSMTY3uao6BhPGy12WJpW4H5Neo45hDea7SgArlr+AyE1Vr4QUG8y3uIZaS8olqW5rJz7++UxW9XS0WNHRuvxoUbVpeZJzKcXKiTqGNZgXd3T/ytYWo6OlHad6z2W1alK3pQa7U/wBpDrOMkyLS7aYbL97C+07Xo6Xj+47nHJyoYYmJwWko0V70+x3b6FnyKYRd2x/duJoclIgqjZV4FhCN2kf6YdtpB++xUD8WGWZgdmbm0+YbXHWxj2aVRIA8ec220i/pgvttnbi8lD6heZdlibNWGZSfQibakVFHcMazIrrtmrXJO13b8UnIfYEcSbjVuy2NGEgzWLxbsvOlIIS34sHmBRnbdwDk1G7S9iuWiWJdZfqFnl0/xtpxY3NTWnOV20yxD/fS3WdOoY1mBRnG+lPuYEnxs7P3lhVnT3DNs3nduqNQG+n+DyO5c1CzE5OiPQw2eLyAW0W4hTaLEQwAYnjlKLpKt3yVM6bgrLdJlEIikbc5SFbxtUVnqCucg28uM2M+mfMuuaga4v75q1PcH/SBbc8DbdnGm7PDMY9+fkX3e3bnsWnrx1bl7rqnzGvWEctNLqKO1jfhoP1bSuO3590wRsMYMh1F97FAO5P/JWz1MoyA9qe25FLukzB5BgX+yqKZDc6H1J5hElx6SCpEbgTl450UmNfxPZ/oWhmlXp9mUy+KBpx/zdIHKeQOE4hcZxC4jiFxHEKieMUEscpJI5TSBynkDhOIXGcQuI4hcRxConjFBLHKSSOU0gcp5A4TiFxnELiOOTRo3/9oqIoIb0TIVbH+PjUn6LP75/XOxEiexYWggAAcfafuVmdcyFWwczsLCRJ6hODwcVfZ2b/0TsfIgsURcHM7NxDIDI5ufb33w+hKIrOaRGZcD5wIRQKXQEAUZKk2yFFuT567w+SxzDOBy7MyR4A+BpYfhw4HlhYwOi9P+KDH8EGiqLA+cCF6HD2pSRJLgAQYgEOh6MLwHkAePqpJ1FnqkVp6UYdUiWAiLCJyWlMTk4hFOkJf5AkqSt2XlAHOxyOQwAuANgMAIbychiN1aiqqoChvBwlJSWFy7wI8fp8WAgE4fX5Yt1ijLOSJB1XHxCQgMPhqEakH303WeWlpRtRWlq6nvkWNUpIQWBhIdXp6wBOSpLUl3hihbgYUYGHoj8HEG2FRN65DqAPwDVJkm6nCkopLpGoyOZo0Rz9IXKnL/rbk05UIv8BNkfGvcP0wdUAAAAASUVORK5CYII=",e:1},{id:"image_4",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAEkElEQVR4nO3csU8bZxzG8ec9p7gFYkAtRGqRSqROSChE6tAtnEq7hr1DPTVTJbplTP+Ddu1SOrBFFd0qNchmY0RFcqSoUEdBKQ4OxubsC+DzdbBNUgLYJtjvPc3zkawE28I/5Ru/dz7d2aAFz/OmY6hNhzDTBuF0q+fLBRlkgTCLmpN+7+rVdOunn8L3CxOoOUnAJAF8fKkDSjuKAJZQMwtnRXwtnF8u3gPMPICh7s4m7QiB3w4Og+TIyMjeq/cfhysUCsPxvljaADd6P560UAxCZ2ZwcHCteYfT/IuiRdpQzNTSnucd72M4QH15VLTIG3JMbaH5g1MoFIYb2zSJOAPc8L1SEgCcd9+JzUE7IjRCgzkAcGAwY3kW6UQYzgKAc1Q9+tT2LNI+Y8yA7xcmnGo1GLY9jHSoemXCqQW1AdtzSGf8oxeDTuunSdQUi6VPFI6UwpFSOFIKR0rhSCkcKYUjpXCkFI6UwpFSOFIKR0rhSCkcKYUjpXCkFI6UwpG6YnuAXAlYXDVY3TAoH9ie5nzXR4E7t0JMjYe2R7H7jsuVgG8XHSxnoh8NAP7eAe7eN3iQOfXqtJ6yGm5xlSPYST+tvOXhVjfs/wNcRPkAWN+yO7vVcIzvtqjQXiUphSOlcKQUjpTCkbJ+5KQdU+PoydGKXAlYjsCH63aQhAvx1WfdD7e+ZbCc6frLXAotlaQUjpTCkVI4UhQ7Jw8ypicHdT2iY6cU4Z6V6jd5SUslKYUjRbFUjiWAa4nuv453UD89gQFFuNnJ3h05uXuf45CXlkpSCkdK4UgpHCmKnZP1LYPF1e6/To7oQz5JOPvnMUaNlkpSCkdK4UhRbOM+nwzxxeTl/K4/MjwnBJ2HIty1xOWd5fXn/2QnR0slKYUjpXCkKLZxudLlfQBnOjpyHopwyxmeM4x7RUslKYUjpXCkFI6UwpFSOFJWw10ftfnqb2YsYff7vKyGu3PL/peZXcTtm2FPTtA9j9VwU+MhvvsyxEDc5hSduX0zxDcR+A9n/cjJ7GSI2cmQ4pySsYT9d1qT9XBNUfgOSCbaqySlcKQUjpTCkVI4UgpHSuFIKRwphSOlcKQUjpTCkVI4UgpHSuFIKRwphSOlcKQUjpTCETo8PPCcIAiqtgeRzjx9mvvL2fe8ou1BpH2Vig8AcPLPd/OWZ5EO7OTzcF037fj+i9938s9tzyNtCIIAO/ndJ0B952Tp8eMnCILA8ljSysZmFtVq9VcAcFzXXasGwUrm4SPFi7CNzSx2C3sA8APw8uPAfLlSQebho+ONn0RDEATY2MyisTn73nXdLAAcX2mRSqWSAH4GgNEP3sf4Rx8iHu+zMKoA9WD/bD/D9nYO1fpK+Ivrusnm4/+5RCaVSs0BWAAwBAAD/f0YGRlGIjGIgf5+xGKx3k3+Firt76NS9lHa328ui00/uq47/+odr13blEqlhlFfR78+7ZfH432Ix4kuaIu4oBqgXKmc9fAKgHuu66ZPPnDmRWmNgHON2wwa70LpuhUAaQBLruuunfWktq8mbIScbvw40bjJm0s3/tw7L9RJ/wKyXU3llhog+AAAAABJRU5ErkJggg==",e:1},{id:"image_5",w:110,h:112,u:"",p:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABwCAYAAAD/h0UQAAAACXBIWXMAAAABAAAAAQBPJcTWAAAAJHpUWHRDcmVhdG9yAAAImXNMyU9KVXBMK0ktUnBNS0tNLikGAEF6Bs5qehXFAAAHEElEQVR4nO2dP2gbVxzHv3dOrEZ/YhlFActNrEKRhZa4iR0IHexrC+3QEg9ZujSmWwMtKYGSqSSFQocOLYVAu8RZSoZQbOhQCq1sOhTipGRoHNs0QU6w5FhSZPtOUiLrrA7SKU+y/OdsSfee9fuAiXT3dP7lPvn93u+dzxcJ26BpWl8b1vsKkPokFPq2G0/sEgkRoBDBujxxyOWa2H54DbLZlB/r8gggjQDoqWuAxE5YATCGdWl0M4kbxGXTK1cA6SKAjsbGRuyEAjD+IqePdHZ2LrPby+JSqZTb1t42IQEnmh8esQ0rekEecjqd94wNsvGCpHFNR5u0PqFpWrnHkIFieSRp3NMhS+ujxhs5lUq5S3MawTkScCKrrY4AgPzKwbZhUCMiDAUJwwAgQ8KQxbEQZigU3gEAeS2/1m91LMTOkSTJkc2m/HI+r7utDoYwSf6AX17X1x1Wx0GYI7v23ClvP4zgjZWV1ddJnKCQOEEhcYJC4gSFxAkKiRMUEicoJE5QSJygkDhBIXGCQuIEhcQJCokTFBInKCROUEicoJA4QSFxgnLA6gAaiZrJYe7xMqLJNADggzdfszii+iG8OFZOLJHG7OMU1Mwa/pldqhh3svcoiWs2O5XTSnAjjuSYw1Jxl374q2lyYok0fhr/ty7HGnqjG4HjnXU51m6REkuLKYfDbslt6P0f37Ti2+4Z56GD+Pnqe/AdseYm8MWl+Oe0HNgFWnYNsUTa0hi4meMazYVzp3Dh3Mk9HePOdAwjX/1ap4j2BmWcoJA4QSFxgtIyc9y1W3dx7dZdU5/pD3Vh9Mv3GxTR3qCME5SWyTif1wWf12nqM8EeT4Oi2TtciRsIdZVfR+MaFuJqxf6g3wOXvb38fmo6tul+NZPDTCRZ3jc8GNjzcoAnuBJ3nZlPaq2Zvv5kEL1MFrz76c0KuZc/OoP+kvw/78zjs29/b3DE1sGVuDvTsfKJD/ory5TL0V4hzRjDimM/MzUdrRg7NjmH21XbtiPY48Hl82dMfaZZcCXuNiPOaW+Hy9EONZ0DAJwO+TaM7+3x4I+pCACg2+uCkymjbJkEgGhcRbSq9IoMV11ldZawzUF1tgHAaWZOrG48que//QZXGTczX5klAyFfWQAryaCf2TbAZOSdGtLqca2SJ7jKODWdwywjj52zDEmzVXKNMezY2/s82wDOMg4oljijLHaXyh+7TJiJJKGmcy+bmB4PZiLJ8lhgo9zicaO4dqtgKhaf14XhwYDpv0Mz4E4c21QYAtkyODUdw4JXK4sbCHVhbHKuYg6s1T1OTcdMz3v9oS4St1OqT+5AqKtifpuZT5aWAMX5Kuj3VGTk7Hyy3InuZ7gTtxBXEU1o8B0plr6g31POLq10NcTleNn29/Z4qtZvtbPq7GDAdPawV2l4gztxADB1P4qzpZP8dr+/vN1oOowmxiiP7Jjq9ZtBt9dVkZmiw6W4mfkkzpZesy0/u85jm5jKMbUzjpqTJrDZyWezqVZmRRMbL0yzx9xPzQlX6ziDmUgSWmZjg8Ge+FoSpu6buxYpMlxmHFCUx5bA6qshC3EVWiZXeX2yxvrNYCDUZXqO83ldpsY3E27FjU3Obfne2MZez9yqFA6EfPvqkhfX4mrJYvnmxt87Pt5CXDU9x7ns7Rt+vMQL3IqrN+OTcxjf5h9CNXSzEFF3Wibj6GYhQdlvNwtRqRQUEicoLVMqo3G15i0NZthqgd9sWkbcTtaFIkGlchcEjrkROG7tfwJmacb9+MVbuDu7BDWTw+zjZcQSacSSjfkV3cAxNy59WJ+uMnDcbfkPWS0Vdyp4FKeCRzdsnys9KqOeUp329prfS1S4nOOMR1E0S6qIcCluK0hqEeHEbcVWUqMWP96i3rRMV2nVw2QaRcuI22+QOEEhcYJC4gSFxAkKiRMUEicoJE5QSJygkDhBIXGCQuIEhcQJCokTFBInKCROUEicoJA4QSFxgkLiBIXECUgu90KTdV3PWx0IYY5o9Ol/sqppK1YHQuycTCYLAJATyWcJi2MhTBBPJKAoyoSczT7/LZ7g5xf2iM3RdR3xxLMnQLE5GZuffwJd1y0Oi9iOh48iyOfzvwCArCjKvbyuT04/mCN5HPPwUQTPUssA8B3wcjlwMZ3JYPrBXHnyI/hA13U8fBRBaTq7qihKBAAkY0A4HB4BcB0AvEc8eLXbB5uN30fb7nd0XUdscQmLi0+RL1bCG4qijBj7JXZwOBweBjAKoAMAHHY7OjvdOHzYCYfdjra2tuZF3oKsqioy6SxWVdUoiwbfK4pykd0goYpwOOxGsY6er3Vwm60dNputnvG2NHpeRzqT2Wz3JIAriqJMVO/YIM6gJHC49DWEUhYSDWcSwASAMUVR7m02aFNx1ZRE9pXe+ktfxN6ZKP25vJWoav4HGJXNZx2cBsoAAAAASUVORK5CYII=",e:1}],layers:[{ddd:0,ind:1,ty:2,nm:"Slides",refId:"image_0",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:60,s:[100]},{t:100,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[127.75,133.5,0],ix:2},a:{a:0,k:[54.662,55.764,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:2,ty:2,nm:"Powerpoint",refId:"image_1",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:60,s:[0]},{t:100,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[127.75,134,0],ix:2},a:{a:0,k:[54.662,55.764,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:3,ty:2,nm:"Sheets",refId:"image_2",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:60,s:[100]},{t:100,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[291.75,133.5,0],ix:2},a:{a:0,k:[54.662,55.764,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:4,ty:2,nm:"Excel",refId:"image_3",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:60,s:[0]},{t:100,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[291.75,134,0],ix:2},a:{a:0,k:[54.662,55.764,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:5,ty:2,nm:"Doc",refId:"image_4",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:60,s:[100]},{t:100,s:[0]}],ix:11},r:{a:0,k:1,ix:10},p:{a:0,k:[210.002,286.747,0],ix:2},a:{a:0,k:[54.662,55.765,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0},{ddd:0,ind:6,ty:2,nm:"Word",refId:"image_5",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:60,s:[0]},{t:100,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[209.998,286.753,0],ix:2},a:{a:0,k:[54.662,55.765,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:175,st:0,bm:0}],markers:[{tm:51,cm:"",dr:0}]};a.injectInternalStyle("metaserver/static/js/cloud_docs/gdd_migration/ui/modals/what_do_you_want_to_do_modal.module.out.css",(e=>"._animationElement_kvpdk_1{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:75%}._fadedIn_kvpdk_9{animation:_fade-in_kvpdk_1 1s ease forwards;-webkit-animation:_fade-in_kvpdk_1 1s ease forwards;-moz-animation:_fade-in_kvpdk_1 1s ease forwards;-o-animation:_fade-in_kvpdk_1 1s ease forwards;-ms-animation:_fade-in_kvpdk_1 1s ease forwards}@keyframes _fade-in_kvpdk_1{0%{opacity:0}to{opacity:1}}._fadedOut_kvpdk_26{animation:_fade-out_kvpdk_1 1s ease forwards;-webkit-animation:_fade-out_kvpdk_1 1s ease forwards;-moz-animation:_fade-out_kvpdk_1 1s ease forwards;-o-animation:_fade-out_kvpdk_1 1s ease forwards;-ms-animation:_fade-out_kvpdk_1 1s ease forwards}@keyframes _fade-out_kvpdk_1{0%{opacity:1}to{opacity:0}}"));const Ac={animationElement:"_animationElement_kvpdk_1",fadedIn:"_fadedIn_kvpdk_9",fadeIn:"_fade-in_kvpdk_1",fadedOut:"_fadedOut_kvpdk_26",fadeOut:"_fade-out_kvpdk_1"},Rc=s.React$1.lazy((()=>new Promise((function(t,o){e(["./c_lottie-react_build_index"],t,o)})))),Sc=e=>{var{altText:t,inverse:a}=e,i=o.__rest(e,["altText","inverse"]);const n="dig-Illustration dig-Illustration-spot"+(a?" dig-Illustration--inverse":"");return s.react.exports.createElement("svg",Object.assign(Object.assign({role:"presentation"},i),{className:n,viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),s.react.exports.createElement("title",null,t),s.react.exports.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},s.react.exports.createElement("path",{d:"M220.8 6c-14 30.5-28.7 60.2-54.9 80.4-28.9 22-68.8 21.9-103 17.4 19 10.9 34.2 24.7 42.2 46.5 2.1 4.7 2.3 10.8 3.1 15 .7.4 2.2 9.8 2.6 12.9-2.1 14.9-11 23.1-22.8 34.2-12.1 11.4-26 22-38.9 28.3 23.2 2.5 51.5 8.5 69.9 24.3 13.8 14.7-9.1 53-14.2 75-3.4 10.9-5.7 17-7.2 22.4 15-3.2 44.3-17.8 61-19.1 7.5-.3 13.3-1.7 21.7-1 5.3-.1 8.3 1.3 10.9 0 2.8-3.8-6.4-11.5-6.9-13.2 0-.2 4.5-2.8 4.5-3.1.1-.3-4.5-1.9-4.7-1.7-.1.1 3 1.3 3.5 1.3.9 0-.4.5-2.4 1-2.5.6-2.2.8-4.3-3-1-1.9-3.2-5.4-3.7-6.8 4.4-1.3 12.7-4.4 16.8-6.3 5.9-6.9-3.6-16.1-11.4-22.2-1.6-1.1-3.1-2-3.3-2.1-.4-.1 0-.4 4.7-4.2 3.9-3.2 19.7-16.4 19.8-15.1 3-1 4.4-1 10.2.2 11.2 2.2 12.5 2.9 22.9 12.1 6.9 6.2 18 17.2 21.2 21.2 10.8 11.4 23 45.8 28.8 65 4 11.7 7.8 27.2 13.3 30.9 1-.1.9.4.8-5.4-.6-4 6.4-26.1 10.5-31.7 4.1 13.9 9.5 33.3 12.7 48 .3 5.4 4.2 3.2 3.4-.6-.3-1.8 1.4-18.5 2.9-28.1.5-3.8.6-3.5-1 .1-1.6 4-2.3 5.1-3.4 5.7-2.7 1.6-.8-2.5-.8-4.8 1.9-15.7 8-29.3 14.8-44.4 3.6-10.4 11-24 18.9-31.6 29.6-19.4 54.3-19.5 93.7-15.3-17-12.1-44.8-31.5-53.5-49.3-6.4-13.7-10.4-25.7-8.5-39.7 7.3-14.5 23.9-20.4 42.1-21.7-22.4-9.2-56.4-16.6-71.7-35.3-6.6-11.7-15.1-26.6-14.6-42.1.3-23.5-.7-23 5.2-52.6 1.7-8.4 3-15.3 2.9-15.3-5 2.7-12.1 7.6-16.6 11.3C323.4 55.4 301.5 66 282.3 62c-24.9-5.1-54.7-34.2-57.8-58.5-.8-6.5-.9-2.5-3.7 2.5z",fill:"#FAD24B"}),s.react.exports.createElement("path",{d:"M240.1 81.1c-5.8 1.9-6.2 12.5-8.2 19.4-2.8 8.6-3.5 11-5.2 14.7-3-9.3-5.4-20.8-16.1-17.1-11 4-7.3 15.2-5.9 29.3 2.1 18.2 1 29.6 6.3 46.4 2.2 8.4 4.5 18.3 4 24.7-.3 1.8-4.8 7.3-7.8 9.6-5.9 4.7-10.8-10.9-13.9-15.3-5.6-11.9-11.3-22.1-16.1-33.1-3.3-7.6-8-10.9-13.4-9.3-5.4 2.2-8.2 3.8-7.6 10.1 0 9.3 6.7 18.3 10.6 27.2 4.1 8.5 7.6 14 9.7 21.8.2 2.8.5 3.4 3.1 6.4 3.3 3.6 19.5 27.4 24.3 38 14.5 25.5 22.3 56.9 33.1 82.1 12.4 31.4 18.3 60.4 23.4 93.4 3 13.9 1.3 31.7 13.1 38.9 21.3 12.4 43.2 7.8 63.7-1.3 7-4.7 14.6-13.2 19.8-20.1-11.7-27.2-26.9-68.9-33.4-96.9-7.5-21.4 0-23.7 14.3-36.2 27.8-22.1 13.5-43.3 41.8-67.1 7.8-7.6 8-7.9 7.8-12 .1-4.5-2.6-8.5-6-10-9.7-4.2-27 5.2-33.4 10.9-6.5 3.7-18 29.3-29.9 26.4-4.9-6.5-19.8-62-19.7-75.6-1.4-19.3-4.6-40.1-8.5-61.6-2.5-18.1-2.6-18.8-4-21.3-3.4-6.4-10.3-6.4-15.3-1.1-3.3 1.6-1.4 11.4-4 13.6-5.1-3.1-8.4-11.4-10.1-16.6-.7-2.3-1.1-2.8-1.7-2.7-.3.1-.5-.4-.8-1.8-1.4-7-5.9-16.2-14-13.8z",fill:"#793C23"}),s.react.exports.createElement("path",{d:"M255.5 80.3c-11.8 8.3-15.3 29.4-19.5 43.2-4.9 15.6-14.4 47.6-18 61.3-2.5 5.8-.1-13 .7-13.7 2.7-10.2 11.6-40.2 14.1-47.8 5.1-15.4 14.4-37.6.4-39.1-15.8 3.4-21.5 29.5-28.4 43.4-18.4 40.7-26.8 73.9-36.6 119-11.8-13.2-18.2-34.4-31.9-44-12-9.4-36.2-4.4-20.8 13.1 20.2 17.7 20 37.7 28.6 64 5 14.9 11.4 22.1 16.5 35.6.1 10.5.2 33.7-2.2 37.6-1.5 4.7-3.1 11-5.2 16.1-9.1 25.2-17.3 52.1-29 76.3-10.3 20.2 15-13.7 92.4 24.8 1.3.5 5.7 5.7 6 4.4.6-4.7 1.2-12.8 1.9-17.4 3.6-26.3 9-60.8 18.1-84.8 5.8-19.1 10-17 21.4-33.3 18.3-31.7 21.2-76.2 32.3-110.1 2.4-19.9 17.2-64.9 14.9-81-3.1-7.8-10.8-10.5-16.6-3.5-4.7 2.7-11.9 36.6-15.8 47.2-.9 2.1-2.1 11.3-4.3 10.3-1.8-1.8-.3-4.6-.2-7.4 1.3-14.1 2.5-16 3.5-23.1-.3-2 1.2-8.3 2.1-9.2.7.1 2.1-20.6 2.4-21.5.1-14.2 8.4-42.4-12.8-40.9 2.3-12.1 1.3-22.8-14-19.5z",fill:"#D19063"}),s.react.exports.createElement("path",{d:"M355.6 434.4c-3.4.8-5.1 2.4-5.5 4.9 2.5-.7 4-.7 7.1-1.3 2.9-.8 4.1-.9 4.3-.3-8.4 14.1-35 27.9-50.6 34-4.6 1.6-17.1 1.5-22.7.2-6.7-1.2-8.7-3.6-15.4-3.8-.8-.9-3.2-3.6-3.5-4.2-1.9-1.8-4-3.1-1.6.7-.3.7-3.1-3.3-3.4-4.5.7-1.2 1-3.6 1.8-4.2.2 0-.1-.3-.6-.6-2.1-1.8-2.6 1.5-3.9 2-.5 0-.5.2-.4 2.8 2.8 10.9 1.8 25.2 8.8 35.3 2.2 1.3 2 .9 2.2-.5.1-.4 0-.6-.2-.6-2.4-2.4-5.2-19.8-6.6-25.9-2.2-6.8-2.4-6.5.5-4.2 3.9 2.8 6.6 6 12.2 6.7 10.1 3.2 19.1 5.9 30.4 4.8 18-3.1 43.3-19.6 55.3-32.7 3.2 4.2 8.8 30.1 14.4 32.6-3.4-7.9-8.8-23.9-12-30.4-1.5-2.9-1.6-3.3-1.3-4 .5-3.4-5.4-8.7-9.3-6.8zM143 447c-8 .1-19.5 1.4-26.5 4.6-2.3 2.8-3.3 10.9-5.3 14.9-1.4 3.3-1.7 8.7-3.1 10.8-.7 2.4-2.9 6.6-1.4 8.4 1.7 1.9 2.4-3.6 3.7-5.5 2.5-7.1 4.8-13.3 7.1-20.7 1.1-4.2 1.3-4.6 2.9-5.2 10.8-4.1 17.2-4 30.4-4.2 21.1 1 60.6 12 75.6 28 .2 4.3-.2 11.1-1.4 15.5-.9 1.9-.3 3.1-.7 4.4-.5.3-.3 1 .6 1.4 3.1 2.6 5.1-24.4.9-25.5C207.1 457 168.6 446 143 447z",fill:"currentColor"}),s.react.exports.createElement("path",{d:"M257.1 81.9c-2.4 2-6.5 15.7-3.3 17.9 9.1 6.1 14.3-1.9 15.1-11.4.4-4.1.3-4.5-1.6-4.5-.8 0-.9.1-.8.7.2 1.3-.4 5.7-1.2 8.3-2 4.6-3.3 10.4-8.8 7.4-2.8-1-.8-5-.9-7.1.7-2.8 1.7-12.1 4.2-10.6 1-1-2.3-.8-2.7-.7zm-20.6 3.5c1 1.3 2.8 2.2 1.9 3.8-1.2 4.4-2.5 10.3-5.7 13.9-10.8-.6-5.3-8.7-2.6-14.5.5-1.6 3.6-2.7.9-3.1-1.9-.3-3.5 1.9-5.3 7.3-2.4 7.3-1.5 9.3 4.9 10.6 3.3.7 3.6.7 5-.7 2.5-4.1 5.1-12.5 2.7-.2-3.4 15.1-11.7 36.6-15.5 52.6-2.1 7.3-5.7 19.7-7.1 27.3-.9 2.3-.2 6.5-2.7 6.8-1.4 0 1 1 5.5 2.2 2.4.6 3.4.3 1.3-.4-2.9-.8-.4-2.1.5-6.2 5-14.4 6.9-26.2 11.4-40.5 4.4-13.8 8.1-24.6 12.1-39.4 1.6-5.8 3.8-12.8 6.7-17.5.5-.8.5-.8-.1-1-5.1 1.5-9 17.3-10.8 23.2-7.5 26.4-14.7 47.9-22.1 75.1-1.7 5.8.1-2.6.6-4.5 3.6-14.9 10.5-41.2 14.5-51.9 3.3-12.2 16.7-39.1 3.2-44.1-.1 0 .2.5.7 1.2zm-19.1 12.9c-3.9 5.4-7.4 15.4-9.7 22.1-.7 2.6-3.9 8.3-3 9.6 2.7 1.1 6.8-14.6 8.5-17.8 2.3-7.9 6.4-14.9 4.2-13.9zm51.3 3.1c-4.7 20-9 38.2-15.4 58.8-3.9 13.2-5 22.3-8.6 34.4-1.9 5.7-1.9 5.9-.7 5.7 3.1-.5 1.8-5.3 4.4-5.4 4.4-1.7 10.6 2.8 14.8 5.6 12.8 10.3 5.2 9.4 9.1 15.9 2.7 0 1.2-4.3 3.4-8.8 1.1-3.6 3.3-10.4 4.3-14 4.4-13.4 10.7-34.9 14.4-47.3-1-1-3.1 4.4-3.4 5.2-2.7 6.7-4.5 12.1-6.5 19.9-2.9 10.9-6.7 21.3-9.9 30.9 2.1-21.6 6.9-47.4 8.2-68.8.4-6.9 1.9-20.8.2-27.3-1.4-5.7-9.3-5.5-13.3-3.9l.2-1c.5-1.5-1-1.2-1.2.1zm8.4 1.2c4.7 1.3 2.1 12.6 0 15.7-3.1 2.6-6.2.4-5.4-4.8 0-3.8 1-8 1.7-11 .2-.6 2.1-.5 3.7.1zm-7.2 4c-.9 2-.9 7.5-1 10.6 3 4.7 11.5 3.9 12.8-2.3-1.3 26.3-4.9 52.1-8.4 78-.4 3.4-.4 3.4-1.4 2.1-4.5-5.6-15.1-11.8-22.5-7.9 3.6-17.8 9.1-33.8 13.8-51.5 2.6-9.4 2.3-12.3 4.2-20.3.2-1.2 4.1-16.1 2.5-8.7zm-16.5-.5c0 .7 2.7 1.8 5.2 2.2 1.8.3.9-.2-1.4-.8-1.6-.1-3.1-2.2-3.8-1.4zm-29.6.8c-.7.3 6.7 2.7 8.2 2.3-2.2-.8-5.3-2.4-8.2-2.3zm45.9 16.8c.6.7 3.9 2 5.5 2.2 1.6.1-5.1-2.2-4.9-2.5-.3-.3-1.5-.6-.6.3zm28.1 18.4c-1.7 1.7-3.5 9.9-3.2 15.3 5.9 9.1 15.1 1.3 15.1-8.6.3-2.8.1-3.5-1-3.9-3-1.7-2.3 12.9-6 14.7-1.3 1.5-2 .3-3.5-.2-2.8-.2-2-7-1.8-9.1 1.3-7.8 1.6-8.8 2.9-8.5.5.1.7.1.5-.1-.4-.7-2.2-.4-3 .4zm-89.4 3.8c.5 1.5 1.7 1.2 4.5 1.4 8.4.4-4.7-2.4-4.5-1.4zm32.4 2c.6.9 1.1 1.1 1.1.6.4-.3 6 1.6 5 .6 0 .1-8.1-3.5-6.1-1.2zm23 9.8c.8 1.3 5.6 3.6 6.8 2.6-.4-.6-1.8-.5-3.6-1.6-2.8-1.3-3.2-1.4-3.2-1zm30.3 5.8c0 .9 5.5 2.6 6.5 2 .4-.4-5.8-3-6.5-2zm-1.5 4.5c.5.7 6.7 2.9 8.5 3.1 3 .9-9.7-4.6-8.5-3.1zm-116 8.8c-1.6 1-6.8 3.6-8.5 4.4 3.3 3.3 15.5-6.7 8.5-4.4zm9.3 2.8c-.9 1-14.2 47.7-8.3 34.1 0 1.1 12.8-42.6 8.3-34.1zm70.4 8.6 1.8.5c-1.4 1.3-2.1 3.2-1.2 4.8-3.2-1.5-7.1-.3-9.7 1.1.5-1.2 1.7-6 2.4-6.4 2.3-.6 3-.9 6.7 0zm-39.4.1c0 .7-.6.8-.4 0 .2-.7.4-.8.4 0zm44.9 2.2c2.2 1 .1 2.2-.7 3.5-3.6 1.9-2.6-6.3.7-3.5zm25.7 1.5c8 5.3 6.7 2.2-.6-.6l.6.6zm-20.8 1.9c1.3 1 4.3 4.2 5.7 5.7-.4 9.3-2.6-.4-12.4-4.6 5.8 1.2 3.8-3.8 6.7-1.1zm-69.1 2.1c-.8 3.3-3.8 8.9-1.9 10.4 2 .9 1.8-1.4 2.7-4.4 2.2-7.9 1-9.6-.8-6zm4.2.1c-1.2 1.9-3.1 10.2-.5 10.9.4-1.5 4.7-14 .5-10.9zm72.8 7c-.1.2-.2.2-.2-.2 0-.8.4-.2.2.2zm-45.3 1.7c-.5.9-1.2 10.9-.2 13.1 1.9 7.6 4.9-17.1.2-13.1zm71.3 1.4c-11.6 30.6-13.9 72.1-24 101.8-.4-1.1-3.7 8-3.9 8.6-1.3 4.3-3.6 8.3-5.8 12.8-4.5 10.7-19 24.4-21 33.1.1 1.9 1.3.8 2-.9 1.1-2.8 7.6-10.7 10.1-14.3 13.5-15.9 24.3-42.8 27-62.2 4.1-8.8 17-19.1 23.5-25.2-3.3.3-16.3 12-20.7 16.8-2.2 2.6-1.3 1.3-.8-1.3 3.6-16.2 7.4-36.8 11.1-53.8.2-1.2 5-18.5 2.5-15.4zm-185.3 2.5c-3.1-.1-4.1 3.1-1.4 3.8 1.5.2 0-.4.1-1.4 1-5.1 7.5 2.1 9.2 4.5 2.6 1.4 1.4 8.5 3.1 9.7 1.4.8 2.5-1.5 2.2-4.6-1-5.4-7.2-12.8-13.2-12zm137.4 10.9c-.3 3.6 0 9.1.5 10.2 2 2.2 4 4.2 3.2-2-.3-4.4-.2-5.6-1-9-1.3-1.3-2.7-2.4-2.7.8zm-120.1 6.7c-.7.6-1.9 2.7-2.7 3-.4 0-.7.6-.7 1.3 1.9 2 7-7.6 3.4-4.3zm140.8 4.4c-2.5 13.8 2 18.6 2 2 0-1.9-.9-2.2-2-2zm107.6 4c-4.8 3.3-12.3 8.6-10.9 15.7.1 2.1.5 2.4 1.7 2.4-.6-7.6 5.8-13.3 12.3-17.5 3.6 3.9 2-3.1-3.1-.6zM224.7 237c-2.4 18-1.7 52.6-.1 67.3.7.2 2.2 0 1.8-1.2-.2-1.8-.5-13.9-.4-18.9.4-14.7-.4-28-.3-41.6 0-6.2.3-8.1-1-5.6zm-56.6 9.1c-2.5 3.2-2.8 11.7-5.2 13.1-.6.5-.5.7.5.7 2.9 0 4.4-3.1 6-12.1.2-2 1.5-4.5-1.3-1.7zm191.5 7.8c.6 1.4 3.2 7.1 5.8 7 2.1.2 2.4 0 1.2-1.1-1.2-.6-5.5-8.1-7-5.9zm-12.1 35.7c1.1 1.2 5 2.6 7.1 2.5-1.3 0-7.4-4.1-7.1-2.5zm-49.2 46.8c-4.3 1-11.1.7-14.3 2.9-3.4 1.9 1.6-1.9-.9-1.2-1.5.5-13.3 11.7-12.9 12.1.2.2 2 .4 2.6.5 4.5-5.1 12-11.5 18.8-12.3 5.4-.2 17.2-3.9 6.7-2zm-13.1 25.4c-.9 4.7 6.7 32.7 8.3 41.4.4.9.5 1 1.2.9 2.2-.5-.9-6.5-1-10.2-1.2-7.8-5.7-22.3-6.8-29.5-.5-3.1-.6-3.7-1.7-2.6z",fill:"#1E1919"})))};Sc.displayName="CelebrationHighFiveSpotIllustration";var yc;!function(e){e.INTRO="intro",e.WHATS_HAPPENING="whats_happening",e.MIGRATE_NOT_NOW="migrate_not_now",e.WHAT_TO_DO="what_to_do",e.LINK_GOOGLE="link_google",e.CONVERT_TO_MS="convert_to_ms",e.MIGRATE_TO_GOOGLE="migrate_to_google",e.COULD_NOT_CONNECT="could_not_connect"}(yc||(yc={}));var wc;!function(e){e.MIGRATE_TO_GOOGLE="MIGRATE_TO_GOOGLE",e.CONVERT_TO_MS="CONVERT_TO_MS"}(wc||(wc={}));const Tc=({user:e,gddMigrationDate:t,onComplete:i})=>{const[n,r]=s.react.exports.useState(yc.INTRO),[l,c]=s.react.exports.useState(),[d,u]=s.react.exports.useState(),[p,g]=s.react.exports.useState(!0);s.react.exports.useEffect((()=>{nt.getMigrationSettings(e).then((e=>{var t,o,s;g(null===(t=null==e?void 0:e.allow_team_members_to_link_google_account)||void 0===t||t),"ms_office_file"===(null===(o=e.effective_migration_mode)||void 0===o?void 0:o[".tag"])?c(wc.CONVERT_TO_MS):"shortcut_to_gdrive"===(null===(s=e.effective_migration_mode)||void 0===s?void 0:s[".tag"])&&c(wc.MIGRATE_TO_GOOGLE)})),nt.getMigrationDetails(e).then((({user_details:e,team_details:t})=>{const o=null!=t?t:e;void 0!==o.pre_migration_gdd_count&&u(o.pre_migration_gdd_count)}))}),[]),s.react.exports.useEffect((()=>{var t,o;t=e.role,o=n,a.logEvent({class:"cloud_docs",action:"shown",object:"configure_gdd_migration_modal",properties:{accountRole:t,configureGddMigrationModalType:o}})}),[e.role,n]);const m=()=>{var t,o;a.Modal$1.close(),t=e.role,o=n,a.logEvent({class:"cloud_docs",action:"dismiss",object:"configure_gdd_migration_modal",properties:{accountRole:t,configureGddMigrationModalType:o}})},h=()=>{m(),i&&i((e=>{switch(e){case wc.MIGRATE_TO_GOOGLE:return{".tag":"shortcut_to_gdrive"};case wc.CONVERT_TO_MS:return{".tag":"ms_office_file"};case void 0:return{".tag":"other"}}})(l))},_=t=>{((e,t,o)=>{a.logEvent({class:"cloud_docs",action:"select",object:"configure_gdd_migration_modal",properties:{accountRole:e,configureGddMigrationModalType:t,gddMigrationButtonType:o}})})(e.role,n,t)},f=e=>{_("next"),r(e)},E=e=>{_("back"),r(e)},v=()=>{_("learn_more"),a.open_tab(nt.HELP_CENTER_ARTICLE_URL)},A=s.react.exports.useMemo((()=>{const i=F.intl.formatDate(null!=t?t:new Date,{month:"long",day:"numeric",year:"numeric"});switch(n){case yc.INTRO:return(({onNext:e,onNotNow:t,onLearnMore:o,moveByDate:i})=>({title:F.intl.formatMessage({id:"eZWKVs",defaultMessage:"Google files are moving to Google Drive on {moveByDate}."},{moveByDate:i}),infoTextAboveModalTitle:F.intl.formatMessage({id:"MfPZDB",defaultMessage:"1 of 4"}),bodyText:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement("p",null,F.intl.formatMessage({id:"e0OorB",defaultMessage:"Moving Google files from Dropbox to Google will improve performance and give access to the most up-to-date features when editing your Google Docs, Sheets, and Slides."})),s.React$1.createElement("p",null,F.intl.formatMessage({id:"DsIc55",defaultMessage:"Shortcuts to your Google files will be created in Dropbox, replacing the original files."}))),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Button,{variant:"opacity",onClick:t},F.intl.formatMessage({id:"p4pvas",defaultMessage:"Remind me later"})),s.React$1.createElement(a.Button,{variant:"primary",onClick:e},nt.Strings.NEXT)),tertiaryActions:s.React$1.createElement(a.Button,{variant:"transparent",onClick:o},nt.Strings.LEARN_MORE),rightFrameComponent:s.React$1.createElement(s.React$1.Suspense,{fallback:s.React$1.createElement("div",null,nt.Strings.LOADING_ANIMATION)},s.React$1.createElement(mc,{animationData:gc,loop:!1,style:{width:"75%"}})),width:nt.DEFAULT_MIGRATION_MODAL_WIDTH,height:nt.DEFAULT_MIGRATION_MODAL_HEIGHT}))({onNext:()=>f(yc.WHATS_HAPPENING),onNotNow:()=>null!=d&&d?r(yc.MIGRATE_NOT_NOW):h(),onLearnMore:v,moveByDate:i});case yc.WHATS_HAPPENING:return(({onNext:e,onBack:t,onLearnMore:o,moveByDate:i})=>({title:F.intl.formatMessage({id:"U5mUXh",defaultMessage:"What’s happening to Google files"}),infoTextAboveModalTitle:F.intl.formatMessage({id:"MTMS+F",defaultMessage:"2 of 4"}),bodyText:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement("p",null,F.intl.formatMessage({id:"N0lOrx",defaultMessage:"Starting {moveByDate}, your Google Docs, Sheets, and Slides will open in Google Drive instead of Dropbox."},{moveByDate:i})),s.React$1.createElement("p",null,F.intl.formatMessage({id:"X9bu1K",defaultMessage:"To migrate your Google files to Google Drive, link your Google account to Dropbox."})),s.React$1.createElement("p",null,F.intl.formatMessage({id:"Q7uocV",defaultMessage:"Your Google files will automatically be converted to Microsoft Office files if no action is taken by {moveByDate}."},{moveByDate:i}))),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Button,{variant:"opacity",onClick:t},nt.Strings.BACK),s.React$1.createElement(a.Button,{variant:"primary",onClick:e},nt.Strings.NEXT)),tertiaryActions:s.React$1.createElement(a.Button,{variant:"transparent",onClick:o},nt.Strings.LEARN_MORE),rightFrameComponent:s.React$1.createElement(s.React$1.Suspense,{fallback:s.React$1.createElement("div",null,nt.Strings.LOADING_ANIMATION)},s.React$1.createElement(hc,{animationData:N.LinkDropboxToGoogleAnimationData,loop:!1,style:{width:"75%"}})),width:nt.DEFAULT_MIGRATION_MODAL_WIDTH,height:nt.DEFAULT_MIGRATION_MODAL_HEIGHT}))({onNext:()=>f(yc.WHAT_TO_DO),onBack:()=>E(yc.INTRO),onLearnMore:v,moveByDate:i});case yc.WHAT_TO_DO:return(({disabled:e,isConvertToMS:t,isMigrateToGoogle:o,allowTeamMembersToLinkGoogleAccount:i,onNext:n,onBack:r,onLearnMore:l,onCheckMigrateToGoogle:c,onCheckConvertToMS:d})=>({title:F.intl.formatMessage({id:"AMpnzD",defaultMessage:"Confirm your preference"}),infoTextAboveModalTitle:F.intl.formatMessage({id:"7IR9Ol",defaultMessage:"3 of 4"}),bodyText:s.React$1.createElement("div",{role:"group"},s.React$1.createElement(Ec,{checked:o,disabled:e,id:"continue-google",labelText:F.intl.formatMessage({id:"mrNUok",defaultMessage:"Move Google files to Google Drive with shortcuts"}),onChange:c,helperText:F.intl.formatMessage({id:"Sn9fh4",defaultMessage:"Link your Google account so we can move files to Google Drive."})}),s.React$1.createElement(Ec,{checked:t,disabled:e,id:"continue-microsoft",labelText:F.intl.formatMessage({id:"iGoIY+",defaultMessage:"Convert Google files to Microsoft Office files"}),onChange:d,helperText:F.intl.formatMessage({id:"NAzO7r",defaultMessage:"No action is needed from you. We’ll take care of it."})})),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Button,{variant:"opacity",onClick:r},nt.Strings.BACK),!1===i?s.React$1.createElement(a.Tooltip,{title:nt.Strings.DISABLED_MIGRATE_FILES_TO_GOOGLE_DRIVE_TOOLTIP_TEXT},s.React$1.createElement("span",null,s.React$1.createElement(a.Button,{variant:"primary",onClick:n,disabled:!0},nt.Strings.NEXT))):s.React$1.createElement(a.Button,{variant:"primary",onClick:n},nt.Strings.NEXT)),tertiaryActions:s.React$1.createElement(a.Button,{variant:"transparent",onClick:l},nt.Strings.LEARN_MORE),rightFrameComponent:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(s.React$1.Suspense,{fallback:s.React$1.createElement("div",null,nt.Strings.LOADING_ANIMATION)},s.React$1.createElement(Rc,{animationData:gc,loop:!1,className:[Ac.animationElement,Ac[o?"fadedIn":"fadedOut"]].join(" ")})),s.React$1.createElement(s.React$1.Suspense,{fallback:s.React$1.createElement("div",null,nt.Strings.LOADING_ANIMATION)},s.React$1.createElement(Rc,{animationData:vc,loop:!1,className:[Ac.animationElement,Ac[t?"fadedIn":"fadedOut"]].join(" ")}))),width:nt.DEFAULT_MIGRATION_MODAL_WIDTH,height:nt.DEFAULT_MIGRATION_MODAL_HEIGHT}))({disabled:void 0===l,isConvertToMS:l===wc.CONVERT_TO_MS,isMigrateToGoogle:l===wc.MIGRATE_TO_GOOGLE,allowTeamMembersToLinkGoogleAccount:p,onNext:()=>o.__awaiter(void 0,void 0,void 0,(function*(){if(l===wc.MIGRATE_TO_GOOGLE){yield nt.setMigrationSettings(e,{effective_migration_mode:{".tag":"shortcut_to_gdrive"}});const t=e.email,o=yield nt.fetchUserHasGddMigrationCompatibleLink(e,t);return r(o===nt.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK?yc.MIGRATE_TO_GOOGLE:yc.LINK_GOOGLE)}if(l===wc.CONVERT_TO_MS)return yield nt.setMigrationSettings(e,{effective_migration_mode:{".tag":"ms_office_file"}}),r(yc.CONVERT_TO_MS);a.Snackbar.warn(F.intl.formatMessage({id:"Q9RiB1",defaultMessage:"Please choose a migration type"}))})),onBack:()=>E(yc.WHATS_HAPPENING),onLearnMore:v,onCheckMigrateToGoogle:()=>c(wc.MIGRATE_TO_GOOGLE),onCheckConvertToMS:()=>c(wc.CONVERT_TO_MS)});case yc.LINK_GOOGLE:return(({onLinkAccount:e,onBack:t})=>({title:F.intl.formatMessage({id:"2PB7hS",defaultMessage:"Link Google account"}),infoTextAboveModalTitle:F.intl.formatMessage({id:"lBpsJD",defaultMessage:"4 of 4"}),bodyText:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement("p",null,F.intl.formatMessage({id:"/WNsVV",defaultMessage:"You’ll be asked to sign in and link your Google account to this Dropbox account. Select the Google profile for this Dropbox account, and we’ll take care of the rest."})),s.React$1.createElement("p",null,F.intl.formatMessage({id:"pYT44N",defaultMessage:"You’ll be notified when the Google file migration is complete."})),s.React$1.createElement("p",null,s.React$1.createElement("i",null,F.intl.formatMessage({id:"JlYJUS",defaultMessage:"You may need to disable pop-up blockers in order to link your Google account."})))),tertiaryActions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Button,{variant:"opacity",onClick:t},nt.Strings.BACK),s.React$1.createElement(a.Button,{variant:"primary",onClick:e},nt.Strings.LINK_ACCOUNT)),width:"standard"}))({onLinkAccount:()=>o.__awaiter(void 0,void 0,void 0,(function*(){const t=yield(e=>o.__awaiter(void 0,void 0,void 0,(function*(){try{return(yield nt.ensureUserHasGddMigrationCompatibleLink(e))===nt.GddMigrationCompatibleLinkStatus.HAS_COMPATIBLE_LINK}catch(e){const t=nt.parseLinkAccountError(e);t&&a.Snackbar.fail(t,"confgure-migration-controller-snackbar")}return!1})))(e);if(!t)return r(yc.COULD_NOT_CONNECT);r(yc.MIGRATE_TO_GOOGLE)})),onBack:()=>E(yc.WHAT_TO_DO)});case yc.COULD_NOT_CONNECT:return(({onTryAgain:e,onLearnMore:t})=>({title:F.intl.formatMessage({id:"mhpv2Q",defaultMessage:"Couldn’t connect to your Google account"}),bodyText:s.React$1.createElement(s.React$1.Fragment,null,F.intl.formatMessage({id:"IChG+T",defaultMessage:"You can try again, or go to “Learn more” to manually move your Google files to Google Drive and create shortcuts in Dropbox."})),tertiaryActions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Button,{variant:"opacity",onClick:t},nt.Strings.LEARN_MORE),s.React$1.createElement(a.Button,{variant:"primary",onClick:e},F.intl.formatMessage({id:"WteAJ2",defaultMessage:"Try again"}))),width:"standard",withCloseButton:nt.Strings.CLOSE}))({onTryAgain:()=>r(yc.LINK_GOOGLE),onLearnMore:v});case yc.MIGRATE_NOT_NOW:return(({onMoveFiles:e,moveByDate:t})=>({title:F.intl.formatMessage({id:"X3l0jP",defaultMessage:"Google files moving to Google Drive"}),bodyText:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement("p",null,F.intl.formatMessage({id:"vyW3PG",defaultMessage:"We recommend moving all of your Google files to Google Drive. Shortcuts to the files will be added to Dropbox so you can open them at any time."})),s.React$1.createElement("p",null,F.intl.formatMessage({id:"dbGYQX",defaultMessage:"Google files that haven’t been moved by {moveByDate} will be converted to Microsoft Office files and stored in Dropbox."},{moveByDate:t}))),tertiaryActions:s.React$1.createElement(a.Button,{variant:"primary",onClick:e},F.intl.formatMessage({id:"qbOcoV",defaultMessage:"Move files"})),withCloseButton:nt.Strings.CLOSE,width:"standard"}))({onMoveFiles:()=>r(yc.INTRO),moveByDate:i});case yc.CONVERT_TO_MS:return(({onFinish:e,onBack:t})=>({title:F.intl.formatMessage({id:"2YXCXl",defaultMessage:"You’re all set."}),infoTextAboveModalTitle:F.intl.formatMessage({id:"lBpsJD",defaultMessage:"4 of 4"}),bodyText:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement("p",null,F.intl.formatMessage({id:"bb8u5h",defaultMessage:"We’ll notify you in Dropbox when the migration is finished."}))),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Button,{variant:"opacity",onClick:t},nt.Strings.BACK),s.React$1.createElement(a.Button,{variant:"primary",onClick:e},nt.Strings.FINISH)),rightFrameComponent:s.React$1.createElement(Sc,{style:{width:"75%"}}),width:nt.DEFAULT_MIGRATION_MODAL_WIDTH,height:nt.DEFAULT_MIGRATION_MODAL_HEIGHT}))({onBack:()=>E(yc.WHAT_TO_DO),onFinish:h});case yc.MIGRATE_TO_GOOGLE:return(({onFinish:e,onBack:t,moveByDate:o})=>({title:F.intl.formatMessage({id:"2YXCXl",defaultMessage:"You’re all set."}),infoTextAboveModalTitle:F.intl.formatMessage({id:"lBpsJD",defaultMessage:"4 of 4"}),bodyText:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement("p",null,F.intl.formatMessage({id:"5Dcm1b",defaultMessage:"Your Google files will be automatically moved on {moveByDate}. We’ll notify you in Dropbox when the migration is finished. "},{moveByDate:o})),s.React$1.createElement("p",null,F.intl.formatMessage({id:"IAhKRT",defaultMessage:"After the move, you can create new shortcuts Dropbox to Google files."}))),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Button,{variant:"opacity",onClick:t},nt.Strings.BACK),s.React$1.createElement(a.Button,{variant:"primary",onClick:e},nt.Strings.FINISH)),rightFrameComponent:s.React$1.createElement(Sc,{style:{width:"75%"}}),width:nt.DEFAULT_MIGRATION_MODAL_WIDTH,height:nt.DEFAULT_MIGRATION_MODAL_HEIGHT}))({onBack:()=>E(yc.WHAT_TO_DO),onFinish:h,moveByDate:i})}}),[e,n,r,l,c]);return s.React$1.createElement(nt.ModalTemplate,Object.assign({open:!0},A,{onRequestClose:m}))};Tc.displayName="ConfigureMigrationControllerWithoutCss";const bc=a.requireCssWithComponent(Tc,["/static/metaserver/static/css/dig-illustrations/index.web-vflzrHQEU.css"]);var Mc;!function(e){e.INITIAL_REMINDER="initial_reminder",e.MIGRATION_REMINDER="migration_reminder",e.MS_CONVERSION_REMINDER="ms_conversion_reminder",e.TEAM_ADMIN_MIGRATION_REMINDER="team_admin_migration_reminder",e.TEAM_ADMIN_MS_CONVERSION_REMINDER="team_admin_ms_conversion_reminder",e.TEAM_MIGRATION_REMINDER="team_migration_reminder",e.TEAM_MS_CONVERSION_REMINDER="team_ms_conversion_reminder",e.MIGRATION_SUCCEEDED="migration_succeeded",e.MIGRATION_PARTIALLY_SUCCEEDED="migration_partially_succeeded",e.MS_CONVERSION_SUCCEEDED="ms_conversion_succeeded",e.MS_CONVERSION_FAILED="ms_conversion_failed",e.MS_CONVERSION_COMPLETED="ms_conversion_completed",e.MS_CONVERSION_PARTIALLY_COMPLETED="ms_conversion_partially_completed"}(Mc||(Mc={}));const Ic=(e,t,o)=>{a.logEvent({class:"cloud_docs",action:"select",object:"gdd_migration_banner",properties:{accountRole:e,gddMigrationBannerType:t,gddMigrationButtonType:o}})};function Fc(){const e=a.Viewer.get_viewer().work_user;return new a.DefaultUserApiV2Client(e)}const Oc=({onComplete:e})=>{const[t,i]=s.react.exports.useState(!1),[n,r]=s.react.exports.useState();s.react.exports.useEffect((()=>{Fc().ns("cloud_docs").rpc("get_gdd_migration_settings",void 0,{}).then((e=>{var t;r(null===(t=e.settings.allow_team_members_to_link_google_account)||void 0===t||t),i(!0)}))}),[]);const l=()=>i(!1);return s.React$1.createElement(a.Modal,{open:t,onRequestClose:l},s.React$1.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard"},s.React$1.createElement(a.Modal.Title,null,F.intl.formatMessage({id:"e/+oMd",defaultMessage:"Dropbox for G Suite"}))),s.React$1.createElement(a.Modal.Body,null,s.React$1.createElement("div",{style:{display:"flex",flexDirection:"row"}},s.React$1.createElement("div",{style:{flexGrow:1}},s.React$1.createElement(a.Text,{size:"large"},F.intl.formatMessage({id:"DSdEqM",defaultMessage:"Allow team members to move content to Google Drive"})),s.React$1.createElement("br",null),s.React$1.createElement(a.Text,{color:"faint"},F.intl.formatMessage({id:"hPgVia",defaultMessage:"Your team’s Google files will be moving to Google Drive. This will impact your team’s Google storage. If files aren’t moved to Google Drive, they will automatically be converted to Microsoft Office equivalent files."}),s.React$1.createElement("br",null),s.React$1.createElement("br",null),F.intl.formatMessage({id:"vGdr3Z",defaultMessage:"Shortcuts to these Google files will be created in Dropbox and can be organized with the rest of your team’s content."}))),s.React$1.createElement("div",{style:{paddingLeft:"50px"}},s.React$1.createElement(_e.Toggle,{isToggled:n,onChange:()=>{r(!n)}})))),s.React$1.createElement(a.Modal.Footer,null,s.React$1.createElement(a.Button,{variant:"transparent",onClick:()=>{a.open_tab(nt.HELP_CENTER_ARTICLE_URL)}},F.intl.formatMessage({id:"4kFWKS",defaultMessage:"Learn more about the move"})),s.React$1.createElement(a.Button,{variant:"opacity",onClick:l},F.intl.formatMessage({id:"1ch1PL",defaultMessage:"Cancel"})),s.React$1.createElement(a.Button,{variant:"primary",onClick:()=>o.__awaiter(void 0,void 0,void 0,(function*(){try{yield Fc().ns("cloud_docs").rpc("set_gdd_migration_settings",{settings:{allow_team_members_to_link_google_account:n}},{}),null==e||e(null==n||n),l()}catch(e){a.Snackbar.update(s.React$1.createElement(a.Snackbar,{id:"gdd-generic-error-snackbar",isLowPriority:!1,title:F.intl.formatMessage({id:"rkVslm",defaultMessage:"Something went wrong on our end. Please try again."}),variant:"fail",actionButtonText:F.intl.formatMessage({id:"R/Hjn0",defaultMessage:"Close"}),onActionClick:()=>a.Snackbar.close()}))}}))},F.intl.formatMessage({id:"S2uNnI",defaultMessage:"Set"}))))};const Cc=({effectiveMigrationMode:e,migrationModeWasSelected:t,preMigrationReminderBannerDismissed:o,preMigrationInXDaysBannerDismissed:s})=>{if(t){if(!s)return"ms_office_file"===e[".tag"]?Mc.MS_CONVERSION_REMINDER:Mc.MIGRATION_REMINDER}else if(!o)return Mc.INITIAL_REMINDER;return null},Nc=({effectiveMigrationMode:e,convertToShortcutNumSucceeded:t,convertToShortcutNumFailed:o,convertToMsFileNumSucceeded:s,convertToMsFileNumFailed:a})=>{if("ms_office_file"===e[".tag"]){if(s>0&&0===a)return Mc.MS_CONVERSION_SUCCEEDED;if(s>0&&a>0)return Mc.MS_CONVERSION_PARTIALLY_COMPLETED;if(0===s&&a>0)return Mc.MS_CONVERSION_FAILED}else if("shortcut_to_gdrive"===e[".tag"]){if(t>0&&0===o)return Mc.MIGRATION_SUCCEEDED;if(t>0&&o>0)return Mc.MIGRATION_PARTIALLY_SUCCEEDED;if(s>0&&0===a)return Mc.MS_CONVERSION_COMPLETED;if(s>0&&a>0)return Mc.MS_CONVERSION_PARTIALLY_COMPLETED;if(!s&&a>0)return Mc.MS_CONVERSION_FAILED;if(!s&&!a)return Mc.MS_CONVERSION_FAILED}return null},Dc=({gddMigrationDate:e})=>{const[t,i]=s.react.exports.useState(null),n=a.mustGetActiveUser();if(s.react.exports.useEffect((()=>{(function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const o=yield nt.getMigrationSettings(e),{user_details:s,team_details:a}=yield nt.getMigrationDetails(e),i=null!=a?a:s;if(!i)return null;const{effective_migration_mode:n,migration_mode_was_selected:r,allow_team_members_to_link_google_account:l,pre_migration_reminder_banner_dismissed:c,pre_migration_in_x_days_banner_dismissed:d,pre_migration_team_admin_banner_dismissed:u,post_migration_result_banner_dismissed:p}=o,{overall_status:g,pre_migration_gdd_count:m,convert_to_ms_file_num_succeeded:h,convert_to_ms_file_num_failed:_,convert_to_shortcut_num_succeeded:f,convert_to_shortcut_num_failed:E}=i;if(!t)return null;const v=W.getNumDaysRemaining(t);if(v>30)return null;if("not_started"===g[".tag"]){if(v<0)return null;if(!a)return!1!==l||c?{bannerType:Cc({effectiveMigrationMode:null!=n?n:{".tag":"shortcut_to_gdrive"},migrationModeWasSelected:r,preMigrationReminderBannerDismissed:c,preMigrationInXDaysBannerDismissed:d}),numDays:v}:{bannerType:Mc.TEAM_ADMIN_MS_CONVERSION_REMINDER};if(void 0===l)return{bannerType:Mc.TEAM_ADMIN_MIGRATION_REMINDER};if(!1!==l)return{bannerType:Cc({effectiveMigrationMode:null!=n?n:{".tag":"shortcut_to_gdrive"},migrationModeWasSelected:r,preMigrationReminderBannerDismissed:c,preMigrationInXDaysBannerDismissed:d}),numDays:v};if(!u)return{bannerType:Mc.TEAM_ADMIN_MS_CONVERSION_REMINDER}}else if("completed"===g[".tag"]&&m&&!p)return{bannerType:Nc({effectiveMigrationMode:null!=n?n:{".tag":"shortcut_to_gdrive"},convertToShortcutNumSucceeded:null!=f?f:0,convertToShortcutNumFailed:null!=E?E:0,convertToMsFileNumSucceeded:null!=h?h:0,convertToMsFileNumFailed:null!=_?_:0}),preMigrationGddCount:m,convertToShortcutNumFailed:E,convertToMsFileNumFailed:_};return null}))})(n,e).then(i).catch((e=>a.Snackbar.failSticky(nt.Strings.GET_MIGRATION_SETTINGS_ERROR)))}),[n]),s.react.exports.useEffect((()=>{var e,o;(null==t?void 0:t.bannerType)&&(e=n.role,o=null==t?void 0:t.bannerType,a.logEvent({class:"cloud_docs",action:"shown",object:"gdd_migration_banner",properties:{accountRole:e,gddMigrationBannerType:o}}))}),[null==t?void 0:t.bannerType,n.role]),null===t)return null;const{bannerType:r,preMigrationGddCount:l,convertToShortcutNumFailed:c,convertToMsFileNumFailed:d,numDays:u}=t;if(null===r)return null;const p=()=>o.__awaiter(void 0,void 0,void 0,(function*(){let e;switch(r){case Mc.INITIAL_REMINDER:case Mc.TEAM_MIGRATION_REMINDER:case Mc.TEAM_MS_CONVERSION_REMINDER:e="pre_migration_reminder_banner_dismissed";break;case Mc.MIGRATION_REMINDER:case Mc.MS_CONVERSION_REMINDER:e="pre_migration_in_x_days_banner_dismissed";break;case Mc.TEAM_ADMIN_MIGRATION_REMINDER:case Mc.TEAM_ADMIN_MS_CONVERSION_REMINDER:e="pre_migration_team_admin_banner_dismissed";break;case Mc.MIGRATION_SUCCEEDED:case Mc.MIGRATION_PARTIALLY_SUCCEEDED:case Mc.MS_CONVERSION_SUCCEEDED:case Mc.MS_CONVERSION_COMPLETED:case Mc.MS_CONVERSION_PARTIALLY_COMPLETED:case Mc.MS_CONVERSION_FAILED:e="post_migration_result_banner_dismissed"}try{yield nt.setMigrationSettings(n,{[e]:!0}),i(null)}catch(e){a.Snackbar.failSticky(nt.Strings.SET_MIGRATION_SETTINGS_ERROR)}var t,o;t=n.role,o=r,a.logEvent({class:"cloud_docs",action:"dismiss",object:"gdd_migration_banner",properties:{accountRole:t,gddMigrationBannerType:o}})})),g=e=>{let o;switch(e[".tag"]){case"shortcut_to_gdrive":o=Mc.MIGRATION_REMINDER;break;case"ms_office_file":o=Mc.MS_CONVERSION_REMINDER;break;case"other":o=Mc.INITIAL_REMINDER;break;default:a.enforceExhaustive(e[".tag"])}i(Object.assign(Object.assign({},t),{bannerType:o}))},m=e=>{i(Object.assign(Object.assign({},t),{bannerType:e?Mc.INITIAL_REMINDER:Mc.TEAM_ADMIN_MS_CONVERSION_REMINDER}))},h=()=>{Ic(n.role,r,"learn_more"),a.open_tab(nt.HELP_CENTER_ARTICLE_URL)},_=()=>{Ic(n.role,r,"view_summary");let e=n.is_team_admin?"Google Migration Report - Admin.csv":"Google Migration Report.csv";n.is_cdm_member&&(e=n.cdm_tmf_path+"/"+e);const t=a.preview_uri_for_fq_path(n,a.normalize(e)).toString();a.open_tab(t)},f=()=>{var t;Ic(n.role,r,"configure_migration"),t={user:n,gddMigrationDate:e,onComplete:g},a.Modal$1.showInstance(s.React$1.createElement(bc,Object.assign({},t)))},E=()=>o.__awaiter(void 0,void 0,void 0,(function*(){try{const e=yield nt.getMigrationFolderURLInGDrive(n.id);a.safe_open_tab_and_redirect(e)}catch(e){a.Snackbar.fail(nt.getErrorMessageForApiError(e.error))}}));return s.React$1.createElement(pc,Object.assign({},(()=>{switch(r){case Mc.INITIAL_REMINDER:return(({numDays:e,onLearnMore:t,onConfigureNow:o})=>({type:"attention",bodyText:F.intl.formatMessage({id:"nS8/a3",defaultMessage:"Your Google files will be migrated {numDays, plural, =0{soon} one{tomorrow} other{in # days}}."},{numDays:e}),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Button,{variant:"transparent",onClick:t},nt.Strings.LEARN_MORE)," ",s.React$1.createElement(a.Button,{variant:"transparent",onClick:o},nt.Strings.CONFIGURE_NOW))}))({numDays:null!=u?u:0,onLearnMore:h,onConfigureNow:f});case Mc.MIGRATION_REMINDER:return(({numDays:e,onLearnMore:t,onReconfigure:o})=>({type:"attention",bodyText:F.intl.formatMessage({id:"czUnNb",defaultMessage:"This is a reminder that your Google files will be migrated {numDays, plural, =0{today} one{tomorrow} other{in # days}}."},{numDays:e}),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Button,{variant:"transparent",onClick:t},nt.Strings.LEARN_MORE)," ",s.React$1.createElement(a.Button,{variant:"transparent",onClick:o},nt.Strings.RECONFIGURE)),withCloseButton:nt.Strings.CLOSE}))({numDays:null!=u?u:0,onLearnMore:h,onReconfigure:f});case Mc.MS_CONVERSION_REMINDER:return(({numDays:e,onLearnMore:t,onReconfigure:o})=>({type:"attention",bodyText:F.intl.formatMessage({id:"yyS3oS",defaultMessage:"This is a reminder that your Google files will be converted to Microsoft Office files {numDays, plural, =0{today} one{tomorrow} other{in # days}}."},{numDays:e}),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Button,{variant:"transparent",onClick:t},nt.Strings.LEARN_MORE)," ",s.React$1.createElement(a.Button,{variant:"transparent",onClick:o},nt.Strings.RECONFIGURE)),withCloseButton:nt.Strings.CLOSE}))({numDays:null!=u?u:0,onLearnMore:h,onReconfigure:f});case Mc.TEAM_ADMIN_MIGRATION_REMINDER:return(({onLearnMore:e,onEditAppPermissions:t})=>({variant:"rich",title:F.intl.formatMessage({id:"68Q4L7",defaultMessage:"Google files are changing to shortcuts"}),type:"attention",bodyText:F.intl.formatMessage({id:"4ed2VE",defaultMessage:"Team members will need to link their Google accounts in order to continue using Google files. If you don‘t want team members to link their accounts, change settings from <b>Admin console > App permissions</b>."},{b:e=>s.React$1.createElement("strong",null,e)}),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Button,{variant:"outline",onClick:t},nt.Strings.EDIT_APP_PERMISSIONS),s.React$1.createElement(a.Button,{variant:"transparent",onClick:e},nt.Strings.LEARN_MORE))}))({onLearnMore:h,onEditAppPermissions:()=>{var e;Ic(n.role,r,"edit_app_permissions"),e={onComplete:m},a.Modal$1.showInstance(s.React$1.createElement(Oc,Object.assign({},e)))}});case Mc.TEAM_ADMIN_MS_CONVERSION_REMINDER:return(({onLearnMore:e})=>({variant:"rich",title:F.intl.formatMessage({id:"WtnrdT",defaultMessage:"Google files will be converted to Microsoft Office files"}),type:"neutral",bodyText:F.intl.formatMessage({id:"JlzzZf",defaultMessage:"Google files in your Dropbox will be converted to Microsoft Office files."}),actions:s.React$1.createElement(a.Button,{variant:"transparent",onClick:e},nt.Strings.LEARN_MORE),withCloseButton:nt.Strings.CLOSE,withLeftPictogram:s.React$1.createElement(a.PictogramIcon,{src:rt.ConvertFileLine})}))({onLearnMore:h});case Mc.TEAM_MIGRATION_REMINDER:return(({onLearnMore:e})=>({variant:"rich",title:F.intl.formatMessage({id:"68Q4L7",defaultMessage:"Google files are changing to shortcuts"}),type:"attention",bodyText:F.intl.formatMessage({id:"uQ3P8E",defaultMessage:"No action is needed at this time if you want your team to continue working in Google Workspace"}),actions:s.React$1.createElement(a.Button,{variant:"transparent",onClick:e},nt.Strings.LEARN_MORE),withCloseButton:nt.Strings.CLOSE}))({onLearnMore:h});case Mc.TEAM_MS_CONVERSION_REMINDER:return(({onLearnMore:e})=>({variant:"rich",title:F.intl.formatMessage({id:"WtnrdT",defaultMessage:"Google files will be converted to Microsoft Office files"}),type:"neutral",bodyText:F.intl.formatMessage({id:"VjDwBl",defaultMessage:"Google files in your Dropbox will be converted to Microsoft Office files. For questions, reach out to your team admin."}),actions:s.React$1.createElement(a.Button,{variant:"transparent",onClick:e},nt.Strings.LEARN_MORE),withCloseButton:nt.Strings.CLOSE,withLeftPictogram:s.React$1.createElement(a.PictogramIcon,{src:rt.ConvertFileLine})}))({onLearnMore:h});case Mc.MIGRATION_SUCCEEDED:return(({migrationFolder:e,numFiles:t,onDismiss:o,onShowInGoogleDrive:i})=>({variant:"rich",title:F.intl.formatMessage({id:"DJOsk5",defaultMessage:"Google files migration is complete"}),type:"success",bodyText:s.React$1.createElement(s.React$1.Fragment,null,F.intl.formatMessage({id:"b6eZo+",defaultMessage:"All {numFiles, plural, one{# Google file} other{# Google files}} have been moved to Google Drive. You can find them in the <b>{migrationFolder}</b> folder. Shortcuts to the files have been created in Dropbox."},{migrationFolder:e,numFiles:t,b:e=>s.React$1.createElement("b",null,e)})),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Button,{variant:"primary",onClick:i},nt.Strings.SHOW_IN_GOOGLE_DRIVE),s.React$1.createElement(a.Button,{variant:"transparent",onClick:o},nt.Strings.DISMISS)),withCloseButton:nt.Strings.CLOSE}))({migrationFolder:nt.Strings.MIGRATION_FOLDER,numFiles:null!=l?l:0,onDismiss:p,onShowInGoogleDrive:()=>{Ic(n.role,r,"show_in_google_drive"),E()}});case Mc.MIGRATION_PARTIALLY_SUCCEEDED:return(({migrationFolder:e,numMsFilesSucceeded:t,onLearnMore:o,onViewSummary:i,onShowInGoogleDrive:n})=>({variant:"rich",title:F.intl.formatMessage({id:"ld/nQi",defaultMessage:"Migration complete"}),type:"warning",bodyText:s.React$1.createElement(s.React$1.Fragment,null,F.intl.formatMessage({id:"+87Eq5",defaultMessage:"{numMsFilesSucceeded, plural, one{# file} other{# files}} couldn’t be moved to Google Drive, so they’ve been converted to Microsoft Office files and saved to Dropbox. Files that were migrated are now in the <b>{migrationFolder}</b> folder in your Google Drive."},{migrationFolder:s.React$1.createElement(a.Link,{href:"#",onClick:n,hasNoUnderline:!0,variant:"monochromatic"},e),numMsFilesSucceeded:t,b:e=>s.React$1.createElement("b",null,e)})),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Button,{variant:"transparent",onClick:o},nt.Strings.LEARN_MORE),s.React$1.createElement(a.Button,{variant:"transparent",onClick:i},nt.Strings.VIEW_SUMMARY)),withCloseButton:nt.Strings.CLOSE}))({migrationFolder:nt.Strings.MIGRATION_FOLDER,numMsFilesSucceeded:null!=c?c:0,onLearnMore:h,onViewSummary:_,onShowInGoogleDrive:()=>{Ic(n.role,r,"show_in_google_drive"),E()}});case Mc.MS_CONVERSION_SUCCEEDED:return(({numFiles:e})=>({variant:"rich",title:F.intl.formatMessage({id:"5cDTTm",defaultMessage:"Conversion to Microsoft Office files complete"}),type:"success",bodyText:s.React$1.createElement(s.React$1.Fragment,null,F.intl.formatMessage({id:"+hrWwZ",defaultMessage:"All {numFiles, plural, one{# Google file} other{# Google files}} have been converted to Microsoft Office files. You can find them in their original location."},{numFiles:e})),withCloseButton:nt.Strings.CLOSE}))({numFiles:null!=l?l:0});case Mc.MS_CONVERSION_COMPLETED:return(({onLearnMore:e})=>({variant:"rich",title:F.intl.formatMessage({id:"+ozYJK",defaultMessage:"File conversion complete"}),type:"warning",bodyText:s.React$1.createElement(s.React$1.Fragment,null,F.intl.formatMessage({id:"8UkEm4",defaultMessage:"Your files couldn’t be saved to Google Drive so they were converted to Microsoft Office files."})),actions:s.React$1.createElement(a.Button,{variant:"transparent",onClick:e},nt.Strings.LEARN_MORE),withCloseButton:nt.Strings.CLOSE}))({onLearnMore:h});case Mc.MS_CONVERSION_PARTIALLY_COMPLETED:return(({numMsFilesFailed:e,onLearnMore:t,onViewSummary:o})=>({variant:"rich",title:F.intl.formatMessage({id:"+ozYJK",defaultMessage:"File conversion complete"}),type:"warning",bodyText:s.React$1.createElement(s.React$1.Fragment,null,F.intl.formatMessage({id:"fDdJDJ",defaultMessage:"{numMsFilesFailed, plural, one{# file couldn’t be converted to a Microsoft Office file. To continue using this file, you can convert it to a shortcut} other{# files couldn’t be converted to Microsoft Office files. To continue using these files, you can convert these files to shortcuts}} manually."},{numMsFilesFailed:e})),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Button,{variant:"transparent",onClick:t},nt.Strings.LEARN_MORE),s.React$1.createElement(a.Button,{variant:"transparent",onClick:o},nt.Strings.VIEW_SUMMARY)),withCloseButton:nt.Strings.CLOSE}))({numMsFilesFailed:null!=d?d:0,onLearnMore:h,onViewSummary:_});case Mc.MS_CONVERSION_FAILED:return(({onLearnMore:e,onViewSummary:t})=>({variant:"rich",title:F.intl.formatMessage({id:"/ZCRyD",defaultMessage:"File conversion failed"}),type:"warning",bodyText:s.React$1.createElement(s.React$1.Fragment,null,F.intl.formatMessage({id:"Jxdafv",defaultMessage:"Your files couldn’t be converted to Microsoft Office files. To continue using these files, you can convert these files to shortcuts manually."})),actions:s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(a.Button,{variant:"transparent",onClick:e},nt.Strings.LEARN_MORE),s.React$1.createElement(a.Button,{variant:"transparent",onClick:t},nt.Strings.VIEW_SUMMARY)),withCloseButton:nt.Strings.CLOSE}))({onLearnMore:h,onViewSummary:_})}})(),{onRequestClose:p}))};Dc.displayName="BannerController";const Pc=s.React$1.lazy((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{MigrationTooltip:t,MigrationTooltipStep:o}=yield new Promise((function(t,o){e(["./c_gg_to_cdm_migration_migration_tooltip"],t,o)}));return{default:e=>s.React$1.createElement(t,Object.assign({},e,{step:o.Three,migrationTooltipRef:e.migrationTooltipRef,ggToCdmMigrationVariant:e.expGgToCdmMigrationVariant,user:e.user,triggerRef:e.migrationTooltipRef}))}})))),Lc=({})=>{const e=s.React$1.createRef(),t=a.useSelector(a.user),o=a.useSelector(a.postTTIExperiments).expGgToCdmMigrationVariant;return o&&"OFF"!==o?s.React$1.createElement("span",{ref:e},s.React$1.createElement(s.React$1.Suspense,{fallback:s.React$1.createElement(s.React$1.Fragment,null)},s.React$1.createElement(Pc,{user:t,migrationTooltipRef:e,expGgToCdmMigrationVariant:o}))):s.React$1.createElement(s.React$1.Fragment,null)},xc=s.React$1.lazy((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{ContinuousOnboarding:t}=yield new Promise((function(t,o){e(["./c_continuous_onboarding_v2_index"],t,o)}));return{default:t}})))),kc=e=>s.React$1.createElement(s.React$1.Suspense,{fallback:null},s.React$1.createElement(xc,Object.assign({},e)));kc.displayName="AsyncContinuousOnboarding";const Bc=s.react.exports.lazy((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{TrialOnboarding:t}=yield new Promise((function(t,o){e(["./c_browse_trial_onboarding"],t,o)}));return{default:t}})))),Uc=({responsive:e,vaultLockButtonSlotRef:t})=>{const i=a.useDispatch(),n=a.useSelector(a.context),r=a.useSelector(a.path),l=a.useSelector(a.user),c=a.useSelector(a.selectedFiles),d=a.useSelector(a.isRightRailCollapsed),u=a.useSelector(a.isInsideBackupFolder),p=a.useSelector(a.backupFolderPath),g=a.useSelector(a.skuModalEnabled),m=a.useSelector(a.backups),h=a.useSelector(a.userSKU),_=a.useSelector(a.userQuota),f=a.useSelector(a.browsePostTTIData),E=a.useSelector(a.experiments),v=a.useSelector(a.postTTIExperiments),A=E.gddMigrationBanners,R=E.gddMigrationDates,S=v.expTrialOnboardingFeaturesEngagement,y=e=>{i((e=>(t,s)=>o.__awaiter(void 0,void 0,void 0,(function*(){let o=[...a.backups(s())];[{type:a.BackupType.COMPUTER,api:T.setQuotaExemptCB},{type:a.BackupType.EXTERNAL_DRIVE,api:T.setQuotaExemptEDB}].forEach((({type:s,api:i})=>{e[s]&&(o=o.map((t=>t.type!==s?t:a.getIdForExemptAPI(t)===e[s]?Object.assign(Object.assign({},t),{quotaExempt:!0}):Object.assign(Object.assign({},t),{quotaExempt:!1}))),t({type:a.Actions.SET_BACKUPS,payload:{backups:o}}))}))})))(e))},w=e=>{i(j.setUrl({path:e}))},b=()=>{const e=f.trialOnboardingFeaturesEngagementProps;return"V1"===S&&(null==e?void 0:e.cardContentList)&&(null==e?void 0:e.displayName)&&(null==e?void 0:e.activeTrialDaysRemaining)>=0},M=A||W.isGddMigrationDateWithinNumDays(R,30),I=n.isInsideFamilySharedFolder,F=!e.isResponsive||e.isMatchedLarge,O=I&&d,C=n.isInsideFamilySharedFolder,N=u&&[g,h,m,_,y].every((e=>void 0!==e)),D=u?s.react.exports.createElement(Ve.BackupBreadcrumb,{path:r,basePath:p,size:C?"small":"standard",user:l,useFullPath:!0,isForCurrentPath:!0,setUrl:w,className:"browse-file-pathbar",key:r}):a.isBreadcrumbEnabled_TTVCTest()?s.react.exports.createElement(Ze.FileBreadcrumb,{path:r,size:C?"small":"standard",user:l,useFullPath:!0,isForCurrentPath:!0,setUrl:w,className:"browse-file-pathbar",key:r}):null;return s.react.exports.createElement(s.react.exports.Fragment,null,b()&&s.react.exports.createElement(s.react.exports.Suspense,{fallback:s.react.exports.createElement(s.react.exports.Fragment,null)},s.react.exports.createElement(Bc,{trialOnboardingFeaturesEngagementProps:f.trialOnboardingFeaturesEngagementProps,handleUploadButtonClick:(e,t)=>{L.FileUploaderController.setPath(r),L.FileUploaderController.handleUploadButtonClick({folderUpload:e,source:t,actionElement:L.UploadElement.ACTION_BAR,actionScreen:"browse_screen"})}})),!b()&&!l.is_team&&n.isCurrentlyInRoot&&"V1"===v.expBasicWelcome&&s.react.exports.createElement(kc,{userId:l.id,userName:l.fname}),M&&s.react.exports.createElement(Dc,{gddMigrationDate:W.parseGddMigrationDate(R)}),s.react.exports.createElement("div",{className:a.classnames("brws-file-pathbar-row",{"family-brws-file-pathbar-row":C,"brws-file-pathbar-row--compact":e.isResponsive&&!e.isMatchedLarge}),onClick:e=>{a.shouldClickDeselect(e,!0)&&i(j.clearSelection({actionSource:a.ActionSourceValue.WHITESPACE}))}},n.isInsideVaultFolder&&s.react.exports.createElement("div",{ref:t}),s.react.exports.createElement("div",{className:"browse-title-file-pathbar"},C&&s.react.exports.createElement(a.Title,{className:"family-browse-title"},a.filename(r)),s.react.exports.createElement("div",{className:"browse-file-pathbar-container"},D,s.react.exports.createElement(a.CampaignSlot,{slotId:"right_of_browse_breadcrumb"}))),s.react.exports.createElement("div",{className:"brws-selection-view-mode-container"},!C&&s.react.exports.createElement(Ie.SelectionIndicator,{responsive:e,selectedFilesCount:c.size,rightRailCollapsed:d,isInFamilyFolder:n.isInFamilySharedFolder}),N&&s.react.exports.createElement(rc,{skuModalEnabled:g,userSKU:h,allBackups:m,userQuota:_,updateBackupExemptInfoCB:y}),!I&&s.react.exports.createElement(es,{user:l}),O&&s.react.exports.createElement("div",{className:"family-room-sharing-view"},s.react.exports.createElement(Jt,{useCompactMode:!F})))),s.react.exports.createElement(Lc,null))};class $c extends s.React$1.PureComponent{constructor(e){super(e),this.vaultEmptyContentSlot=s.React$1.createRef(),this.vaultContentSlot=s.React$1.createRef(),this.vaultLockButtonSlot=s.React$1.createRef(),this.handleUploadButtonClick=(e,t)=>{L.FileUploaderController.setPath(this.props.path),L.FileUploaderController.handleUploadButtonClick({folderUpload:e,source:t,actionElement:L.UploadElement.ACTION_BAR,actionScreen:"browse_screen"})},this.shouldShowSharingJoinedFolderUploadSnackbar=()=>this.props.uploadCta&&!this.state.sharingJoinedFolderUploadSnackbarClosed,this.showSharingJoinedFolderUploadSnackbar=()=>{let e=a.filename(this.props.path);e=a.Emstring.em_snippet(e,a.SHARING_JOINED_FOLDER_NAME_EMSTRING_LENGTH,.5);const t=F.intl.formatMessage({id:"tpU2PS",defaultMessage:"Ready to upload files to <st>{name}</st>."},{st:e=>s.React$1.createElement("strong",null,e),name:e});a.Snackbar.show(s.React$1.createElement(a.Snackbar,{title:t,id:a.SHARING_JOINED_FOLDER_UPLOAD_SNACKBAR,customIcon:a.CheckmarkCircleLine,onCloseClick:this.handleUploadSharingJoinedFolderUploadSnackbar,closeButtonText:F.intl.formatMessage({id:"ddFY3f",defaultMessage:"Upload files"}),timeoutDelayMs:15e3}))},this.handleUploadSharingJoinedFolderUploadSnackbar=()=>{this.setState({sharingJoinedFolderUploadSnackbarClosed:!0}),a.ShareTibEventLogger.log(this.props.user.id,E.TiburonEventName.ClickEflUploadSnackbar,a.SHARE_ACTION_ORIGIN_TYPE.UPLOAD_SNACKBAR,{is_folder:!0,ns_id:this.props.context.currentNSID,fq_path:this.props.context.currentFQPath}),this.handleUploadButtonClick(!1,""),a.Snackbar.close(a.SHARING_JOINED_FOLDER_UPLOAD_SNACKBAR)},this.handleBasicPlusButtonClick=()=>{a.redirect("/manage/subscriptions")},this.showBasicPlusConfirmationSnackbar=()=>{a.Snackbar.show(s.React$1.createElement(a.Snackbar,{title:F.intl.formatMessage({id:"pwDt+e",defaultMessage:"Your purchase is complete! Enjoy the extra space."}),id:a.BASIC_PLUS_CONFIRM_SNACKBAR,customIcon:a.CheckmarkCircleLine,actionButtonText:F.intl.formatMessage({id:"SR6STE",defaultMessage:"View plan details"}),onActionClick:()=>this.handleBasicPlusButtonClick(),timeoutDelayMs:5e3}))},this.isInTeamSpaceRoot=()=>this.props.context.isInsideMyTeamFolderTree&&this.props.context.isCurrentlyInRoot,this.isFirstTaskEmptyState=()=>this.props.browsePostTTIData.firstTaskProps.is_eligible_team&&this.isInTeamSpaceRoot()&&1===this.props.totalNumItems,this.setHideFilesAndSidebar=e=>{this.props.setHideFilesAndSidebar({shouldHideFilesAndSidebar:e})},this.setContentSlot=e=>{this.setState({contentSlot:e}),this.vaultContentSlot.current=e},this.setEmptyContentSlot=e=>{this.setState({emptyContentSlot:e}),this.vaultEmptyContentSlot.current=e},this.renderFilesViewController=(e,t)=>this.props.loadingState===a.LoadingState.LOAD_ERROR?s.React$1.createElement(s.React$1.Suspense,{fallback:s.React$1.createElement("div",null,F.intl.formatMessage({id:"zD5i93",defaultMessage:"Something went wrong on our end."}))},s.React$1.createElement(Vc,null)):s.React$1.createElement(En,{responsive:e,contentSlot:this.setContentSlot,emptyContentSlot:this.setEmptyContentSlot,isFirstTaskEmptyState:this.isFirstTaskEmptyState(),initialTotalNumItems:this.state.initialTotalNumItems,handleUploadButtonClick:this.handleUploadButtonClick,isDraggingExternalFiles:this.props.isDraggingExternalFiles,isDraggingInternalFiles:this.props.isDraggingInternalFiles,isUploadModalOpen:this.props.isUploadModalOpen,onNavigateToFileOrFolder:this.props.onNavigateToFileOrFolder,isFileViewerShown:this.props.isFileViewerShown,handleComponentTTI:this.props.handleComponentTTI,starredState:this.props.starredState,isActive:!!t}),this.state={initialTotalNumItems:this.props.totalNumItems||1,contentSlot:null,emptyContentSlot:null,sharingJoinedFolderUploadSnackbarClosed:!1}}componentDidMount(){return o.__awaiter(this,void 0,void 0,(function*(){yield a.waitForTTI(),L.FileUploaderController.loadCoreComponent(),a.logPageView(this.getPageViewerBrowseLoadedData()),a.UserSurvey.trackEvent("folder_viewed","browse"),"root"===this.getCurrentFolderType()&&k.initBrowseTTS("root"),ac({user:this.props.user,accM3Variant:this.props.browseExperiments.coreActAccM3},this.props.path);const e=this.props.browsePostTTIData.trialOnboardingFeaturesEngagementProps;(null==e?void 0:e.cardContentList)&&(null==e?void 0:e.displayName)&&(null==e?void 0:e.activeTrialDaysRemaining)>=0&&a.logExposure({feature:"trial_onboarding_features_engagement",variant:this.props.browsePostTTIExperiments.expTrialOnboardingFeaturesEngagement})}))}componentDidUpdate(e){this.props.loadingState===a.LoadingState.LOADED&&e.loadingState===a.LoadingState.LOADING_FIRST_PAGE&&(a.logBrowseLoaded(this.getPageViewerBrowseLoadedData()),this.setState({initialTotalNumItems:this.props.totalNumItems}),"root"===this.getCurrentFolderType()&&k.initBrowseTTS("root")),fe.isEqual(this.props.backups,e.backups)||a.getStoreForBrowse().dispatch(j.setPath({path:this.props.path})),this.setState({sharingJoinedFolderUploadSnackbarClosed:!0}),e.loadingState!==this.props.loadingState&&(!function(e){const t=Ft("browse/loading_state",{cypress:h.BROWSE_ON_CYPRESS,loading_state:e});t.increment(),t.record()}(this.props.loadingState),this.props.loadingState===a.LoadingState.LOAD_ERROR?Vt(!1):this.props.loadingState===a.LoadingState.LOADED&&Vt(!0))}getCurrentFolderType(){const{context:e,user:t}=this.props;if(e.isInsideVaultFolder)return"vault";if(t.is_cdm_member){if("/"===e.currentFQPath&&e.currentNSID===e.rootNSID)return"root";if(e.isCurrentlyInRoot)return"team_member_folder"}else if(e.isCurrentlyInRoot)return"root";return e.isInsideTeamFolderTree?"team_shared_folder":e.isInsideSharedFolder&&""===e.currentNSPath?"shared_folder":"folder"}getPageViewerBrowseLoadedData(){const{context:e,user:t,viewType:o,rightRailCollapsed:s}=this.props,i=e.currentFQPath.split("/").filter((e=>!!e)).length,n=t.is_cdm_member&&(a.paths_are_equal(t.cdm_tmf_path,e.currentFQPath)||a.inSubDirectory(t.cdm_tmf_path,e.currentFQPath)),r=s?"collapsed":"opened";return 0===i?{uid:t.id,view_type:o,url:a.get_browse_root(t),baseUrl:a.get_browse_root(t),folder_type:this.getCurrentFolderType(),right_sidebar_state:r,role:t.role}:{uid:t.id,view_type:o,url:a.get_browse_root(t)+"/*",baseUrl:a.get_browse_root(t),folder_type:this.getCurrentFolderType(),right_sidebar_state:r,navigation_depth:i,is_under_tmf:n,role:t.role}}render(){const{user:e,clickRewindTimestamp:t,clickFolderHistoryTimestamp:o,context:i,handleComponentTTI:n,isRewindVisible:r,isFolderHistoryVisible:l,browsePostTTIExperiments:{expVaultAutoLockWeb:c,expFlowsAutomatedFolderUI:d,expEnableCaptureCreate:u,expVaultEnableUserSurvey:p},browsePostTTIData:g,browseExperiments:{folderHistoryRollbacks:m},path:h,onCloseRewind:_,onCloseFolderHistoryPanel:f,userVersionHistoryLength:E,shouldShowVaultEmptyState:v,shouldShowFamilyEmptyState:A}=this.props,{userHasSharedFileOrFolderInfo:R,activationBoltInfo:S}=g,y=u&&D.canUseRecorder,w=a.classnames("exp-details-pane-variants",{"mobile-web-invites":g.mobileWebInvites}),T=a.classnames(w,"dig2--enabled","browse-view--chrome","browse-right-rail--v2");return this.shouldShowSharingJoinedFolderUploadSnackbar()&&this.showSharingJoinedFolderUploadSnackbar(),this.props.basicPlusConfirm&&this.showBasicPlusConfirmationSnackbar(),s.React$1.createElement("div",{className:w,onContextMenu:a.isDefaultRightClickContextMenuDisabled(ze.getStoreForActivation().getState())?Yl:void 0},s.React$1.createElement(zt,{clickBrowseButtonTimestampMs:t,user:e,fromDesktopClient:"true"===a.getQueryArgs().from_desktop_client,browseContext:i,close:_,isVisible:r,expFolderHistoryRollbacks:m||!1,userVersionHistoryLength:E}),s.React$1.createElement(Kt,{folderFQPath:i.currentFQPath,clickFolderHistoryButtonInBrowseTimestampMs:o,close:f,isVisible:l,user:e,userVersionHistoryLength:E}),i.isInsideVaultFolder&&s.React$1.createElement($l,{contentSlot:this.vaultContentSlot,vaultEmptyContentSlot:this.vaultEmptyContentSlot,lockButtonSlot:this.vaultLockButtonSlot,handleComponentTTI:n,shouldShowVaultEmptyState:v,encryptionOptions:this.props.encryptionOptions,expVaultAutoLockWeb:c,setHideFilesAndSidebar:this.setHideFilesAndSidebar,expVaultEnableUserSurvey:p,path:h,user:e}),d&&s.React$1.createElement(Hl,{path:h}),i.isInFamilySharedFolder&&s.React$1.createElement(Nl,{user:e,path:h,contentSlot:this.state.contentSlot,emptyContentSlot:this.state.emptyContentSlot,shouldShowFamilyEmptyState:A,setHideFilesAndSidebar:this.setHideFilesAndSidebar}),a.getQueryArgs().unfollow_folder&&s.React$1.createElement(Ll,null),y&&s.React$1.createElement(D.AsyncBrowseRecorder,{user:e}),s.React$1.createElement(xl,{user:e},s.React$1.createElement(zl,{user:e})),s.React$1.createElement(Dl,{path:i.currentFQPath}),s.React$1.createElement(jl.Provider,{value:{userHasSharedFileOrFolderInfo:R,activationBoltInfo:S}},s.React$1.createElement(qe.ChromeWrapper,{user:e,titleRegion:e=>s.React$1.createElement(Uc,{responsive:e,vaultLockButtonSlotRef:this.vaultLockButtonSlot}),titleClass:"page-header__title-overflow",embeddedAppRegion:this.renderFilesViewController,actionSidebarRegion:s.React$1.createElement(Il,{onNavigateToFileOrFolder:this.props.onNavigateToFileOrFolder}),chromeClass:T,useMaestroPortal:!0,useRightRailOutsideSearch:!0,useRightRail:a.shouldUseReactRouter()})))}}$c.defaultProps={selectedFiles:a.immutable.exports.OrderedMap(),viewType:a.ViewType.List},$c.displayName="BrowseView";const Vc=s.React$1.lazy((()=>o.__awaiter(void 0,void 0,void 0,(function*(){const{ErrorComponent:t}=yield new Promise((function(t,o){e(["./c_components_post_tti_error"],t,o)}));return{default:t}})))),Gc=(e,t)=>{var o;const s=t.breadcrumb.length?t.breadcrumb[0]:null;return null!==(o=null==s?void 0:s.url)&&void 0!==o?o:a.browse_uri_for_fq_path(e,"").toString()},Wc=(e,t)=>(o,s,i)=>{if(i)a.logAndNavigate(Gc(t,o),s,a.NavigationMethod.NEW_TAB);else if(o.fqPath){const t=o.fqPath.split("/");t.pop();const a=t.join("/");s().then((()=>{e(a)}))}else a.logAndNavigate(Gc(t,o),s,a.NavigationMethod.REDIRECT)};class Hc{constructor(e,t,o=null){var s;this.onSuggestPrefetchComplete=e,this.onSuggestPrefetchError=t,this.handlePrefetch=()=>{this.suggestPreloadHandler?this.suggestPreloadHandler(this.handleSuggestPrefetchDataSuccess,this.onSuggestPrefetchError):this.onSuggestPrefetchError("suggest prefetch not found")},this.handleSuggestPrefetchDataSuccess=e=>{if(e)try{const t=Le.handlePayload(JSON.parse(e));"ERROR"===t?this.onSuggestPrefetchError("no suggest response"):this.onSuggestPrefetchComplete(t)}catch(e){this.onSuggestPrefetchError(e)}else this.onSuggestPrefetchError("response not found")},this.suggestPreloadHandler=o||(null!==(s=window.__REGISTER_SUGGEST_GRID_PRELOAD_HANDLER)&&void 0!==s?s:null)}}const jc=(e,t)=>{new Hc(e,t).handlePrefetch()},Yc=s.react.exports.lazy((()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield a.waitForTTI();const{OAPulsarEffect:t}=yield new Promise((function(t,o){e(["./c_onboarding_survey_components_oa_pulsar_effect"],t,o)}));return{default:t}})))),qc=e=>s.React$1.createElement(s.react.exports.Suspense,{fallback:null},s.React$1.createElement(Yc,Object.assign({},e)));qc.displayName="AsyncOAPulsarEffect";const zc=e=>{const[t,o]=s.react.exports.useState(!0);return s.React$1.createElement(a.Modal,{open:t,isCentered:!0,withCloseButton:a.TooManyFilesModalTranslations.CLOSE_MODAL_BUTTON,onRequestClose:()=>{o(!1)}},s.React$1.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard"},s.React$1.createElement(a.Title,null,a.TooManyFilesModalTranslations.MODAL_TITLE)),s.React$1.createElement(a.Modal.Body,null,s.React$1.createElement(a.Text,null,a.TooManyFilesModalTranslations.MODAL_BODY)),s.React$1.createElement(a.Modal.Footer,null,s.React$1.createElement(a.Button,{variant:"primary",onClick:()=>{a.open_tab("https://www.dropbox.com/install")}},a.TooManyFilesModalTranslations.DOWNLOAD_BUTTON)))};function Kc(e){return!!e&&e.isShown()}zc.displayName="TooManyFilesModal";const Qc=(e,t)=>t.find((t=>t.file_id===e))||null;const Xc=(e,t)=>{t>=a.BROWSE_MAX_SUPPORTED_FILE_COUNT&&a.BROWSE_ON_CYPRESS_ENABLED_VARIANTS.includes(e)&&(a.mountModal(s.React$1.createElement(zc,null)),a.showModal())};class Jc extends s.React$1.Component{constructor(t){super(t),this.updateStarredData=fe.noop,this.handlePostTTIExperiments=t=>o.__awaiter(this,void 0,void 0,(function*(){var i,n,r,l,c,d;"ON"!==t.expUploadBrowseRefresh&&"GA"!==t.expUploadBrowseRefresh||new Promise((function(t,o){e(["./c_file_uploader_actions_adapter"],t,o)})).then((({ActionsAdapter:e})=>{e.on("uploadComplete",this.uploadBrowseRefresh)})),new Promise((function(t,o){e(["./c_sharing_actions_share_modal"],t,o)})).then((function(e){return e.actions_adapter_esnext})).then((({ActionsAdapter:e})=>{e.on("onSuccessSharing",this.shareBrowseRefresh),e.on("onSuccessUnsharing",this.unshareBrowseRefresh)})),t.expShouldShowNcctPaywall&&a.redirect("/ncct-trial-end"),yield(i=this.props.user,n=this.props.path,r=this.mounted,l=s.toNumber(this.props.nsId),c=this.props.nsPath,d=this.props.setUrl,o.__awaiter(void 0,void 0,void 0,(function*(){if(a.getQueryArgs().share_manage_access){const{showShareModal:t}=yield new Promise((function(t,o){e(["./c_sharing_share_modal_util"],t,o)}));if(!r)return;t(i,{fqPath:n,isFolder:!0,nsId:l&&c?l:null,targetNsId:l&&!c?l:null},{initialScreen:a.MANAGE_SCREEN,origin:a.SHARE_ACTION_ORIGIN_TYPE.BROWSE_GLOBAL_ACTIONS},d,void 0,!0)}}))),yield((t,s,i,n)=>o.__awaiter(void 0,void 0,void 0,(function*(){const o=a.getQueryArgs().plan_upgraded,r=a.getQueryArgs().analytics_file_id;if(o){a.ProEventsLogger.log("docsend_analytics_add_on_plan_upgrade_success",{src:r?"upgrade_banner":"external_link"});const{showDocsendAnalyticsPlanUpgradedSnackbar:t}=yield new Promise((function(t,o){e(["./c_docsend_analytics_add_on_components_docsend_analytics_plan_upgraded_snackbar"],t,o)}));t()}if(r){const{getDocsendAnalyticsAddOnConfig:l}=yield new Promise((function(t,o){e(["./c_docsend_src_utils"],t,o)})).then((function(e){return e.utils_esnext})),c=l(s,t);if(!c.fileBrowser.deeplinkEnabled)return;const{showDocsendModal:d}=yield new Promise((function(t,o){e(["./c_docsend_analytics_add_on_helpers_modals"],t,o)}));if(!n)return;const u=Qc(r,i);if(u){a.ProEventsLogger.log("docsend_analytics_add_on_deeplink_success",{src:o?"plan_upgrade":"other"});const e=a.filename(u.fq_path),t=a.parent_dir(u.fq_path);d({user:s,fileName:e,fileId:r,filePath:t,stormcrowVariant:c.variantForLogging,entryPoint:o?"deeplink_plan_upgrade":"deeplink"})}else a.ProEventsLogger.log("docsend_analytics_add_on_deeplink_failure",{error:"FILE_NOT_FOUND"})}})))(t.expDocsendAnalyticsAddOn,this.props.user,this.props.files.toArray(),this.mounted),function(t,s,i,n,r){o.__awaiter(this,void 0,void 0,(function*(){if("open_create_folder"===a.getQueryArgs().automations){const{handleCreateNewFolder:o}=yield new Promise((function(t,o){e(["./c_action_bar_file_actions"],t,o)})).then((function(e){return e.browse_global_actions_handlers_esnext}));o(t,s,i,n,"auto_folder_url_param",r,!0,!1)}}))}(this.props.user,this.props.browseContext,this.browseExperiments.goldenGateRaclsEnabled,this.props.autoTeamGroupId,this.props.viewType);const u=this.props.browsePostTTIExperiments.expMultiLicensingConsultantsSprigSurveyVariant;u&&(a.UserSurvey.addAttribute("multiLicensingConsultantsSprigSurveyVariant",u),"OFF"!==u&&this.props.browseContext.isInsideSharedFolder&&!this.props.user.is_team&&a.getFolderMetadata(String(this.props.browseContext.currentNSID),this.props.user.id).then((e=>{e.owner_team&&a.UserSurvey.trackEvent("viewing_folder_shared_by_external_team","browse")})))})),this.handlePreviewAndShareModalsOnLoad=e=>{const t=this.getPathFromProps(),{user:o}=this.props,s=!!this.props.openPreview,i=!!this.props.showShareModal,l=this.props.sharePrefillEmail,c=l?l.split(","):void 0;if(s&&!e){n.Notify.error(F.intl.formatMessage({id:"D+KIIm",defaultMessage:"The file doesn’t exist"}));const{urlPrefix:e}=this.props,o=this.getUrlForFQPath(e,t),s=r.DBHistory.deconstruct_url().qargs;delete s.preview,r.DBHistory.replace_state(o,s)}e?(lt.asyncOpenPreview({containerId:a.BROWSE_FILE_VIEWER_ELEMENT_ID,files:[e],fileViewOrigin:a.FileViewOriginType.BROWSE,indexOfPreviewFile:0,user:o}),i&&a.waitForTTI().then((()=>{this.mounted&&Ke.asyncShowPrefilledShareModal({user:o,sharePrefillEmails:c,content:e,setUrl:this.props.setUrl})}))):i&&this.showShareModalForCurrentPath(c)},this.handleComponentTTI=e=>{var t;const o=null!==a.time_to_interactive(),s=(null===(t=this.browseLogger)||void 0===t?void 0:t.ttiLogged)&&"FilesViewController"===e;o||s?this.ajaxRequestWebTimer?(this.ajaxRequestWebTimer.markTimeToInteractive(),delete this.ajaxRequestWebTimer):s||a.markTimeToInteractive(!0):this.browseLogger&&this.browseLogger.componentReady(e)},this.getFileByFilename=e=>this.props.files.find((t=>a.filename(t.fq_path)===e))||null,this.toggleRewindIfNecessary=()=>{const e=a.getQueryArgs().activity||a.getQueryArgs().rewind;e&&!this.props.isRewindVisible&&this.props.showRewind(),!e&&this.props.isRewindVisible&&this.props.hideRewind()},this.toggleFolderHistoryIfNecessary=()=>{const e=a.getQueryArgs().folder_history;e&&!this.props.isFolderHistoryVisible&&this.props.showFolderHistoryPanel(),!e&&this.props.isFolderHistoryVisible&&this.props.hideFolderHistoryPanel()},this.showShareModalForCurrentPath=e=>{const{user:t}=this.props,o=this.getPathFromProps();a.waitForTTI().then((()=>{if(!this.mounted)return;const a=this.props.nsId,i=this.props.nsPath;Ke.asyncShowPrefilledShareModal({user:t,sharePrefillEmails:e,content:{fqPath:o,isFolder:!0,nsId:a&&i?s.toNumber(a):null,targetNsId:a&&!i?s.toNumber(a):null},setUrl:this.props.setUrl})}))},this.handleFileLocationChange=(e,t)=>{var o;e=`/${p.URI.decode(e)}`,this.ensureFileViewerIsOpenedOrClosedIfNeeded(t),this.toggleRewindIfNecessary(),this.toggleFolderHistoryIfNecessary();const s=!a.paths_are_equal(this.props.path,e);t.share&&!this.props.showShareModal&&this.showShareModalForCurrentPath();const i="1"===t.d!=!!this.props.shouldShowDeletedFiles;if(!(s||i||t.reload))return;t.reload&&(delete t.reload,this.props.setUrl({path:this.props.path,qargs:t})),this.props.setPath({path:e}),this.props.setLoadingState({loadingState:a.LoadingState.LOADING_FIRST_PAGE,path:e}),this.props.setShouldShowDeletedFiles({shouldShowDeletedFiles:"1"===t.d}),(null!==a.time_to_interactive()||(null===(o=this.browseLogger)||void 0===o?void 0:o.ttiLogged))&&this.ensureTimer("browse_ajax","browse_ajax_nav");const n=this.props.currentSort.sortDirection===a.SortDirection.ASCENDING,r="1"===t.d;this.loadPathApi2({path:e,sortIsAscending:n,includeDeleted:r,hasPathChanged:s})},this.sortType=()=>a.SortIsFilename.includes(this.props.currentSort.sortField)?{".tag":"files_by_name"}:this.props.currentSort.sortField===a.SortField.MODIFIED?{".tag":"files_by_modified"}:{".tag":"files_by_size"},this.shareBrowseRefresh=e=>{const t=e.origin;!e.wasFileFolder||t!==a.SHARE_ACTION_ORIGIN_TYPE.BROWSE_GLOBAL_ACTIONS&&t!==a.SHARE_ACTION_ORIGIN_TYPE.CREATE_SHARED_FOLDER_MODAL||this.uploadBrowseRefresh()},this.unshareBrowseRefresh=e=>{const{isFolder:t}=e;t&&this.uploadBrowseRefresh()},this.uploadBrowseRefresh=()=>{this.loadPathApi2({path:this.props.path,sortIsAscending:this.props.currentSort.sortDirection===a.SortDirection.ASCENDING,includeDeleted:this.props.shouldShowDeletedFiles,hasPathChanged:!1})},this.loadPathApi2=({path:e,sortIsAscending:t,includeDeleted:i,hasPathChanged:n})=>o.__awaiter(this,void 0,void 0,(function*(){var o;try{const o=yield a.loadPath2({userId:this.props.user.id,path:e,sortType:this.sortType(),sortIsAscending:t,includeDeleted:i,rootNsId:a.isBackupBrowse()?s.toNumber(this.props.rootNsId):void 0});if(o.items){const e=new Set;for(let t=0;t<o.items.length;t++){const s=o.items[t];s&&s.ext&&e.add(s.ext.slice(1))}const t=[];e.forEach((e=>{t.push(e)})),Xc(h.BROWSE_ON_CYPRESS,o.paginatedTotalNumFiles),a.publishEvent(a.CampaignEvents.PAGE_LOAD,{context:{file_extensions_in_directory:t,isFolderOrganizable:this.props.isFolderOrganizable}}),a.listenForBrowseRefreshEvent((()=>{a.emitPageLoaded(dt.CampaignPageName.BROWSE,{file_extensions_in_directory:t,isFolderOrganizable:this.props.isFolderOrganizable})}))}this.ajaxRequestWebTimer&&(this.ajaxRequestWebTimer.fetchedDataRequiredForTTI(),this.ajaxRequestWebTimer.end()),this.handleFileLocationChangeSuccess(e,o,n)}catch(t){const s=function(e){let t="";return e&&void 0!==e.status&&("auth_failed"===e.status[".tag"]?t=F.intl.formatMessage({id:"8nB2Fu",defaultMessage:"Not authorized to browse {path}."},{path:e.path}):"rate_limited"===e.status[".tag"]?t=F.intl.formatMessage({id:"2NDCop",defaultMessage:"Too many attempts. Try again later."}):"invalid_path"===e.status[".tag"]?t=F.intl.formatMessage({id:"o19fmC",defaultMessage:"Unsupported path provided {path}."},{path:e.path}):"folder_not_found"===e.status[".tag"]?t=F.intl.formatMessage({id:"VZE6IM",defaultMessage:"The folder ‘{path}’ doesn’t exist."},{path:e.path}):"folder_is_deleted"===e.status[".tag"]&&(t=F.intl.formatMessage({id:"qZpUNY",defaultMessage:"The folder ‘{path}’ is deleted."},{path:e.path}))),t}(t.error);if(s?a.Snackbar.fail(s,"browse"):(x.reportException({err:t,force:!0,severity:B.SEVERITY.CRITICAL,tags:["browse","component:browse"],exc_extra:Object.assign({},t)}),a.Snackbar.fail(F.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}),"browse")),this.props.isInsideBackupFolder){const{backupFolderPath:e}=this.props,s=e?this.props.backupInfoByPath(e):void 0;st.logEvent({event:"redirect_to_browse_failure",page_source:st.getSource(r.DBHistory.get_uri()),extra:{device_id:null==s?void 0:s.deviceId,reason:(null===(o=t.error)||void 0===o?void 0:o.status)?t.error.status[".tag"]:void 0}})}a.paths_are_equal(e,"/")?this.props.setLoadingState({path:e,loadingState:a.LoadingState.LOAD_ERROR}):this.props.setUrl({path:"/"})}})),this.handleFileLocationChangeSuccess=(e,t,o)=>{if(this.props.setIsRewindButtonEnabled({path:e,userId:this.props.user.id,userSkuHasRewind:!!this.browseExperiments.folderHistoryRollbacks}),this.props.setFolderMemberCounts({contentId:String(t.context.currentNSID),userId:this.props.user.id}),!a.getQueryArgs().query)if(o&&this.props.handleFolderOverviewPrefetch(Object.assign(Object.assign({},t.folderOverview),{path:e,componentNamespace:a.BrowseFolderOverviewComponentNamespace})),this.props.setPath({path:e}),this.props.setMountPoints({mountPoints:t.mountPoints}),t.hasMore){this.props.setPathData({path:e,files:[],context:t.context,paginatedTotalNumFiles:t.paginatedTotalNumFiles,currentFolderInfo:t.currentFolderInfo?a.File.fromApiV2Object(t.currentFolderInfo):void 0});c.PaginationManager.create({firstPage:{items:t.items,has_more_items:!0,next_request_voucher:t.nextRequestVoucher},keyName:"sjid",userID:this.props.user.id,newDataAvailableCallback:(t,o)=>{const s=t.areAllItemsReady()?a.LoadingState.LOADED:a.LoadingState.LOADING_REMAINING_PAGES;this.props.appendFiles({path:e,files:o.map((e=>e instanceof a.File?e:"object"==typeof e.type?a.File.fromApiV2Object(e):a.File.fromServerObject(e)))}),this.props.setLoadingState({path:e,loadingState:s}),t.areAllItemsReady()&&t.stopAutoFetching()},fetchNextFn:Wt}).startAutoFetching()}else this.props.setPathData({path:e,files:t.items.map((e=>"object"==typeof e.type?a.File.fromApiV2Object(e):a.File.fromServerObject(e))),paginatedTotalNumFiles:t.paginatedTotalNumFiles,context:t.context,currentFolderInfo:t.currentFolderInfo?a.File.fromApiV2Object(t.currentFolderInfo):void 0}),this.props.setLoadingState({loadingState:a.LoadingState.LOADED,path:e})},this.getPathFromProps=()=>this.props.initFqPath||"/",this.handleFileListUpdated=()=>{Kc(this.state.fileViewerController)?this.props.files.isEmpty()?this.state.fileViewerController.close():this.state.fileViewerController.updateFiles(this.props.files.toJS()):this.ensureFileViewerIsOpenedOrClosedIfNeeded(a.getQueryArgs()),a.isBackupBrowse()&&(this.props.currentFolderInfo&&this.props.fetchLastBackupTime(this.props.user,this.props.currentFolderInfo.fq_path,s.toNumber(this.props.rootNsId)),this.props.files.forEach((e=>{e.is_dir&&this.props.fetchLastBackupTime(this.props.user,e.fq_path,s.toNumber(this.props.rootNsId))}))),this.prefetchPreviewData(this.props.files.toArray(),this.props.user)},this.handleOnNavigateToFileOrFolder=(e,t={})=>{const{actionSource:o,href:s,middleClick:a}=t;this.props.hideRewind();const i=window.pageYOffset;this.completeNavigateToFileOrFolder(e,o,s,a,(()=>{window.scrollTo({top:i})}))},this.completeNavigateToFileOrFolder=(e,t,o,s,i)=>{const{vaultApi:n,vaultLoggingTypes:r}=this.state,{user:l,viewer:c,viewType:d,rightRailCollapsed:p}=this.props,{ns_id:g,sjid:m,file_id:h,fq_path:_,bytes:f,ext:E,request_id:v}=e;a.logOpenRow({uid:l.id,entity_type:e.is_dir?"folder":"file",source:"list_browse",view_type:d,file_nsid:g,file_sjid:m,file_id:h,file_name:a.filename(e.fq_path),file_path:_,file_size:f,file_type:e.type,file_extension:E,request_id:v,action_source:t,vaultApi:n,vaultLoggingTypes:r,rightRailState:p?"collapsed":"opened"}),e.type===a.FileTypes.TEAM_SHARED_FOLDER&&a.TeamsWebActionsLogger.log("clicked_team_folder_web",{team_id:c.team_id});const A=a.shouldUseReactRouter();u.browseNavigateActions.navigateToFileOrFolder({file:e,onFileViewerUnmount:i,skipFileViewerRouting:A,performSpaRouting:A,href:o,middleClick:s})},this.fileViewerIsShown=()=>Kc(this.state.fileViewerController),this.prefetchPreviewData=(e,t)=>{this.state.fileViewerController&&this.state.fileViewerController.prewarmPreviewData(e,t)},this.ensureFileViewerIsOpenedOrClosedIfNeeded=e=>{if(e.preview&&!Kc(this.state.fileViewerController)){const t=this.getFileByFilename(e.preview);t&&u.browseNavigateActions.navigateToFileOrFolder({file:t,skipFileViewerRouting:a.shouldUseReactRouter()})}else!e.preview&&Kc(this.state.fileViewerController)&&this.state.fileViewerController.close()},this.getAndClearHighlightQarg=()=>{const e=a.getQueryArgs()[a.BrowseQueryArg.highlight];if(e&&r.DBHistory.remove_query_param(a.BrowseQueryArg.highlight),null!=e&&a.isOAPulsarCampaign(e))return e},this.state={highlight:null}}get browseExperiments(){return this.props.browseExperiments}loadStarData(){const e=a.getStoreForStarred();this.updateStarredData=()=>e.dispatch(a.fetchMissingStarredStatuses(this.props.files.toArray().map(a.idTypePairFromStarrableItem))),this.updateStarredData()}loadSharedWithData(e,t){a.getStoreForSharedWith().dispatch(a.browseControllerLoaded({path:e}))}UNSAFE_componentWillMount(){const{urlPrefix:e,user:t}=this.props,o=this.getPathFromProps();this.browseLogger=new l.PageletLogger("browse",["FilesViewController"],!0,{view_type:this.props.viewType.toLowerCase()}),this.loadStarData();const s=new Ht({user:t,path:o,fqPathsToSelect:this.props.selectFqPaths},{onPrefetchComplete:(e,t)=>{if(e.isError())this.handlePreviewAndShareModalsOnLoad(null);else{Xc(h.BROWSE_ON_CYPRESS,t.fromPaginatedTotalNumFiles()),this.handlePreviewAndShareModalsOnLoad(e.fromPreviewFileInfo());const s=e.fromCurrentFolderOverview();s?this.props.handleFolderOverviewPrefetch(Object.assign(Object.assign({},s),{path:o,componentNamespace:a.BrowseFolderOverviewComponentNamespace})):this.props.addFolderOverviewLoadedComponent({componentNamespace:a.BrowseFolderOverviewComponentNamespace,component:"draftjs"})}a.markFetchedDataRequiredForTTI()},onPrefetchIncorrectSort:()=>{this.loadPathApi2({path:this.props.path,sortIsAscending:this.props.currentSort.sortDirection===a.SortDirection.ASCENDING,includeDeleted:this.props.shouldShowDeletedFiles,hasPathChanged:!1})},onPrefetchError:e=>{if(Ce.isInsideVault(o)){const e=void 0===a.get_hash()?"":"#"+a.get_hash();a.redirect(ct.VAULT_URL+e)}else x.reportException({err:e||new Error("Failed to prefetch browse data"),severity:"user-error",exc_extra:{path:o}}),this.props.setUrl({path:""}),this.props.setLoadingState({loadingState:a.LoadingState.LOAD_ERROR,path:o}),this.handleFileLocationChange("",{})},onLoadComplete:()=>{}},{onInitializeEverything:d.browseActions.initializeEverything,onAddFilesAndSetLoadingState:d.browseActions.addFilesAndSetLoadingState});s.isPrefetching()&&s.handlePrefetch(),a.shouldUseReactRouter()||r.DBHistory.add_callback(e,this.handleFileLocationChange,!0)}componentDidMount(){this.mounted=!0;const t=this.getPathFromProps();this.props.setIsRewindButtonEnabled({path:t,userId:this.props.user.id,userSkuHasRewind:this.browseExperiments.folderHistoryRollbacks}),this.props.setFolderMemberCounts({contentId:String(this.props.nsId),userId:this.props.user.id}),this.toggleRewindIfNecessary(),this.toggleFolderHistoryIfNecessary(),Jc.mountFileViewerTarget();const o=this.getAndClearHighlightQarg();o&&this.setState({highlight:o}),a.waitForTTI().then((()=>{n.require_css("/static/metaserver/static/css/main_browse_post_tti-vflWSQTjK.css");const t=([e,{BloodhoundContactsV2:t},o,s])=>{if(!this.mounted)return;const{user:i,path:n,files:r}=this.props,l=r.toArray();if(l){const e=new Set;for(let t=0;t<l.length;t++){const o=l[t];o&&o.ext&&e.add(o.ext.slice(1))}const t=[];e.forEach((e=>{t.push(e)})),a.emitPageLoaded(dt.CampaignPageName.BROWSE,{file_extensions_in_directory:t,isFolderOrganizable:this.props.isFolderOrganizable}),a.listenForBrowseRefreshEvent((()=>{a.emitPageLoaded(dt.CampaignPageName.BROWSE,{file_extensions_in_directory:t,isFolderOrganizable:this.props.isFolderOrganizable})}))}this.loadSharedWithData(n,l),t.getOrCreateForUser(i),this.setState({fileViewerController:e,vaultApi:o,vaultLoggingTypes:s}),this.props.setArePostTTIModulesLoaded({arePostTTIModulesLoaded:!0}),this.prefetchPreviewData(r.toArray(),i)};t.perfName="browse_post_tti",Promise.all([new Promise((function(t,o){e(["./c_file_viewer_controller"],t,o)})),new Promise((function(t,o){e(["./e_ui_page_files_router"],t,o)})).then((function(e){return e.bloodhound_contacts_v2_esnext})),new Promise((function(t,o){e(["./c_vault_lib_api"],t,o)})).then((function(e){return e.api_esnext})),new Promise((function(t,o){e(["./c_src_common_logging-types"],t,o)}))]).then(t)})),this.props.initBackupStore(this.props.user,this.props.path),this.props.isInsideBackupFolder&&st.logEvent({event:"view_backup",page_source:st.getSource(r.DBHistory.get_uri()),extra:{url_prefix:this.props.urlPrefix}})}UNSAFE_componentWillUpdate(e,t){e.files.equals(this.props.files)||fe.defer(this.handleFileListUpdated)}componentDidUpdate(e){if(e.files!==this.props.files&&this.updateStarredData(),"ON"===h.RECENTS_AND_STARRED_IN_BROWSE&&e.selectedFilter!==this.props.selectedFilter){const t=this.props.selectedFilter;t!==a.BrowseFilterType.NONE?this.props.setFilteredViewData(t,this.props.path):this.props.path===e.path&&(this.props.setLoadingState({loadingState:a.LoadingState.UPDATING_FILTERED_VIEW,path:this.props.path}),this.loadPathApi2({path:this.props.path,sortIsAscending:this.props.currentSort.sortDirection===a.SortDirection.ASCENDING,includeDeleted:this.props.shouldShowDeletedFiles,hasPathChanged:!1}))}if(a.shouldUseReactRouter()&&e.location&&this.props.location&&(e.location.pathname!==this.props.location.pathname||e.location.search!==this.props.location.search)){const e=new RegExp(`^${this.props.urlPrefix}/|^${this.props.urlPrefix}|^/`),t=this.props.location.pathname.replace(e,"");this.handleFileLocationChange(t,a.parseQueryString(this.props.location.search))}!e.isInsideBackupFolder&&this.props.isInsideBackupFolder&&(st.logEvent({event:"view_backup",page_source:"browse",extra:{url_prefix:this.props.urlPrefix}}),a.redirect(a.backupUrlForFqPath(this.props.initFqPath))),e.browsePostTTIExperiments!==this.props.browsePostTTIExperiments&&this.handlePostTTIExperiments(this.props.browsePostTTIExperiments)}componentWillUnmount(){"ON"!==this.props.browsePostTTIExperiments.expUploadBrowseRefresh&&"GA"!==this.props.browsePostTTIExperiments.expUploadBrowseRefresh||new Promise((function(t,o){e(["./c_file_uploader_actions_adapter"],t,o)})).then((({ActionsAdapter:e})=>{e.removeListener("uploadComplete",this.uploadBrowseRefresh)})),new Promise((function(t,o){e(["./c_sharing_actions_share_modal"],t,o)})).then((function(e){return e.actions_adapter_esnext})).then((({ActionsAdapter:e})=>{e.removeListener("onSuccessSharing",this.shareBrowseRefresh)})),Jc.unmountFileViewerTarget(),this.mounted=!1}getUrlForFQPath(e,t){const{backupFolderPath:o}=this.props;e===a.BACKUP_BROWSE_ROOT&&null!==o&&(t=t.substr(t.indexOf(o)));return e+("/"===t?"":p.URI.encode_parts(t))}ensureTimer(e,t){this.ajaxRequestWebTimer&&this.ajaxRequestWebTimer.getContextName()!==e&&(this.ajaxRequestWebTimer.abort(),a.delete_timer(this.ajaxRequestWebTimer.getContextName()),this.ajaxRequestWebTimer=void 0),this.ajaxRequestWebTimer?this.ajaxRequestWebTimer.restart():(a.delete_timer(e),this.ajaxRequestWebTimer=a.get_timer(e),this.ajaxRequestWebTimer.initialize({requireTTI:!0,url:t}))}render(){const{starredState:e,highlight:t}=this.state,{browseContext:o,browsePostTTIExperiments:i,clickFolderHistoryTimestamp:n,clickRewindTimestamp:r,hideRewind:l,hideFolderHistoryPanel:c,isRewindVisible:d,isFolderHistoryVisible:u,loadingState:p,paginatedTotalNumFiles:g,path:m,setUrl:h,user:_,viewType:f,shouldShowVaultEmptyState:E,shouldShowFamilyEmptyState:v,browsePostTTIData:A,setHideFilesAndSidebar:R,rightRailCollapsed:S,isInsideBackupFolder:y,backups:w,isUploadModalOpen:T}=this.props,b=s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(qt,{user:_}),s.React$1.createElement($c,{userVersionHistoryLength:this.props.userVersionHistoryLength,onNavigateToFileOrFolder:this.handleOnNavigateToFileOrFolder,clickRewindTimestamp:r,clickFolderHistoryTimestamp:n,context:o,encryptionOptions:this.props.encryptionOptions,handleComponentTTI:this.handleComponentTTI,isDraggingExternalFiles:this.props.isDraggingExternalFilesRedux,isDraggingInternalFiles:this.props.isDraggingInternalFilesRedux,isFileViewerShown:this.fileViewerIsShown,isFolderHistoryVisible:u,isRewindVisible:d,isUploadModalOpen:T,backups:w,loadingState:p,path:m,starredState:e,totalNumItems:g,user:_,viewType:f,browseExperiments:this.browseExperiments,browsePostTTIExperiments:i,browsePostTTIData:A,onCloseRewind:l,onCloseFolderHistoryPanel:c,shouldShowVaultEmptyState:E,shouldShowFamilyEmptyState:v,setHideFilesAndSidebar:R,rightRailCollapsed:S,uploadCta:this.props.uploadCta,basicPlusConfirm:this.props.basicPlusConfirm}),t&&s.React$1.createElement(qc,{campaign:t}));return!y&&ai(this.browseExperiments.browseContentSuggestionsVariant)?s.React$1.createElement(di,{user:_,fetchSuggestedItemsInFolder:Le.fetchSuggestedItemsInFolder,source:"browse",trackDismissSuggestedItem:Le.trackDismissSuggestedItem,openSuggestedItem:(M=this.handleOnNavigateToFileOrFolder,(e,t,o)=>{if(o){const o=e.displayType===a.EXTERNAL_RESOURCE_TYPE?a.NavigationMethod.UNSAFE_NEW_TAB:a.NavigationMethod.NEW_TAB;a.logAndNavigate(e.url,t,o)}else e.type===Pe.SuggestItemTypes.PAPER_DOCUMENT?a.logAndNavigate(e.url,t,a.NavigationMethod.REDIRECT):li.getFileMetadata(ri(e.resourceId)).then((o=>{o?t().then((()=>{M(o,{actionSource:a.ActionSourceValue.CONTENT_SUGGESTIONS_SECTION})})):a.logAndNavigate(e.url,t,a.NavigationMethod.REDIRECT)})).catch((o=>{a.logAndNavigate(e.url,t,a.NavigationMethod.REDIRECT)}))}),openSuggestedParent:Wc((e=>{h({path:e})}),_),folderPathString:m,prefetchSuggestedItems:jc},b):b;var M}}Jc.mountFileViewerTarget=()=>{let e=document.getElementById(a.BROWSE_FILE_VIEWER_ELEMENT_ID);e||(e=document.createElement("div"),e.id=a.BROWSE_FILE_VIEWER_ELEMENT_ID,document.body.insertBefore(e,document.body.children[0]))},Jc.unmountFileViewerTarget=()=>{const e=document.getElementById(a.BROWSE_FILE_VIEWER_ELEMENT_ID);e&&document.body.removeChild(e)},Jc.displayName="BrowseController";const Zc={addFolderOverviewLoadedComponent:j.addLoadedComponent,appendFiles:j.appendFiles,fetchLastBackupTime:(e,t,s)=>(i,n)=>o.__awaiter(void 0,void 0,void 0,(function*(){var r,l;const c=a.lastBackupTimesSelector(n());if(t&&!c.has(t)){const n=yield((e,t,s,i,n,r,l)=>o.__awaiter(void 0,void 0,void 0,(function*(){const o={path:t,version:2,direction:i,timestamp:s,filter:{only_rewindable:n,op_type_filters:r},ns_id:l};return yield(new a.UserApiV2Client).ns("chronicle").rpc("list_events",o,{subjectUserId:e})})))(e.id,t,0,{".tag":"past"},!1,[],s);(null===(l=null===(r=n.events)||void 0===r?void 0:r[0])||void 0===l?void 0:l.timestamp_us)&&i({type:a.Actions.SET_LAST_BACKUP_TIMES,payload:{fqPath:t,lastBackupTime:n.events[0].timestamp_us}})}})),handleFolderOverviewPrefetch:j.handlePrefetch,hideFolderHistoryPanel:j.hideFolderHistoryPanel,hideRewind:j.hideRewind,initBackupStore:(e,t)=>(s,i)=>o.__awaiter(void 0,void 0,void 0,(function*(){if(yield Promise.all([s(Et(e)),s(vt(e)),s(At(e)),s(Rt(e))]),t){const e=a.backupInfoByPath(i())(t);s((e=>({type:a.Actions.SET_CURRENT_BACKUP,payload:{backup:e}}))(null!=e?e:null))}})),setArePostTTIModulesLoaded:j.setArePostTTIModulesLoaded,setBrowsePostTTIData:j.setBrowsePostTTIData,setBrowsePostTTIExperiments:j.setBrowsePostTTIExperiments,setFolderMemberCounts:j.setFolderMemberCounts,setHideFilesAndSidebar:j.setHideFilesAndSidebar,setIsFileViewerShown:j.setIsFileViewerShown,setIsRewindButtonEnabled:j.setIsRewindButtonEnabled,setLoadingState:j.setLoadingState,setMountPoints:j.setMountPoints,setPath:j.setPath,setPathData:j.setPathData,setShouldShowDeletedFiles:j.setShouldShowDeletedFiles,setUrl:j.setUrl,showFolderHistoryPanel:j.showFolderHistoryPanel,showRewind:j.showRewind,setFilteredViewData:j.setFilteredViewData},ed=a.connect((e=>{const{context:t,sortedFilesWithFolderSizes:o,isFolderHistoryVisible:s,path:i,shouldShowDeletedFiles:n,isRewindVisible:r,urlPrefix:l,user:c,viewer:d,browsePostTTIExperiments:u,mountPoints:p,clickRewindTimestamp:g,clickFolderHistoryTimestamp:m,sortOrder:h,browsePostTTIData:_,isRightRailCollapsed:f,isSelectedBackupFolder:E,isInsideBackupFolder:v,backupFolderPath:A,isFolderOrganizable:R,getCurrentFolderInfo:S,browseLoadingState:y,selectedFilter:w}=a.Selectors,{paginatedTotalNumFiles:T,shouldShowVaultEmptyState:b,shouldShowFamilyEmptyState:M}=j.FolderOverviewSelectors,{selectViewType:I}=a.FilesViewInstanceSelectors;return{files:o(e),paginatedTotalNumFiles:T(e),loadingState:y(e),path:i(e),shouldShowDeletedFiles:n(e),isFolderHistoryVisible:s(e),isRewindVisible:r(e),clickRewindTimestamp:g(e),clickFolderHistoryTimestamp:m(e),urlPrefix:l(e),user:c(e),viewer:d(e),currentSort:h(e),browsePostTTIExperiments:u(e),browseContext:t(e),mountPoints:p(e),viewType:I(e,{instanceId:a.BROWSE_FILES_VIEW_ID}),shouldShowVaultEmptyState:b(e),shouldShowFamilyEmptyState:M(e),browsePostTTIData:_(e),rightRailCollapsed:f(e),isSelectedBackupFolder:E(e),isInsideBackupFolder:v(e),backupFolderPath:A(e),backups:a.backups(e),backupInfoByPath:a.backupInfoByPath(e),isFolderOrganizable:R(e),currentFolderInfo:S(e),isDraggingInternalFilesRedux:De.getIsDraggingFiles(e)&&De.isInternalTransfer(e),isDraggingExternalFilesRedux:De.getIsDraggingFiles(e)&&!De.isInternalTransfer(e),isUploadModalOpen:De.getIsUploadModalOpen(e),selectedFilter:w(e)}}),Zc)(Jc),td=e=>{const t=a.useCompatLocation();return s.React$1.createElement(ed,Object.assign({},e,{location:t}))},od=({shareLink:e,openPreview:t,initFqPath:o})=>{const i=a.useNavigate(),n=a.useLocation(),r=a.useSelector(a.backupFolderPath),l=a.useSelector(a.urlPrefix),c=o||"/";return s.react.exports.useEffect((()=>{e||t||function(e){const t=a.sanitizeQueryArgs(a.getQueryArgs()),o=String(p.URI.parse(e).setQuery(t));o!==n.pathname+n.search&&i(o,{replace:!0})}(sd(l,c,r))}),[]),null},sd=(e,t,o)=>{e===a.BACKUP_BROWSE_ROOT&&null!==o&&(t=t.substr(t.indexOf(o)));return e+("/"===t?"":p.URI.encode_parts(t))},ad=()=>x.reportException({err:new Error("failed to load post TTI experiments")}),id=()=>{const t=a.useDispatch(),i=(()=>{const{data:e,error:t,isSuccess:o}=ke.useQuery(a.BROWSE_POST_TTI_FETCH_KEY,a.prefetchBrowsePostTTI,{refetchOnReconnect:!1,refetchOnWindowFocus:!1,staleTime:1/0,cacheTime:1/0});return s.react.exports.useEffect((()=>{t&&ad()}),[t]),s.react.exports.useMemo((()=>{if(!e)return;let t;try{t=JSON.parse(e)}catch(e){return void ad()}if(!o||t)return t;ad()}),[e,o])})();return(({maybeRenderTeamAdminModals:t})=>{s.react.exports.useEffect((()=>{void 0!==t&&a.promptBufferedEventEmitter.on(a.Events.ON_PROMPT_INITIALIZED,(s=>o.__awaiter(void 0,void 0,void 0,(function*(){if((!s||!s.didMainCampaignLoad()&&!s.didCampaignForUserEducationLoad())&&t){const{postTTINCCTReminderModal:t}=yield new Promise((function(t,o){e(["./c_ncct_ui_post_tti_ncct_modal"],t,o)}));t()}}))))}),[t])})({maybeRenderTeamAdminModals:i?!!i["maybe-render-team-admin-modals"]:void 0}),s.react.exports.useEffect((()=>{if(i){const e=i["exp-browse-post-tti-experiments"],o=i["exp-uploader-post-tti-experiments"],s=!!i["is-over-free-quota"],a=!!i["has-excluded-ns-ids"],n=i["preferred-editors"],r=i["first-task-props"],l=i["mobile-web-invites"],c=i["family-member-count"],d=i["imm-experiments"],u=i["suggested-items-to-move-info"],p=i["add-shared-folders-info"],g=i["user-has-shared-file-or-folder-info"],m=i["activation-bolt-info"],h=i["is-pro-trial-user"],_=i["trial-onboarding-features-engagement-props"];t(j.setBrowsePostTTIExperiments({browsePostTTIExperiments:e})),t(j.setBrowsePostTTIData({browsePostTTIData:{isOverFreeQuota:s,hasExcludedNsIds:a,uploaderPostTTIExperiments:o,preferredEditors:n,firstTaskProps:r,mobileWebInvites:l,familyMemberCount:c,immExperiments:d,suggestedItemsToMoveInfo:u,addSharedFoldersInfo:p,userHasSharedFileOrFolderInfo:g,activationBoltInfo:m,isProTrialUser:h,trialOnboardingFeaturesEngagementProps:_}}))}}),[i,t]),s.React$1.createElement(s.React$1.Fragment,null,i&&s.React$1.createElement(nd,{firstTaskProps:i["first-task-props"],familyMemberCount:i["family-member-count"]}))},nd=({firstTaskProps:t,familyMemberCount:a})=>(s.react.exports.useEffect((()=>{const s=null==t?void 0:t.seen_desktop_tooltip,i=null==t?void 0:t.member_info;s?o.__awaiter(void 0,void 0,void 0,(function*(){const{markClinkTooltipSeenAndHide:t}=yield new Promise((function(t,o){e(["./c_ui_first_task"],t,o)}));t()})):(void 0!==a&&a>1||i&&i.users.length>1)&&o.__awaiter(void 0,void 0,void 0,(function*(){const{showClinkTooltip:t,TooltipType:o}=yield new Promise((function(t,o){e(["./c_ui_first_task"],t,o)}));t(o.Members)}))}),[]),null);const rd=({emailJustVerified:t,emailJustVerifiedAndChanged:i,initFqPath:l,shareLink:c,openPreview:d,sendVerificationEmail:u,shouldShowUnsyncNotification:p,shouldOpenExtensionsEduModal:g,showShareSuccessSnackbar:m,fromSclSyncModal:h})=>{const _=a.mustGetActiveUser(),f=l||"/";return s.react.exports.useEffect((()=>{o.__awaiter(void 0,void 0,void 0,(function*(){yield a.waitForTTI(),yield(({emailJustVerified:t,emailJustVerifiedAndChanged:s,sendVerificationEmail:a,user:i})=>o.__awaiter(void 0,void 0,void 0,(function*(){if(!(t||s||a))return;const{EmailVerification:o}=yield new Promise((function(t,o){e(["./c_account_email"],t,o)}));t?o.getForUID(i.id).show_verified_modal():s?o.getForUID(i.id).show_verified_and_changed_modal():a&&o.getForUID(i.id).show_sent_modal()})))({emailJustVerified:t,emailJustVerifiedAndChanged:i,sendVerificationEmail:u,user:_});const E=g;if(E&&(yield function(t,i){return new Promise((t=>o.__awaiter(this,void 0,void 0,(function*(){const{AppActionsEduModal:o}=yield new Promise((function(t,o){e(["./c_app_actions_education_edu_modal_component"],t,o)}));a.Modal$1.showInstance(s.React$1.createElement(o,{appName:i})),t()}))))}(_.id,E)),h&&(_.is_cdm_member?function(e){const t=F.intl.formatMessage({id:"7sFPiN",defaultMessage:"Added “{folder_name}” <a>Learn More</a>"},{folder_name:a.Emstring.em_snippet(a.filename(e),a.SNIPPET_SIZES.FILENAME),a:e=>`<a href="/help/business/team-space-overview#acceptfolder">${e}</a>`});n.Notify.success(new n.HTML(t))}(f):function(e){n.Notify.success(F.intl.formatMessage({id:"YYLxxv",defaultMessage:"{file_name} added to your Dropbox."},{file_name:a.filename(e)}))}(f),c&&!d&&_.is_cdm_member&&function(e){const t=a.parent_dir(e);"/"!==t&&n.Notify.success(F.intl.formatMessage({id:"nZ/TMQ",defaultMessage:"Folder is in {path}"},{path:a.Emstring.em_snippet(t,22)}))}(f)),!0===p&&a.Snackbar.show(s.React$1.createElement(a.Snackbar,{variant:"generic",title:F.intl.formatMessage({id:"UgS1Q9",defaultMessage:"Do you also need this on your computer?"}),timeoutDelayMs:1e5,actionButtonText:F.intl.formatMessage({id:"gk12sS",defaultMessage:"Learn more"}),closeButtonText:F.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"}),onActionClick:()=>window.open("/help/business/unsynced-team-folder","_blank"),id:"browse-unsync"})),m){const e=a.filename(f);ht.showInBandShareSuccessSnackbar(e)}(e=>{const t=a.getQueryArgs();if(t.scs){r.DBHistory.remove_query_param(a.BrowseQueryArg.show_save_to_dropbox_completion_snackbar);const o=15,i=t.select||a.filename(e),n=F.intl.formatMessage({id:"l43Bez",defaultMessage:"Saved <bold>{name}</bold> to your Dropbox account."},{name:a.Emstring.em_snippet(i,o),bold:e=>s.React$1.createElement("b",null,e)});a.Snackbar.show(s.React$1.createElement(a.Snackbar,{variant:"complete",title:n,closeButtonText:F.intl.formatMessage({id:"0KvMzR",defaultMessage:"Close"}),timeoutDelayMs:5e3}))}else if(t.sls){r.DBHistory.remove_query_param(a.BrowseQueryArg.show_save_to_dropbox_loading_snackbar);const e=F.intl.formatMessage({id:"hxyy+5",defaultMessage:"Saving changes…"});a.Snackbar.show(s.React$1.createElement(a.Snackbar,{variant:"sync",title:e,closeButtonText:F.intl.formatMessage({id:"0KvMzR",defaultMessage:"Close"}),timeoutDelayMs:5e3}))}})(l)}))}),[]),null},ld=()=>s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(i.RegisterComponentWithBugReporter,{componentId:"web.sharing",componentName:"Sharing"}),s.React$1.createElement(i.RegisterComponentWithBugReporter,{componentId:"web.file_actions",componentName:"File Actions"}),s.React$1.createElement(i.RegisterComponentWithBugReporter,{componentId:"web.right_rail",componentName:"Right Rail"}),s.React$1.createElement(i.RegisterComponentWithBugReporter,{componentId:"desktop.unknown",componentName:"Desktop App"}),s.React$1.createElement(i.RegisterComponentWithBugReporter,{componentId:"web.browse_web",componentName:"Browse"}),s.React$1.createElement(i.RegisterComponentWithBugReporter,{componentId:"web.search_web",componentName:"Search"}),s.React$1.createElement(i.RegisterComponentWithBugReporter,{componentId:"web.upload_web",componentName:"Upload"}),s.React$1.createElement(i.RegisterComponentWithBugReporter,{componentId:"web.previews",componentName:"Previews"})),cd=s.React$1.lazy((()=>o.__awaiter(void 0,void 0,void 0,(function*(){yield a.waitForTTI();const{ConnectedBoltHandler:t}=yield new Promise((function(t,o){e(["./c_browse_bolt_handler"],t,o)}));return{default:t}}))));class dd extends s.React$1.PureComponent{constructor(e){super(e),a.markApplicationStart(),function(){const e=Ft("browse/start",{cypress:h.BROWSE_ON_CYPRESS});e.increment(),e.record()}(),this.cleanupCypressStats=Gt(),a.getStoreForFilesView(),a.getStoreForFolderExplorer(),mt.getStoreForUpload(),a.getStoreForFolderOverview(),a.getStore(),this.reduxStore=a.getStoreForBrowse(),a.shouldUseReactRouter()&&this.reduxStore.dispatch(j.handleAppCleanup());const t=a.Viewer.get_viewer(),i=t.get_user_by_id(s.toNumber(e.userId)),n=Ne.is_supported_mobile_browser()?void 0:a.ViewType.CondensedList;this.reduxStore.dispatch(a.loadViewTypes({user:i,defaultViewType:n})),this.reduxStore.dispatch(a.loadViewTypeColumns({user:i})),this.reduxStore.dispatch(j.setPath({path:e.initFqPath||"/"}));const{nsId:r,rootNsId:l,userId:c,encryptionOptions:d}=e,u=o.__rest(e,["nsId","rootNsId","userId","encryptionOptions"]);this.reduxStore.dispatch(j.appInit({props:u,user:i,viewer:t}))}componentWillUnmount(){this.cleanupCypressStats&&this.cleanupCypressStats()}render(){return s.React$1.createElement(a.Provider,{store:this.reduxStore},s.React$1.createElement(F.Provider,{value:F.intl},s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(td,Object.assign({},this.props)),s.React$1.createElement(rd,Object.assign({},this.props)),s.React$1.createElement(s.React$1.Suspense,{fallback:s.React$1.createElement(s.React$1.Fragment,null)},s.React$1.createElement(cd,null)),s.React$1.createElement(ld,null))))}}dd.displayName="BrowseApp";const ud=({browseAppProps:e})=>(s.react.exports.useEffect((()=>{const e=a.Viewer.get_viewer().get_users().map((e=>e.id));a.UserLocalStorage.clearOtherUsers(e)}),[]),e?s.React$1.createElement(s.React$1.Fragment,null,s.React$1.createElement(dd,Object.assign({},e)),s.React$1.createElement(od,{openPreview:e.openPreview,shareLink:e.shareLink,initFqPath:e.initFqPath}),s.React$1.createElement(id,null)):null);var pd;!function(e){e[e.APPLE=0]="APPLE",e[e.GOOGLE=1]="GOOGLE"}(pd||(pd={})),m.proto3.util.setEnumType(pd,"educational_modal_edison.MobilePaymentMethod",[{no:0,name:"APPLE"},{no:1,name:"GOOGLE"}]);class gd extends m.Message{constructor(e){super(),m.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new gd).fromBinary(e,t)}static fromJson(e,t){return(new gd).fromJson(e,t)}static fromJsonString(e,t){return(new gd).fromJsonString(e,t)}static equals(e,t){return m.proto3.util.equals(gd,e,t)}}gd.runtime=m.proto3,gd.typeName="educational_modal_edison.EdisonEducationalModalPrefetchArg",gd.fields=m.proto3.util.newFieldList((()=>[]));class md extends m.Message{constructor(e){super(),this.action="",this.mobilePaymentMethod=pd.APPLE,this.teamId=m.protoInt64.zero,this.teamName="",this.trialEndDate="",m.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new md).fromBinary(e,t)}static fromJson(e,t){return(new md).fromJson(e,t)}static fromJsonString(e,t){return(new md).fromJsonString(e,t)}static equals(e,t){return m.proto3.util.equals(md,e,t)}}function hd(){return o.__awaiter(this,void 0,void 0,(function*(){const t=yield function(){return o.__awaiter(this,void 0,void 0,(function*(){const e=yield s.Edison.fetch("educational_modal.EdisonEducationalModalPrefetchService","EdisonEducationalModalPrefetch");return s.unmarshalProto(e,md)}))}(),{action:i,teamId:n,teamName:r,trialEndDate:l,mobilePaymentMethod:c}=t;if(!i)return;yield a.waitForTTI();const[d,u]=yield Promise.all([new Promise((function(t,o){e(["./c_payments_ui_mobile_billing_educational_modal"],t,o)})),new Promise((function(t,o){e(["./c_payments_ui_mobile_billing_modal_util"],t,o)}))]),{MobileBillingEducationalModal:p,MobileBillingEducationalModalActions:g}=d,{MobilePaymentMethod:m}=u,h=new Map([[pd.APPLE,m.APPLE],[pd.GOOGLE,m.GOOGLE]]).get(c),_=p({action:g[i],mobilePaymentMethod:h,teamId:Number(n),teamName:r,trialEndDate:l});_&&a.Modal$1.showInstance(_)}))}md.runtime=m.proto3,md.typeName="educational_modal_edison.EdisonEducationalModalPrefetchResults",md.fields=m.proto3.util.newFieldList((()=>[{no:1,name:"action",kind:"scalar",T:9},{no:2,name:"mobilePaymentMethod",kind:"enum",T:m.proto3.getEnumType(pd)},{no:3,name:"teamId",kind:"scalar",T:3},{no:4,name:"teamName",kind:"scalar",T:9},{no:5,name:"trialEndDate",kind:"scalar",T:9}]));const _d=()=>{a.isClientSideNavigation()&&function(){return o.__awaiter(this,void 0,void 0,(function*(){const e=yield s.Edison.fetch("browse_web.BrowseWebInternal","EdisonBrowseRedirect");return s.unmarshalProto(e,He.EdisonRedirectResponse)}))}().then((e=>{e.redirect&&a.redirect(e.redirect.unsafeUrl)}))};var fd,Ed=(e=>a.requireCssWithComponent(e,["/static/metaserver/static/css/dig-components/index.web-vflvPodS4.css","/static/metaserver/static/css/main_browse-vflcWY5kO.css","/static/metaserver/static/css/sprites/web_sprites-vflwRzO2P.css","/static/metaserver/static/css/user_education-vfldk8ew8.css","/static/metaserver/static/css/react/overlay-vflNXoFem.css","/static/metaserver/static/css/search/input-vfl4kmtDE.css","/static/metaserver/static/css/search/search_bar_react-vfl4PXPOi.css","/static/metaserver/static/css/search/search_results-vflJpdhCg.css","/static/metaserver/static/css/components/title_bubble-vflNHwZeu.css","/static/metaserver/static/css/components/react_locale_selector-vflsUmZSq.css","/static/metaserver/static/css/modal-vflf1hwfZ.css","/static/metaserver/static/css/pagelet-vflQZ-elc.css","/static/metaserver/static/css/spectrum/index.web-vflJy4G-t.css","/static/metaserver/static/css/browse/browse-vflAysPUB.css","/static/metaserver/static/css/browse/files_view-vflFy0Q00.css","/static/metaserver/static/css/scooter/scooter-scoped-vfl0EaHDR.css","/static/metaserver/static/css/legacy_packages/components-vfl86pl5V.css","/static/metaserver/static/css/dropbox/app_actions-vflqUS-_W.css"]))((fd=()=>{const e=a.useCompatHref(),{data:t}=ke.useQuery(a.queryBrowsePropsKey(e),(()=>o.__awaiter(void 0,void 0,void 0,(function*(){return x.reportException({severity:"non-critical",err:Object.assign(Object.assign({},new Error("Cached data unavailable for query keys: "+a.queryBrowsePropsKey(e).join(","))),{severity:"non-critical"})}),a.queryBrowseProps(e)}))),a.defaultQueryOptions);return s.React$1.useMemo((()=>(_d(),hd(),()=>{a.emitPageChanged()})),[]),s.React$1.createElement(ud,{browseAppProps:t})},"boolean"==typeof RUNNING_IN_REACTSERVER?()=>null:fd)),vd=Object.freeze({__proto__:null,default:Ed});t.BrowseFileActionHandlers=Ko,t.BrowseInlineFileActionSelectors=Go,t.DATE_LABEL_WIDTH=80,t.DEFAULT_GRAPH_LINE_WIDTH=2,t.EdisonBrowse=Ed,t.EmptyStateDropTarget=ei,t.FOLDER_HISTORY_QUERY_PARAM=er,t.FolderHistory=_r,t.FolderHistoryFilter=Hr,t.GRAPH_BOTTOM_PADDING=20,t.GRAPH_HEIGHT=192,t.GRAPH_WIDTH=315,t.GeneralActivationErrorBoundary=Ni,t.GoogleDriveIcon=qa,t.LOADING_PAGE_POLLING_LENGTH_MS=5e3,t.NUM_REWIND_STEPS=3,t.NonQueuedUpdateSimulator=class{initializeIfNeeded(e){void 0===this.initialRequestStart&&(this.initialRequestStart=e)}queuedUpdateComplete(e){if(void 0===this.initialRequestStart)return;const t=Date.now();if(this.requestLatency=t-e,void 0===this.timer)if(void 0!==this.lastNotification&&this.lastNotification>this.initialRequestStart){const e=this.requestLatency-(t-this.lastNotification);this.timer=window.setTimeout((()=>this.onComplete),e)}else this.onComplete()}notificationOccurred(){void 0!==this.initialRequestStart&&(this.lastNotification=Date.now(),void 0!==this.timer&&void 0!==this.requestLatency&&(window.clearTimeout(this.timer),this.timer=window.setTimeout((()=>this.onComplete()),this.requestLatency)))}onComplete(){void 0!==this.initialRequestStart&&kt.recordSimulatedLatency(this.initialRequestStart),this.reset()}reset(){window.clearTimeout(this.timer),this.timer=void 0,this.initialRequestStart=void 0,this.lastNotification=void 0}},t.ONBOARDING_TASK_CAROUSEL_EXCEPTION_TAG=Zl,t.OneDriveIcon=za,t.OpenInMobileModalController=ba,t.REWIND_GRAPH_DAY_STEP=7,t.REWIND_QUERY_PARAM=tr,t.RewindActivityListPage=Ir,t.RewindContinueWidget=Sr,t.RewindStepHeader=Rr,t.SendMobileLinkModal=ya,t.assertNever=Bn,t.beginRewind=function(e){const t={path:""===e.path?"/":e.path,target_ts_microseconds:e.targetTsMicroseconds,type:{".tag":"individual"},logging_restore_id:e.restorationsLoggingId.value,ns_id:e.rootNsId};return(new a.UserApiV2Client).ns("restorations").rpc("rewinds/start",t,{subjectUserId:e.user.id})},t.browseClientMetrics=Dt,t.browseHandlerMetrics=kt,t.browse_esnext=vd,t.clickDayGraphDate=e=>{const{user:t,restoreId:o,selectedDateTsInMs:s}=e,i=new Date;i.setHours(0,0,0,0),a.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:yr.click_day_graph_date,extra:{days_ago:String(Math.round(Math.abs((new Date(s).getTime()-i.getTime())/We.ONE_DAY_MS)))}})},t.clickDayGraphNext=e=>{const{user:t,restoreId:o,selectedDateTsInMs:s}=e,i=new Date;i.setHours(0,0,0,0),a.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:yr.click_day_graph_next,extra:{days_ago:String(Math.round(Math.abs((new Date(s).getTime()-i.getTime())/We.ONE_DAY_MS)))}})},t.clickHelp=e=>{const{user:t,restoreId:o,helpStep:s}=e;a.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:yr.click_help,extra:{help_step:s}})},t.clickNUXHelp=e=>{const{user:o,restoreId:s}=e;a.RestorationStepsLogger.log_step({userId:o.id,restoreId:s,step:yr.click_help,extra:{help_step:t.DeloreanPage.nux}})},t.clickNUXNext=e=>{const{user:t,restoreId:o}=e;a.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:yr.click_nux_next})},t.clickOnActivityList=e=>{const{user:t,restoreId:o}=e;a.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:"user clicked folder history event, office only"})},t.clickPreviewBack=e=>{const{user:t,restoreId:o}=e;a.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:yr.click_preview_back})},t.clickPreviewCancel=e=>{const{user:t,restoreId:o}=e;a.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:yr.click_preview_cancel})},t.clickPreviewHelp=e=>{const{user:o,restoreId:s}=e;a.RestorationStepsLogger.log_step({userId:o.id,restoreId:s,step:yr.click_help,extra:{help_step:t.DeloreanPage.preview}})},t.clickPreviewId=e=>{const{user:t,restoreId:o}=e;a.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:yr.click_preview_rb})},t.clickUpsell=e=>{const{user:t,restoreId:o}=e;a.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:yr.click_upsell})},t.clickUpsellHelp=e=>{const{user:o,restoreId:s}=e;a.RestorationStepsLogger.log_step({userId:o.id,restoreId:s,step:yr.click_help,extra:{help_step:t.DeloreanPage.upsell}})},t.closeActionButtonAriaLabel=Bi,t.columnHeadingTextMoreWays=Li,t.columnHeadingTextMoreYouCanDo=Pi,t.columnHeadingTextOtherThings=Di,t.completeTask=function(e,t,o){let s=null;const i=e.map((e=>s||e.type[".tag"]!==o?e:(s=Object.assign(Object.assign({},e),{is_completed:!0}),s)));s&&(t(i),a.OALogger.logToTeamsWeb(a.OnboardingChecklistEvents.ONBOARDING_CHECKLIST_ITEM_COMPLETED,{item:o}),se.updateTask(s))},t.dismissNUXAction=function(){return e=>o.__awaiter(this,void 0,void 0,(function*(){e({type:t.DeloreanActionType.dismissNUX}),e({type:t.DeloreanActionType.changeRewindPageToGraphPage})}))},t.download=e=>o.__awaiter(void 0,void 0,void 0,(function*(){const t=document.createElement("a");let o=void 0!==t.download;try{t.href=yield Xe.addHeaderRedirectToken(e)}catch(s){t.href=e,o=!1,x.reportException({err:s,force:!0,severity:B.SEVERITY.NONCRITICAL,tags:["js:header-redirect-token","team-activation",Zl]})}t.target=o?"_self":"_blank",setTimeout((()=>{t.click()}),1)})),t.exitDrawer=e=>{const{reason:o,activePage:s,allPageData:i,restoreId:n,user:r}=e;let l;s===t.RewindFlowPage.NUXPage?l=t.DeloreanPage.nux:s===t.RewindFlowPage.graphPage?l=t.DeloreanPage.day_graph:s===t.RewindFlowPage.activityListPage?l=t.DeloreanPage.events:s===t.RewindFlowPage.confirmationPage?l=t.DeloreanPage.preview:s===t.RewindFlowPage.startedPage?i.startedPage.rewindState===t.RewindState.InProgress?l=t.DeloreanPage.progress:i.startedPage.rewindState===t.RewindState.Done?l=t.DeloreanPage.completion:(l=t.DeloreanPage.error_1,i.startedPage.rewindState):l=s===t.RewindFlowPage.notVisible?t.DeloreanPage.error_2:s===t.RewindFlowPage.upsellPage?t.DeloreanPage.upsell:t.DeloreanPage.error_1,a.RestorationStepsLogger.log_step({userId:r.id,restoreId:n,step:yr.exit_drawer,extra:{exit_step:l,exit_reason:o}})},t.experimentSelector=Jo,t.fetchEventCountsAction=function(e){return(s,i)=>o.__awaiter(this,void 0,void 0,(function*(){const{startDaysBack:i,endDaysBack:n,user:r,fqpath:l,graphPositionChange:c,rootNsId:d}=e,u=new Date,p=new Date;let g;p.setDate(p.getDate()-i-1),p.setHours(0,0,0,0),u.setDate(u.getDate()+1-n),u.setHours(0,0,0,0),"none"!==c&&s({type:t.DeloreanActionType.setLoadingGraphWeek,graphPositionChange:c});try{g=yield function(e){return o.__awaiter(this,void 0,void 0,(function*(){const{startDate:t,endDate:o}=e;let s;const i=Math.floor(t.getTime()/1e3),n=Math.floor(o.getTime()/1e3);if(i>n)throw new Error("startTs must come before endTs.");if("hourly"===e.aggregation)s={".tag":"hourly"};else{if("daily"!==e.aggregation)return e.aggregation;s={".tag":"daily"}}try{return yield(new a.UserApiV2Client).ns("chronicle").rpc("get_event_counts",{path:e.fqpath,start_ts:i,end_ts:n,aggregation:s,version:2,ns_id:e.rootNsId},{subjectUserId:e.user.id})}catch(e){throw fr(e),e}}))}({user:r,fqpath:l,startDate:p,endDate:u,aggregation:"daily",rootNsId:d})}catch(e){const o=Qn({err:e,isForRewindFlow:!0});return void s({type:t.DeloreanActionType.setRewindEventCountsError,errorString:o})}const m=[],h=new Date;for(const{count:e,start_ts:t,outside_history_cutoff:o}of g.counts){const s=1e3*t,a=new Date(s),i=qn(a);a>h||m.push({dateString:i,count:e,dateTsInMs:s,outsideHistoryCutoff:o})}if(s({type:t.DeloreanActionType.loadEventCounts,eventCounts:m,namespaceCount:g.namespace_count||0,changedNamespaceCount:g.changed_namespace_count||0}),"forward"===c){let e=7;const o=zn(new Date),a=jn(m,(e=>zn(new Date(e.dateTsInMs))>=o));void 0!==a&&(e=Math.max(a-1,0)),s({type:t.DeloreanActionType.setGraphRangeForward,length:e})}else if("backward"===c){const e=function(e,t){for(let o=e.length-1;o>=0;o--)if(t(e[o]))return o}(m,(e=>e.outsideHistoryCutoff));let o=7;void 0!==e&&(o=m.length-e),s({type:t.DeloreanActionType.setGraphRangeBack,length:o})}s({type:t.DeloreanActionType.setGraphLoadFinished})}))},t.fetchEventsAction=Er,t.formatWithShortDateName=qn,t.getActivePage=e=>wn(e).activePage,t.getAllLoggingCallbacksForSuggestedWorkflows=Ma,t.getAllPageData=e=>wn(e).pageData,t.getBrowseInlineOverflowMenuActions=Uo,t.getBrowseInlineScenarioActions=Bo,t.getDeloreanStore=Pr,t.getEvents=Tn,t.getFQPath=e=>wn(e).fqpath,t.getFirstShareableFile=function(){const e=a.getStoreForBrowse().getState(),t=a.sortedFiles(e),o=a.context(e);return t.find((e=>{var t,s,i;return!(e.isDeleted||e.is_unmounted||(null===(t=e.per_node_metadata)||void 0===t?void 0:t.suppress_ns_partition)||(null===(s=e.per_node_metadata)||void 0===s?void 0:s.suppress_shared_link)||(null===(i=e.per_node_metadata)||void 0===i?void 0:i.link_node)||[a.FileTypes.VAULT_FOLDER,a.FileTypes.TEAM_MEMBER_FOLDER,a.FileTypes.SANDBOX].includes(e.type)||e instanceof a.FileSharedWithMe||o.isInsideVaultFolder)}))},t.getFolderDisplayName=e=>wn(e).folderDisplayName,t.getHasDismissedNUX=e=>wn(e).hasDismissedNUX,t.getIsInitialLoad=e=>wn(e).isInitialLoad,t.getRewindStatus=function(e){return o.__awaiter(this,void 0,void 0,(function*(){const t={id:e.id};return yield(new a.UserApiV2Client).ns("restorations").rpc("rewinds/status",t,{subjectUserId:e.user.id})}))},t.initializeDeloreanAction=vr,t.loadCompletionFailure=e=>{const{user:t,restoreId:o,startTs:s}=e;a.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:yr.load_completion,extra:{time_to_completion:String(Date.now()-s),success:String(!1)}})},t.loadCompletionSuccess=e=>{const{user:t,restoreId:o,startTs:s}=e;a.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:yr.load_completion,extra:{time_to_completion:String(Date.now()-s),success:String(!0)}})},t.loadConfirmationPage=e=>{const{eventCounts:t,graphPage:o,user:s,restoreId:i,eventToRewindTo:n}=e,r=new Date;r.setHours(0,0,0,0),r.setDate(r.getDate()+1);const l=new Date(n.timestamp);l.setHours(0,0,0,0);const c=Math.abs((r.getTime()-l.getTime())/We.ONE_DAY_MS),d=t.slice().reverse().slice(0,c).reverse().reduce(((e,t)=>e+t.count),0);let u;"loaded"===o.contents.type&&(u=o.contents.changedNamespaceCount),a.RestorationStepsLogger.log_step({userId:s.id,restoreId:i,step:yr.load_preview,extra:{tti:String(0),rb_time_interval:String(Date.now()-n.timestamp),sfj_count:String(d),num_ns_included:String(u)}})},t.loadDayGraph=e=>{const{errorString:t,user:o,restoreId:s,startedLoadingTimestamp:i,namespaceCount:n}=e,r={tti:String(Date.now()-i),num_ns_contained:String(n)};t&&(r.error=t),a.RestorationStepsLogger.log_step({userId:o.id,restoreId:s,step:yr.load_day_graph,extra:r})},t.loadNUX=e=>{const{browseContext:t,user:o,restoreId:s,clickBrowseButtonTimestampMs:i,fromDesktopClient:n}=e,r=br(t),l=Ne.get_browser_info(),c=l.browser+" "+l.version;a.RestorationStepsLogger.log_step({userId:o.id,restoreId:s,step:yr.load_nux,extra:{ns_id:String(t.currentNSID),tti:String(i?(new Date).getTime()-i:"?"),path_hash:a.sjcl.exports.codec.hex.fromBits(a.sjcl.exports.hash.sha256.hash(t.currentFQPath)),path_nested_levels:String(a.normalize(t.currentFQPath).split("/").length),location_type:r,browser:c,from_desktop_client:String(n),referrer:document.referrer}})},t.loadProgress=e=>{const{user:t,restoreId:o}=e;a.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:yr.load_progress,extra:{tti:String(0)}})},t.loadUpsell=e=>{const{browseContext:t,user:o,restoreId:s,clickBrowseButtonTimestampMs:i,fromDesktopClient:n}=e,r=br(t),l=Ne.get_browser_info(),c=l.browser+" "+l.version;a.RestorationStepsLogger.log_step({userId:o.id,restoreId:s,step:yr.load_upsell,extra:{ns_id:String(t.currentNSID),tti:String((new Date).getTime()-i),path_hash:a.sjcl.exports.codec.hex.fromBits(a.sjcl.exports.hash.sha256.hash(t.currentFQPath)),path_nested_levels:String(a.normalize(t.currentFQPath).split("/").length),location_type:r,from_desktop_client:String(n),referrer:document.referrer,browser:c}})},t.logContinueClick=(e,t=!1,o=!1)=>{a.logEvent({class:"onboard",action:"select",object:"onboarding_tasks_modal_continue_button",properties:{onboardingTasksModalStep:Jl(e.toString()),isCompleted:t,isRequired:o}})},t.logShown=e=>{a.logEvent({class:"onboard",action:"shown",object:"onboarding_tasks_modal",properties:{onboardingTasksModalStep:Jl(e.toString())}})},t.logSkipClick=e=>{a.logEvent({class:"onboard",action:"select",object:"onboarding_tasks_modal_skip_button",properties:{onboardingTasksModalStep:Jl(e.toString())}})},t.messages=Ui,t.noop=Yn,t.onContactSupport=Xn,t.openActivityList=e=>{const{user:t,restoreId:o}=e;a.RestorationStepsLogger.log_step({userId:t.id,restoreId:o,step:"user opened timeline, office only"})},t.overQuotaDataSelector=Xo,t.rowHeadingText=xi,t.rowHeadingTextSharingMadeEasy=ki,t.showMoreAction=Ar,t.sortTasks=Ql,t.trackSeenOnboardingTaskCarousel=e=>o.__awaiter(void 0,void 0,void 0,(function*(){(new a.UserApiV2Client).ns("growth").rpc("track_user_action",{project:"acc",action:ec},{subjectUserId:e})})),t.triggerCreateFolder=function(){const e=a.getStoreForBrowse().getState(),t=a.user(e),o=a.context(e),{goldenGateRaclsEnabled:s}=a.experiments(e),i=a.autoTeamGroupId(e),n=a.ActionSourceValue.ONBOARDING_CHECKLIST;T.handleCreateNewFolder(t,o,s,i,n)},t.triggerRedirectToMemberFolder=e=>{const t=(()=>{const e=a.getStoreForBrowse().getState(),t=a.user(e).cdm_tmf_path;return a.unsortedFiles(e).get(t)})();t?(u.browseNavigateActions.navigateToFileOrFolder({file:t}),"/home"===a.get_uri().getPath()?(e(),tc("User was not redirected to TMF (team member folder) and could not upload a file to TMF.")):oc()):(e(),tc("The path to member folder was undefined, so user was not redirected to TMF (team member folder) and could not upload a file to TMF."))},t.triggerRedirectToTmf=function(){const e=function(){const e=a.getStoreForBrowse().getState(),t=a.user(e).cdm_tmf_path;return a.unsortedFiles(e).get(t)}();e&&u.browseNavigateActions.navigateToFileOrFolder({file:e})},t.triggerUpload=oc,t.triggerUpload$1=function(t,s,i){return o.__awaiter(this,void 0,void 0,(function*(){const o=a.getStoreForBrowse().getState(),n=s?a.user(o).cdm_tmf_path:a.context(o).currentFQPath;if(L.FileUploaderController.setPath(n),!t&&i){const{ActionsAdapter:t}=yield new Promise((function(t,o){e(["./c_file_uploader_actions_adapter"],t,o)}));t.on("uploadComplete",(({filesAdded:e})=>{if(e&&(null==e?void 0:e.length)>0){const t=e[e.length-1],o=a.joinPathWithFileName({fqPath:t.path,fileName:t.name});setTimeout((()=>Kl(o)),Qe.MODAL_OPEN_DELAY)}}))}L.FileUploaderController.handleUploadButtonClick({folderUpload:t,source:a.ActionSourceValue.ONBOARDING_CHECKLIST,actionElement:L.UploadElement.ACTION_BAR,actionScreen:"continuous_onboarding"})}))}}));
//# sourceMappingURL=c_browse.js-vfleN6NRr.map
