define(["exports","./c_tslib","./c_flows_constants","./c_flows_lib_api","./c_flows_redux_reducer","./e_core_exception","./c_flows_redux_selectors"],(function(e,t,o,r,i,n,a){"use strict";const l=[o.UI_EXPERIMENTS.AUTOMATION_UI,o.UI_EXPERIMENTS.SAVED_WORKFLOW_TEMPLATE_CREATE,o.UI_EXPERIMENTS.SUBFOLDER_INHERITANCE,o.UI_EXPERIMENTS.ADOPTION_UI_VARIANT];function s(e){return{type:i.Actions.SetUserExperiments,payload:e}}const d=e=>({type:i.Actions.UpdateWorkflowTriggerStep,payload:e}),p=(e,t)=>({type:i.Actions.UpdateWorkflowActionStep,payload:{id:e,action:t}});function c(e){return{type:i.Actions.SetWorkflowStepsConfig,payload:e}}e.addUserAutomation=function(e){return{type:i.Actions.AddUserAutomation,payload:e}},e.collapseAllWorkflowBuilderSteps=function(){return(e,o)=>t.__awaiter(this,void 0,void 0,(function*(){e(d({isExpanded:!1}));a.getWorkflowBuilderActions(o()).forEach((t=>e(p(t.id,{isExpanded:!1}))))}))},e.deleteWorkflowActionStep=e=>({type:i.Actions.DeleteWorkflowActionStep,payload:{id:e}}),e.editUserAutomation=function(e){return{type:i.Actions.EditUserAutomation,payload:e}},e.expandOrCollapseWorkflowActionStep=(e,t)=>p(e,{isExpanded:t}),e.expandOrCollapseWorkflowTriggerStep=e=>d({isExpanded:e}),e.getSavedWorkflowTemplates=function(){return e=>{r.getSavedWorkflowTemplates(!1).then((t=>{if(t&&t.saved_workflow_templates){const r=t.saved_workflow_templates.map(i.createSavedWorkflowTemplateObject),n=[];r.forEach((e=>{e&&n.push(e)})),e((o=n,{type:i.Actions.UpdateSavedWorkflowTemplates,payload:o}))}var o}),(e=>{n.reportException({err:{name:"ListSavedWorkflowTemplatesError",message:JSON.stringify(e)},force:!0,tags:[o.EXCLOG_TAG_SAVED_WORKFLOW_TEMPLATE],severity:"non-critical"})}))}},e.getUserExperiments=function(e=l){return o=>t.__awaiter(this,void 0,void 0,(function*(){if(0!==e.length){o(s({status:"pending"}));try{const t=yield r.getUserExperiments(e),i=(null==t?void 0:t.variantInfos)||[];o(s({status:"completed",data:i}))}catch(e){o(s({status:"errored",error:e.message}))}}else o(s({status:"completed",data:[]}))}))},e.getWorkflowStepsConfig=function(){return e=>t.__awaiter(this,void 0,void 0,(function*(){var t,o,i,n;e(c({status:"pending"}));try{const a=yield r.getFolderRulesConfig(),l=(null===(t=a.folder_rules_config)||void 0===t?void 0:t.actions)||[],s=(null===(o=a.folder_rules_config)||void 0===o?void 0:o.triggers)||[],d=(null===(i=a.folder_rules_config)||void 0===i?void 0:i.action_experiments)||[],p=((null===(n=a.folder_rules_config)||void 0===n?void 0:n.trigger_action_maps)||[]).reduce(((e,t)=>{const{trigger:o,actions:r}=t;return o&&r&&(e[o]=r),e}),{});e(c({status:"completed",actionExperiments:d,allowedActions:l,allowedTriggers:s,triggerActionMaps:p}))}catch(t){e(c({status:"errored",error:t.message}))}}))},e.initWorkflowBuilder=e=>({type:i.Actions.InitWorkflowBuilder,payload:e}),e.mergeUserAutomations=function(e){return{type:i.Actions.MergeUserAutomations,payload:e}},e.removeUserAutomation=function(e){return{type:i.Actions.RemoveUserAutomation,payload:{fqPath:e}}},e.setInheritanceBlockingFqPaths=function(e){return{type:i.Actions.SetInheritanceBlockingFqPaths,payload:e}},e.setShouldSubscribeToBolt=e=>({type:i.Actions.SetShouldSubscribeToBolt,payload:e}),e.setWorkflowBuilderActions=e=>({type:i.Actions.SetWorkflowBuilderActions,payload:e}),e.setWorkflowBuilderApplyToExisting=function(e){return{type:i.Actions.SetWorkflowBuilderApplyToExisting,payload:e}},e.setWorkflowBuilderInheritable=function(e){return{type:i.Actions.SetWorkflowBuilderInheritable,payload:e}},e.setWorkflowBuilderOperation=e=>({type:i.Actions.SetWorkflowBuilderOperation,payload:e}),e.setWorkflowBuilderWidth=e=>({type:i.Actions.SetWorkflowBuilderWidth,payload:e}),e.tearDownWorkflowBuilder=()=>({type:i.Actions.TearDownWorkflowBuilder,payload:{}}),e.updateSavedWorkflowTemplateState=e=>({type:i.Actions.UpdateSavedWorkflowTemplateState,payload:e}),e.updateWorkflowActionStep=p,e.updateWorkflowBuilderIsEnabled=e=>({type:i.Actions.UpdateWorkflowBuilderIsEnabled,payload:e}),e.updateWorkflowTriggerStep=d}));
//# sourceMappingURL=c_flows_redux_actions.js-vflUcBXXb.map
