define(["exports","./c_portable_delete_snackbars","./c_file_store_utils","./c_sdk_file_viewer_action_plugins_utils","./c_file_actions_portable_copy","./c_file_actions_portable_move","./c_portable_rename","./c_unity_features","./c_file_actions_portable_go_to_folder","./c_publish_publish_modal","./c_core_types_preview_type","./c_pap-events_publish_modal_select_publish_entrypoint","./e_ui_page_files_router","./c_pap-events_enums_file_type-utils","./c_core_utils_redesign2023","./c_tslib","./e_edison","./c_core_uri","./c_lodash-es_lodash","./c_apex-metrics_src_types","./c_core_i18n","./e_core_exception","./c_core_exception_info","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","./c_src_sink_index","./c_core_browser_detection","metaserver/static/js/modules/core/langpack","./c_action_bar_action_bar_strings","./c_portable_delete_strings","./c_files_view_file_actions_snackbars","./c_file_actions_strings","./c_files_view_file_actions_file_from_metadata","./c_hive_schemas_web-modal-activity","./c_ui_fileops_actions","./c_data_action_creators_index","./c_history","./c_ux_analytics_dispatch_custom_event","./c_browse_crypto_subtle_digest","./c_api_v2_noauth_client","./c_browser_cookies","metaserver/static/js/modules/constants/trademark","./c_action_bar_file_actions_logging","./c_sharing_async_share_modal_util","./c_core_notify","metaserver/static/js/modules/constants/files_spa","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/viewer","metaserver/static/js/modules/constants/auth","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/ajax_strings","./c_csrf","./c_core_xhr","metaserver/static/js/modules/constants/locales","metaserver/static/js/modules/constants/webtiming","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/campaigns_orchestration","metaserver/static/js/modules/constants/maestro_nav_strings","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/undo_strings","metaserver/static/js/modules/constants/contacts","metaserver/static/js/modules/constants/login_and_register","./c_form_row_index","metaserver/static/js/modules/constants/unity","./c_table_index","./c_ui-icon_line_arrow-down","./c_ui-icon_line_arrow-up","./c_combinations_index","./c_controls_index","./c_ui-icon_external-logo_youtube","./c_ui-icon_external-logo_instagram","metaserver/static/js/modules/constants/publish","./c_carousel_index","./c_ui-icon_line_more-horizontal","./c_hooks_lib_index","./c_ui-icon_line_calendar","./c_preview_audio_video_helper_image_size"],(function(e,t,s,i,o,n,a,_,r,c,l,d,p,u,m,v,g,f,h,b,y,w,P,E,I,S,x,A,j,R,k,F,T,q,D,N,B,C,V,W,U,K,L,M,z,Q,O,$,G,H,J,X,Y,Z,ee,te,se,ie,oe,ne,ae,_e,re,ce,le,de,pe,ue,me,ve,ge,fe,he,be,ye,we,Pe,Ee){"use strict";e.copyAction=(e,t,n,a,_)=>{const r={fq_path:e.fq_path,is_dir:e.is_dir,file_id:e.file_id};n.logUserAction("copy","overflow_menu");const c=i.getPapPreviewType(n.getPluginData().previewType),l=m.isRedesign2023Enabled(n.sdkConfig)?i.PreviewActionElement.PREVIEW_TITLEBAR:void 0;o.portableCopy({user:t,source:"preview",filesPath:[r],exceptions:_||{isOverFreeQuota:!1,hasExcludedNsIds:!1},currentFQPath:a,createNewFolderInMoveDialog:!0,nsId:e.ns_id,extraForLogging:{fileSize:e.bytes,fileType:u.getFileTypeFromString(s.getExtension(e)),actionElement:l,previewType:c}},{})},e.deleteAction=(e,s,o,n,a,_,r)=>{const c={file_id:e.file_id,is_dir:e.is_dir};t.portableDelete({user:s,filesPath:[c],fq_path:e.fq_path},{onNetworkRequest:()=>t.deleteSnackBarInProgress(i.PREVIEWS_SNACKBAR_ID),onSuccess:()=>{t.deleteCompleteSnackBar(i.PREVIEWS_SNACKBAR_ID),null==_||_(e),null==o||o()},onError:e=>{t.deleteFailedSnackBar(e,i.PREVIEWS_SNACKBAR_ID),null==n||n()},setDeleteFileModalOpen:r,onRequestClose:()=>null==a?void 0:a()})},e.goToFolderAction=(e,t)=>{r.handleShowInFolder({fqPaths:[e.fq_path],user:t})},e.moveAction=(e,t,o,a,_,r)=>{let c;const l=i.getPapPreviewType(o.getPluginData().previewType),d=m.isRedesign2023Enabled(o.sdkConfig)?i.PreviewActionElement.PREVIEW_TITLEBAR:void 0;n.portableMove({user:t,source:"preview",filesPath:[e],exceptions:r||{isOverFreeQuota:!1,hasExcludedNsIds:!1},currentFQPath:a,createNewFolderInMoveDialog:!0,nsId:e.ns_id,extraForLogging:{fileSize:e.bytes,fileType:u.getFileTypeFromString(s.getExtension(e)),actionElement:d,previewType:l}},{onSuccess:t=>{_&&t&&(c=t[0],_(e,t[0]))},onUndo:t=>{_&&t&&c&&_(c,e)}})},e.openInDesktopAction=(e,t,s,i)=>{s.logUserAction("open_desktop_click","open_dropdown");const o=e.ns_id||(null==i?void 0:i.currentNSID);!function({nsId:e,nsPath:t,user:s},{onSuccess:i,onError:o}){_.UnityFeatures.open_file(e||null,t||"/",s.id,(e=>(null==i||i(e),_.UnityFeatures.standard_open_file_handler(e))),(e=>{null==o||o(e),_.UnityFeatures.standard_open_file_handler(!1)}),!0)}({user:t,nsPath:"ns_path"in e?e.ns_path:null==i?void 0:i.currentNSPath,nsId:o},{})},e.openInReplayAction=(e,t)=>{t.logUserAction("open_replay_click");const s=e?`https://replay.dropbox.com/project/creating/${e.file_id}?creationSource=dropbox_previews_action_bar`:"https://replay.dropbox.com/?login=true";window.open(s)},e.publishAction=({file:e,user:t,context:s})=>{const i=s.getPluginData(),o=null==i?void 0:i.previewType;!i||o!==l.PreviewType.Image&&o!==l.PreviewType.Video||(p.logEvent(d.PAP_Select_PublishEntrypoint({publishItemType:o===l.PreviewType.Image?"image":"video",publishEntrypointLocation:"previews_action_bar"})),c.showPublishModal(t,e))},e.renameAction=(e,t,o,n,_)=>{a.portableRename({currentName:s.getFilename(e),user:t,fq_path:e.fq_path},{onNetworkRequest:()=>i.renameSnackBarInProgress(i.PREVIEWS_SNACKBAR_ID),onSuccess:t=>{i.renameCompleteSnackBar(i.PREVIEWS_SNACKBAR_ID),_&&t&&"file"===t[".tag"]&&_(e,{fq_path:t.path_display||e.fq_path,revision_id:t.rev,file_id:t.id}),null==o||o()},onError:t=>{i.renameFailedSnackBar(t,e.fq_path,i.PREVIEWS_SNACKBAR_ID),null==n||n()}})}}));
//# sourceMappingURL=c_sdk_file_viewer_action_plugins_file_actions.js-vfl9vY7R8.map
