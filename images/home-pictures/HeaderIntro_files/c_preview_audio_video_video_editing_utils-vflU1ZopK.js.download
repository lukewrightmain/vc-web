define(["exports","./c_src_file_viewer_components"],(function(t,e){"use strict";const n=t=>t&&t.current?t.current.getBoundingClientRect().left:null,r=(t,e,n)=>t>n?n:t<e?e:t,i=(t,e,n,i)=>r(e,n,i)-t,o=(t,e,n,r)=>{const i=r-n;return Math.floor(n+t/e*i)},u=(t,e,n,r)=>r*(n-t)/(e-t),l=(t,e,n=1e-6)=>Math.abs(t-e)<n,a=(t,e)=>!(null==e||l(t.start,0)&&l(t.end,e)),c=["h264"],s=[...c,"hevc","mjpeg","av1"];t.LEFT_BORDER_ADJUSTMENT=4,t.RIGHT_BORDER_ADJUSTMENT=6,t.TOOLTIP_TIMEOUT=1e3,t.TRIM_BAR_HEIGHT=60,t.TRIM_BAR_HORIZONTAL_PADDING=26,t.TRIM_BORDER_ADJUSTMENT=4,t.calculateLeftHandlePosition=(t,e,r,o)=>{const u=n(e);if(null==u)return;if(null==t||0===t)return;const{trackLeftOuterBound:l}=r;return i(l,t-u,l,o-8-2-8)},t.calculatePlaybackTimeMarkerPosition=(t,e,r,o,u)=>{const l=n(e);if(null==l)return;const{trackLeftOuterBound:a}=r;return i(a,t.clientX-l,o+4,u-4-2)},t.calculateRightHandlePosition=(t,e,r,o)=>{const u=n(e);if(null==u)return;if(null==t||0===t)return;const{trackLeftOuterBound:l,trackEnd:a}=r;return i(l,t-u,o+8+2,a)},t.calculateTimeFromPosition=(t,e,n)=>e/t*n,t.checkHasAnyChange=(t,e)=>(0!==t.counts.crop||0!==t.counts.flip||0!==t.counts.rotate||0!==t.counts.trim)&&!!(a(t.trim,e)||0!==t.rotate||t.crop||t.horizontalFlip),t.checkHasCropCoordChange=(t,e)=>!(l(t.height,e.height)&&l(t.width,e.width)&&l(t.top,e.top)&&l(t.left,e.left)),t.checkHasTrimChange=a,t.checkHasTrimRangeChange=(t,e)=>!l(t.start,e.start)||!l(t.end,e.end),t.clamp=r,t.createInitialVideoEditState=(t,e)=>{var n,r,i;return{rotate:0,trim:{start:null!==(n=null==e?void 0:e.start)&&void 0!==n?n:0,end:null!==(i=null!==(r=null==e?void 0:e.end)&&void 0!==r?r:t)&&void 0!==i?i:0},crop:void 0,horizontalFlip:!1,counts:{trim:0,crop:0,rotate:0,flip:0}}},t.getArrowKeyTimeDelta=(t,e)=>{if(0===e)return 0;const n=Math.max(.01*e,1),r=.1*n;let i=0;return"ArrowLeft"===t.key?i=t.shiftKey?-r:-n:"ArrowRight"===t.key&&(i=t.shiftKey?r:n),i},t.getContainerLeft=n,t.getElementLeft=t=>{var e,n;return null==(null===(n=null===(e=null==t?void 0:t.current)||void 0===e?void 0:e.style)||void 0===n?void 0:n.left)?null:parseInt(t.current.style.left,10)},t.getEmptyDragImage=()=>{const t=new Image(0,0);return t.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",t},t.getHoverTimestamp=(t,e,n)=>{const{trackLeftInnerBound:r,trackRightInnerBound:i}=n;return u(r,i-2,t,e)},t.getLeftPositionFromTimestamp=(t,e,n)=>{const{trackLeftInnerBound:r,trackRightInnerBound:i}=n;return o(t,e,r,i)-4},t.getLeftTimestamp=(t,e,n)=>{const{trackLeftInnerBound:r,trackRightInnerBound:i}=n;return u(r,i,t+4,e)},t.getNextFlip=(t,e,n)=>"horizontal"===n?[!t,e]:[!t,(e+180)%360],t.getNextRotation=(t,e,n)=>(t+(n!==e?90:270))%360,t.getPlaybackTimeMarkerPositionFromTimestamp=(t,e,n)=>{const{trackLeftInnerBound:r,trackRightInnerBound:i}=n;return o(t,e,r,i-2)},t.getPlaybackTimestamp=(t,e,n)=>{const{trackLeftInnerBound:r,trackRightInnerBound:i}=n;return u(r,i-2,t,e)},t.getRightPositionFromTimestamp=(t,e,n)=>{const{trackLeftInnerBound:r,trackRightInnerBound:i}=n;return o(t,e,r,i)+4},t.getRightTimestamp=(t,e,n)=>{const{trackLeftInnerBound:r,trackRightInnerBound:i}=n;return u(r,i,t-4,e)},t.getTrimAccuracyThresholdMsec=t=>{const e=Math.round(100*(t.end-t.start));return Math.min(e>0?e:0,500)},t.getVideoEditLoggingExtras=(t,n)=>{if(!n)return null;const r="video"===n[".tag"]?n:null;if(!r)return null;const{resolution_width:i,resolution_height:o,frame_rate:u,duration:l,codec:a}=r;let c;return i&&o&&u&&l&&(c=i*o*u*l),{resolution_width:i?String(i):"",resolution_height:o?String(o):"",frame_rate:u?String(u):"",codec:a||"",total_size:c?String(c):"",extension:e.getWhitelistedFileExtension(e.getFileExtension(t))}},t.getWrapperBounds=t=>({trackStart:0,trackEnd:t,trackLeftOuterBound:0,trackRightOuterBound:t,trackLeftInnerBound:4,trackRightInnerBound:t-4}),t.isChangingCodecDuringEdit=t=>t&&!c.includes(t),t.isCodecSupported=t=>t&&s.includes(t),t.isDurationTooLongForEdit=t=>t&&t>300,t.isDurationTooShortForEdit=t=>t&&t<=1,t.isFileTooBigForEdit=t=>t&&void 0!==t.size&&t.size>e.VIDEO_EDITING_SIZE_LIMIT,t.isOver4k=t=>{if(t&&t.resolution_height&&t.resolution_width){const e=t.resolution_width,n=t.resolution_height;if(Math.max(e,n)>3840||Math.min(e,n)>2160)return!0}return!1},t.shouldAutoSnapHandle=(t,e)=>Math.abs(t-e)<20,t.updateElementVisibility=(t,e)=>{t.current&&(t.current.style.visibility=e?"hidden":"visible")},t.updatePositionStyle=(t,e)=>{t.current&&(null!=e.left&&(t.current.style.left=`${e.left}px`),null!=e.width&&(t.current.style.width=`${e.width}px`),null!=e.right&&(t.current.style.right=`${e.right}px`),null!=e.top&&(t.current.style.top=`${e.top}px`),null!=e.height&&(t.current.style.height=`${e.height}px`))}}));
//# sourceMappingURL=c_preview_audio_video_video_editing_utils.js-vflCwZKeM.map
