define(["exports","./e_ui_page_files_router","./e_edison"],(function(e,t,r){"use strict";var o=['.dig-Typeahead-row--interactive[role="option"]','.dig-Typeahead-row--interactive[role="menuitemcheckbox"]',".dig-Typeahead-results--show-more"],a={value:void 0,setSelected:()=>!1,setFocused:()=>!1,closeMenu:()=>!1,isPortaled:!0,menuRows:t.createMenuRows(),containerId:"",setIsTypeaheadDropdownVisible:()=>{},shouldOmitWrapperOverlay:!1,setShouldOmitWrapperOverlay:()=>{}},s=r.react.exports.createContext(a),n=r.react.exports.createContext({}),i=r.react.exports.createContext({}),c=({children:e,isPortaled:a,closeOnSelection:n=!0,inlineProps:i,openMenuOnFocus:c=!0,containerId:l,hasMaxHeight:u=!1,onSelection:p,onBlur:d,onToggle:m,shouldHighlightFirstRow:x=!1,omitOverlay:h=!1,...g})=>{const y=r.react.exports.useRef(null),[v,w]=r.react.exports.useState(!1),[f,T]=r.react.exports.useState(!1),E=r.react.exports.useRef(null),R=r.react.exports.useRef(null),C=t.useUniqueId({prefix:"dig-Typeahead",idOverride:l}),[b,M]=r.react.exports.useState(h),N=r.react.exports.useCallback((e=>{f!==e&&T(e)}),[f]),S=r.react.exports.useCallback(((e,r)=>{p&&p(e,r),n&&(R&&R.current&&R.current(void 0),y&&t.returnFocus(y))}),[n,p,R]),{isOpen:F,openMenu:I,closeMenu:O,toggleMenu:P,value:k,setSelected:D,setFocused:B,getRootProps:H,getTriggerProps:K,getContentProps:A,menuRows:W,isFocusing:z}=t.useMenu({triggerRef:y,contentRef:E,onSelection:S,onToggle:m,closeOnSelection:n,shouldFocusDisabledRows:!0,interactiveRowSelectors:o,allowLetterNavigation:!1,focusMenuRowTriggerKey:"ArrowDown",allowSpaceBarToOpenMenu:!1,focusNextItemImmediately:!1,shouldHighlightFirstRow:x});R.current=B;const L=r.react.exports.useCallback((()=>{w(!1),document.removeEventListener("mouseup",L)}),[]);r.react.exports.useEffect((()=>(v&&document.addEventListener("mouseup",L),()=>document.removeEventListener("mouseup",L))),[v,L]);const U={getContentProps:e=>({open:Boolean(F),triggerRef:y,...A({tabIndex:void 0,...e}),role:"listbox"}),getTriggerProps:e=>({...K({...e,onKeyDown:t=>{if(i){const{customOpenKey:e,onCustomOpenKeyTrigger:r,customCloseKey:o}=i;t.key===e.key?(I({autoFocus:!1}),r&&r(t)):o&&t.key===o.key&&O({autoFocus:!1})}e&&e.onKeyDown&&e.onKeyDown(t)}}),role:"combobox","aria-haspopup":"listbox","aria-autocomplete":"list","aria-controls":C,onChange:t=>{i||I({autoFocus:!1}),e&&e.onChange&&e.onChange(t)},onMouseDown:t=>{e&&e.onMouseDown&&e.onMouseDown(t),w(!0)},onClick:e?e.onClick:void 0,onKeyUp:e?e.onKeyUp:void 0,onFocus:t=>{c&&I({autoFocus:!1}),B(void 0),e&&e.onFocus&&e.onFocus(t)}}),openMenu:I,closeMenu:O,toggleMenu:P,triggerRef:y},_=r.react.exports.useCallback((e=>{k||z||O({autoFocus:!1}),d&&d(e)}),[k,z,O,d]),V={isPortaled:a,contentRef:E,value:k,setSelected:D,setFocused:B,closeMenu:O,inlineProps:i,menuRows:W,containerId:C,hasMaxHeight:u,setIsTypeaheadDropdownVisible:N,shouldHighlightFirstRow:x,shouldOmitWrapperOverlay:b,setShouldOmitWrapperOverlay:M},q=r.react.exports.useCallback((()=>{O({autoFocus:!1})}),[O]),Q=i?e&&e(U):r.react.exports.createElement(t.ClickOutside,{className:"dig-Typeahead-backdrop",isBlock:!0,onClickOutside:q,shouldPropagateMouseEvents:!0,isClickThroughPortaled:a,isActive:Boolean(F)&&!v&&f},e&&e(U));return r.react.exports.createElement(s.Provider,{value:V},r.react.exports.createElement("div",{className:"dig-Typeahead",...H({...g,onBlur:_})},Q))};c.displayName="Wrapper";var l=({className:e,children:o,...a})=>{const s=t.classnames("dig-Typeahead-row-accessory",e);return r.react.exports.createElement("div",{className:s,...a},o)};l.displayName="RowAccessory";var u=({className:e,children:o,...a})=>{const s=t.classnames("dig-Typeahead-row-content",e);return r.react.exports.createElement("div",{className:s,...a},o)};u.displayName="RowContent";var p=({className:e,children:o,...a})=>{const s=t.classnames("dig-Typeahead-row-subtitle",e);return r.react.exports.createElement("div",{className:s,...a},o)};p.displayName="RowSubtitle";var d=({className:e,children:o,...a})=>{const s=t.classnames("dig-Typeahead-row-title",e);return r.react.exports.createElement("div",{className:s,...a},o)};d.displayName="RowTitle";var m=({id:e,title:t,subTitle:o,sectionTitle:a})=>r.react.exports.createElement("div",{className:"dig-Typeahead-accessible-text",id:e},t," ",o,a&&`, ${a}`),x=r.react.exports.forwardRef((({tagName:e="li",role:o="option",disabled:a=!1,interactive:c=!0,className:x,withLeftAccessory:h,withRightAccessory:g,withSubtitle:y,withTitle:v,onFocus:w,onMouseDown:f,value:T,tabIndex:E=-1,children:R,...C},b)=>{const M=r.react.exports.useRef(null),{menuRows:N,setSelected:S,setFocused:F,shouldHighlightFirstRow:I}=r.react.exports.useContext(s),{resultIndex:O}=r.react.exports.useContext(i),{rowIndex:P,focusIndex:k,sectionTitle:D}=r.react.exports.useContext(n),B=100*(O||0)+(P||0),H=t.useUniqueId({prefix:""}),{getItemProps:K}=t.useMenuItem({interactive:c,disabled:a,ref:M,role:o,index:B,itemValue:T},N),[A,W]=r.react.exports.useState(!1),[z,L]=r.react.exports.useState(!1);r.react.exports.useEffect((()=>{t.isRowFirst(N,B)&&L(!0),z&&t.areRowsFocused(N)?W(!0):W(!1)}),[N,B,P,z]),r.react.exports.useEffect((()=>{void 0!==k&&k===P&&setTimeout((()=>{M.current&&M.current.focus()}),0)}),[k,P]);const U=t.classnames("dig-Typeahead-row",{"dig-Typeahead-row--disabled":a,"dig-Typeahead-row--interactive":c},x),_=t.classnames(U,{"dig-Typeahead-row--highlight":I},x);r.react.exports.useImperativeHandle(b,(()=>({getBoundingClientRect:()=>{if(M.current)return M.current.getBoundingClientRect()}})));return r.react.exports.createElement(e,{onMouseDown:e=>{e.preventDefault(),S(T,e),F(void 0),f&&f(e)},onFocus:e=>{F(T,P),w&&w(e)},className:z&&!A?_:U,ref:M,...K({...C})},R||r.react.exports.createElement(r.react.exports.Fragment,null,h&&r.react.exports.createElement(l,null,h),r.react.exports.createElement(u,{"aria-labelledby":H},r.react.exports.createElement(d,{"aria-hidden":"true"},v),y&&r.react.exports.createElement(p,{"aria-hidden":"true"},y)),r.react.exports.createElement(m,{id:H,title:v,subTitle:y,sectionTitle:D}),g&&r.react.exports.createElement(l,null,g)))}));x.displayName="Row";var h=({children:e})=>r.react.exports.createElement("div",{className:"dig-Typeahead-prompt"},e);h.displayName="Prompt";var g=({open:e,triggerRef:o,emptyPrompt:a,isEmptyQuery:n=!1,loading:c,children:l,auto:u=!0,positioningStrategy:p="absolute",placement:d="bottom-start",omitOverlay:m=!1,...x})=>{const{menuRows:g,closeMenu:y,contentRef:v,isPortaled:w,containerId:f,inlineProps:T,hasMaxHeight:E,shouldOmitWrapperOverlay:R,setShouldOmitWrapperOverlay:C,setIsTypeaheadDropdownVisible:b}=r.react.exports.useContext(s),M=r.react.exports.useCallback((()=>{y({autoFocus:!1})}),[y]),{styles:N}=t.useMaxHeight({hasMaxHeight:E,contentRef:v}),S=null!=a;if(r.react.exports.useEffect((()=>{let e=!0;c||n&&S||0!==g.items.size||(e=!1),b(e)}),[c,S,n,g.items.size,b]),r.react.exports.useEffect((()=>{m&&C(!0)}),[m,C]),!e||!l)return null;let F,I={};if(c?F=r.react.exports.createElement(h,null,r.react.exports.createElement(t.Spinner,null)):n&&S?F=a:0===g.items.size?(F=l,I={display:"none"}):F=r.react.exports.Children.map(l,((e,t)=>r.react.exports.createElement(i.Provider,{value:{resultIndex:t}},e))),R)return r.react.exports.createElement(r.react.exports.Fragment,null,F);const O=(e=>{switch(e){default:return"up";case"bottom":case"bottom-start":case"bottom-end":return"down"}})(d),P=r.react.exports.createElement(t.Motion,{transitionIn:{transitions:[{property:O,value:0},{property:"opacity",value:1}],easing:"enter",duration:125},transitionOut:{transitions:[{property:"opacity",value:0}],easing:"leave",duration:125},style:{opacity:0},in:e,mountOnEnter:!0,unmountOnExit:!0},(({state:a,style:s})=>(e||"exited"!==a)&&r.react.exports.createElement(t.Overlay,{anchorRef:o,auto:u,isPortaled:w,placement:d,positioningStrategy:p,offsetDistance:4,setWidthSameAsAnchor:!T},r.react.exports.createElement("ul",{className:"dig-Typeahead-container",ref:v,id:f,style:I,...x},r.react.exports.createElement("div",{className:"dig-Typeahead-container--canvas",style:{...s,...N}},F)))));return T?r.react.exports.createElement(t.ClickOutside,{className:"dig-Typeahead-backdrop",isBlock:!0,onClickOutside:M,shouldPropagateMouseEvents:!1,isClickThroughPortaled:w,isActive:Boolean(e)},P):P};g.displayName="Container";var y=e=>{const{placeholderText:o}=e;return r.react.exports.createElement(h,null,r.react.exports.createElement(t.UIIcon,{size:"large",src:t.SearchLine}),r.react.exports.createElement(t.Text,{color:"faint"},o))};y.displayName="EmptyPrompt";var v=({onShowMoreClick:e,showMoreButtonText:o="Show more"})=>{const a=r.react.exports.useRef(null),{menuRows:c,setFocused:l}=r.react.exports.useContext(s),{resultIndex:u}=r.react.exports.useContext(i),{rowIndex:p}=r.react.exports.useContext(n),d=100*(u||0)+(p||0),{getItemProps:m}=t.useMenuItem({interactive:!0,disabled:!0,ref:a,role:"option",index:d},c),x=t=>{t.stopPropagation(),t.preventDefault(),e()};return r.react.exports.createElement(t.Button,{className:"dig-Typeahead-results--show-more",variant:"transparent",ref:a,type:"button",onClick:x,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.stopPropagation(),t.preventDefault(),e())},onMouseDown:x,onFocus:()=>{l(void 0)},...m(),disabled:!1,"aria-disabled":!1},o)};v.displayName="ShowMore";var w=[["medium","standard"]];function f({results:e,title:o,renderRow:a,initialResults:i=4,maxResults:c=8,showMoreButtonText:l,size:u="medium"}){const{setFocused:p}=r.react.exports.useContext(s),d=(e=>{const t=w.find((([t,r])=>e===r));return void 0!==t?t[0]:e})(u),[m,x]=r.react.exports.useState(Math.min(e.length,i)),[h,g]=r.react.exports.useState();if(r.react.exports.useEffect((()=>{x(Math.min(e.length,i))}),[e,i]),!e||0===e.length)return null;const y=t.classnames("dig-Typeahead-results",{"dig-Typeahead-results--standard":"medium"===d,"dig-Typeahead-results--large":"large"===d});return r.react.exports.createElement("div",{className:y},o?r.react.exports.createElement(t.Text,{className:"dig-Typeahead-results--title",color:"faint",isBold:!0,size:"small","aria-hidden":"true"},o):r.react.exports.createElement("div",{className:"dig-Typeahead-results--title-spacer",role:"presentation"}),e.slice(0,m).map(((e,t)=>r.react.exports.createElement(n.Provider,{key:t,value:{rowIndex:t,focusIndex:h,sectionTitle:o}},a(e)))),m<e.length&&m!==c&&r.react.exports.createElement(n.Provider,{value:{rowIndex:m+100}},r.react.exports.createElement(v,{showMoreButtonText:l,onShowMoreClick:()=>{m<e.length&&(p(e[m]),g(m),x(Math.min(e.length,c)))}})))}f.displayName="Results";var T={Row:x,RowAccessory:l,RowContent:u,RowSubtitle:p,RowTitle:d,Wrapper:c,Container:g,Prompt:h,EmptyPrompt:y,Results:f};e.Typeahead=T}));
//# sourceMappingURL=c_typeahead_index.js-vflaOU8lV.map
