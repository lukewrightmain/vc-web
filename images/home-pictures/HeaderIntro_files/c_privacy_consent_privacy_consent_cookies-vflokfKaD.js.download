define(["exports"],(function(e){"use strict";const t="__Secure-dbx_consent",o="__Secure-dbx_ccpa_token",n="__Secure-dbx_do_not_sell",i="_evidon_consent_cookie",s="_evidon_suppress_notification_cookie",r="Domain",a="Path",c="Expires",l="Max-Age",u="Secure",g="SameSite",h="None",C=new Set([t,i,s,n,o]),k=e=>!!C.has(e)||!!e.startsWith("__Secure-dbx_do_not_sell_dev_"),d="dropbox.com";function p(e){return(function(e){try{return String(document.cookie||"").split(";").map((e=>e.split("="))).map((e=>e.length>1?e:["",e[0]])).map((e=>[e[0],e.slice(1).join("=")].map((e=>e.replace(/^[ \t]+|[ \t]+$/g,""))))).map((([e,t])=>({name:e,value:t}))).filter((({name:t,value:o})=>t+o&&(void 0===e||t===e)))}catch(e){return[]}}(e)[0]||{name:e,value:""}).value}var m,S;function D(e,t,o,n,i){const s={[r]:e,[a]:"/",[c]:n,[g]:i||h,[u]:""};return[[t,JSON.stringify(o).replace(/[;]|[^ -~]/g,(e=>"\\u"+(65536+e.charCodeAt(0)).toString(16).substring(1)))],...Object.keys(s).map((e=>[e,s[e]]))].map((([e,t])=>t?`${e}=${t}`:`${e}`)).join(";")}function O(e,t,o,n,i){k(t)&&(document.cookie=D(e,t,o,n,i))}!function(e){e[e.OptIn=1]="OptIn"}(m||(m={})),function(e){e.StrictlyNecessary="strictly necessary",e.MarketingAdvertising="general marketing and advertising",e.Analytics="analytics",e.PerformanceFunctionality="performance and functionality",e.SocialMediaAdvertising="social media advertising",e.AllCookies="all"}(S||(S={}));const _={cookieDomain:d,consentDurationMonths:6};e.CCPA_TOKEN_COOKIE_NAME=o,e.ConsentCookieStore=class{constructor(e,t){const o=Object.assign(Object.assign({},_),e);this.cookieDomain=o.cookieDomain,this.consentDurationMonths=o.consentDurationMonths,this.numDots=o.cookieDomain.split(".").length-1,this.log=t}hasUserInteracted(){var e;return!!(null===(e=this.getCurrentCookieObj(t))||void 0===e?void 0:e.userInteracted)}bakeShadowCookie(e){const o=new Date(e.expireDate).toUTCString();O(this.cookieDomain,t,e,o,h)}bakeDNSCookie(e){const t=new Date(e.expireDate).toUTCString();O(this.cookieDomain,n,e,t)}bakeCCPATokenCookie(e){const t=new Date(e.expireDate).toUTCString();O(this.cookieDomain,o,e,t)}createShadowCookieValue(e,o){const n=this.getCurrentCookieObj(t),i=!!n.userInteracted,s=!(!i&&o)&&n.consentDate?new Date(n.consentDate):new Date,r=new Date(s);return r.setMonth(s.getMonth()+this.consentDurationMonths),{consentType:m.OptIn,consentDate:s.toISOString(),expireDate:r.toISOString(),consentMonths:this.consentDurationMonths,categories:e,userInteracted:i||o,numDots:this.numDots}}mapCookies(e){var t;const o={};for(const n in e)if(e.hasOwnProperty(n)){const i=n.toLowerCase();Object.values(S).includes(i)?o[i]=e[n]:null===(t=this.log)||void 0===t||t.logInvalidCookieCategoryException(i)}return o}havePreferencesChanged(e){var o;const n=this.getCurrentCookieObj(t);if(n)try{const t=JSON.stringify(n.categories);return JSON.stringify(e)!==t}catch(e){return null===(o=this.log)||void 0===o||o.logCookieParseException(t,p(t)),!1}return!0}getAllowedCategories(e){const o=e||this.getCurrentCookieObj(t),n=null==o?void 0:o.categories,i=Object.keys(S);let s=[];return n&&(n[S.AllCookies]?s=[...i]:i.forEach((e=>{n[S[e]]&&s.push(e)}))),s}getAllowedCategoriesMap(e){const o=e||this.getCurrentCookieObj(t),n=null==o?void 0:o.categories,i={};return n&&Object.keys(S).forEach((e=>{const t=S[e];t!==S.AllCookies&&(i[t]=t===S.StrictlyNecessary||!!n[t])})),i}onlyStrictlyNecessaryConsent(e){const t=Object.entries(e).filter((([e,t])=>!0===t)).map((([e])=>e));if(t.length<1)throw new Error("malformed consent categories map, at least this category should be allowed: "+S.StrictlyNecessary);return 1===t.length&&t[0]===S.StrictlyNecessary}clearDNSCookie(){const e=new Date,t={[r]:this.cookieDomain,[a]:"/",[c]:e.toUTCString(),[g]:h,[u]:""},o=Object.keys(t).map((e=>void 0!==t[e]?`${e}=${t[e]}`:`${e}`));document.cookie=n+"=; "+o.join(";")}getCurrentCookieObj(e){var t;const o=p(e);if(o)try{return JSON.parse(o)}catch(n){return null===(t=this.log)||void 0===t||t.logCookieParseException(e,o),null}return{}}splitPair(e){const t=e.indexOf("=");let o=[e,""];return t>=0&&(o=[e.slice(0,t),e.slice(t+1)]),o=o.map((e=>e.replace(/^[ \t]*|[ \t]*$/g,""))),[o[0],o[1]]}bakeEvidonCookie(e){if(this.cookieDomain===d)return;const t=e.split(/[ \t]*;[ \t]*/),[o,n]=this.splitPair(t[0]);if(!k(o))return;const i=[[o,n],[r,this.cookieDomain],[u,""],[a,"/"]];for(const e of t.slice(1)){const[t,o]=this.splitPair(e);if(t.toLowerCase()===c.toLowerCase()){const e=new Date(o);isNaN(e.getTime())||i.push([c,e.toUTCString()])}else if(t.toLowerCase()===l.toLowerCase()){const e=Number(o);isNaN(e)||e!=(0|e)||i.push([l,String(e)])}}i.push([g,h]);const s=i.map((([e,t],o)=>t||!o?`${e}=${t}`:`${e}`)).join("; ");document.cookie=s}hasPreviouslyDeclinedConsent(){if(!this.hasUserInteracted())return!1;const e=this.getCurrentCookieObj(t);return e&&e.categories&&0===Object.keys(e.categories).length}},e.EVIDON_CONSENT_COOKIE_NAME=i,e.EVIDON_SUPPRESS_COOKIE_NAME=s,e.SHADOW_COOKIE_NAME=t,e.createCookieStr=D,e.getCookieStr=p}));
//# sourceMappingURL=c_privacy_consent_privacy_consent_cookies.js-vfl7gIY9E.map
