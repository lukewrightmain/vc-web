define(["exports","./c_tslib","./e_ui_page_files_router","./e_edison","./c_core_i18n","./c_action_bar_action_bar_strings","./c_core_browser_detection","./c_portable_delete_strings","./c_files_view_file_actions_snackbars"],(function(e,t,a,l,n,o,r,s,i){"use strict";const c=({user:e,fq_path:t,totalFilesCount:i,onConfirm:c,onRequestClose:d,setDeleteFileModalOpen:u})=>{const[_,m]=l.React$1.useState(!0),f=()=>{m(!1),null==d||d()},E=e.is_cdm_member,p=n.intl.formatMessage({id:"FMtrmh",defaultMessage:"{fileCount, plural, one {# file} few {# files} many {# files} other {# files}}"},{fileCount:i}),g=1===i?a.filename(t):p,C=a.isBackupBrowse()&&!a.isInsideEDB(t),b={filename:g,b:e=>l.React$1.createElement(a.Text,{isBold:!0},e),u:e=>l.React$1.createElement("span",{style:{textDecoration:"underline"}},e)},M=n.intl.formatMessage({id:"yDuoGW",defaultMessage:"Cancel"}),R=n.intl.formatMessage(o.DELETE_ACTION_STRING);return l.React$1.createElement(a.Modal,{open:_,isCentered:!0,onRequestClose:f,onAfterOpen:()=>null==u?void 0:u(!0),onAfterClose:()=>null==u?void 0:u(!1)},l.React$1.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"naming-conventions__header"},l.React$1.createElement(a.Title,null,C?n.intl.formatMessage(s.BACKUP_DELETE_TITLE,b):n.intl.formatMessage(o.DELETE_ACTION_STRING))),l.React$1.createElement(a.Modal.Body,{hasVerticalSpacing:!1,className:"uxa-modal",id:"delete-file-modal"},l.React$1.createElement(a.Text,null,C?r.mac?n.intl.formatMessage(s.BACKUP_DELETE_CONTENT_MAC,b):n.intl.formatMessage(s.BACKUP_DELETE_CONTENT_WIN,b):E?n.intl.formatMessage({id:"emsobI",defaultMessage:"Are you sure you want to delete <b>{filename}</b> from your team member folder?"},b):n.intl.formatMessage({id:"8TOnv7",defaultMessage:"Are you sure you want to delete <b>{filename}</b> from your Dropbox?"},b))),l.React$1.createElement(a.Modal.Footer,null,l.React$1.createElement(a.Button,{variant:"opacity",onClick:f},M),l.React$1.createElement(a.Button,{variant:"primary",autoFocus:!0,onClick:()=>{c(),m(!1)}},R)))};const d=({user:e,filesPath:n,fq_path:o},{onSuccess:r,onError:s,onNetworkRequest:i,onRequestClose:d,setDeleteFileModalOpen:u,onSuccessResult:_})=>{var m;m={onConfirm:()=>t.__awaiter(void 0,void 0,void 0,(function*(){null==i||i();const t=yield a.deleteFiles(n,e.id,!0),l=t.isError?[]:t.result.entries.filter((e=>"success"===e[".tag"]));if(t.isError||0===l.length)return void(null==s||s(t.isError?t:a.createUndefinedRpcResult()));const o=new Set;l.forEach((e=>{e.metadata.path_lower&&o.add(e.metadata.path_lower)})),null==r||r(o),null==_||_(t)})),fq_path:o,totalFilesCount:n.length,user:e,onRequestClose:d,setDeleteFileModalOpen:u},a.Modal$1.showInstance(l.React$1.createElement(c,Object.assign({},m)))};var u=Object.freeze({__proto__:null,portableDelete:d});const _=(e,t=1)=>a.Snackbar.sync(i.deleteInProgress(t),!1,e),m=(e,t=1)=>a.Snackbar.complete(i.deleteCompleteSuccess(t,t),e),f=(e,t,l=1)=>{e.error&&a.Snackbar.fail(i.deleteError(l,e.error),t)};var E=Object.freeze({__proto__:null,deleteSnackBarInProgress:_,deleteCompleteSnackBar:m,deleteFailedSnackBar:f});e.deleteCompleteSnackBar=m,e.deleteFailedSnackBar=f,e.deleteSnackBarInProgress=_,e.delete_esnext=u,e.portableDelete=d,e.snackbars_esnext=E}));
//# sourceMappingURL=c_portable_delete_snackbars.js-vflSxa7nV.map
