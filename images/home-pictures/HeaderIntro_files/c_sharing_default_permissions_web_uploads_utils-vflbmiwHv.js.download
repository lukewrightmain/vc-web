define(["exports","./c_tslib","./e_ui_page_files_router","./c_file_uploader_utils","./e_core_exception","./c_core_exception_info"],(function(e,t,o,i,s,r){"use strict";var _,l;function a(e){return t.__awaiter(this,void 0,void 0,(function*(){const t=(yield o.getUserMetadata(["DEFAULT_PERMISSION_FOR_FOLDER_UPLOADS"],e)).DEFAULT_PERMISSION_FOR_FOLDER_UPLOADS;return void 0===t?0:Number(t)}))}e.DefaultPermissionForFolderUploadsOptions=void 0,(_=e.DefaultPermissionForFolderUploadsOptions||(e.DefaultPermissionForFolderUploadsOptions={}))[_.UNDEFINED=0]="UNDEFINED",_[_.INHERIT=1]="INHERIT",_[_.NOT_INHERIT=2]="NOT_INHERIT",e.ShouldUpdateDefaultPermission=void 0,(l=e.ShouldUpdateDefaultPermission||(e.ShouldUpdateDefaultPermission={}))[l.NO_ACTION=0]="NO_ACTION",l[l.SHOW_DEFAULT_PERMISSION_MODAL=1]="SHOW_DEFAULT_PERMISSION_MODAL",l[l.SET_DEFAULT_PERMISSION_NOT_INHERIT=2]="SET_DEFAULT_PERMISSION_NOT_INHERIT",e.getDefaultPermissionForFolderUploads=a,e.setDefaultPermissionForFolderUploads=function(e,i){return t.__awaiter(this,void 0,void 0,(function*(){try{yield o.setUserMetadata({DEFAULT_PERMISSION_FOR_FOLDER_UPLOADS:e},i)}catch(e){s.reportException({err:e,severity:r.SEVERITY.NON_CRITICAL,tags:["default_permission_folder_uploads.JSException"]})}}))},e.shouldUpdateDefaultPermissionAtUpload=function(s,r){return t.__awaiter(this,void 0,void 0,(function*(){if((yield a(s))!==e.DefaultPermissionForFolderUploadsOptions.UNDEFINED)return e.ShouldUpdateDefaultPermission.NO_ACTION;const t=r.filter((e=>null!==e.teamAccessLevel&&e.type===o.FileTypes.FOLDER));return 0===t.length?e.ShouldUpdateDefaultPermission.NO_ACTION:function(e){const t=e[0].teamAccessLevel;if(e.every((e=>e.teamAccessLevel===t&&(e.teamAccessLevel===i.TeamAccessLevel.INHERIT||e.teamAccessLevel===i.TeamAccessLevel.WRITER))))return!0;return!1}(t)?e.ShouldUpdateDefaultPermission.SHOW_DEFAULT_PERMISSION_MODAL:e.ShouldUpdateDefaultPermission.SET_DEFAULT_PERMISSION_NOT_INHERIT}))}}));
//# sourceMappingURL=c_sharing_default_permissions_web_uploads_utils.js-vflVNv1Fx.map
