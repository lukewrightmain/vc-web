define(["require","exports","./e_edison","./e_ui_page_files_router","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/locales","./c_core_i18n","./c_src_sink_index","./c_apex-metrics_src_types","./e_core_exception","./c_core_exception_info","./c_ux_analytics_dispatch_custom_event","./c_marketing_tracker","./c_privacy_consent_privacy_consent_cookies","./c_tslib","./c_core_uri","./c_lodash-es_lodash","metaserver/static/js/modules/constants/files_spa","./c_core_notify","metaserver/static/js/modules/constants/env","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/modules/constants/viewer","metaserver/static/js/modules/constants/auth","./c_api_v2_noauth_client","metaserver/static/js/modules/constants/request","./c_browser_cookies","metaserver/static/js/modules/constants/time","metaserver/static/js/modules/constants/ajax_strings","./c_csrf","./c_core_xhr","./c_core_browser_detection","metaserver/static/js/modules/constants/webtiming","metaserver/static/js/modules/constants/sharing","metaserver/static/js/modules/constants/trademark","metaserver/static/js/modules/constants/campaigns_orchestration","metaserver/static/js/modules/constants/maestro_nav_strings","metaserver/static/js/modules/constants/search","metaserver/static/js/modules/constants/undo_strings","metaserver/static/js/modules/constants/contacts","metaserver/static/js/modules/constants/login_and_register","metaserver/static/js/modules/core/langpack"],(function(e,t,n,i,o,s,a,r,c,l,d,_,h,C,p,g,m,b,u,E,f,v,S,I,k,T,R,N,x,y,A,O,P,w,D,L,M,B,F,V,G){"use strict";function j(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var U=j(s);class W{constructor(e){if(W.instance)return W.instance;W.instance=this,this.ttiTimeout=e}loadChatModule(){return this.chatLoadPromise||(this.chatLoadPromise=i.waitForTTI({timeoutMS:this.ttiTimeout}).then((()=>new Promise((function(t,n){e(["./c_chat_chat_client"],t,n)})).then((function(e){return e.chat_client_esnext}))))),this.chatLoadPromise}setCookieBannerInfo(e){this.loadChatModule().then((t=>{const n=t.ChatClientSingleton;n.isSetup()&&n.setCookieBannerInfo(e)}))}}const H="privacy_consent";var Y,$,z,K,q;!function(e){e.DNS_OPT_IN="dns_opt_in_submitted",e.DNS_OPT_IN_ERROR="dns_opt_in_error",e.DNS_OPT_OUT="dns_opt_out_submitted",e.DNS_OPT_OUT_ERROR="dns_opt_out_error",e.RESEND_EMAIL="resend_email_submitted",e.RESEND_EMAIL_ERROR="resend_email_error",e.IFRAME_LOAD_SUCCESS="ccpa_iframe_load_success",e.IFRAME_LOAD_ERROR="ccpa_iframe_load_error",e.EMAIL_VERIFICATION_PAGE_VISIT="ccpa_email_verification_page_visited",e.EMAIL_VERIFICATION_PAGE_ERROR="ccpa_email_verification_page_error",e.EMAIL_VERIFICATION_CONFIRM_CLICKED="ccpa_email_confirm_clicked",e.EMAIL_VERIFICATION_CANCEL_CLICKED="ccpa_email_cancel_clicked"}(Y||(Y={})),function(e){e.CSRF_TOKEN_ERROR="csrf_token_error",e.UNSUCCESSFUL_RESPONSE="unsuccessful_response"}($||($={})),function(e){e.SIGNED_IN="signed_in",e.SIGNED_OUT="signed_out",e.SHOULD_USE_APP_AUTH="should_use_app_auth",e.SHOULD_NOT_USE_APP_AUTH="should_not_use_app_auth"}(z||(z={})),function(e){e.SETUP_REENTRY_SUCCESS="setup_reentry_success",e.SETUP_REENTRY_FAILURE="setup_reentry_failure",e.SETUP_REENTRY_START="setup_reentry_start"}(K||(K={})),function(e){e.CCPA_IFRAME_LOAD_LATENCY="ccpa_iframe_load_latency",e.CROWNPEAK_LOAD_LATENCY="crownpeak_load_latency",e.EVENTS="events"}(q||(q={}));const X=new class{constructor(){}get metricsReporter(){return this.metricsReporterInstance||(this.metricsReporterInstance=r.getMetricsReporter$1()),this.metricsReporterInstance}createCounter(e,t={}){return this.metricsReporter.createCounter({ns:H,name:e},t)}createStats(e,t={}){return this.metricsReporter.createStats({ns:H,name:e},t)}logCounter(e,t={}){try{const n=this.createCounter(e,t);n.increment(),n.record()}catch(t){l.reportStack(`PrivacyConsentAmpLogError: Failed to log AMP metric for event: ${e}.`,{severity:d.SEVERITY.NONCRITICAL,tags:["privacy_consent"],silent:!0})}}logError(e,t={},n){this.logCounter(e,t),l.reportException({err:n,severity:d.SEVERITY.CRITICAL,tags:["privacy_consent"],exc_extra:t.event_name})}logDuration(e,t={},n){try{this.createStats(e,t).recordDuration(n,c.TimeUnit.MILLISECONDS)}catch(t){l.reportStack(`PrivacyConsentAmpLogError: Failed to log AMP metric for event: ${e}.`,{severity:d.SEVERITY.NONCRITICAL,tags:["privacy_consent"],silent:!0})}}logStats(e,t={},n){try{this.createStats(e,t).record(n)}catch(t){l.reportStack(`PrivacyConsentAmpLogError: Failed to log AMP metric for event: ${e}.`,{severity:d.SEVERITY.NONCRITICAL,tags:["privacy_consent"],silent:!0})}}};const Z=(e,t)=>{const n={detail:{eventType:e,extra:t}};i.runAfterUxaListening((()=>{_.dispatchCustomEvent("privacy_consent_custom_event",n)}))};i.injectInternalStyle("metaserver/static/js/privacy_consent/privacy_consent.module.out.css",(e=>"._consent-iframe_1x1n8_1{background-color:transparent;border:none;bottom:0;left:0;overflow:hidden;position:fixed;z-index:999999}._consent-iframe_1x1n8_1._banner-visible_1x1n8_11,._consent-iframe_1x1n8_1._ccpa-banner-visible_1x1n8_15{width:100%}._consent-iframe_1x1n8_1._no-banner_1x1n8_19._banner-visible_1x1n8_11:not(._dialog-open_1x1n8_19){display:none}._consent-iframe_1x1n8_1._dialog-open_1x1n8_19{height:100%;width:100%}._consent-iframe_1x1n8_1._dialog-open_1x1n8_19._button-enabled_1x1n8_29{bottom:0}._consent-iframe_1x1n8_1._floating-button-open_1x1n8_33{height:60px;width:240px}._consent-iframe_1x1n8_1._floating-button-closed_1x1n8_38{height:60px;width:30px}._consent-iframe_1x1n8_1._collapsed_1x1n8_43{transition:transform .4s ease-out}._consent-iframe_1x1n8_1._collapsed_1x1n8_43,._consent-iframe_1x1n8_1._prev-collapsed_1x1n8_49{transform:translateX(-100%) translateX(41px)}._consent-iframe_1x1n8_1._expanded_1x1n8_53{transform:translateX(0);transition:transform .4s ease-out}"));i.injectInternalStyle("metaserver/static/js/privacy_consent/privacy_consent_iphone.module.out.css",(e=>"._consent-iframe_10bre_1{background-color:transparent;border:none;bottom:0;left:0;overflow:hidden;position:fixed;z-index:999999}._consent-iframe_10bre_1._banner-visible_10bre_11{width:100%}._consent-iframe_10bre_1._ccpa-banner-visible_10bre_15{height:auto;width:100%}._consent-iframe_10bre_1._no-banner_10bre_20._banner-visible_10bre_11:not(._dialog-open_10bre_20){display:none}._consent-iframe_10bre_1._dialog-open_10bre_20{height:100%;width:100%}._consent-iframe_10bre_1._dialog-open_10bre_20._button-enabled_10bre_30{bottom:0}._consent-iframe_10bre_1._floating-button-open_10bre_34{height:60px;width:240px}._consent-iframe_10bre_1._floating-button-closed_10bre_39{height:60px;width:30px}._consent-iframe_10bre_1._collapsed_10bre_44{transition:transform .4s ease-out}._consent-iframe_10bre_1._collapsed_10bre_44,._consent-iframe_10bre_1._prev-collapsed_10bre_50{transform:translateX(-100%) translateX(41px)}._consent-iframe_10bre_1._expanded_10bre_54{transform:translateX(0);transition:transform .4s ease-out}@media (max-width:630px){._consent-iframe_10bre_1._ccpa-banner-visible_10bre_15{height:230px;width:100%}}@media (max-width:601px){._consent-iframe_10bre_1._ccpa-banner-visible_10bre_15{height:250px;width:100%}}@media (max-width:520px){._consent-iframe_10bre_1._ccpa-banner-visible_10bre_15{height:270px;width:100%}}@media (max-width:440px){._consent-iframe_10bre_1._ccpa-banner-visible_10bre_15{height:280px;width:100%}}@media (max-width:380px){._consent-iframe_10bre_1._ccpa-banner-visible_10bre_15{height:300px;width:100%}}@media (max-width:350px){._consent-iframe_10bre_1._ccpa-banner-visible_10bre_15{height:325px;width:100%}}@media (max-width:325px){._consent-iframe_10bre_1._ccpa-banner-visible_10bre_15{height:350px;width:100%}}@media (max-width:285px){._consent-iframe_10bre_1._ccpa-banner-visible_10bre_15{height:375px;width:100%}}@media (max-width:250px){._consent-iframe_10bre_1._ccpa-banner-visible_10bre_15{height:400px;width:100%}}@media (max-width:230px){._consent-iframe_10bre_1._ccpa-banner-visible_10bre_15{height:450px;width:100%}}@media (max-width:215px){._consent-iframe_10bre_1._ccpa-banner-visible_10bre_15{height:510px;width:100%}}@media (max-width:200px){._consent-iframe_10bre_1._ccpa-banner-visible_10bre_15{height:570px;width:100%}}"));const Q=navigator.userAgent.toLowerCase(),J=Q.includes("iphone")||Q.includes("ipod")?{consentIframe:"_consent-iframe_10bre_1",bannerVisible:"_banner-visible_10bre_11",ccpaBannerVisible:"_ccpa-banner-visible_10bre_15",noBanner:"_no-banner_10bre_20",dialogOpen:"_dialog-open_10bre_20",buttonEnabled:"_button-enabled_10bre_30",floatingButtonOpen:"_floating-button-open_10bre_34",floatingButtonClosed:"_floating-button-closed_10bre_39",collapsed:"_collapsed_10bre_44",prevCollapsed:"_prev-collapsed_10bre_50",expanded:"_expanded_10bre_54"}:{consentIframe:"_consent-iframe_1x1n8_1",bannerVisible:"_banner-visible_1x1n8_11",ccpaBannerVisible:"_ccpa-banner-visible_1x1n8_15",noBanner:"_no-banner_1x1n8_19",dialogOpen:"_dialog-open_1x1n8_19",buttonEnabled:"_button-enabled_1x1n8_29",floatingButtonOpen:"_floating-button-open_1x1n8_33",floatingButtonClosed:"_floating-button-closed_1x1n8_38",collapsed:"_collapsed_1x1n8_43",prevCollapsed:"_prev-collapsed_1x1n8_49",expanded:"_expanded_1x1n8_53"};var ee,te;!function(e){e.shadowCookieWrite="SHADOW_COOKIE_WRITE",e.csrfHandshakeEnd="CSRF_HANDSHAKE_END",e.ccpaRedirectText="CCPA_REDIRECT_TEXT"}(ee||(ee={})),function(e){e.bodyContentChange="BODY_CONTENT_CHANGE",e.bannerResize="BANNER_RESIZE",e.displayButton="DISPLAY_BUTTON",e.priorConsent="PRIOR_CONSENT",e.consentChanged="CONSENT_CHANGED",e.consentChangedViaCcpa="CONSENT_CHANGED_VIA_CCPA",e.consentWithdrawn="CONSENT_WITHDRAWN",e.consentDeclined="CONSENT_DECLINED",e.priorConsentDeclined="PRIOR_CONSENT_DECLINED",e.scriptLoaded="SCRIPT_LOADED",e.scriptLoadError="SCRIPT_LOAD_ERROR",e.toggleButtonMinimize="TOGGLE_BUTTON_MINIMIZE",e.dnsEnabled="DNS_ENABLED",e.dnsDisabled="DNS_DISABLED",e.ccpaConsentSettingsRegistered="CCPA_CONSENT_SETTINGS_REGISTERED",e.ccpaCookieFaqClick="CCPA_COOKIE_FAQ_CLICK",e.ccpaPrivacyPageClick="CCPA_PRIVACY_PAGE_CLICK",e.ccpaPrivacyPolicyFaqClick="CCPA_PRIVACY_POLICY_FAQ_CLICK",e.dnsPageClick="DNS_PAGE_CLICK",e.ccpaIframeLoad="CCPA_IFRAME_LOAD",e.ccpaIframeError="CCPA_IFRAME_ERROR",e.evidonCookieWrite="EVIDON_COOKIE_WRITE",e.setCookieSettingsMinimized="SET_COOKIE_SETTINGS_MINIMIZED",e.csrfHandshakeStart="CSRF_HANDSHAKE_START",e.renderSandboxRedirect="RENDER_SANDBOX_REDIRECT",e.privacyConsentServiceReady="PRIVACY_CONSENT_SERVICE_READY"}(te||(te={}));class ne{constructor(e){this.bannerVisible=!1,this.optionsButtonLoaded=!1,this.manageCookiesSet=!1,this.log=e.log,this.waitForTTI=e.waitForTTI,this.ttiTimeout=e.ttiTimeout,this.iframeOrigin=e.iframeOrigin,this.iframeTitle=e.iframeTitle,this.clientInfo=e.clientInfo,this.disableBanner=e.disableBanner,this.countryCode=e.countryCode,this.isCcpaEnabled=e.isCcpaEnabled,this.isMigrationGateEnabled=void 0===e.isMigrationGateEnabled||e.isMigrationGateEnabled,this.isGpcEnabled=e.isGpcEnabled,this.hideGdpr=e.hideGdpr,this.sandboxRedirect=e.sandboxRedirect,this.ccpaToken=e.ccpaToken,this.locale=e.locale,this.urlHash=e.urlHash,this.onIframeLoad=e.onIframeLoad,this.setupSettingsReEntry=e.setupSettingsReEntry,this.onEvidonCookieWrite=e.onEvidonCookieWrite,this.onRenderSandboxRedirect=e.onRenderSandboxRedirect,this.onBannerVisible=e.onBannerVisible,this.onBannerNotVisible=e.onBannerNotVisible,this.onPriorConsent=e.onPriorConsent,this.onConsentChanged=e.onConsentChanged,this.onConsentChangedViaCcpa=e.onConsentChangedViaCcpa,this.onConsentDeclined=e.onConsentDeclined,this.onPriorConsentDeclined=e.onPriorConsentDeclined,this.onDNSEnabled=e.onDNSEnabled,this.onDNSDisabled=e.onDNSDisabled,this.onGPCEnabled=e.onGPCEnabled,this.redirect=e.redirect,this.asyncPrivacyConsentService=new Promise(((e,t)=>this.resolvePrivacyConsentService=e))}createIframe(){const e=new Date,t=document.createElement("iframe"),n=new URLSearchParams;n.append("hide_gdpr",String(this.hideGdpr)),n.append("is_ccpa_enabled",String(this.isCcpaEnabled)),n.append("is_migration_gate_enabled",String(this.isMigrationGateEnabled)),n.append("should_disable_banner",String(this.disableBanner)),n.append("gpc_signal",String(this.isGpcEnabled)),n.append("origin",encodeURIComponent(window.location.origin)),n.append("sandbox_redirect",String(this.sandboxRedirect)),this.locale&&n.append("locale",this.locale),this.ccpaToken&&n.append("ccpa_token",this.ccpaToken),void 0!==window.sandbox_verifier&&n.append("sandbox_verifier",window.sandbox_verifier);const i=this.isCrossOrigin(),o=C.getCookieStr(C.EVIDON_CONSENT_COOKIE_NAME),s=C.getCookieStr(C.EVIDON_SUPPRESS_COOKIE_NAME);i&&""!==o&&n.append(C.EVIDON_CONSENT_COOKIE_NAME,encodeURIComponent(o)),i&&""!==s&&n.append(C.EVIDON_SUPPRESS_COOKIE_NAME,encodeURIComponent(s));const a=C.getCookieStr(C.SHADOW_COOKIE_NAME);""!==a&&n.append("parent_domain_consent_cookie",encodeURIComponent(a));let r=null;try{r=sessionStorage.getItem("cookie-settings-minimized")}catch(e){}null!=r&&n.append("minimized",r);const c=`${this.iframeOrigin}?${n.toString()}${this.urlHash}`;t.src=c,t.referrerPolicy="strict-origin",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-popups allow-forms"),t.setAttribute("class",`${J.consentIframe} ${this.disableBanner?J.noBanner:""}`),t.setAttribute("id","consent-iframe"),t.setAttribute("allowTransparency","true"),t.setAttribute("width","0"),t.setAttribute("height","0"),t.setAttribute("hidden","true"),t.setAttribute("scrolling","no"),t.setAttribute("title",this.iframeTitle),t.setAttribute("tabindex","1"),document.body.insertBefore(t,document.body.firstChild),t.addEventListener("load",(()=>{this.handleIframeLoad(e,this.iframeOrigin)})),window.addEventListener("message",(e=>this.receiveMessage(e)),!1),this.iframeEl=t}iframeExists(){return void 0!==this.iframeEl}receiveMessage(e){var t,n,i,o;const s=e.data,a=e.origin;let r="UNKNOWN";const c=`https://${null!==(t="www.dropbox.com")?t:"www.dropbox.com"}`;if(e.source===window)r="SELF";else if(e.source===window.parent)r="PARENT";else if(e.source===(null===(n=this.iframeEl)||void 0===n?void 0:n.contentWindow))r="CONSENT_IFRAME";else if(a===c&&(null===(i=this.iframeEl)||void 0===i?void 0:i.contentWindow))for(let t=0,n=this.iframeEl.contentWindow.length;t<n;++t){const n=this.iframeEl.contentWindow[t];if(e.source===n){r="CCPA_IFRAME";break}}if(!("CONSENT_IFRAME"===r&&a===this.iframeOrigin||"CCPA_IFRAME"===r&&a===c))return;this.resolvePrivacyConsentService(this.iframeEl);switch(r+":"+s.message_type){case"CONSENT_IFRAME:"+te.bodyContentChange:this.onBodyContentChange(s);break;case"CONSENT_IFRAME:"+te.bannerResize:this.onBannerResize(s);break;case"CONSENT_IFRAME:"+te.displayButton:this.onDisplayButton(s);break;case"CONSENT_IFRAME:"+te.priorConsent:this.onPriorConsent(s.categories);break;case"CONSENT_IFRAME:"+te.consentChanged:case"CONSENT_IFRAME:"+te.consentChangedViaCcpa:this.onConsentChangedViaCcpa(s.categories,s.should_avoid_reload);break;case"CONSENT_IFRAME:"+te.consentWithdrawn:this.onConsentChanged(s.categories);break;case"CONSENT_IFRAME:"+te.consentDeclined:this.onConsentDeclined(s.categories);break;case"CONSENT_IFRAME:"+te.priorConsentDeclined:this.onPriorConsentDeclined();break;case"CONSENT_IFRAME:"+te.scriptLoaded:this.onScriptLoaded(s);break;case"CONSENT_IFRAME:"+te.scriptLoadError:this.onScriptLoadError(s);break;case"CONSENT_IFRAME:"+te.toggleButtonMinimize:this.onToggleButtonMinimize(s.buttonMinimized);break;case"CONSENT_IFRAME:"+te.dnsEnabled:this.onDNSEnabled(s.optInToDNS,s.expireDate);break;case"CONSENT_IFRAME:"+te.dnsDisabled:this.onDNSDisabled();break;case"CONSENT_IFRAME:"+te.ccpaConsentSettingsRegistered:break;case"CONSENT_IFRAME:"+te.ccpaCookieFaqClick:this.redirect("https://help.dropbox.com/accounts-billing/security/cookies");break;case"CONSENT_IFRAME:"+te.ccpaPrivacyPageClick:this.redirect("https://www.dropbox.com/privacy");break;case"CONSENT_IFRAME:"+te.ccpaPrivacyPolicyFaqClick:this.redirect("https://help.dropbox.com/accounts-billing/security/privacy-policy-faq");break;case"CONSENT_IFRAME:"+te.dnsPageClick:window.open("https://www.dropbox.com/ccpa-consent-settings?hide_gdpr=true","_blank","noopener,noreferrer");break;case"CONSENT_IFRAME:"+te.ccpaIframeLoad:this.onCCPAIFrameLoad(s);break;case"CONSENT_IFRAME:"+te.ccpaIframeError:null===(o=this.log)||void 0===o||o.logCCPAIframeError(s);break;case"CONSENT_IFRAME:"+te.evidonCookieWrite:this.onEvidonCookieWrite(s.cookie);break;case"CONSENT_IFRAME:"+te.setCookieSettingsMinimized:try{sessionStorage.setItem("cookie-settings-minimized",s.minimized)}catch(e){}break;case"CCPA_IFRAME:"+te.csrfHandshakeStart:this.send({message_type:ee.csrfHandshakeEnd,token:s.token});break;case"CONSENT_IFRAME:"+te.renderSandboxRedirect:this.onRenderSandboxRedirect();case"CONSENT_IFRAME:"+te.privacyConsentServiceReady:}}openOptionsDialog(){this.send({message_type:"OPEN_OPTIONS_DIALOG"})}sendShowFloatingButton(e){this.send({message_type:"SHOW_FLOATING_BUTTON",text_override:e})}getBannerHeight(){var e,t,n,i;if(this.bannerVisible){if(null===(e=this.iframeEl)||void 0===e?void 0:e.classList.contains(J.noBanner))return 0;if(this.isMigrationGateEnabled)return(null===(t=this.iframeEl)||void 0===t?void 0:t.clientHeight)?null===(n=this.iframeEl)||void 0===n?void 0:n.clientHeight:0;return(null===(i=this.iframeEl)||void 0===i?void 0:i.height)?parseInt(this.iframeEl.height,10):0}}writeShadowCookie(e){this.isCrossOrigin()&&this.send({message_type:ee.shadowCookieWrite,cookie:e})}sendCCPARedirectText(e){this.isCrossOrigin()&&this.send({message_type:ee.ccpaRedirectText,localized_text:e})}send(e){this.asyncPrivacyConsentService.then((t=>{var n;const i=window.sandbox_verifier?"*":this.iframeOrigin;null===(n=t.contentWindow)||void 0===n||n.postMessage(e,i)}))}handleGPCSignal(){this.isGpcEnabled&&(this.onGPCEnabled(),this.send({message_type:"DNS_GPC_SIGNAL"}))}sendCountryCode(){this.countryCode&&this.send({message_type:"COUNTRY_CODE",country_code:this.countryCode})}handleIframeLoad(e,t){var n;null===(n=this.log)||void 0===n||n.logIframeLoad(e,t),this.waitForTTI({timeoutMS:this.ttiTimeout}).then((()=>{this.handleGPCSignal(),this.sendCountryCode(),this.bannerVisible&&this.triggerOnBannerVisible(),this.onIframeLoad()}))}onBodyContentChange(e){var t,n,i,o,s,a,r,c;const{bannerVisible:l,dialogVisible:d,optionsButtonVisible:_,optionsButtonLoaded:h,floatingButtonClosed:C}=e;this.bannerVisible=l&&!this.isGpcEnabled;const p=!this.bannerVisible&&!d&&!_;let g=J.buttonEnabled;null===(t=this.iframeEl)||void 0===t||t.classList.remove(J.floatingButtonClosed,J.floatingButtonOpen,J.expanded),_&&this.isMigrationGateEnabled?(g=C?J.floatingButtonClosed:J.floatingButtonOpen,null===(n=this.iframeEl)||void 0===n||n.classList.toggle(g,_)):_&&(null===(i=this.iframeEl)||void 0===i||i.classList.toggle(g,_));const m=this.isMigrationGateEnabled?J.ccpaBannerVisible:J.bannerVisible;if(null===(o=this.iframeEl)||void 0===o||o.classList.toggle(m,l),null===(s=this.iframeEl)||void 0===s||s.classList.toggle(J.dialogOpen,d),p?(this.setIframeHeight("0"),this.setIframeWidth("0")):null===(a=this.iframeEl)||void 0===a||a.removeAttribute("hidden"),this.bannerVisible?this.triggerOnBannerVisible():this.onBannerNotVisible&&this.onBannerNotVisible(),!this.isMigrationGateEnabled)if(h&&!this.optionsButtonLoaded&&(this.optionsButtonLoaded=!0,this.setupSettingsReEntry()),_){let e=!1;try{e="true"===sessionStorage.getItem("cookie-settings-minimized")}catch(e){}null===(r=this.iframeEl)||void 0===r||r.classList.toggle("prev-collapsed",e)}else null===(c=this.iframeEl)||void 0===c||c.classList.remove(J.prevCollapsed,J.collapsed,J.expanded)}onBannerResize(e){var t;e.bannerHeight&&e.bannerHeight!==(null===(t=this.iframeEl)||void 0===t?void 0:t.height)&&(this.setIframeHeight(e.bannerHeight),this.onBannerVisible&&this.triggerOnBannerVisible())}onDisplayButton(e){!this.manageCookiesSet&&e.buttonHeight&&e.buttonWidth&&(this.setIframeHeight(e.buttonHeight),this.setIframeWidth(e.buttonWidth))}onToggleButtonMinimize(e){var t,n,i,o;null===(t=this.iframeEl)||void 0===t||t.classList.remove(J.prevCollapsed),null===(n=this.iframeEl)||void 0===n||n.classList.toggle(J.collapsed,e),null===(i=this.iframeEl)||void 0===i||i.classList.toggle(J.expanded,!e);try{sessionStorage.setItem("cookie-settings-minimized",(null===(o=this.iframeEl)||void 0===o?void 0:o.classList.contains("collapsed"))?"true":"false")}catch(e){}}onScriptLoaded(e){var t;null===(t=this.log)||void 0===t||t.logPrivacyConsentScriptLoaded(e)}onScriptLoadError(e){var t;null===(t=this.log)||void 0===t||t.logPrivacyConsentScriptLoadError(e)}onCCPAIFrameLoad(e){var t;this.sendPrivacyConsentPageInfo();const n=Date.now()-e.start_time;null===(t=this.log)||void 0===t||t.logCCPAIframeLoad(n)}setIframeHeight(e){this.iframeEl&&(this.iframeEl.height=e)}setIframeWidth(e){this.iframeEl&&(this.iframeEl.width=e)}triggerOnBannerVisible(){this.onBannerVisible&&this.onBannerVisible(this.getBannerHeight()||0)}sendPrivacyConsentPageInfo(){const e=window.location.hostname;this.send({message_type:"PRIVACY_CONSENT_PAGE_INFO",hostname:e,foreign_session_id:null,client_info:this.clientInfo})}isCrossOrigin(){const e=window.location.hostname.toLowerCase();return!("dropbox.com"===e||"www.dropbox.com"===e||e.endsWith(".dev.corp.dropbox.com")&&5===e.split(".").length)||void 0!==window.sandbox_verifier}}i.injectInternalStyle("metaserver/static/js/privacy_consent/sandbox_redirect.module.out.css",(e=>"._sandbox_redirect_container_1fd8s_1{align-items:center;display:flex;flex-direction:column;margin-left:15%;margin-right:15%;padding-bottom:100px;width:70%}._sandbox_redirect_details_1fd8s_11{margin-bottom:24px}._sandbox_redirect_button_1fd8s_15{background-color:var(--color__core__accent);color:var(--color__inverse__standard__text)!important;font-size:16px;padding:24px;text-decoration:none!important}"));const ie="_sandbox_redirect_container_1fd8s_1",oe="_sandbox_redirect_details_1fd8s_11",se="_sandbox_redirect_button_1fd8s_15",ae=e=>n.React$1.createElement("div",{className:ie},n.React$1.createElement("h1",null,e.sandboxRedirectTitle),n.React$1.createElement("p",{className:oe},e.sandboxRedirectDetails),n.React$1.createElement("a",{href:e.href,className:se},e.sandboxRedirectLinkText)),re="#manage-cookies",ce="privacy-consent-styles",le=(e,t=0)=>{let n;return void 0===e?e:function(){let i=this,o=arguments;const s=!n;clearTimeout(n),n=setTimeout((function(){n=null,s||e.apply(i,o)}),t),s&&e.apply(i,o)}};class de{constructor(e){if(this.manageCookiesSet=!1,this.manageCookiesInjected=!1,this.floatingButtonVisible=!1,this.bannerVisible=!1,this.isInIframe=!1,this.getManualReEntryProvided=()=>!1,this.gpcSignal=!1,this.isFooterLoading=!1,de.instance)return de.instance;de.instance=this,this.log=e.log,this.updateConsentCategories=e.updateConsentCategories,this.intlText=e.intlText,this.ttiTimeout=e.ttiTimeout,this.waitForTTI=e.waitForTTI,this.redirect=e.redirect,this.isInIframe=window!=window.top,this.openOptionsDialog=this.openOptionsDialog.bind(this),this.getConsentCategories=this.getConsentCategories.bind(this)}init(e,t){var n,i,o,s;this.config=e,this.redirectUrlForSandboxedPage=null===(n=null==t?void 0:t.thirdPartyConfig)||void 0===n?void 0:n.redirectUrlForSandboxedPage;const a={};if((null===(i=null==t?void 0:t.thirdPartyConfig)||void 0===i?void 0:i.cookieDomain)&&(a.cookieDomain=t.thirdPartyConfig.cookieDomain),this.cookieStore=new C.ConsentCookieStore(a,this.log),this.updateTealiumDataLayer(),!e.iframeOrigin||(null===(o=this.consentIframeWrapper)||void 0===o?void 0:o.iframeExists())||document.getElementById("consent-iframe")||this.isInIframe)return;(null==t?void 0:t.initCallback)&&t.initCallback(),this.priorConsentDeclinedCallback=null==t?void 0:t.priorConsentDeclinedCallback,this.cookieStore.hasPreviouslyDeclinedConsent()&&this.onPriorConsentDeclinedOnInit();const r=!!(null==t?void 0:t.disableBanner)&&(null==t?void 0:t.disableBanner);this.setBannerVisibilityOnClient=le(((e=0)=>{this.setPrivacyConsentCSSPropertiesOnClient(e),e>0?(null==t?void 0:t.onBannerVisible)&&(null==t||t.onBannerVisible(e)):(null==t?void 0:t.onBannerNotVisible)&&(null==t||t.onBannerNotVisible())}),100),this.consentChangedCallback=null==t?void 0:t.consentChangedCallback,this.priorConsentCallback=null==t?void 0:t.priorConsentCallback,this.consentDeclinedCallback=null==t?void 0:t.consentDeclinedCallback,this.disableFloatingButton=!!t&&!t.injectFloatingButton,this.injectToFooter=!t||t.injectToFooter,this.getManualReEntryProvided=null!==(s=null==t?void 0:t.getManualReEntryProvided)&&void 0!==s?s:()=>!1;const c=new URLSearchParams(window.location.search);this.setManageCookies(),this.consentIframeWrapper=new ne({log:this.log,waitForTTI:this.waitForTTI,ttiTimeout:this.ttiTimeout,iframeOrigin:`https://${e.iframeOrigin}`,iframeTitle:this.intlText.consentIframeTitle,clientInfo:c.get("client_info")||"",disableBanner:r,isCcpaEnabled:this.config.isCcpaEnabled,isMigrationGateEnabled:this.config.isMigrationGateEnabled,isGpcEnabled:this.isGPCEnabled(),hideGdpr:this.getHideGDPR(c.get("hide_gdpr")),sandboxRedirect:void 0!==this.redirectUrlForSandboxedPage,ccpaToken:this.getCCPAToken(c.get("ccpa_token")),locale:null==t?void 0:t.locale,urlHash:window.location.hash,onRenderSandboxRedirect:this.onRenderSandboxRedirect.bind(this),onBannerVisible:e=>this.onBannerVisibilityChange(e),onBannerNotVisible:()=>this.onBannerVisibilityChange(0),onIframeLoad:()=>this.onIframeLoad(),setupSettingsReEntry:()=>this.setupSettingsReEntry(),onEvidonCookieWrite:e=>{var t;return null===(t=this.cookieStore)||void 0===t?void 0:t.bakeEvidonCookie(e)},onPriorConsent:e=>this.onPriorConsent(e),onConsentChanged:e=>this.onConsentChanged(e),onConsentChangedViaCcpa:(e,t)=>this.onConsentChanged(e,t),onConsentDeclined:e=>this.onConsentDeclined(e),onPriorConsentDeclined:()=>this.onPriorConsentDeclined(),onDNSEnabled:(e,t)=>this.onDNSEnabled(e,t),onDNSDisabled:()=>this.onDNSDisabled(),onGPCEnabled:()=>this.onGPCEnabled(),redirect:e=>this.redirect(e)}),this.gpcSignal=this.isGPCEnabled(),this.consentIframeWrapper.createIframe()}getHideGDPR(e){return("true"===e||"false"===e)&&"true"===e}getCCPAToken(e){var t,n;if(null!==e){const n=new Date;n.setDate(n.getDate()+1),null===(t=this.cookieStore)||void 0===t||t.bakeCCPATokenCookie({ccpaToken:e,expireDate:n.toISOString()});const i=/&?ccpa_token=[^&^#]+/,o=window.location.search.replace(i,""),s=`${window.location.pathname}${o}${window.location.hash}`;return window.history.replaceState({},"",s),e}const i=null===(n=this.cookieStore)||void 0===n?void 0:n.getCurrentCookieObj(C.CCPA_TOKEN_COOKIE_NAME);return i&&i.ccpaToken?i.ccpaToken:""}onIframeLoad(){var e;null===(e=this.consentIframeWrapper)||void 0===e||e.sendCCPARedirectText({doNotSellRedirectTitle:this.intlText.doNotSellRedirectTitle,doNotSellRedirectDetails1:this.intlText.doNotSellRedirectDetails1,doNotSellLinkText:this.intlText.doNotSellLinkText,doNotSellRedirectDetails2:this.intlText.doNotSellRedirectDetails2}),this.setupSettingsReEntry(),this.logPrivacyConsentResult()}onFooterLoaded(){this.waitForTTI({timeoutMS:this.ttiTimeout}).then((()=>{var e;this.setupSettingsReEntry();const t=null===(e=this.consentIframeWrapper)||void 0===e?void 0:e.getBannerHeight();void 0!==t&&void 0!==this.onBannerVisibilityChange&&this.onBannerVisibilityChange(t)}))}setupSettingsReEntry(){!this.config||this.manageCookiesSet||this.manageCookiesInjected||(this.injectToFooter&&(this.setManageCookies(),this.injectManageCookies()),this.maybeUseFloatingButton())}setManageCookies(){if(this.manageCookiesSet||this.manageCookiesInjected)return;const e=this.findManageCookies();e&&(e.setAttribute("href",re),e.onclick=e=>this.onClickManageCookies(e),e.textContent=this.config.isCcpaEnabled?this.intlText.cookiesAndCCPA:this.intlText.manageCookies,this.manageCookiesSet=!0)}openOptionsDialog(){var e;null===(e=this.consentIframeWrapper)||void 0===e||e.openOptionsDialog()}getConsentCategories(){if(this.cookieStore){const e=this.cookieStore.getCurrentCookieObj(C.SHADOW_COOKIE_NAME);return(null==e?void 0:e.categories)?e.categories:{}}throw new Error("Unable to read consent cookies. Do not call until after initCallback is triggered")}onPriorConsentDeclinedOnInit(){this.priorConsentDeclinedCallback&&this.priorConsentDeclinedCallback({})}onPriorConsentDeclined(){var e,t;let n=!1;if(this.cookieStore&&(n=this.cookieStore.havePreferencesChanged({})),n){const n=null===(e=this.cookieStore)||void 0===e?void 0:e.createShadowCookieValue({},!0);void 0!==n&&(null===(t=this.cookieStore)||void 0===t||t.bakeShadowCookie(n)),this.priorConsentDeclinedCallback&&this.priorConsentDeclinedCallback({})}}isGPCEnabled(){return this.config.isCcpaEnabled&&navigator.globalPrivacyControl}onGPCEnabled(){var e;const t=new Date;t.setMonth(t.getMonth()+12),null===(e=this.cookieStore)||void 0===e||e.bakeDNSCookie({optInToDNS:!0,expireDate:t.toISOString()})}maybeUseFloatingButton(){var e,t;this.disableFloatingButton||!(null===(e=this.consentIframeWrapper)||void 0===e?void 0:e.iframeExists())||this.manageCookiesSet||this.manageCookiesInjected||this.isFooterLoading||(null===(t=this.consentIframeWrapper)||void 0===t||t.sendShowFloatingButton(this.config.isCcpaEnabled?this.intlText.cookiesAndCCPA:void 0),this.floatingButtonVisible=!0)}updateTealiumDataLayer(){this.updateConsentCategories&&this.cookieStore&&this.updateConsentCategories(this.cookieStore.getAllowedCategories())}onPriorConsent(e){var t,n,i;const o=(null===(t=this.cookieStore)||void 0===t?void 0:t.mapCookies(e))||{};if(this.config.isMigrationGateEnabled||void 0===this.config.isMigrationGateEnabled)this.priorConsentCallback&&this.priorConsentCallback(o,!1);else{let t=!0;this.cookieStore&&(t=null===(n=this.cookieStore)||void 0===n?void 0:n.havePreferencesChanged(o)),(!(null===(i=this.cookieStore)||void 0===i?void 0:i.hasUserInteracted())&&!this.gpcSignal||t)&&this.saveShadowCookie(e,!0),this.priorConsentCallback&&this.priorConsentCallback(o,t)}}onConsentChanged(e,t){var n,i;const o=(null===(n=this.cookieStore)||void 0===n?void 0:n.mapCookies(e))||{},s=null===(i=this.cookieStore)||void 0===i?void 0:i.havePreferencesChanged(o);this.saveShadowCookie(e,!0),s&&this.consentChangedCallback&&this.consentChangedCallback(o,t)}onConsentDeclined(e){var t;if(this.saveShadowCookie(e,!0),this.consentDeclinedCallback){const n=(null===(t=this.cookieStore)||void 0===t?void 0:t.mapCookies(e))||{};this.consentDeclinedCallback(n)}}onDNSEnabled(e,t){var n;null!=t&&""!==t&&null!=e&&(null===(n=this.cookieStore)||void 0===n||n.bakeDNSCookie({optInToDNS:e,expireDate:t}))}onDNSDisabled(){var e;null===(e=this.cookieStore)||void 0===e||e.clearDNSCookie()}onClickManageCookies(e){var t;e.preventDefault(),void 0!==this.redirectUrlForSandboxedPage?this.onRenderSandboxRedirect():null===(t=this.consentIframeWrapper)||void 0===t||t.openOptionsDialog()}onRenderSandboxRedirect(){(e=>{if(null!==document.querySelector(`.${ie}`))return;const t=document.querySelectorAll(".birch-page__container, #main");let i=document.body;t.length>=1&&(i=t[0]);const o=n.React$1.createElement(ae,Object.assign({},e));i.innerHTML="",n.ReactDOM.render(o,i),i.scrollIntoView()})({sandboxRedirectTitle:this.intlText.sandboxRedirectTitle,sandboxRedirectDetails:this.intlText.sandboxRedirectDetails,sandboxRedirectLinkText:this.intlText.sandboxRedirectLinkText,href:this.redirectUrlForSandboxedPage})}onBannerVisibilityChange(e=0){var t;!(null===(t=this.cookieStore)||void 0===t?void 0:t.hasUserInteracted())&&e>0&&this.saveShadowCookie({},!1),this.setBannerVisibilityOnClient&&this.setBannerVisibilityOnClient(e)}setPrivacyConsentCSSPropertiesOnClient(e=0){const t=document.getElementById(ce)||document.createElement("style");t.id=ce,t.textContent=`:root{--privacy-consent-banner-height:${e}px;}`,e>0&&(t.textContent+=":root{--privacy-consent-banner-onetap-visibility-hidden:hidden;--privacy-consent-banner-onetap-opacity:0}"),t.parentNode!==document.head&&document.head.appendChild(t)}saveShadowCookie(e,t){var n,i,o;if(this.cookieStore){const s=null===(n=this.cookieStore)||void 0===n?void 0:n.mapCookies(e),a=null===(i=this.cookieStore)||void 0===i?void 0:i.createShadowCookieValue(s,t);if(null===(o=this.cookieStore)||void 0===o||o.bakeShadowCookie(a),this.consentIframeWrapper){const e=new Date(a.expireDate).toUTCString(),t=C.createCookieStr("dropbox.com",C.SHADOW_COOKIE_NAME,a,e,"None");this.consentIframeWrapper.writeShadowCookie(t)}}}findManageCookies(){return document.querySelector('a[href*="#manage-cookies"], a.evidon-notice-link')||null}findCookiePolicy(e){return(null==e?void 0:e.querySelector('a[href*="/terms/cookies"],a[href*="/accounts-billing/security/cookies"]'))||null}getLinkWrapper(e){return e.closest("li")}createManageCookies(e){const t=this.getLinkWrapper(e);if(t){const n=t.cloneNode(),i=document.createElement("a");return i.textContent=this.config.isCcpaEnabled?this.intlText.cookiesAndCCPA:this.intlText.manageCookies,i.setAttribute("class",e.className),i.setAttribute("href",re),i.onclick=e=>this.onClickManageCookies(e),n.appendChild(i),n}return null}findFooter(){const e=["pre-footer","matrix__footer","footer-cta","footer-secondary-cta","cta-footer"],t=["div","section","footer"],n=Array.from(document.querySelectorAll(["footer",'[id="footer"]','[class="footer"]','[class^="footer "]','[class*=" footer "]','[class$=" footer"]','[id*="-footer"]','[id^="footer-"]','[id*="_footer"]','[id^="footer_"]','[class*="-footer"]','[class^="footer-"]','[class*="_footer"]','[class^="footer_"]'].join(","))).filter((n=>t.includes(n.tagName.toLowerCase())&&!e.some((e=>n.classList.contains(e)))));return n.length?n[0]:null}injectManageCookies(){if(this.manageCookiesSet||this.manageCookiesInjected)return;const e=this.findFooter(),t=e?this.findCookiePolicy(e):null;if(!this.manageCookiesSet&&t){const e=this.createManageCookies(t),n=this.getLinkWrapper(t);e&&n&&(n.insertAdjacentElement("afterend",e),this.renameCookiePolicyLink(t),this.manageCookiesInjected=!0)}}renameCookiePolicyLink(e){e.textContent=this.intlText.cookiePolicy}logPrivacyConsentResult(){var e;const t=this.manageCookiesSet||this.manageCookiesInjected||this.floatingButtonVisible||this.bannerVisible||this.getManualReEntryProvided();null===(e=this.log)||void 0===e||e.logPrivacyConsentResult(t)}}const _e=[".footer--minimal","#locale-container",".ui-bar.footer, .ui-body-w.page, body>.auth-connect"],he=new W(5e3),Ce=()=>{let e=i.get_pathname();for(const{localeCode:t}of U.LIST_OF_LOCALES_WITHOUT_INTERNAL){const n=`/${t}`;if(e===n){e="/";break}const i=`${n}/`;if(e.startsWith(i)){e=e.substring(i.length);break}}const t=["/account","/automations","/collections","/dash-home","/deleted_files","/h","/home","/personal","/preview","/recents","/requests","/s","/scl","/security_checkup","/sh","/share","/shared","/shop/create","/shop/customers","/shop/discounts","/shop/embed/create","/shop/orders","/shop/payments_settings","/shop/products","/shop/setup","/shop/settings","/shop/store/edit","/shop/terms","/starred","/team/admin","/videos","/work","/files_app"];for(const n of t){if(e===n)return!0;const t=`${n}/`;if(e.startsWith(t))return!0}return!1},pe=()=>["/transfer","/transfer/manage"].includes(window.location.pathname)||Ce(),ge=(e=0)=>{const t=!!e,n=_e.map((e=>document.querySelector(e))).find(Boolean)||null;((e=0,t)=>{if(!e||!t)return;const n="privacy-consent-bottom-styles",i=document.getElementById(n)||document.createElement("style");i.id=n;const o=_e.join(", ").split(/,\s*/).map((e=>`${e}::after`)).join(", ");i.textContent=`\n    ${o} {\n      display: block;\n      margin-bottom: var(--privacy-consent-banner-height);\n      content: '';\n      height: 0;\n      line-height: 0;\n      clear: both;\n      float: left;\n    }`,i.parentNode!==document.head&&document.head.appendChild(i)})(e,!!n),he.setCookieBannerInfo(t),n&&(t?n.style.marginBottom="var(--privacy-consent-banner-height, 0px)":n.style.removeProperty("margin-bottom"))},me=e=>{let t;if(null==e||0===e){const e=i.getActiveUserId();t=void 0!==e&&0!==e}else t=e===i.PrivacyConsentInitData_LoggedInState.LOGGED_IN;return t&&Ce()},be=(e,t)=>{e&&e.all||t&&t||window.location.reload(!0)},ue=new de({intlText:(Ee=a.intl,{manageCookies:Ee.formatMessage({id:"yF4LPz",defaultMessage:"Manage cookies"}),cookiesAndCCPA:Ee.formatMessage({id:"glGIgS",defaultMessage:"Cookies & CCPA preferences"}),cookiePolicy:Ee.formatMessage({id:"t0O/69",defaultMessage:"Cookie policy"}),consentIframeTitle:Ee.formatMessage({id:"C4AGEz",defaultMessage:"Cookies & CCPA Preferences - Dropbox"}),sandboxRedirectTitle:Ee.formatMessage({id:"fy9qFc",defaultMessage:"Error"}),sandboxRedirectDetails:Ee.formatMessage({id:"yIZcC9",defaultMessage:"Cookie preferences cannot be confirmed on this page. If you wish to continue cookie consent selection, click the Cookie preferences button below."}),sandboxRedirectLinkText:Ee.formatMessage({id:"59MGG1",defaultMessage:"Cookie preferences"}),doNotSellRedirectTitle:Ee.formatMessage({id:"B/scGc",defaultMessage:"Do not sell or share my information"}),doNotSellRedirectDetails1:Ee.formatMessage({id:"0l+dTX",defaultMessage:"Do Not Sell preferences cannot be confirmed on this page. If you wish to continue Do Not Sell selection, visit our"}),doNotSellLinkText:Ee.formatMessage({id:"LNz7a7",defaultMessage:"Do Not Sell"}),doNotSellRedirectDetails2:Ee.formatMessage({id:"my7axt",defaultMessage:"page."})}),log:new class{logIframeLoad(e,t){const n=(new Date).valueOf()-e.valueOf();Z("privacyConsentIframeLoaded",{total_time:n.toString(),iframe_uri:t}),X.logDuration(q.CROWNPEAK_LOAD_LATENCY,{},n),X.logCounter(q.EVENTS,{event_name:K.SETUP_REENTRY_START})}logPrivacyConsentResult(e){const t=e?K.SETUP_REENTRY_SUCCESS:K.SETUP_REENTRY_FAILURE;X.logCounter(q.EVENTS,{event_name:t}),e||l.reportException({err:new Error(`Privacy consent module is not visible on page ${window.location.pathname}`),severity:d.SEVERITY.NONCRITICAL,tags:["privacy_consent"]})}logPrivacyConsentScriptLoaded(e){Z("privacyConsentScriptLoaded",{script_id:e.scriptId,script_url:e.scriptUrl})}logPrivacyConsentScriptLoadError(e){Z("privacyConsentScriptLoadError",{script_id:e.scriptId,script_url:e.scriptUrl}),l.reportException({err:new Error("Privacy consent module is running into load error"),severity:d.SEVERITY.NONCRITICAL,tags:["privacy_consent"]})}logCCPAIframeLoad(e){X.logCounter(q.EVENTS,{event_name:Y.IFRAME_LOAD_SUCCESS}),X.logDuration(q.CCPA_IFRAME_LOAD_LATENCY,{},e)}logCCPAIframeError(e){const t=Date.now()-e.start_time;X.logCounter(q.EVENTS,{event_name:Y.IFRAME_LOAD_ERROR}),X.logDuration(q.CCPA_IFRAME_LOAD_LATENCY,{},t),l.reportException({err:new Error("CCPA iframe failed to load"),severity:d.SEVERITY.CRITICAL,tags:["privacy_consent","ccpa_iframe"]})}logInvalidCookieCategoryException(e){l.reportException({err:new Error("Invalid cookie category id"),severity:d.SEVERITY.NONCRITICAL,tags:["privacy_consent"],exc_extra:{cookie_id:e}})}logCookieParseException(e,t){l.reportException({err:new Error(`Cookie ${e} could not be parsed`),severity:d.SEVERITY.NONCRITICAL,tags:["privacy_consent"],exc_extra:{cookie_str:t}})}},updateConsentCategories:e=>{h.MarketingTracker.tryPushEvent("updateConsentCategories",h.EventTypeEnum.Link,{consent_categories:e.join(",")})},redirect:i.redirect,ttiTimeout:5e3,waitForTTI:i.waitForTTI});var Ee;function fe(e){ue.config||ue.init(e,{onBannerVisible:ge,onBannerNotVisible:ge,disableBanner:me(e.loggedInState),consentChangedCallback:be,priorConsentCallback:(e,t)=>{t&&be(e)},injectFloatingButton:!pe(),injectToFooter:!0,getManualReEntryProvided:()=>me(e.loggedInState)&&pe()&&i.getManualReEntryProvided(),locale:o.PAGE_LOCALE})}t.PrivacyConsentPlatform=ue,t.initialize_module=fe,t.maybeReloadPage=be,t.moduleInit=function(e){fe(n.unmarshalProto(e,i.PrivacyConsentInitData))}}));
//# sourceMappingURL=c_privacy_consent.js-vfl27NYZS.map
